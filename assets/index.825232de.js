function _mergeNamespaces(et,it){for(var tt=0;tt<it.length;tt++){const nt=it[tt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const st in nt)if(st!=="default"&&!(st in et)){const ct=Object.getOwnPropertyDescriptor(nt,st);ct&&Object.defineProperty(et,st,ct.get?ct:{enumerable:!0,get:()=>nt[st]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const it=document.createElement("link").relList;if(it&&it.supports&&it.supports("modulepreload"))return;for(const st of document.querySelectorAll('link[rel="modulepreload"]'))nt(st);new MutationObserver(st=>{for(const ct of st)if(ct.type==="childList")for(const ht of ct.addedNodes)ht.tagName==="LINK"&&ht.rel==="modulepreload"&&nt(ht)}).observe(document,{childList:!0,subtree:!0});function tt(st){const ct={};return st.integrity&&(ct.integrity=st.integrity),st.referrerpolicy&&(ct.referrerPolicy=st.referrerpolicy),st.crossorigin==="use-credentials"?ct.credentials="include":st.crossorigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function nt(st){if(st.ep)return;st.ep=!0;const ct=tt(st);fetch(st.href,ct)}})();const main="";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$5=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$7=Symbol.for("react.fragment"),q$6=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(et){return et===null||typeof et!="object"?null:(et=z$3&&et[z$3]||et["@@iterator"],typeof et=="function"?et:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2(et,it,tt){this.props=et,this.context=it,this.refs=D$2,this.updater=tt||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(et,it){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,it,"setState")};E$2.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(et,it,tt){this.props=et,this.context=it,this.refs=D$2,this.updater=tt||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$1(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,it,tt){var nt,st={},ct=null,ht=null;if(it!=null)for(nt in it.ref!==void 0&&(ht=it.ref),it.key!==void 0&&(ct=""+it.key),it)J.call(it,nt)&&!L$2.hasOwnProperty(nt)&&(st[nt]=it[nt]);var gt=arguments.length-2;if(gt===1)st.children=tt;else if(1<gt){for(var $t=Array(gt),at=0;at<gt;at++)$t[at]=arguments[at+2];st.children=$t}if(et&&et.defaultProps)for(nt in gt=et.defaultProps,gt)st[nt]===void 0&&(st[nt]=gt[nt]);return{$$typeof:l$5,type:et,key:ct,ref:ht,props:st,_owner:K$1.current}}function N$2(et,it){return{$$typeof:l$5,type:et.type,key:it,ref:et.ref,props:et.props,_owner:et._owner}}function O$2(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$5}function escape(et){var it={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(tt){return it[tt]})}var P$2=/\/+/g;function Q$2(et,it){return typeof et=="object"&&et!==null&&et.key!=null?escape(""+et.key):it.toString(36)}function R$2(et,it,tt,nt,st){var ct=typeof et;(ct==="undefined"||ct==="boolean")&&(et=null);var ht=!1;if(et===null)ht=!0;else switch(ct){case"string":case"number":ht=!0;break;case"object":switch(et.$$typeof){case l$5:case n$6:ht=!0}}if(ht)return ht=et,st=st(ht),et=nt===""?"."+Q$2(ht,0):nt,I$2(st)?(tt="",et!=null&&(tt=et.replace(P$2,"$&/")+"/"),R$2(st,it,tt,"",function(at){return at})):st!=null&&(O$2(st)&&(st=N$2(st,tt+(!st.key||ht&&ht.key===st.key?"":(""+st.key).replace(P$2,"$&/")+"/")+et)),it.push(st)),1;if(ht=0,nt=nt===""?".":nt+":",I$2(et))for(var gt=0;gt<et.length;gt++){ct=et[gt];var $t=nt+Q$2(ct,gt);ht+=R$2(ct,it,tt,$t,st)}else if($t=A$3(et),typeof $t=="function")for(et=$t.call(et),gt=0;!(ct=et.next()).done;)ct=ct.value,$t=nt+Q$2(ct,gt++),ht+=R$2(ct,it,tt,$t,st);else if(ct==="object")throw it=String(et),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.");return ht}function S$2(et,it,tt){if(et==null)return et;var nt=[],st=0;return R$2(et,nt,"","",function(ct){return it.call(tt,ct,st++)}),nt}function T$1(et){if(et._status===-1){var it=et._result;it=it(),it.then(function(tt){(et._status===0||et._status===-1)&&(et._status=1,et._result=tt)},function(tt){(et._status===0||et._status===-1)&&(et._status=2,et._result=tt)}),et._status===-1&&(et._status=0,et._result=it)}if(et._status===1)return et._result.default;throw et._result}var U$2={current:null},V$1={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$2,forEach:function(et,it,tt){S$2(et,function(){it.apply(this,arguments)},tt)},count:function(et){var it=0;return S$2(et,function(){it++}),it},toArray:function(et){return S$2(et,function(it){return it})||[]},only:function(et){if(!O$2(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$2;react_production_min.Fragment=p$7;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$6;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(et,it,tt){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var nt=C$1({},et.props),st=et.key,ct=et.ref,ht=et._owner;if(it!=null){if(it.ref!==void 0&&(ct=it.ref,ht=K$1.current),it.key!==void 0&&(st=""+it.key),et.type&&et.type.defaultProps)var gt=et.type.defaultProps;for($t in it)J.call(it,$t)&&!L$2.hasOwnProperty($t)&&(nt[$t]=it[$t]===void 0&&gt!==void 0?gt[$t]:it[$t])}var $t=arguments.length-2;if($t===1)nt.children=tt;else if(1<$t){gt=Array($t);for(var at=0;at<$t;at++)gt[at]=arguments[at+2];nt.children=gt}return{$$typeof:l$5,type:et.type,key:st,ref:ct,props:nt,_owner:ht}};react_production_min.createContext=function(et){return et={$$typeof:u$4,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$5,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var it=M$2.bind(null,et);return it.type=et,it};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$5,render:et}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(et){return{$$typeof:y$2,_payload:{_status:-1,_result:et},_init:T$1}};react_production_min.memo=function(et,it){return{$$typeof:x$2,type:et,compare:it===void 0?null:it}};react_production_min.startTransition=function(et){var it=V$1.transition;V$1.transition={};try{et()}finally{V$1.transition=it}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(et,it){return U$2.current.useCallback(et,it)};react_production_min.useContext=function(et){return U$2.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$2.current.useDeferredValue(et)};react_production_min.useEffect=function(et,it){return U$2.current.useEffect(et,it)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(et,it,tt){return U$2.current.useImperativeHandle(et,it,tt)};react_production_min.useInsertionEffect=function(et,it){return U$2.current.useInsertionEffect(et,it)};react_production_min.useLayoutEffect=function(et,it){return U$2.current.useLayoutEffect(et,it)};react_production_min.useMemo=function(et,it){return U$2.current.useMemo(et,it)};react_production_min.useReducer=function(et,it,tt){return U$2.current.useReducer(et,it,tt)};react_production_min.useRef=function(et){return U$2.current.useRef(et)};react_production_min.useState=function(et){return U$2.current.useState(et)};react_production_min.useSyncExternalStore=function(et,it,tt){return U$2.current.useSyncExternalStore(et,it,tt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";(function(et){et.exports=react_production_min})(react);var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function it(zt,so){var lo=zt.length;zt.push(so);e:for(;0<lo;){var Lt=lo-1>>>1,Ft=zt[Lt];if(0<st(Ft,so))zt[Lt]=so,zt[lo]=Ft,lo=Lt;else break e}}function tt(zt){return zt.length===0?null:zt[0]}function nt(zt){if(zt.length===0)return null;var so=zt[0],lo=zt.pop();if(lo!==so){zt[0]=lo;e:for(var Lt=0,Ft=zt.length,Kr=Ft>>>1;Lt<Kr;){var uo=2*(Lt+1)-1,Jn=zt[uo],go=uo+1,ir=zt[go];if(0>st(Jn,lo))go<Ft&&0>st(ir,Jn)?(zt[Lt]=ir,zt[go]=lo,Lt=go):(zt[Lt]=Jn,zt[uo]=lo,Lt=uo);else if(go<Ft&&0>st(ir,lo))zt[Lt]=ir,zt[go]=lo,Lt=go;else break e}}return so}function st(zt,so){var lo=zt.sortIndex-so.sortIndex;return lo!==0?lo:zt.id-so.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;et.unstable_now=function(){return ct.now()}}else{var ht=Date,gt=ht.now();et.unstable_now=function(){return ht.now()-gt}}var $t=[],at=[],_t=1,mt=null,Tt=3,Et=!1,Ct=!1,kt=!1,Wt=typeof setTimeout=="function"?setTimeout:null,St=typeof clearTimeout=="function"?clearTimeout:null,It=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bt(zt){for(var so=tt(at);so!==null;){if(so.callback===null)nt(at);else if(so.startTime<=zt)nt(at),so.sortIndex=so.expirationTime,it($t,so);else break;so=tt(at)}}function Pt(zt){if(kt=!1,bt(zt),!Ct)if(tt($t)!==null)Ct=!0,po(Gt);else{var so=tt(at);so!==null&&Bn(Pt,so.startTime-zt)}}function Gt(zt,so){Ct=!1,kt&&(kt=!1,St(Xt),Xt=-1),Et=!0;var lo=Tt;try{for(bt(so),mt=tt($t);mt!==null&&(!(mt.expirationTime>so)||zt&&!xo());){var Lt=mt.callback;if(typeof Lt=="function"){mt.callback=null,Tt=mt.priorityLevel;var Ft=Lt(mt.expirationTime<=so);so=et.unstable_now(),typeof Ft=="function"?mt.callback=Ft:mt===tt($t)&&nt($t),bt(so)}else nt($t);mt=tt($t)}if(mt!==null)var Kr=!0;else{var uo=tt(at);uo!==null&&Bn(Pt,uo.startTime-so),Kr=!1}return Kr}finally{mt=null,Tt=lo,Et=!1}}var Jt=!1,Kt=null,Xt=-1,ko=5,Qt=-1;function xo(){return!(et.unstable_now()-Qt<ko)}function br(){if(Kt!==null){var zt=et.unstable_now();Qt=zt;var so=!0;try{so=Kt(!0,zt)}finally{so?Yr():(Jt=!1,Kt=null)}}else Jt=!1}var Yr;if(typeof It=="function")Yr=function(){It(br)};else if(typeof MessageChannel<"u"){var vr=new MessageChannel,Wo=vr.port2;vr.port1.onmessage=br,Yr=function(){Wo.postMessage(null)}}else Yr=function(){Wt(br,0)};function po(zt){Kt=zt,Jt||(Jt=!0,Yr())}function Bn(zt,so){Xt=Wt(function(){zt(et.unstable_now())},so)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(zt){zt.callback=null},et.unstable_continueExecution=function(){Ct||Et||(Ct=!0,po(Gt))},et.unstable_forceFrameRate=function(zt){0>zt||125<zt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ko=0<zt?Math.floor(1e3/zt):5},et.unstable_getCurrentPriorityLevel=function(){return Tt},et.unstable_getFirstCallbackNode=function(){return tt($t)},et.unstable_next=function(zt){switch(Tt){case 1:case 2:case 3:var so=3;break;default:so=Tt}var lo=Tt;Tt=so;try{return zt()}finally{Tt=lo}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(zt,so){switch(zt){case 1:case 2:case 3:case 4:case 5:break;default:zt=3}var lo=Tt;Tt=zt;try{return so()}finally{Tt=lo}},et.unstable_scheduleCallback=function(zt,so,lo){var Lt=et.unstable_now();switch(typeof lo=="object"&&lo!==null?(lo=lo.delay,lo=typeof lo=="number"&&0<lo?Lt+lo:Lt):lo=Lt,zt){case 1:var Ft=-1;break;case 2:Ft=250;break;case 5:Ft=1073741823;break;case 4:Ft=1e4;break;default:Ft=5e3}return Ft=lo+Ft,zt={id:_t++,callback:so,priorityLevel:zt,startTime:lo,expirationTime:Ft,sortIndex:-1},lo>Lt?(zt.sortIndex=lo,it(at,zt),tt($t)===null&&zt===tt(at)&&(kt?(St(Xt),Xt=-1):kt=!0,Bn(Pt,lo-Lt))):(zt.sortIndex=Ft,it($t,zt),Ct||Et||(Ct=!0,po(Gt))),zt},et.unstable_shouldYield=xo,et.unstable_wrapCallback=function(zt){var so=Tt;return function(){var lo=Tt;Tt=so;try{return zt.apply(this,arguments)}finally{Tt=lo}}}})(scheduler_production_min);(function(et){et.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,ca=scheduler.exports;function p$6(et){for(var it="https://reactjs.org/docs/error-decoder.html?invariant="+et,tt=1;tt<arguments.length;tt++)it+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+et+"; visit "+it+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,it){ha(et,it),ha(et+"Capture",it)}function ha(et,it){for(ea[et]=it,et=0;et<it.length;et++)da.add(it[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$2=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja$2.call(ma,et)?!0:ja$2.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,it,tt,nt){if(tt!==null&&tt.type===0)return!1;switch(typeof it){case"function":case"symbol":return!0;case"boolean":return nt?!1:tt!==null?!tt.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,it,tt,nt){if(it===null||typeof it>"u"||pa(et,it,tt,nt))return!0;if(nt)return!1;if(tt!==null)switch(tt.type){case 3:return!it;case 4:return it===!1;case 5:return isNaN(it);case 6:return isNaN(it)||1>it}return!1}function v$4(et,it,tt,nt,st,ct,ht){this.acceptsBooleans=it===2||it===3||it===4,this.attributeName=nt,this.attributeNamespace=st,this.mustUseProperty=tt,this.propertyName=et,this.type=it,this.sanitizeURL=ct,this.removeEmptyString=ht}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$2[et]=new v$4(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var it=et[0];z$2[it]=new v$4(it,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$2[et]=new v$4(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$2[et]=new v$4(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$2[et]=new v$4(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$2[et]=new v$4(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$2[et]=new v$4(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$2[et]=new v$4(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$2[et]=new v$4(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var it=et.replace(ra,sa);z$2[it]=new v$4(it,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var it=et.replace(ra,sa);z$2[it]=new v$4(it,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var it=et.replace(ra,sa);z$2[it]=new v$4(it,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$2[et]=new v$4(et,1,!1,et.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$2[et]=new v$4(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,it,tt,nt){var st=z$2.hasOwnProperty(it)?z$2[it]:null;(st!==null?st.type!==0:nt||!(2<it.length)||it[0]!=="o"&&it[0]!=="O"||it[1]!=="n"&&it[1]!=="N")&&(qa(it,tt,st,nt)&&(tt=null),nt||st===null?oa(it)&&(tt===null?et.removeAttribute(it):et.setAttribute(it,""+tt)):st.mustUseProperty?et[st.propertyName]=tt===null?st.type===3?!1:"":tt:(it=st.attributeName,nt=st.attributeNamespace,tt===null?et.removeAttribute(it):(st=st.type,tt=st===3||st===4&&tt===!0?"":""+tt,nt?et.setAttributeNS(nt,it,tt):et.setAttribute(it,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja$1&&et[Ja$1]||et["@@iterator"],typeof et=="function"?et:null)}var A$2=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(tt){var it=tt.stack.trim().match(/\n( *(at )?)/);La=it&&it[1]||""}return`
`+La+et}var Na=!1;function Oa(et,it){if(!et||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(it)if(it=function(){throw Error()},Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(at){var nt=at}Reflect.construct(et,[],it)}else{try{it.call()}catch(at){nt=at}et.call(it.prototype)}else{try{throw Error()}catch(at){nt=at}et()}}catch(at){if(at&&nt&&typeof at.stack=="string"){for(var st=at.stack.split(`
`),ct=nt.stack.split(`
`),ht=st.length-1,gt=ct.length-1;1<=ht&&0<=gt&&st[ht]!==ct[gt];)gt--;for(;1<=ht&&0<=gt;ht--,gt--)if(st[ht]!==ct[gt]){if(ht!==1||gt!==1)do if(ht--,gt--,0>gt||st[ht]!==ct[gt]){var $t=`
`+st[ht].replace(" at new "," at ");return et.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",et.displayName)),$t}while(1<=ht&&0<=gt);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var it=et.render;return et=et.displayName,et||(et=it.displayName||it.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return it=et.displayName||null,it!==null?it:Qa(et.type)||"Memo";case Ha:it=et._payload,et=et._init;try{return Qa(et(it))}catch{}}return null}function Ra(et){var it=et.type;switch(et.tag){case 24:return"Cache";case 9:return(it.displayName||"Context")+".Consumer";case 10:return(it._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=it.render,et=et.displayName||et.name||"",it.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return it;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(it);case 8:return it===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var it=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(it==="checkbox"||it==="radio")}function Ua(et){var it=Ta(et)?"checked":"value",tt=Object.getOwnPropertyDescriptor(et.constructor.prototype,it),nt=""+et[it];if(!et.hasOwnProperty(it)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var st=tt.get,ct=tt.set;return Object.defineProperty(et,it,{configurable:!0,get:function(){return st.call(this)},set:function(ht){nt=""+ht,ct.call(this,ht)}}),Object.defineProperty(et,it,{enumerable:tt.enumerable}),{getValue:function(){return nt},setValue:function(ht){nt=""+ht},stopTracking:function(){et._valueTracker=null,delete et[it]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var it=et._valueTracker;if(!it)return!0;var tt=it.getValue(),nt="";return et&&(nt=Ta(et)?et.checked?"true":"false":et.value),et=nt,et!==tt?(it.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,it){var tt=it.checked;return A$2({},it,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt!=null?tt:et._wrapperState.initialChecked})}function Za(et,it){var tt=it.defaultValue==null?"":it.defaultValue,nt=it.checked!=null?it.checked:it.defaultChecked;tt=Sa(it.value!=null?it.value:tt),et._wrapperState={initialChecked:nt,initialValue:tt,controlled:it.type==="checkbox"||it.type==="radio"?it.checked!=null:it.value!=null}}function ab(et,it){it=it.checked,it!=null&&ta(et,"checked",it,!1)}function bb(et,it){ab(et,it);var tt=Sa(it.value),nt=it.type;if(tt!=null)nt==="number"?(tt===0&&et.value===""||et.value!=tt)&&(et.value=""+tt):et.value!==""+tt&&(et.value=""+tt);else if(nt==="submit"||nt==="reset"){et.removeAttribute("value");return}it.hasOwnProperty("value")?cb(et,it.type,tt):it.hasOwnProperty("defaultValue")&&cb(et,it.type,Sa(it.defaultValue)),it.checked==null&&it.defaultChecked!=null&&(et.defaultChecked=!!it.defaultChecked)}function db(et,it,tt){if(it.hasOwnProperty("value")||it.hasOwnProperty("defaultValue")){var nt=it.type;if(!(nt!=="submit"&&nt!=="reset"||it.value!==void 0&&it.value!==null))return;it=""+et._wrapperState.initialValue,tt||it===et.value||(et.value=it),et.defaultValue=it}tt=et.name,tt!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,tt!==""&&(et.name=tt)}function cb(et,it,tt){(it!=="number"||Xa(et.ownerDocument)!==et)&&(tt==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+tt&&(et.defaultValue=""+tt))}var eb=Array.isArray;function fb(et,it,tt,nt){if(et=et.options,it){it={};for(var st=0;st<tt.length;st++)it["$"+tt[st]]=!0;for(tt=0;tt<et.length;tt++)st=it.hasOwnProperty("$"+et[tt].value),et[tt].selected!==st&&(et[tt].selected=st),st&&nt&&(et[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),it=null,st=0;st<et.length;st++){if(et[st].value===tt){et[st].selected=!0,nt&&(et[st].defaultSelected=!0);return}it!==null||et[st].disabled||(it=et[st])}it!==null&&(it.selected=!0)}}function gb(et,it){if(it.dangerouslySetInnerHTML!=null)throw Error(p$6(91));return A$2({},it,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,it){var tt=it.value;if(tt==null){if(tt=it.children,it=it.defaultValue,tt!=null){if(it!=null)throw Error(p$6(92));if(eb(tt)){if(1<tt.length)throw Error(p$6(93));tt=tt[0]}it=tt}it==null&&(it=""),tt=it}et._wrapperState={initialValue:Sa(tt)}}function ib(et,it){var tt=Sa(it.value),nt=Sa(it.defaultValue);tt!=null&&(tt=""+tt,tt!==et.value&&(et.value=tt),it.defaultValue==null&&et.defaultValue!==tt&&(et.defaultValue=tt)),nt!=null&&(et.defaultValue=""+nt)}function jb(et){var it=et.textContent;it===et._wrapperState.initialValue&&it!==""&&it!==null&&(et.value=it)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,it){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(it):et==="http://www.w3.org/2000/svg"&&it==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(it,tt,nt,st){MSApp.execUnsafeLocalFunction(function(){return et(it,tt,nt,st)})}:et}(function(et,it){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=it;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+it.valueOf().toString()+"</svg>",it=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;it.firstChild;)et.appendChild(it.firstChild)}});function ob(et,it){if(it){var tt=et.firstChild;if(tt&&tt===et.lastChild&&tt.nodeType===3){tt.nodeValue=it;return}}et.textContent=it}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(it){it=it+et.charAt(0).toUpperCase()+et.substring(1),pb[it]=pb[et]})});function rb(et,it,tt){return it==null||typeof it=="boolean"||it===""?"":tt||typeof it!="number"||it===0||pb.hasOwnProperty(et)&&pb[et]?(""+it).trim():it+"px"}function sb(et,it){et=et.style;for(var tt in it)if(it.hasOwnProperty(tt)){var nt=tt.indexOf("--")===0,st=rb(tt,it[tt],nt);tt==="float"&&(tt="cssFloat"),nt?et.setProperty(tt,st):et[tt]=st}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,it){if(it){if(tb[et]&&(it.children!=null||it.dangerouslySetInnerHTML!=null))throw Error(p$6(137,et));if(it.dangerouslySetInnerHTML!=null){if(it.children!=null)throw Error(p$6(60));if(typeof it.dangerouslySetInnerHTML!="object"||!("__html"in it.dangerouslySetInnerHTML))throw Error(p$6(61))}if(it.style!=null&&typeof it.style!="object")throw Error(p$6(62))}}function vb(et,it){if(et.indexOf("-")===-1)return typeof it.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$6(280));var it=et.stateNode;it&&(it=Db(it),yb(et.stateNode,et.type,it))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,it=Ab;if(Ab=zb=null,Bb(et),it)for(et=0;et<it.length;et++)Bb(it[et])}}function Gb(et,it){return et(it)}function Hb(){}var Ib=!1;function Jb(et,it,tt){if(Ib)return et(it,tt);Ib=!0;try{return Gb(et,it,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,it){var tt=et.stateNode;if(tt===null)return null;var nt=Db(tt);if(nt===null)return null;tt=nt[it];e:switch(it){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(et=et.type,nt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!nt;break e;default:et=!1}if(et)return null;if(tt&&typeof tt!="function")throw Error(p$6(231,it,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,it,tt,nt,st,ct,ht,gt,$t){var at=Array.prototype.slice.call(arguments,3);try{it.apply(tt,at)}catch(_t){this.onError(_t)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,it,tt,nt,st,ct,ht,gt,$t){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,it,tt,nt,st,ct,ht,gt,$t){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$6(198));Qb||(Qb=!0,Rb=at)}}function Vb(et){var it=et,tt=et;if(et.alternate)for(;it.return;)it=it.return;else{et=it;do it=et,(it.flags&4098)!==0&&(tt=it.return),et=it.return;while(et)}return it.tag===3?tt:null}function Wb(et){if(et.tag===13){var it=et.memoizedState;if(it===null&&(et=et.alternate,et!==null&&(it=et.memoizedState)),it!==null)return it.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$6(188))}function Yb(et){var it=et.alternate;if(!it){if(it=Vb(et),it===null)throw Error(p$6(188));return it!==et?null:et}for(var tt=et,nt=it;;){var st=tt.return;if(st===null)break;var ct=st.alternate;if(ct===null){if(nt=st.return,nt!==null){tt=nt;continue}break}if(st.child===ct.child){for(ct=st.child;ct;){if(ct===tt)return Xb(st),et;if(ct===nt)return Xb(st),it;ct=ct.sibling}throw Error(p$6(188))}if(tt.return!==nt.return)tt=st,nt=ct;else{for(var ht=!1,gt=st.child;gt;){if(gt===tt){ht=!0,tt=st,nt=ct;break}if(gt===nt){ht=!0,nt=st,tt=ct;break}gt=gt.sibling}if(!ht){for(gt=ct.child;gt;){if(gt===tt){ht=!0,tt=ct,nt=st;break}if(gt===nt){ht=!0,nt=ct,tt=st;break}gt=gt.sibling}if(!ht)throw Error(p$6(189))}}if(tt.alternate!==nt)throw Error(p$6(190))}if(tt.tag!==3)throw Error(p$6(188));return tt.stateNode.current===tt?et:it}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var it=$b(et);if(it!==null)return it;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,it){var tt=et.pendingLanes;if(tt===0)return 0;var nt=0,st=et.suspendedLanes,ct=et.pingedLanes,ht=tt&268435455;if(ht!==0){var gt=ht&~st;gt!==0?nt=tc(gt):(ct&=ht,ct!==0&&(nt=tc(ct)))}else ht=tt&~st,ht!==0?nt=tc(ht):ct!==0&&(nt=tc(ct));if(nt===0)return 0;if(it!==0&&it!==nt&&(it&st)===0&&(st=nt&-nt,ct=it&-it,st>=ct||st===16&&(ct&4194240)!==0))return it;if((nt&4)!==0&&(nt|=tt&16),it=et.entangledLanes,it!==0)for(et=et.entanglements,it&=nt;0<it;)tt=31-oc(it),st=1<<tt,nt|=et[tt],it&=~st;return nt}function vc(et,it){switch(et){case 1:case 2:case 4:return it+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,it){for(var tt=et.suspendedLanes,nt=et.pingedLanes,st=et.expirationTimes,ct=et.pendingLanes;0<ct;){var ht=31-oc(ct),gt=1<<ht,$t=st[ht];$t===-1?((gt&tt)===0||(gt&nt)!==0)&&(st[ht]=vc(gt,it)):$t<=it&&(et.expiredLanes|=gt),ct&=~gt}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,(rc&4194240)===0&&(rc=64),et}function zc(et){for(var it=[],tt=0;31>tt;tt++)it.push(et);return it}function Ac(et,it,tt){et.pendingLanes|=it,it!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,it=31-oc(it),et[it]=tt}function Bc(et,it){var tt=et.pendingLanes&~it;et.pendingLanes=it,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=it,et.mutableReadLanes&=it,et.entangledLanes&=it,it=et.entanglements;var nt=et.eventTimes;for(et=et.expirationTimes;0<tt;){var st=31-oc(tt),ct=1<<st;it[st]=0,nt[st]=-1,et[st]=-1,tt&=~ct}}function Cc(et,it){var tt=et.entangledLanes|=it;for(et=et.entanglements;tt;){var nt=31-oc(tt),st=1<<nt;st&it|et[nt]&it&&(et[nt]|=it),tt&=~st}}var C=0;function Dc(et){return et&=-et,1<et?4<et?(et&268435455)!==0?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,it){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(it.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(it.pointerId)}}function Tc(et,it,tt,nt,st,ct){return et===null||et.nativeEvent!==ct?(et={blockedOn:it,domEventName:tt,eventSystemFlags:nt,nativeEvent:ct,targetContainers:[st]},it!==null&&(it=Cb(it),it!==null&&Fc(it)),et):(et.eventSystemFlags|=nt,it=et.targetContainers,st!==null&&it.indexOf(st)===-1&&it.push(st),et)}function Uc(et,it,tt,nt,st){switch(it){case"focusin":return Lc=Tc(Lc,et,it,tt,nt,st),!0;case"dragenter":return Mc=Tc(Mc,et,it,tt,nt,st),!0;case"mouseover":return Nc=Tc(Nc,et,it,tt,nt,st),!0;case"pointerover":var ct=st.pointerId;return Oc.set(ct,Tc(Oc.get(ct)||null,et,it,tt,nt,st)),!0;case"gotpointercapture":return ct=st.pointerId,Pc.set(ct,Tc(Pc.get(ct)||null,et,it,tt,nt,st)),!0}return!1}function Vc(et){var it=Wc(et.target);if(it!==null){var tt=Vb(it);if(tt!==null){if(it=tt.tag,it===13){if(it=Wb(tt),it!==null){et.blockedOn=it,Ic(et.priority,function(){Gc(tt)});return}}else if(it===3&&tt.stateNode.current.memoizedState.isDehydrated){et.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var it=et.targetContainers;0<it.length;){var tt=Yc(et.domEventName,et.eventSystemFlags,it[0],et.nativeEvent);if(tt===null){tt=et.nativeEvent;var nt=new tt.constructor(tt.type,tt);wb=nt,tt.target.dispatchEvent(nt),wb=null}else return it=Cb(tt),it!==null&&Fc(it),et.blockedOn=tt,!1;it.shift()}return!0}function Zc(et,it,tt){Xc(et)&&tt.delete(it)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,it){et.blockedOn===it&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function it(st){return ad(st,et)}if(0<Kc.length){ad(Kc[0],et);for(var tt=1;tt<Kc.length;tt++){var nt=Kc[tt];nt.blockedOn===et&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(it),Pc.forEach(it),tt=0;tt<Qc.length;tt++)nt=Qc[tt],nt.blockedOn===et&&(nt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,it,tt,nt){var st=C,ct=cd.transition;cd.transition=null;try{C=1,fd(et,it,tt,nt)}finally{C=st,cd.transition=ct}}function gd(et,it,tt,nt){var st=C,ct=cd.transition;cd.transition=null;try{C=4,fd(et,it,tt,nt)}finally{C=st,cd.transition=ct}}function fd(et,it,tt,nt){if(dd){var st=Yc(et,it,tt,nt);if(st===null)hd(et,it,nt,id,tt),Sc(et,nt);else if(Uc(st,et,it,tt,nt))nt.stopPropagation();else if(Sc(et,nt),it&4&&-1<Rc.indexOf(et)){for(;st!==null;){var ct=Cb(st);if(ct!==null&&Ec(ct),ct=Yc(et,it,tt,nt),ct===null&&hd(et,it,nt,id,tt),ct===st)break;st=ct}st!==null&&nt.stopPropagation()}else hd(et,it,nt,null,tt)}}var id=null;function Yc(et,it,tt,nt){if(id=null,et=xb(nt),et=Wc(et),et!==null)if(it=Vb(et),it===null)et=null;else if(tt=it.tag,tt===13){if(et=Wb(it),et!==null)return et;et=null}else if(tt===3){if(it.stateNode.current.memoizedState.isDehydrated)return it.tag===3?it.stateNode.containerInfo:null;et=null}else it!==et&&(et=null);return id=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,it=ld,tt=it.length,nt,st="value"in kd?kd.value:kd.textContent,ct=st.length;for(et=0;et<tt&&it[et]===st[et];et++);var ht=tt-et;for(nt=1;nt<=ht&&it[tt-nt]===st[ct-nt];nt++);return md=st.slice(et,1<nt?1-nt:void 0)}function od(et){var it=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&it===13&&(et=13)):et=it,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function it(tt,nt,st,ct,ht){this._reactName=tt,this._targetInst=st,this.type=nt,this.nativeEvent=ct,this.target=ht,this.currentTarget=null;for(var gt in et)et.hasOwnProperty(gt)&&(tt=et[gt],this[gt]=tt?tt(ct):ct[gt]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(it.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),it}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var it=this.nativeEvent;return it.getModifierState?it.getModifierState(et):(et=Od[et])?!!it[et]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(et){if(et.key){var it=Md[et.key]||et.key;if(it!=="Unidentified")return it}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(et,it){switch(et){case"keyup":return $d.indexOf(it.keyCode)!==-1;case"keydown":return it.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie=!1;function je(et,it){switch(et){case"compositionend":return he(it);case"keypress":return it.which!==32?null:(fe=!0,ee);case"textInput":return et=it.data,et===ee&&fe?null:et;default:return null}}function ke(et,it){if(ie)return et==="compositionend"||!ae&&ge(et,it)?(et=nd(),md=ld=kd=null,ie=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(it.ctrlKey||it.altKey||it.metaKey)||it.ctrlKey&&it.altKey){if(it.char&&1<it.char.length)return it.char;if(it.which)return String.fromCharCode(it.which)}return null;case"compositionend":return de&&it.locale!=="ko"?null:it.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var it=et&&et.nodeName&&et.nodeName.toLowerCase();return it==="input"?!!le[et.type]:it==="textarea"}function ne(et,it,tt,nt){Eb(nt),it=oe(it,"onChange"),0<it.length&&(tt=new td("onChange","change",null,tt,nt),et.push({event:tt,listeners:it}))}var pe=null,qe=null;function re(et){se(et,0)}function te(et){var it=ue(et);if(Wa(it))return et}function ve(et,it){if(et==="change")return it}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(et){if(et.propertyName==="value"&&te(qe)){var it=[];ne(it,qe,et,xb(et)),Jb(re,it)}}function Ce(et,it,tt){et==="focusin"?(Ae(),pe=it,qe=tt,pe.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te(qe)}function Ee(et,it){if(et==="click")return te(it)}function Fe(et,it){if(et==="input"||et==="change")return te(it)}function Ge(et,it){return et===it&&(et!==0||1/et===1/it)||et!==et&&it!==it}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(et,it){if(He(et,it))return!0;if(typeof et!="object"||et===null||typeof it!="object"||it===null)return!1;var tt=Object.keys(et),nt=Object.keys(it);if(tt.length!==nt.length)return!1;for(nt=0;nt<tt.length;nt++){var st=tt[nt];if(!ja$2.call(it,st)||!He(et[st],it[st]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,it){var tt=Je(et);et=0;for(var nt;tt;){if(tt.nodeType===3){if(nt=et+tt.textContent.length,et<=it&&nt>=it)return{node:tt,offset:it-et};et=nt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(et,it){return et&&it?et===it?!0:et&&et.nodeType===3?!1:it&&it.nodeType===3?Le(et,it.parentNode):"contains"in et?et.contains(it):et.compareDocumentPosition?!!(et.compareDocumentPosition(it)&16):!1:!1}function Me(){for(var et=window,it=Xa();it instanceof et.HTMLIFrameElement;){try{var tt=typeof it.contentWindow.location.href=="string"}catch{tt=!1}if(tt)et=it.contentWindow;else break;it=Xa(et.document)}return it}function Ne(et){var it=et&&et.nodeName&&et.nodeName.toLowerCase();return it&&(it==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||it==="textarea"||et.contentEditable==="true")}function Oe(et){var it=Me(),tt=et.focusedElem,nt=et.selectionRange;if(it!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(nt!==null&&Ne(tt)){if(it=nt.start,et=nt.end,et===void 0&&(et=it),"selectionStart"in tt)tt.selectionStart=it,tt.selectionEnd=Math.min(et,tt.value.length);else if(et=(it=tt.ownerDocument||document)&&it.defaultView||window,et.getSelection){et=et.getSelection();var st=tt.textContent.length,ct=Math.min(nt.start,st);nt=nt.end===void 0?ct:Math.min(nt.end,st),!et.extend&&ct>nt&&(st=nt,nt=ct,ct=st),st=Ke(tt,ct);var ht=Ke(tt,nt);st&&ht&&(et.rangeCount!==1||et.anchorNode!==st.node||et.anchorOffset!==st.offset||et.focusNode!==ht.node||et.focusOffset!==ht.offset)&&(it=it.createRange(),it.setStart(st.node,st.offset),et.removeAllRanges(),ct>nt?(et.addRange(it),et.extend(ht.node,ht.offset)):(it.setEnd(ht.node,ht.offset),et.addRange(it)))}}for(it=[],et=tt;et=et.parentNode;)et.nodeType===1&&it.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<it.length;tt++)et=it[tt],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(et,it,tt){var nt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(it=new td("onSelect","select",null,it,tt),et.push({event:it,listeners:nt}),it.target=Qe)))}function Ve(et,it){var tt={};return tt[et.toLowerCase()]=it.toLowerCase(),tt["Webkit"+et]="webkit"+it,tt["Moz"+et]="moz"+it,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var it=We[et],tt;for(tt in it)if(it.hasOwnProperty(tt)&&tt in Ye)return Xe[et]=it[tt];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,it){df.set(et,it),fa(it,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,it,tt){var nt=et.type||"unknown-event";et.currentTarget=tt,Ub(nt,it,void 0,et),et.currentTarget=null}function se(et,it){it=(it&4)!==0;for(var tt=0;tt<et.length;tt++){var nt=et[tt],st=nt.event;nt=nt.listeners;e:{var ct=void 0;if(it)for(var ht=nt.length-1;0<=ht;ht--){var gt=nt[ht],$t=gt.instance,at=gt.currentTarget;if(gt=gt.listener,$t!==ct&&st.isPropagationStopped())break e;nf(st,gt,at),ct=$t}else for(ht=0;ht<nt.length;ht++){if(gt=nt[ht],$t=gt.instance,at=gt.currentTarget,gt=gt.listener,$t!==ct&&st.isPropagationStopped())break e;nf(st,gt,at),ct=$t}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$1(et,it){var tt=it[of];tt===void 0&&(tt=it[of]=new Set);var nt=et+"__bubble";tt.has(nt)||(pf(it,et,2,!1),tt.add(nt))}function qf(et,it,tt){var nt=0;it&&(nt|=4),pf(tt,et,nt,it)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,et),qf(tt,!0,et))});var it=et.nodeType===9?et:et.ownerDocument;it===null||it[rf]||(it[rf]=!0,qf("selectionchange",!1,it))}}function pf(et,it,tt,nt){switch(jd(it)){case 1:var st=ed;break;case 4:st=gd;break;default:st=fd}tt=st.bind(null,it,tt,et),st=void 0,!Lb||it!=="touchstart"&&it!=="touchmove"&&it!=="wheel"||(st=!0),nt?st!==void 0?et.addEventListener(it,tt,{capture:!0,passive:st}):et.addEventListener(it,tt,!0):st!==void 0?et.addEventListener(it,tt,{passive:st}):et.addEventListener(it,tt,!1)}function hd(et,it,tt,nt,st){var ct=nt;if((it&1)===0&&(it&2)===0&&nt!==null)e:for(;;){if(nt===null)return;var ht=nt.tag;if(ht===3||ht===4){var gt=nt.stateNode.containerInfo;if(gt===st||gt.nodeType===8&&gt.parentNode===st)break;if(ht===4)for(ht=nt.return;ht!==null;){var $t=ht.tag;if(($t===3||$t===4)&&($t=ht.stateNode.containerInfo,$t===st||$t.nodeType===8&&$t.parentNode===st))return;ht=ht.return}for(;gt!==null;){if(ht=Wc(gt),ht===null)return;if($t=ht.tag,$t===5||$t===6){nt=ct=ht;continue e}gt=gt.parentNode}}nt=nt.return}Jb(function(){var at=ct,_t=xb(tt),mt=[];e:{var Tt=df.get(et);if(Tt!==void 0){var Et=td,Ct=et;switch(et){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":Et=Rd;break;case"focusin":Ct="focus",Et=Fd;break;case"focusout":Ct="blur",Et=Fd;break;case"beforeblur":case"afterblur":Et=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Vd;break;case $e:case af:case bf:Et=Hd;break;case cf:Et=Xd;break;case"scroll":Et=vd;break;case"wheel":Et=Zd;break;case"copy":case"cut":case"paste":Et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=Td}var kt=(it&4)!==0,Wt=!kt&&et==="scroll",St=kt?Tt!==null?Tt+"Capture":null:Tt;kt=[];for(var It=at,bt;It!==null;){bt=It;var Pt=bt.stateNode;if(bt.tag===5&&Pt!==null&&(bt=Pt,St!==null&&(Pt=Kb(It,St),Pt!=null&&kt.push(tf(It,Pt,bt)))),Wt)break;It=It.return}0<kt.length&&(Tt=new Et(Tt,Ct,null,tt,_t),mt.push({event:Tt,listeners:kt}))}}if((it&7)===0){e:{if(Tt=et==="mouseover"||et==="pointerover",Et=et==="mouseout"||et==="pointerout",Tt&&tt!==wb&&(Ct=tt.relatedTarget||tt.fromElement)&&(Wc(Ct)||Ct[uf]))break e;if((Et||Tt)&&(Tt=_t.window===_t?_t:(Tt=_t.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,Et?(Ct=tt.relatedTarget||tt.toElement,Et=at,Ct=Ct?Wc(Ct):null,Ct!==null&&(Wt=Vb(Ct),Ct!==Wt||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(Et=null,Ct=at),Et!==Ct)){if(kt=Bd,Pt="onMouseLeave",St="onMouseEnter",It="mouse",(et==="pointerout"||et==="pointerover")&&(kt=Td,Pt="onPointerLeave",St="onPointerEnter",It="pointer"),Wt=Et==null?Tt:ue(Et),bt=Ct==null?Tt:ue(Ct),Tt=new kt(Pt,It+"leave",Et,tt,_t),Tt.target=Wt,Tt.relatedTarget=bt,Pt=null,Wc(_t)===at&&(kt=new kt(St,It+"enter",Ct,tt,_t),kt.target=bt,kt.relatedTarget=Wt,Pt=kt),Wt=Pt,Et&&Ct)t:{for(kt=Et,St=Ct,It=0,bt=kt;bt;bt=vf(bt))It++;for(bt=0,Pt=St;Pt;Pt=vf(Pt))bt++;for(;0<It-bt;)kt=vf(kt),It--;for(;0<bt-It;)St=vf(St),bt--;for(;It--;){if(kt===St||St!==null&&kt===St.alternate)break t;kt=vf(kt),St=vf(St)}kt=null}else kt=null;Et!==null&&wf(mt,Tt,Et,kt,!1),Ct!==null&&Wt!==null&&wf(mt,Wt,Ct,kt,!0)}}e:{if(Tt=at?ue(at):window,Et=Tt.nodeName&&Tt.nodeName.toLowerCase(),Et==="select"||Et==="input"&&Tt.type==="file")var Gt=ve;else if(me(Tt))if(we)Gt=Fe;else{Gt=De;var Jt=Ce}else(Et=Tt.nodeName)&&Et.toLowerCase()==="input"&&(Tt.type==="checkbox"||Tt.type==="radio")&&(Gt=Ee);if(Gt&&(Gt=Gt(et,at))){ne(mt,Gt,tt,_t);break e}Jt&&Jt(et,Tt,at),et==="focusout"&&(Jt=Tt._wrapperState)&&Jt.controlled&&Tt.type==="number"&&cb(Tt,"number",Tt.value)}switch(Jt=at?ue(at):window,et){case"focusin":(me(Jt)||Jt.contentEditable==="true")&&(Qe=Jt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(mt,tt,_t);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(mt,tt,_t)}var Kt;if(ae)e:{switch(et){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else ie?ge(et,tt)&&(Xt="onCompositionEnd"):et==="keydown"&&tt.keyCode===229&&(Xt="onCompositionStart");Xt&&(de&&tt.locale!=="ko"&&(ie||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&ie&&(Kt=nd()):(kd=_t,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Jt=oe(at,Xt),0<Jt.length&&(Xt=new Ld(Xt,et,null,tt,_t),mt.push({event:Xt,listeners:Jt}),Kt?Xt.data=Kt:(Kt=he(tt),Kt!==null&&(Xt.data=Kt)))),(Kt=ce?je(et,tt):ke(et,tt))&&(at=oe(at,"onBeforeInput"),0<at.length&&(_t=new Ld("onBeforeInput","beforeinput",null,tt,_t),mt.push({event:_t,listeners:at}),_t.data=Kt))}se(mt,it)})}function tf(et,it,tt){return{instance:et,listener:it,currentTarget:tt}}function oe(et,it){for(var tt=it+"Capture",nt=[];et!==null;){var st=et,ct=st.stateNode;st.tag===5&&ct!==null&&(st=ct,ct=Kb(et,tt),ct!=null&&nt.unshift(tf(et,ct,st)),ct=Kb(et,it),ct!=null&&nt.push(tf(et,ct,st))),et=et.return}return nt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,it,tt,nt,st){for(var ct=it._reactName,ht=[];tt!==null&&tt!==nt;){var gt=tt,$t=gt.alternate,at=gt.stateNode;if($t!==null&&$t===nt)break;gt.tag===5&&at!==null&&(gt=at,st?($t=Kb(tt,ct),$t!=null&&ht.unshift(tf(tt,$t,gt))):st||($t=Kb(tt,ct),$t!=null&&ht.push(tf(tt,$t,gt)))),tt=tt.return}ht.length!==0&&et.push({event:it,listeners:ht})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,it,tt){if(it=zf(it),zf(et)!==it&&tt)throw Error(p$6(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,it){return et==="textarea"||et==="noscript"||typeof it.children=="string"||typeof it.children=="number"||typeof it.dangerouslySetInnerHTML=="object"&&it.dangerouslySetInnerHTML!==null&&it.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,it){var tt=it,nt=0;do{var st=tt.nextSibling;if(et.removeChild(tt),st&&st.nodeType===8)if(tt=st.data,tt==="/$"){if(nt===0){et.removeChild(st),bd(it);return}nt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||nt++;tt=st}while(tt);bd(it)}function Lf(et){for(;et!=null;et=et.nextSibling){var it=et.nodeType;if(it===1||it===3)break;if(it===8){if(it=et.data,it==="$"||it==="$!"||it==="$?")break;if(it==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var it=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(it===0)return et;it--}else tt==="/$"&&it++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var it=et[Of];if(it)return it;for(var tt=et.parentNode;tt;){if(it=tt[uf]||tt[Of]){if(tt=it.alternate,it.child!==null||tt!==null&&tt.child!==null)for(et=Mf(et);et!==null;){if(tt=et[Of])return tt;et=Mf(et)}return it}et=tt,tt=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$6(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$1(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(et,it){Tf++,Sf[Tf]=et.current,et.current=it}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,it){var tt=et.type.contextTypes;if(!tt)return Vf;var nt=et.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===it)return nt.__reactInternalMemoizedMaskedChildContext;var st={},ct;for(ct in tt)st[ct]=it[ct];return nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=it,et.__reactInternalMemoizedMaskedChildContext=st),st}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(et,it,tt){if(H$1.current!==Vf)throw Error(p$6(168));G$1(H$1,it),G$1(Wf,tt)}function bg(et,it,tt){var nt=et.stateNode;if(it=it.childContextTypes,typeof nt.getChildContext!="function")return tt;nt=nt.getChildContext();for(var st in nt)if(!(st in it))throw Error(p$6(108,Ra(et)||"Unknown",st));return A$2({},tt,nt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,et),G$1(Wf,Wf.current),!0}function dg(et,it,tt){var nt=et.stateNode;if(!nt)throw Error(p$6(169));tt?(et=bg(et,it,Xf),nt.__reactInternalMemoizedMergedChildContext=et,E$1(Wf),E$1(H$1),G$1(H$1,et)):E$1(Wf),G$1(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,it=C;try{var tt=eg;for(C=1;et<tt.length;et++){var nt=tt[et];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(st){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),st}finally{C=it,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,it){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=it}function ug(et,it,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var nt=rg;et=sg;var st=32-oc(nt)-1;nt&=~(1<<st),tt+=1;var ct=32-oc(it)+st;if(30<ct){var ht=st-st%5;ct=(nt&(1<<ht)-1).toString(32),nt>>=ht,st-=ht,rg=1<<32-oc(it)+st|tt<<st|nt,sg=ct+et}else rg=1<<ct|tt<<st|nt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(et,it){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=it,tt.return=et,it=et.deletions,it===null?(et.deletions=[tt],et.flags|=16):it.push(tt)}function Cg(et,it){switch(et.tag){case 5:var tt=et.type;return it=it.nodeType!==1||tt.toLowerCase()!==it.nodeName.toLowerCase()?null:it,it!==null?(et.stateNode=it,xg=et,yg=Lf(it.firstChild),!0):!1;case 6:return it=et.pendingProps===""||it.nodeType!==3?null:it,it!==null?(et.stateNode=it,xg=et,yg=null,!0):!1;case 13:return it=it.nodeType!==8?null:it,it!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:it,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=it,tt.return=et,et.child=tt,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$1){var it=yg;if(it){var tt=it;if(!Cg(et,it)){if(Dg(et))throw Error(p$6(418));it=Lf(tt.nextSibling);var nt=xg;it&&Cg(et,it)?Ag(nt,tt):(et.flags=et.flags&-4097|2,I$1=!1,xg=et)}}else{if(Dg(et))throw Error(p$6(418));et.flags=et.flags&-4097|2,I$1=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$1)return Fg(et),I$1=!0,!1;var it;if((it=et.tag!==3)&&!(it=et.tag!==5)&&(it=et.type,it=it!=="head"&&it!=="body"&&!Ef(et.type,et.memoizedProps)),it&&(it=yg)){if(Dg(et))throw Hg(),Error(p$6(418));for(;it;)Ag(et,it),it=Lf(it.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$6(317));e:{for(et=et.nextSibling,it=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="/$"){if(it===0){yg=Lf(et.nextSibling);break e}it--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||it++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,it){if(et&&et.defaultProps){it=A$2({},it),et=et.defaultProps;for(var tt in et)it[tt]===void 0&&(it[tt]=et[tt]);return it}return it}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(et){var it=Mg.current;E$1(Mg),et._currentValue=it}function Sg(et,it,tt){for(;et!==null;){var nt=et.alternate;if((et.childLanes&it)!==it?(et.childLanes|=it,nt!==null&&(nt.childLanes|=it)):nt!==null&&(nt.childLanes&it)!==it&&(nt.childLanes|=it),et===tt)break;et=et.return}}function Tg(et,it){Ng=et,Pg=Og=null,et=et.dependencies,et!==null&&et.firstContext!==null&&((et.lanes&it)!==0&&(Ug=!0),et.firstContext=null)}function Vg(et){var it=et._currentValue;if(Pg!==et)if(et={context:et,memoizedValue:it,next:null},Og===null){if(Ng===null)throw Error(p$6(308));Og=et,Ng.dependencies={lanes:0,firstContext:et}}else Og=Og.next=et;return it}var Wg=null;function Xg(et){Wg===null?Wg=[et]:Wg.push(et)}function Yg(et,it,tt,nt){var st=it.interleaved;return st===null?(tt.next=tt,Xg(it)):(tt.next=st.next,st.next=tt),it.interleaved=tt,Zg(et,nt)}function Zg(et,it){et.lanes|=it;var tt=et.alternate;for(tt!==null&&(tt.lanes|=it),tt=et,et=et.return;et!==null;)et.childLanes|=it,tt=et.alternate,tt!==null&&(tt.childLanes|=it),tt=et,et=et.return;return tt.tag===3?tt.stateNode:null}var $g=!1;function ah(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(et,it){et=et.updateQueue,it.updateQueue===et&&(it.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function ch(et,it){return{eventTime:et,lane:it,tag:0,payload:null,callback:null,next:null}}function dh(et,it,tt){var nt=et.updateQueue;if(nt===null)return null;if(nt=nt.shared,(K&2)!==0){var st=nt.pending;return st===null?it.next=it:(it.next=st.next,st.next=it),nt.pending=it,Zg(et,tt)}return st=nt.interleaved,st===null?(it.next=it,Xg(nt)):(it.next=st.next,st.next=it),nt.interleaved=it,Zg(et,tt)}function eh(et,it,tt){if(it=it.updateQueue,it!==null&&(it=it.shared,(tt&4194240)!==0)){var nt=it.lanes;nt&=et.pendingLanes,tt|=nt,it.lanes=tt,Cc(et,tt)}}function fh(et,it){var tt=et.updateQueue,nt=et.alternate;if(nt!==null&&(nt=nt.updateQueue,tt===nt)){var st=null,ct=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var ht={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};ct===null?st=ct=ht:ct=ct.next=ht,tt=tt.next}while(tt!==null);ct===null?st=ct=it:ct=ct.next=it}else st=ct=it;tt={baseState:nt.baseState,firstBaseUpdate:st,lastBaseUpdate:ct,shared:nt.shared,effects:nt.effects},et.updateQueue=tt;return}et=tt.lastBaseUpdate,et===null?tt.firstBaseUpdate=it:et.next=it,tt.lastBaseUpdate=it}function gh(et,it,tt,nt){var st=et.updateQueue;$g=!1;var ct=st.firstBaseUpdate,ht=st.lastBaseUpdate,gt=st.shared.pending;if(gt!==null){st.shared.pending=null;var $t=gt,at=$t.next;$t.next=null,ht===null?ct=at:ht.next=at,ht=$t;var _t=et.alternate;_t!==null&&(_t=_t.updateQueue,gt=_t.lastBaseUpdate,gt!==ht&&(gt===null?_t.firstBaseUpdate=at:gt.next=at,_t.lastBaseUpdate=$t))}if(ct!==null){var mt=st.baseState;ht=0,_t=at=$t=null,gt=ct;do{var Tt=gt.lane,Et=gt.eventTime;if((nt&Tt)===Tt){_t!==null&&(_t=_t.next={eventTime:Et,lane:0,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null});e:{var Ct=et,kt=gt;switch(Tt=it,Et=tt,kt.tag){case 1:if(Ct=kt.payload,typeof Ct=="function"){mt=Ct.call(Et,mt,Tt);break e}mt=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=kt.payload,Tt=typeof Ct=="function"?Ct.call(Et,mt,Tt):Ct,Tt==null)break e;mt=A$2({},mt,Tt);break e;case 2:$g=!0}}gt.callback!==null&&gt.lane!==0&&(et.flags|=64,Tt=st.effects,Tt===null?st.effects=[gt]:Tt.push(gt))}else Et={eventTime:Et,lane:Tt,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null},_t===null?(at=_t=Et,$t=mt):_t=_t.next=Et,ht|=Tt;if(gt=gt.next,gt===null){if(gt=st.shared.pending,gt===null)break;Tt=gt,gt=Tt.next,Tt.next=null,st.lastBaseUpdate=Tt,st.shared.pending=null}}while(1);if(_t===null&&($t=mt),st.baseState=$t,st.firstBaseUpdate=at,st.lastBaseUpdate=_t,it=st.shared.interleaved,it!==null){st=it;do ht|=st.lane,st=st.next;while(st!==it)}else ct===null&&(st.shared.lanes=0);hh|=ht,et.lanes=ht,et.memoizedState=mt}}function ih(et,it,tt){if(et=it.effects,it.effects=null,et!==null)for(it=0;it<et.length;it++){var nt=et[it],st=nt.callback;if(st!==null){if(nt.callback=null,nt=tt,typeof st!="function")throw Error(p$6(191,st));st.call(nt)}}}var jh=new aa.Component().refs;function kh(et,it,tt,nt){it=et.memoizedState,tt=tt(nt,it),tt=tt==null?it:A$2({},it,tt),et.memoizedState=tt,et.lanes===0&&(et.updateQueue.baseState=tt)}var nh={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,it,tt){et=et._reactInternals;var nt=L$1(),st=lh(et),ct=ch(nt,st);ct.payload=it,tt!=null&&(ct.callback=tt),it=dh(et,ct,st),it!==null&&(mh(it,et,st,nt),eh(it,et,st))},enqueueReplaceState:function(et,it,tt){et=et._reactInternals;var nt=L$1(),st=lh(et),ct=ch(nt,st);ct.tag=1,ct.payload=it,tt!=null&&(ct.callback=tt),it=dh(et,ct,st),it!==null&&(mh(it,et,st,nt),eh(it,et,st))},enqueueForceUpdate:function(et,it){et=et._reactInternals;var tt=L$1(),nt=lh(et),st=ch(tt,nt);st.tag=2,it!=null&&(st.callback=it),it=dh(et,st,nt),it!==null&&(mh(it,et,nt,tt),eh(it,et,nt))}};function oh(et,it,tt,nt,st,ct,ht){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(nt,ct,ht):it.prototype&&it.prototype.isPureReactComponent?!Ie(tt,nt)||!Ie(st,ct):!0}function ph(et,it,tt){var nt=!1,st=Vf,ct=it.contextType;return typeof ct=="object"&&ct!==null?ct=Vg(ct):(st=Zf(it)?Xf:H$1.current,nt=it.contextTypes,ct=(nt=nt!=null)?Yf(et,st):Vf),it=new it(tt,ct),et.memoizedState=it.state!==null&&it.state!==void 0?it.state:null,it.updater=nh,et.stateNode=it,it._reactInternals=et,nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=st,et.__reactInternalMemoizedMaskedChildContext=ct),it}function qh(et,it,tt,nt){et=it.state,typeof it.componentWillReceiveProps=="function"&&it.componentWillReceiveProps(tt,nt),typeof it.UNSAFE_componentWillReceiveProps=="function"&&it.UNSAFE_componentWillReceiveProps(tt,nt),it.state!==et&&nh.enqueueReplaceState(it,it.state,null)}function rh(et,it,tt,nt){var st=et.stateNode;st.props=tt,st.state=et.memoizedState,st.refs=jh,ah(et);var ct=it.contextType;typeof ct=="object"&&ct!==null?st.context=Vg(ct):(ct=Zf(it)?Xf:H$1.current,st.context=Yf(et,ct)),st.state=et.memoizedState,ct=it.getDerivedStateFromProps,typeof ct=="function"&&(kh(et,it,ct,tt),st.state=et.memoizedState),typeof it.getDerivedStateFromProps=="function"||typeof st.getSnapshotBeforeUpdate=="function"||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(it=st.state,typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount(),it!==st.state&&nh.enqueueReplaceState(st,st.state,null),gh(et,tt,st,nt),st.state=et.memoizedState),typeof st.componentDidMount=="function"&&(et.flags|=4194308)}function sh(et,it,tt){if(et=tt.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$6(309));var nt=tt.stateNode}if(!nt)throw Error(p$6(147,et));var st=nt,ct=""+et;return it!==null&&it.ref!==null&&typeof it.ref=="function"&&it.ref._stringRef===ct?it.ref:(it=function(ht){var gt=st.refs;gt===jh&&(gt=st.refs={}),ht===null?delete gt[ct]:gt[ct]=ht},it._stringRef=ct,it)}if(typeof et!="string")throw Error(p$6(284));if(!tt._owner)throw Error(p$6(290,et))}return et}function th(et,it){throw et=Object.prototype.toString.call(it),Error(p$6(31,et==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":et))}function uh(et){var it=et._init;return it(et._payload)}function vh(et){function it(St,It){if(et){var bt=St.deletions;bt===null?(St.deletions=[It],St.flags|=16):bt.push(It)}}function tt(St,It){if(!et)return null;for(;It!==null;)it(St,It),It=It.sibling;return null}function nt(St,It){for(St=new Map;It!==null;)It.key!==null?St.set(It.key,It):St.set(It.index,It),It=It.sibling;return St}function st(St,It){return St=wh(St,It),St.index=0,St.sibling=null,St}function ct(St,It,bt){return St.index=bt,et?(bt=St.alternate,bt!==null?(bt=bt.index,bt<It?(St.flags|=2,It):bt):(St.flags|=2,It)):(St.flags|=1048576,It)}function ht(St){return et&&St.alternate===null&&(St.flags|=2),St}function gt(St,It,bt,Pt){return It===null||It.tag!==6?(It=xh(bt,St.mode,Pt),It.return=St,It):(It=st(It,bt),It.return=St,It)}function $t(St,It,bt,Pt){var Gt=bt.type;return Gt===ya?_t(St,It,bt.props.children,Pt,bt.key):It!==null&&(It.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ha&&uh(Gt)===It.type)?(Pt=st(It,bt.props),Pt.ref=sh(St,It,bt),Pt.return=St,Pt):(Pt=yh(bt.type,bt.key,bt.props,null,St.mode,Pt),Pt.ref=sh(St,It,bt),Pt.return=St,Pt)}function at(St,It,bt,Pt){return It===null||It.tag!==4||It.stateNode.containerInfo!==bt.containerInfo||It.stateNode.implementation!==bt.implementation?(It=zh(bt,St.mode,Pt),It.return=St,It):(It=st(It,bt.children||[]),It.return=St,It)}function _t(St,It,bt,Pt,Gt){return It===null||It.tag!==7?(It=Ah(bt,St.mode,Pt,Gt),It.return=St,It):(It=st(It,bt),It.return=St,It)}function mt(St,It,bt){if(typeof It=="string"&&It!==""||typeof It=="number")return It=xh(""+It,St.mode,bt),It.return=St,It;if(typeof It=="object"&&It!==null){switch(It.$$typeof){case va:return bt=yh(It.type,It.key,It.props,null,St.mode,bt),bt.ref=sh(St,null,It),bt.return=St,bt;case wa:return It=zh(It,St.mode,bt),It.return=St,It;case Ha:var Pt=It._init;return mt(St,Pt(It._payload),bt)}if(eb(It)||Ka(It))return It=Ah(It,St.mode,bt,null),It.return=St,It;th(St,It)}return null}function Tt(St,It,bt,Pt){var Gt=It!==null?It.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Gt!==null?null:gt(St,It,""+bt,Pt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return bt.key===Gt?$t(St,It,bt,Pt):null;case wa:return bt.key===Gt?at(St,It,bt,Pt):null;case Ha:return Gt=bt._init,Tt(St,It,Gt(bt._payload),Pt)}if(eb(bt)||Ka(bt))return Gt!==null?null:_t(St,It,bt,Pt,null);th(St,bt)}return null}function Et(St,It,bt,Pt,Gt){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return St=St.get(bt)||null,gt(It,St,""+Pt,Gt);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case va:return St=St.get(Pt.key===null?bt:Pt.key)||null,$t(It,St,Pt,Gt);case wa:return St=St.get(Pt.key===null?bt:Pt.key)||null,at(It,St,Pt,Gt);case Ha:var Jt=Pt._init;return Et(St,It,bt,Jt(Pt._payload),Gt)}if(eb(Pt)||Ka(Pt))return St=St.get(bt)||null,_t(It,St,Pt,Gt,null);th(It,Pt)}return null}function Ct(St,It,bt,Pt){for(var Gt=null,Jt=null,Kt=It,Xt=It=0,ko=null;Kt!==null&&Xt<bt.length;Xt++){Kt.index>Xt?(ko=Kt,Kt=null):ko=Kt.sibling;var Qt=Tt(St,Kt,bt[Xt],Pt);if(Qt===null){Kt===null&&(Kt=ko);break}et&&Kt&&Qt.alternate===null&&it(St,Kt),It=ct(Qt,It,Xt),Jt===null?Gt=Qt:Jt.sibling=Qt,Jt=Qt,Kt=ko}if(Xt===bt.length)return tt(St,Kt),I$1&&tg(St,Xt),Gt;if(Kt===null){for(;Xt<bt.length;Xt++)Kt=mt(St,bt[Xt],Pt),Kt!==null&&(It=ct(Kt,It,Xt),Jt===null?Gt=Kt:Jt.sibling=Kt,Jt=Kt);return I$1&&tg(St,Xt),Gt}for(Kt=nt(St,Kt);Xt<bt.length;Xt++)ko=Et(Kt,St,Xt,bt[Xt],Pt),ko!==null&&(et&&ko.alternate!==null&&Kt.delete(ko.key===null?Xt:ko.key),It=ct(ko,It,Xt),Jt===null?Gt=ko:Jt.sibling=ko,Jt=ko);return et&&Kt.forEach(function(xo){return it(St,xo)}),I$1&&tg(St,Xt),Gt}function kt(St,It,bt,Pt){var Gt=Ka(bt);if(typeof Gt!="function")throw Error(p$6(150));if(bt=Gt.call(bt),bt==null)throw Error(p$6(151));for(var Jt=Gt=null,Kt=It,Xt=It=0,ko=null,Qt=bt.next();Kt!==null&&!Qt.done;Xt++,Qt=bt.next()){Kt.index>Xt?(ko=Kt,Kt=null):ko=Kt.sibling;var xo=Tt(St,Kt,Qt.value,Pt);if(xo===null){Kt===null&&(Kt=ko);break}et&&Kt&&xo.alternate===null&&it(St,Kt),It=ct(xo,It,Xt),Jt===null?Gt=xo:Jt.sibling=xo,Jt=xo,Kt=ko}if(Qt.done)return tt(St,Kt),I$1&&tg(St,Xt),Gt;if(Kt===null){for(;!Qt.done;Xt++,Qt=bt.next())Qt=mt(St,Qt.value,Pt),Qt!==null&&(It=ct(Qt,It,Xt),Jt===null?Gt=Qt:Jt.sibling=Qt,Jt=Qt);return I$1&&tg(St,Xt),Gt}for(Kt=nt(St,Kt);!Qt.done;Xt++,Qt=bt.next())Qt=Et(Kt,St,Xt,Qt.value,Pt),Qt!==null&&(et&&Qt.alternate!==null&&Kt.delete(Qt.key===null?Xt:Qt.key),It=ct(Qt,It,Xt),Jt===null?Gt=Qt:Jt.sibling=Qt,Jt=Qt);return et&&Kt.forEach(function(br){return it(St,br)}),I$1&&tg(St,Xt),Gt}function Wt(St,It,bt,Pt){if(typeof bt=="object"&&bt!==null&&bt.type===ya&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:e:{for(var Gt=bt.key,Jt=It;Jt!==null;){if(Jt.key===Gt){if(Gt=bt.type,Gt===ya){if(Jt.tag===7){tt(St,Jt.sibling),It=st(Jt,bt.props.children),It.return=St,St=It;break e}}else if(Jt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ha&&uh(Gt)===Jt.type){tt(St,Jt.sibling),It=st(Jt,bt.props),It.ref=sh(St,Jt,bt),It.return=St,St=It;break e}tt(St,Jt);break}else it(St,Jt);Jt=Jt.sibling}bt.type===ya?(It=Ah(bt.props.children,St.mode,Pt,bt.key),It.return=St,St=It):(Pt=yh(bt.type,bt.key,bt.props,null,St.mode,Pt),Pt.ref=sh(St,It,bt),Pt.return=St,St=Pt)}return ht(St);case wa:e:{for(Jt=bt.key;It!==null;){if(It.key===Jt)if(It.tag===4&&It.stateNode.containerInfo===bt.containerInfo&&It.stateNode.implementation===bt.implementation){tt(St,It.sibling),It=st(It,bt.children||[]),It.return=St,St=It;break e}else{tt(St,It);break}else it(St,It);It=It.sibling}It=zh(bt,St.mode,Pt),It.return=St,St=It}return ht(St);case Ha:return Jt=bt._init,Wt(St,It,Jt(bt._payload),Pt)}if(eb(bt))return Ct(St,It,bt,Pt);if(Ka(bt))return kt(St,It,bt,Pt);th(St,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,It!==null&&It.tag===6?(tt(St,It.sibling),It=st(It,bt),It.return=St,St=It):(tt(St,It),It=xh(bt,St.mode,Pt),It.return=St,St=It),ht(St)):tt(St,It)}return Wt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(et){if(et===Dh)throw Error(p$6(174));return et}function Ih(et,it){switch(G$1(Gh,it),G$1(Fh,et),G$1(Eh,Dh),et=it.nodeType,et){case 9:case 11:it=(it=it.documentElement)?it.namespaceURI:lb(null,"");break;default:et=et===8?it.parentNode:it,it=et.namespaceURI||null,et=et.tagName,it=lb(it,et)}E$1(Eh),G$1(Eh,it)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(et){Hh(Gh.current);var it=Hh(Eh.current),tt=lb(it,et.type);it!==tt&&(G$1(Fh,et),G$1(Eh,tt))}function Lh(et){Fh.current===et&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(et){for(var it=et;it!==null;){if(it.tag===13){var tt=it.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return it}else if(it.tag===19&&it.memoizedProps.revealOrder!==void 0){if((it.flags&128)!==0)return it}else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===et)break;for(;it.sibling===null;){if(it.return===null||it.return===et)return null;it=it.return}it.sibling.return=it.return,it=it.sibling}return null}var Nh=[];function Oh(){for(var et=0;et<Nh.length;et++)Nh[et]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$6(321))}function Wh(et,it){if(it===null)return!1;for(var tt=0;tt<it.length&&tt<et.length;tt++)if(!He(et[tt],it[tt]))return!1;return!0}function Xh(et,it,tt,nt,st,ct){if(Rh=ct,N$1=it,it.memoizedState=null,it.updateQueue=null,it.lanes=0,Ph.current=et===null||et.memoizedState===null?Yh:Zh,et=tt(nt,st),Th){ct=0;do{if(Th=!1,Uh=0,25<=ct)throw Error(p$6(301));ct+=1,P$1=O$1=null,it.updateQueue=null,Ph.current=$h,et=tt(nt,st)}while(Th)}if(Ph.current=ai,it=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,it)throw Error(p$6(300));return et}function bi(){var et=Uh!==0;return Uh=0,et}function ci(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et,P$1}function di(){if(O$1===null){var et=N$1.alternate;et=et!==null?et.memoizedState:null}else et=O$1.next;var it=P$1===null?N$1.memoizedState:P$1.next;if(it!==null)P$1=it,O$1=et;else{if(et===null)throw Error(p$6(310));O$1=et,et={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et}return P$1}function ei(et,it){return typeof it=="function"?it(et):it}function fi(et){var it=di(),tt=it.queue;if(tt===null)throw Error(p$6(311));tt.lastRenderedReducer=et;var nt=O$1,st=nt.baseQueue,ct=tt.pending;if(ct!==null){if(st!==null){var ht=st.next;st.next=ct.next,ct.next=ht}nt.baseQueue=st=ct,tt.pending=null}if(st!==null){ct=st.next,nt=nt.baseState;var gt=ht=null,$t=null,at=ct;do{var _t=at.lane;if((Rh&_t)===_t)$t!==null&&($t=$t.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),nt=at.hasEagerState?at.eagerState:et(nt,at.action);else{var mt={lane:_t,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};$t===null?(gt=$t=mt,ht=nt):$t=$t.next=mt,N$1.lanes|=_t,hh|=_t}at=at.next}while(at!==null&&at!==ct);$t===null?ht=nt:$t.next=gt,He(nt,it.memoizedState)||(Ug=!0),it.memoizedState=nt,it.baseState=ht,it.baseQueue=$t,tt.lastRenderedState=nt}if(et=tt.interleaved,et!==null){st=et;do ct=st.lane,N$1.lanes|=ct,hh|=ct,st=st.next;while(st!==et)}else st===null&&(tt.lanes=0);return[it.memoizedState,tt.dispatch]}function gi(et){var it=di(),tt=it.queue;if(tt===null)throw Error(p$6(311));tt.lastRenderedReducer=et;var nt=tt.dispatch,st=tt.pending,ct=it.memoizedState;if(st!==null){tt.pending=null;var ht=st=st.next;do ct=et(ct,ht.action),ht=ht.next;while(ht!==st);He(ct,it.memoizedState)||(Ug=!0),it.memoizedState=ct,it.baseQueue===null&&(it.baseState=ct),tt.lastRenderedState=ct}return[ct,nt]}function hi(){}function ii(et,it){var tt=N$1,nt=di(),st=it(),ct=!He(nt.memoizedState,st);if(ct&&(nt.memoizedState=st,Ug=!0),nt=nt.queue,ji(ki.bind(null,tt,nt,et),[et]),nt.getSnapshot!==it||ct||P$1!==null&&P$1.memoizedState.tag&1){if(tt.flags|=2048,li(9,mi.bind(null,tt,nt,st,it),void 0,null),R$1===null)throw Error(p$6(349));(Rh&30)!==0||ni(tt,it,st)}return st}function ni(et,it,tt){et.flags|=16384,et={getSnapshot:it,value:tt},it=N$1.updateQueue,it===null?(it={lastEffect:null,stores:null},N$1.updateQueue=it,it.stores=[et]):(tt=it.stores,tt===null?it.stores=[et]:tt.push(et))}function mi(et,it,tt,nt){it.value=tt,it.getSnapshot=nt,oi(it)&&pi(et)}function ki(et,it,tt){return tt(function(){oi(it)&&pi(et)})}function oi(et){var it=et.getSnapshot;et=et.value;try{var tt=it();return!He(et,tt)}catch{return!0}}function pi(et){var it=Zg(et,1);it!==null&&mh(it,et,1,-1)}function qi(et){var it=ci();return typeof et=="function"&&(et=et()),it.memoizedState=it.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:et},it.queue=et,et=et.dispatch=ri.bind(null,N$1,et),[it.memoizedState,et]}function li(et,it,tt,nt){return et={tag:et,create:it,destroy:tt,deps:nt,next:null},it=N$1.updateQueue,it===null?(it={lastEffect:null,stores:null},N$1.updateQueue=it,it.lastEffect=et.next=et):(tt=it.lastEffect,tt===null?it.lastEffect=et.next=et:(nt=tt.next,tt.next=et,et.next=nt,it.lastEffect=et)),et}function si(){return di().memoizedState}function ti(et,it,tt,nt){var st=ci();N$1.flags|=et,st.memoizedState=li(1|it,tt,void 0,nt===void 0?null:nt)}function ui(et,it,tt,nt){var st=di();nt=nt===void 0?null:nt;var ct=void 0;if(O$1!==null){var ht=O$1.memoizedState;if(ct=ht.destroy,nt!==null&&Wh(nt,ht.deps)){st.memoizedState=li(it,tt,ct,nt);return}}N$1.flags|=et,st.memoizedState=li(1|it,tt,ct,nt)}function vi(et,it){return ti(8390656,8,et,it)}function ji(et,it){return ui(2048,8,et,it)}function wi(et,it){return ui(4,2,et,it)}function xi(et,it){return ui(4,4,et,it)}function yi(et,it){if(typeof it=="function")return et=et(),it(et),function(){it(null)};if(it!=null)return et=et(),it.current=et,function(){it.current=null}}function zi(et,it,tt){return tt=tt!=null?tt.concat([et]):null,ui(4,4,yi.bind(null,it,et),tt)}function Ai(){}function Bi(et,it){var tt=di();it=it===void 0?null:it;var nt=tt.memoizedState;return nt!==null&&it!==null&&Wh(it,nt[1])?nt[0]:(tt.memoizedState=[et,it],et)}function Ci(et,it){var tt=di();it=it===void 0?null:it;var nt=tt.memoizedState;return nt!==null&&it!==null&&Wh(it,nt[1])?nt[0]:(et=et(),tt.memoizedState=[et,it],et)}function Di(et,it,tt){return(Rh&21)===0?(et.baseState&&(et.baseState=!1,Ug=!0),et.memoizedState=tt):(He(tt,it)||(tt=yc(),N$1.lanes|=tt,hh|=tt,et.baseState=!0),it)}function Ei(et,it){var tt=C;C=tt!==0&&4>tt?tt:4,et(!0);var nt=Qh.transition;Qh.transition={};try{et(!1),it()}finally{C=tt,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(et,it,tt){var nt=lh(et);if(tt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null},Hi(et))Ii(it,tt);else if(tt=Yg(et,it,tt,nt),tt!==null){var st=L$1();mh(tt,et,nt,st),Ji(tt,it,nt)}}function ri(et,it,tt){var nt=lh(et),st={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(Hi(et))Ii(it,st);else{var ct=et.alternate;if(et.lanes===0&&(ct===null||ct.lanes===0)&&(ct=it.lastRenderedReducer,ct!==null))try{var ht=it.lastRenderedState,gt=ct(ht,tt);if(st.hasEagerState=!0,st.eagerState=gt,He(gt,ht)){var $t=it.interleaved;$t===null?(st.next=st,Xg(it)):(st.next=$t.next,$t.next=st),it.interleaved=st;return}}catch{}finally{}tt=Yg(et,it,st,nt),tt!==null&&(st=L$1(),mh(tt,et,nt,st),Ji(tt,it,nt))}}function Hi(et){var it=et.alternate;return et===N$1||it!==null&&it===N$1}function Ii(et,it){Th=Sh=!0;var tt=et.pending;tt===null?it.next=it:(it.next=tt.next,tt.next=it),et.pending=it}function Ji(et,it,tt){if((tt&4194240)!==0){var nt=it.lanes;nt&=et.pendingLanes,tt|=nt,it.lanes=tt,Cc(et,tt)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(et,it){return ci().memoizedState=[et,it===void 0?null:it],et},useContext:Vg,useEffect:vi,useImperativeHandle:function(et,it,tt){return tt=tt!=null?tt.concat([et]):null,ti(4194308,4,yi.bind(null,it,et),tt)},useLayoutEffect:function(et,it){return ti(4194308,4,et,it)},useInsertionEffect:function(et,it){return ti(4,2,et,it)},useMemo:function(et,it){var tt=ci();return it=it===void 0?null:it,et=et(),tt.memoizedState=[et,it],et},useReducer:function(et,it,tt){var nt=ci();return it=tt!==void 0?tt(it):it,nt.memoizedState=nt.baseState=it,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:it},nt.queue=et,et=et.dispatch=Gi.bind(null,N$1,et),[nt.memoizedState,et]},useRef:function(et){var it=ci();return et={current:et},it.memoizedState=et},useState:qi,useDebugValue:Ai,useDeferredValue:function(et){return ci().memoizedState=et},useTransition:function(){var et=qi(!1),it=et[0];return et=Ei.bind(null,et[1]),ci().memoizedState=et,[it,et]},useMutableSource:function(){},useSyncExternalStore:function(et,it,tt){var nt=N$1,st=ci();if(I$1){if(tt===void 0)throw Error(p$6(407));tt=tt()}else{if(tt=it(),R$1===null)throw Error(p$6(349));(Rh&30)!==0||ni(nt,it,tt)}st.memoizedState=tt;var ct={value:tt,getSnapshot:it};return st.queue=ct,vi(ki.bind(null,nt,ct,et),[et]),nt.flags|=2048,li(9,mi.bind(null,nt,ct,tt,it),void 0,null),tt},useId:function(){var et=ci(),it=R$1.identifierPrefix;if(I$1){var tt=sg,nt=rg;tt=(nt&~(1<<32-oc(nt)-1)).toString(32)+tt,it=":"+it+"R"+tt,tt=Uh++,0<tt&&(it+="H"+tt.toString(32)),it+=":"}else tt=Vh++,it=":"+it+"r"+tt.toString(32)+":";return et.memoizedState=it},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var it=di();return Di(it,O$1.memoizedState,et)},useTransition:function(){var et=fi(ei)[0],it=di().memoizedState;return[et,it]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var it=di();return O$1===null?it.memoizedState=et:Di(it,O$1.memoizedState,et)},useTransition:function(){var et=gi(ei)[0],it=di().memoizedState;return[et,it]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(et,it){try{var tt="",nt=it;do tt+=Pa(nt),nt=nt.return;while(nt);var st=tt}catch(ct){st=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:et,source:it,stack:st,digest:null}}function Li(et,it,tt){return{value:et,source:null,stack:tt!=null?tt:null,digest:it!=null?it:null}}function Mi(et,it){try{console.error(it.value)}catch(tt){setTimeout(function(){throw tt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(et,it,tt){tt=ch(-1,tt),tt.tag=3,tt.payload={element:null};var nt=it.value;return tt.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(et,it)},tt}function Ri(et,it,tt){tt=ch(-1,tt),tt.tag=3;var nt=et.type.getDerivedStateFromError;if(typeof nt=="function"){var st=it.value;tt.payload=function(){return nt(st)},tt.callback=function(){Mi(et,it)}}var ct=et.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(tt.callback=function(){Mi(et,it),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ht=it.stack;this.componentDidCatch(it.value,{componentStack:ht!==null?ht:""})}),tt}function Ti(et,it,tt){var nt=et.pingCache;if(nt===null){nt=et.pingCache=new Ni;var st=new Set;nt.set(it,st)}else st=nt.get(it),st===void 0&&(st=new Set,nt.set(it,st));st.has(tt)||(st.add(tt),et=Ui.bind(null,et,it,tt),it.then(et,et))}function Vi(et){do{var it;if((it=et.tag===13)&&(it=et.memoizedState,it=it!==null?it.dehydrated!==null:!0),it)return et;et=et.return}while(et!==null);return null}function Wi(et,it,tt,nt,st){return(et.mode&1)===0?(et===it?et.flags|=65536:(et.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(it=ch(-1,1),it.tag=2,dh(tt,it,1))),tt.lanes|=1),et):(et.flags|=65536,et.lanes=st,et)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(et,it,tt,nt){it.child=et===null?Ch(it,null,tt,nt):Bh(it,et.child,tt,nt)}function Zi(et,it,tt,nt,st){tt=tt.render;var ct=it.ref;return Tg(it,st),nt=Xh(et,it,tt,nt,ct,st),tt=bi(),et!==null&&!Ug?(it.updateQueue=et.updateQueue,it.flags&=-2053,et.lanes&=~st,$i(et,it,st)):(I$1&&tt&&vg(it),it.flags|=1,Yi(et,it,nt,st),it.child)}function aj(et,it,tt,nt,st){if(et===null){var ct=tt.type;return typeof ct=="function"&&!bj(ct)&&ct.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(it.tag=15,it.type=ct,cj(et,it,ct,nt,st)):(et=yh(tt.type,null,nt,it,it.mode,st),et.ref=it.ref,et.return=it,it.child=et)}if(ct=et.child,(et.lanes&st)===0){var ht=ct.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie,tt(ht,nt)&&et.ref===it.ref)return $i(et,it,st)}return it.flags|=1,et=wh(ct,nt),et.ref=it.ref,et.return=it,it.child=et}function cj(et,it,tt,nt,st){if(et!==null){var ct=et.memoizedProps;if(Ie(ct,nt)&&et.ref===it.ref)if(Ug=!1,it.pendingProps=nt=ct,(et.lanes&st)!==0)(et.flags&131072)!==0&&(Ug=!0);else return it.lanes=et.lanes,$i(et,it,st)}return dj(et,it,tt,nt,st)}function ej(et,it,tt){var nt=it.pendingProps,st=nt.children,ct=et!==null?et.memoizedState:null;if(nt.mode==="hidden")if((it.mode&1)===0)it.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=tt;else{if((tt&1073741824)===0)return et=ct!==null?ct.baseLanes|tt:tt,it.lanes=it.childLanes=1073741824,it.memoizedState={baseLanes:et,cachePool:null,transitions:null},it.updateQueue=null,G$1(fj,gj),gj|=et,null;it.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=ct!==null?ct.baseLanes:tt,G$1(fj,gj),gj|=nt}else ct!==null?(nt=ct.baseLanes|tt,it.memoizedState=null):nt=tt,G$1(fj,gj),gj|=nt;return Yi(et,it,st,tt),it.child}function hj(et,it){var tt=it.ref;(et===null&&tt!==null||et!==null&&et.ref!==tt)&&(it.flags|=512,it.flags|=2097152)}function dj(et,it,tt,nt,st){var ct=Zf(tt)?Xf:H$1.current;return ct=Yf(it,ct),Tg(it,st),tt=Xh(et,it,tt,nt,ct,st),nt=bi(),et!==null&&!Ug?(it.updateQueue=et.updateQueue,it.flags&=-2053,et.lanes&=~st,$i(et,it,st)):(I$1&&nt&&vg(it),it.flags|=1,Yi(et,it,tt,st),it.child)}function ij(et,it,tt,nt,st){if(Zf(tt)){var ct=!0;cg(it)}else ct=!1;if(Tg(it,st),it.stateNode===null)jj(et,it),ph(it,tt,nt),rh(it,tt,nt,st),nt=!0;else if(et===null){var ht=it.stateNode,gt=it.memoizedProps;ht.props=gt;var $t=ht.context,at=tt.contextType;typeof at=="object"&&at!==null?at=Vg(at):(at=Zf(tt)?Xf:H$1.current,at=Yf(it,at));var _t=tt.getDerivedStateFromProps,mt=typeof _t=="function"||typeof ht.getSnapshotBeforeUpdate=="function";mt||typeof ht.UNSAFE_componentWillReceiveProps!="function"&&typeof ht.componentWillReceiveProps!="function"||(gt!==nt||$t!==at)&&qh(it,ht,nt,at),$g=!1;var Tt=it.memoizedState;ht.state=Tt,gh(it,nt,ht,st),$t=it.memoizedState,gt!==nt||Tt!==$t||Wf.current||$g?(typeof _t=="function"&&(kh(it,tt,_t,nt),$t=it.memoizedState),(gt=$g||oh(it,tt,gt,nt,Tt,$t,at))?(mt||typeof ht.UNSAFE_componentWillMount!="function"&&typeof ht.componentWillMount!="function"||(typeof ht.componentWillMount=="function"&&ht.componentWillMount(),typeof ht.UNSAFE_componentWillMount=="function"&&ht.UNSAFE_componentWillMount()),typeof ht.componentDidMount=="function"&&(it.flags|=4194308)):(typeof ht.componentDidMount=="function"&&(it.flags|=4194308),it.memoizedProps=nt,it.memoizedState=$t),ht.props=nt,ht.state=$t,ht.context=at,nt=gt):(typeof ht.componentDidMount=="function"&&(it.flags|=4194308),nt=!1)}else{ht=it.stateNode,bh(et,it),gt=it.memoizedProps,at=it.type===it.elementType?gt:Lg(it.type,gt),ht.props=at,mt=it.pendingProps,Tt=ht.context,$t=tt.contextType,typeof $t=="object"&&$t!==null?$t=Vg($t):($t=Zf(tt)?Xf:H$1.current,$t=Yf(it,$t));var Et=tt.getDerivedStateFromProps;(_t=typeof Et=="function"||typeof ht.getSnapshotBeforeUpdate=="function")||typeof ht.UNSAFE_componentWillReceiveProps!="function"&&typeof ht.componentWillReceiveProps!="function"||(gt!==mt||Tt!==$t)&&qh(it,ht,nt,$t),$g=!1,Tt=it.memoizedState,ht.state=Tt,gh(it,nt,ht,st);var Ct=it.memoizedState;gt!==mt||Tt!==Ct||Wf.current||$g?(typeof Et=="function"&&(kh(it,tt,Et,nt),Ct=it.memoizedState),(at=$g||oh(it,tt,at,nt,Tt,Ct,$t)||!1)?(_t||typeof ht.UNSAFE_componentWillUpdate!="function"&&typeof ht.componentWillUpdate!="function"||(typeof ht.componentWillUpdate=="function"&&ht.componentWillUpdate(nt,Ct,$t),typeof ht.UNSAFE_componentWillUpdate=="function"&&ht.UNSAFE_componentWillUpdate(nt,Ct,$t)),typeof ht.componentDidUpdate=="function"&&(it.flags|=4),typeof ht.getSnapshotBeforeUpdate=="function"&&(it.flags|=1024)):(typeof ht.componentDidUpdate!="function"||gt===et.memoizedProps&&Tt===et.memoizedState||(it.flags|=4),typeof ht.getSnapshotBeforeUpdate!="function"||gt===et.memoizedProps&&Tt===et.memoizedState||(it.flags|=1024),it.memoizedProps=nt,it.memoizedState=Ct),ht.props=nt,ht.state=Ct,ht.context=$t,nt=at):(typeof ht.componentDidUpdate!="function"||gt===et.memoizedProps&&Tt===et.memoizedState||(it.flags|=4),typeof ht.getSnapshotBeforeUpdate!="function"||gt===et.memoizedProps&&Tt===et.memoizedState||(it.flags|=1024),nt=!1)}return kj(et,it,tt,nt,ct,st)}function kj(et,it,tt,nt,st,ct){hj(et,it);var ht=(it.flags&128)!==0;if(!nt&&!ht)return st&&dg(it,tt,!1),$i(et,it,ct);nt=it.stateNode,Xi.current=it;var gt=ht&&typeof tt.getDerivedStateFromError!="function"?null:nt.render();return it.flags|=1,et!==null&&ht?(it.child=Bh(it,et.child,null,ct),it.child=Bh(it,null,gt,ct)):Yi(et,it,gt,ct),it.memoizedState=nt.state,st&&dg(it,tt,!0),it.child}function lj(et){var it=et.stateNode;it.pendingContext?ag(et,it.pendingContext,it.pendingContext!==it.context):it.context&&ag(et,it.context,!1),Ih(et,it.containerInfo)}function mj(et,it,tt,nt,st){return Ig(),Jg(st),it.flags|=256,Yi(et,it,tt,nt),it.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(et){return{baseLanes:et,cachePool:null,transitions:null}}function pj(et,it,tt){var nt=it.pendingProps,st=M$1.current,ct=!1,ht=(it.flags&128)!==0,gt;if((gt=ht)||(gt=et!==null&&et.memoizedState===null?!1:(st&2)!==0),gt?(ct=!0,it.flags&=-129):(et===null||et.memoizedState!==null)&&(st|=1),G$1(M$1,st&1),et===null)return Eg(it),et=it.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?((it.mode&1)===0?it.lanes=1:et.data==="$!"?it.lanes=8:it.lanes=1073741824,null):(ht=nt.children,et=nt.fallback,ct?(nt=it.mode,ct=it.child,ht={mode:"hidden",children:ht},(nt&1)===0&&ct!==null?(ct.childLanes=0,ct.pendingProps=ht):ct=qj(ht,nt,0,null),et=Ah(et,nt,tt,null),ct.return=it,et.return=it,ct.sibling=et,it.child=ct,it.child.memoizedState=oj(tt),it.memoizedState=nj,et):rj(it,ht));if(st=et.memoizedState,st!==null&&(gt=st.dehydrated,gt!==null))return sj(et,it,ht,nt,gt,st,tt);if(ct){ct=nt.fallback,ht=it.mode,st=et.child,gt=st.sibling;var $t={mode:"hidden",children:nt.children};return(ht&1)===0&&it.child!==st?(nt=it.child,nt.childLanes=0,nt.pendingProps=$t,it.deletions=null):(nt=wh(st,$t),nt.subtreeFlags=st.subtreeFlags&14680064),gt!==null?ct=wh(gt,ct):(ct=Ah(ct,ht,tt,null),ct.flags|=2),ct.return=it,nt.return=it,nt.sibling=ct,it.child=nt,nt=ct,ct=it.child,ht=et.child.memoizedState,ht=ht===null?oj(tt):{baseLanes:ht.baseLanes|tt,cachePool:null,transitions:ht.transitions},ct.memoizedState=ht,ct.childLanes=et.childLanes&~tt,it.memoizedState=nj,nt}return ct=et.child,et=ct.sibling,nt=wh(ct,{mode:"visible",children:nt.children}),(it.mode&1)===0&&(nt.lanes=tt),nt.return=it,nt.sibling=null,et!==null&&(tt=it.deletions,tt===null?(it.deletions=[et],it.flags|=16):tt.push(et)),it.child=nt,it.memoizedState=null,nt}function rj(et,it){return it=qj({mode:"visible",children:it},et.mode,0,null),it.return=et,et.child=it}function tj(et,it,tt,nt){return nt!==null&&Jg(nt),Bh(it,et.child,null,tt),et=rj(it,it.pendingProps.children),et.flags|=2,it.memoizedState=null,et}function sj(et,it,tt,nt,st,ct,ht){if(tt)return it.flags&256?(it.flags&=-257,nt=Li(Error(p$6(422))),tj(et,it,ht,nt)):it.memoizedState!==null?(it.child=et.child,it.flags|=128,null):(ct=nt.fallback,st=it.mode,nt=qj({mode:"visible",children:nt.children},st,0,null),ct=Ah(ct,st,ht,null),ct.flags|=2,nt.return=it,ct.return=it,nt.sibling=ct,it.child=nt,(it.mode&1)!==0&&Bh(it,et.child,null,ht),it.child.memoizedState=oj(ht),it.memoizedState=nj,ct);if((it.mode&1)===0)return tj(et,it,ht,null);if(st.data==="$!"){if(nt=st.nextSibling&&st.nextSibling.dataset,nt)var gt=nt.dgst;return nt=gt,ct=Error(p$6(419)),nt=Li(ct,nt,void 0),tj(et,it,ht,nt)}if(gt=(ht&et.childLanes)!==0,Ug||gt){if(nt=R$1,nt!==null){switch(ht&-ht){case 4:st=2;break;case 16:st=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:st=32;break;case 536870912:st=268435456;break;default:st=0}st=(st&(nt.suspendedLanes|ht))!==0?0:st,st!==0&&st!==ct.retryLane&&(ct.retryLane=st,Zg(et,st),mh(nt,et,st,-1))}return uj(),nt=Li(Error(p$6(421))),tj(et,it,ht,nt)}return st.data==="$?"?(it.flags|=128,it.child=et.child,it=vj.bind(null,et),st._reactRetry=it,null):(et=ct.treeContext,yg=Lf(st.nextSibling),xg=it,I$1=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=it),it=rj(it,nt.children),it.flags|=4096,it)}function wj(et,it,tt){et.lanes|=it;var nt=et.alternate;nt!==null&&(nt.lanes|=it),Sg(et.return,it,tt)}function xj(et,it,tt,nt,st){var ct=et.memoizedState;ct===null?et.memoizedState={isBackwards:it,rendering:null,renderingStartTime:0,last:nt,tail:tt,tailMode:st}:(ct.isBackwards=it,ct.rendering=null,ct.renderingStartTime=0,ct.last=nt,ct.tail=tt,ct.tailMode=st)}function yj(et,it,tt){var nt=it.pendingProps,st=nt.revealOrder,ct=nt.tail;if(Yi(et,it,nt.children,tt),nt=M$1.current,(nt&2)!==0)nt=nt&1|2,it.flags|=128;else{if(et!==null&&(et.flags&128)!==0)e:for(et=it.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&wj(et,tt,it);else if(et.tag===19)wj(et,tt,it);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===it)break e;for(;et.sibling===null;){if(et.return===null||et.return===it)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}nt&=1}if(G$1(M$1,nt),(it.mode&1)===0)it.memoizedState=null;else switch(st){case"forwards":for(tt=it.child,st=null;tt!==null;)et=tt.alternate,et!==null&&Mh(et)===null&&(st=tt),tt=tt.sibling;tt=st,tt===null?(st=it.child,it.child=null):(st=tt.sibling,tt.sibling=null),xj(it,!1,st,tt,ct);break;case"backwards":for(tt=null,st=it.child,it.child=null;st!==null;){if(et=st.alternate,et!==null&&Mh(et)===null){it.child=st;break}et=st.sibling,st.sibling=tt,tt=st,st=et}xj(it,!0,tt,null,ct);break;case"together":xj(it,!1,null,null,void 0);break;default:it.memoizedState=null}return it.child}function jj(et,it){(it.mode&1)===0&&et!==null&&(et.alternate=null,it.alternate=null,it.flags|=2)}function $i(et,it,tt){if(et!==null&&(it.dependencies=et.dependencies),hh|=it.lanes,(tt&it.childLanes)===0)return null;if(et!==null&&it.child!==et.child)throw Error(p$6(153));if(it.child!==null){for(et=it.child,tt=wh(et,et.pendingProps),it.child=tt,tt.return=it;et.sibling!==null;)et=et.sibling,tt=tt.sibling=wh(et,et.pendingProps),tt.return=it;tt.sibling=null}return it.child}function zj(et,it,tt){switch(it.tag){case 3:lj(it),Ig();break;case 5:Kh(it);break;case 1:Zf(it.type)&&cg(it);break;case 4:Ih(it,it.stateNode.containerInfo);break;case 10:var nt=it.type._context,st=it.memoizedProps.value;G$1(Mg,nt._currentValue),nt._currentValue=st;break;case 13:if(nt=it.memoizedState,nt!==null)return nt.dehydrated!==null?(G$1(M$1,M$1.current&1),it.flags|=128,null):(tt&it.child.childLanes)!==0?pj(et,it,tt):(G$1(M$1,M$1.current&1),et=$i(et,it,tt),et!==null?et.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(nt=(tt&it.childLanes)!==0,(et.flags&128)!==0){if(nt)return yj(et,it,tt);it.flags|=128}if(st=it.memoizedState,st!==null&&(st.rendering=null,st.tail=null,st.lastEffect=null),G$1(M$1,M$1.current),nt)break;return null;case 22:case 23:return it.lanes=0,ej(et,it,tt)}return $i(et,it,tt)}var Aj,Bj,Cj,Dj;Aj=function(et,it){for(var tt=it.child;tt!==null;){if(tt.tag===5||tt.tag===6)et.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===it)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===it)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Bj=function(){};Cj=function(et,it,tt,nt){var st=et.memoizedProps;if(st!==nt){et=it.stateNode,Hh(Eh.current);var ct=null;switch(tt){case"input":st=Ya(et,st),nt=Ya(et,nt),ct=[];break;case"select":st=A$2({},st,{value:void 0}),nt=A$2({},nt,{value:void 0}),ct=[];break;case"textarea":st=gb(et,st),nt=gb(et,nt),ct=[];break;default:typeof st.onClick!="function"&&typeof nt.onClick=="function"&&(et.onclick=Bf)}ub(tt,nt);var ht;tt=null;for(at in st)if(!nt.hasOwnProperty(at)&&st.hasOwnProperty(at)&&st[at]!=null)if(at==="style"){var gt=st[at];for(ht in gt)gt.hasOwnProperty(ht)&&(tt||(tt={}),tt[ht]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?ct||(ct=[]):(ct=ct||[]).push(at,null));for(at in nt){var $t=nt[at];if(gt=st!=null?st[at]:void 0,nt.hasOwnProperty(at)&&$t!==gt&&($t!=null||gt!=null))if(at==="style")if(gt){for(ht in gt)!gt.hasOwnProperty(ht)||$t&&$t.hasOwnProperty(ht)||(tt||(tt={}),tt[ht]="");for(ht in $t)$t.hasOwnProperty(ht)&&gt[ht]!==$t[ht]&&(tt||(tt={}),tt[ht]=$t[ht])}else tt||(ct||(ct=[]),ct.push(at,tt)),tt=$t;else at==="dangerouslySetInnerHTML"?($t=$t?$t.__html:void 0,gt=gt?gt.__html:void 0,$t!=null&&gt!==$t&&(ct=ct||[]).push(at,$t)):at==="children"?typeof $t!="string"&&typeof $t!="number"||(ct=ct||[]).push(at,""+$t):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?($t!=null&&at==="onScroll"&&D$1("scroll",et),ct||gt===$t||(ct=[])):(ct=ct||[]).push(at,$t))}tt&&(ct=ct||[]).push("style",tt);var at=ct;(it.updateQueue=at)&&(it.flags|=4)}};Dj=function(et,it,tt,nt){tt!==nt&&(it.flags|=4)};function Ej(et,it){if(!I$1)switch(et.tailMode){case"hidden":it=et.tail;for(var tt=null;it!==null;)it.alternate!==null&&(tt=it),it=it.sibling;tt===null?et.tail=null:tt.sibling=null;break;case"collapsed":tt=et.tail;for(var nt=null;tt!==null;)tt.alternate!==null&&(nt=tt),tt=tt.sibling;nt===null?it||et.tail===null?et.tail=null:et.tail.sibling=null:nt.sibling=null}}function S$1(et){var it=et.alternate!==null&&et.alternate.child===et.child,tt=0,nt=0;if(it)for(var st=et.child;st!==null;)tt|=st.lanes|st.childLanes,nt|=st.subtreeFlags&14680064,nt|=st.flags&14680064,st.return=et,st=st.sibling;else for(st=et.child;st!==null;)tt|=st.lanes|st.childLanes,nt|=st.subtreeFlags,nt|=st.flags,st.return=et,st=st.sibling;return et.subtreeFlags|=nt,et.childLanes=tt,it}function Fj(et,it,tt){var nt=it.pendingProps;switch(wg(it),it.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(it),null;case 1:return Zf(it.type)&&$f(),S$1(it),null;case 3:return nt=it.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(et===null||et.child===null)&&(Gg(it)?it.flags|=4:et===null||et.memoizedState.isDehydrated&&(it.flags&256)===0||(it.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(et,it),S$1(it),null;case 5:Lh(it);var st=Hh(Gh.current);if(tt=it.type,et!==null&&it.stateNode!=null)Cj(et,it,tt,nt,st),et.ref!==it.ref&&(it.flags|=512,it.flags|=2097152);else{if(!nt){if(it.stateNode===null)throw Error(p$6(166));return S$1(it),null}if(et=Hh(Eh.current),Gg(it)){nt=it.stateNode,tt=it.type;var ct=it.memoizedProps;switch(nt[Of]=it,nt[Pf]=ct,et=(it.mode&1)!==0,tt){case"dialog":D$1("cancel",nt),D$1("close",nt);break;case"iframe":case"object":case"embed":D$1("load",nt);break;case"video":case"audio":for(st=0;st<lf.length;st++)D$1(lf[st],nt);break;case"source":D$1("error",nt);break;case"img":case"image":case"link":D$1("error",nt),D$1("load",nt);break;case"details":D$1("toggle",nt);break;case"input":Za(nt,ct),D$1("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!ct.multiple},D$1("invalid",nt);break;case"textarea":hb(nt,ct),D$1("invalid",nt)}ub(tt,ct),st=null;for(var ht in ct)if(ct.hasOwnProperty(ht)){var gt=ct[ht];ht==="children"?typeof gt=="string"?nt.textContent!==gt&&(ct.suppressHydrationWarning!==!0&&Af(nt.textContent,gt,et),st=["children",gt]):typeof gt=="number"&&nt.textContent!==""+gt&&(ct.suppressHydrationWarning!==!0&&Af(nt.textContent,gt,et),st=["children",""+gt]):ea.hasOwnProperty(ht)&&gt!=null&&ht==="onScroll"&&D$1("scroll",nt)}switch(tt){case"input":Va(nt),db(nt,ct,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(nt.onclick=Bf)}nt=st,it.updateQueue=nt,nt!==null&&(it.flags|=4)}else{ht=st.nodeType===9?st:st.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(tt)),et==="http://www.w3.org/1999/xhtml"?tt==="script"?(et=ht.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof nt.is=="string"?et=ht.createElement(tt,{is:nt.is}):(et=ht.createElement(tt),tt==="select"&&(ht=et,nt.multiple?ht.multiple=!0:nt.size&&(ht.size=nt.size))):et=ht.createElementNS(et,tt),et[Of]=it,et[Pf]=nt,Aj(et,it,!1,!1),it.stateNode=et;e:{switch(ht=vb(tt,nt),tt){case"dialog":D$1("cancel",et),D$1("close",et),st=nt;break;case"iframe":case"object":case"embed":D$1("load",et),st=nt;break;case"video":case"audio":for(st=0;st<lf.length;st++)D$1(lf[st],et);st=nt;break;case"source":D$1("error",et),st=nt;break;case"img":case"image":case"link":D$1("error",et),D$1("load",et),st=nt;break;case"details":D$1("toggle",et),st=nt;break;case"input":Za(et,nt),st=Ya(et,nt),D$1("invalid",et);break;case"option":st=nt;break;case"select":et._wrapperState={wasMultiple:!!nt.multiple},st=A$2({},nt,{value:void 0}),D$1("invalid",et);break;case"textarea":hb(et,nt),st=gb(et,nt),D$1("invalid",et);break;default:st=nt}ub(tt,st),gt=st;for(ct in gt)if(gt.hasOwnProperty(ct)){var $t=gt[ct];ct==="style"?sb(et,$t):ct==="dangerouslySetInnerHTML"?($t=$t?$t.__html:void 0,$t!=null&&nb(et,$t)):ct==="children"?typeof $t=="string"?(tt!=="textarea"||$t!=="")&&ob(et,$t):typeof $t=="number"&&ob(et,""+$t):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?$t!=null&&ct==="onScroll"&&D$1("scroll",et):$t!=null&&ta(et,ct,$t,ht))}switch(tt){case"input":Va(et),db(et,nt,!1);break;case"textarea":Va(et),jb(et);break;case"option":nt.value!=null&&et.setAttribute("value",""+Sa(nt.value));break;case"select":et.multiple=!!nt.multiple,ct=nt.value,ct!=null?fb(et,!!nt.multiple,ct,!1):nt.defaultValue!=null&&fb(et,!!nt.multiple,nt.defaultValue,!0);break;default:typeof st.onClick=="function"&&(et.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(it.flags|=4)}it.ref!==null&&(it.flags|=512,it.flags|=2097152)}return S$1(it),null;case 6:if(et&&it.stateNode!=null)Dj(et,it,et.memoizedProps,nt);else{if(typeof nt!="string"&&it.stateNode===null)throw Error(p$6(166));if(tt=Hh(Gh.current),Hh(Eh.current),Gg(it)){if(nt=it.stateNode,tt=it.memoizedProps,nt[Of]=it,(ct=nt.nodeValue!==tt)&&(et=xg,et!==null))switch(et.tag){case 3:Af(nt.nodeValue,tt,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,tt,(et.mode&1)!==0)}ct&&(it.flags|=4)}else nt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(nt),nt[Of]=it,it.stateNode=nt}return S$1(it),null;case 13:if(E$1(M$1),nt=it.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&(it.mode&1)!==0&&(it.flags&128)===0)Hg(),Ig(),it.flags|=98560,ct=!1;else if(ct=Gg(it),nt!==null&&nt.dehydrated!==null){if(et===null){if(!ct)throw Error(p$6(318));if(ct=it.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$6(317));ct[Of]=it}else Ig(),(it.flags&128)===0&&(it.memoizedState=null),it.flags|=4;S$1(it),ct=!1}else zg!==null&&(Gj(zg),zg=null),ct=!0;if(!ct)return it.flags&65536?it:null}return(it.flags&128)!==0?(it.lanes=tt,it):(nt=nt!==null,nt!==(et!==null&&et.memoizedState!==null)&&nt&&(it.child.flags|=8192,(it.mode&1)!==0&&(et===null||(M$1.current&1)!==0?T===0&&(T=3):uj())),it.updateQueue!==null&&(it.flags|=4),S$1(it),null);case 4:return Jh(),Bj(et,it),et===null&&sf(it.stateNode.containerInfo),S$1(it),null;case 10:return Rg(it.type._context),S$1(it),null;case 17:return Zf(it.type)&&$f(),S$1(it),null;case 19:if(E$1(M$1),ct=it.memoizedState,ct===null)return S$1(it),null;if(nt=(it.flags&128)!==0,ht=ct.rendering,ht===null)if(nt)Ej(ct,!1);else{if(T!==0||et!==null&&(et.flags&128)!==0)for(et=it.child;et!==null;){if(ht=Mh(et),ht!==null){for(it.flags|=128,Ej(ct,!1),nt=ht.updateQueue,nt!==null&&(it.updateQueue=nt,it.flags|=4),it.subtreeFlags=0,nt=tt,tt=it.child;tt!==null;)ct=tt,et=nt,ct.flags&=14680066,ht=ct.alternate,ht===null?(ct.childLanes=0,ct.lanes=et,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=ht.childLanes,ct.lanes=ht.lanes,ct.child=ht.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=ht.memoizedProps,ct.memoizedState=ht.memoizedState,ct.updateQueue=ht.updateQueue,ct.type=ht.type,et=ht.dependencies,ct.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),tt=tt.sibling;return G$1(M$1,M$1.current&1|2),it.child}et=et.sibling}ct.tail!==null&&B$1()>Hj&&(it.flags|=128,nt=!0,Ej(ct,!1),it.lanes=4194304)}else{if(!nt)if(et=Mh(ht),et!==null){if(it.flags|=128,nt=!0,tt=et.updateQueue,tt!==null&&(it.updateQueue=tt,it.flags|=4),Ej(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!ht.alternate&&!I$1)return S$1(it),null}else 2*B$1()-ct.renderingStartTime>Hj&&tt!==1073741824&&(it.flags|=128,nt=!0,Ej(ct,!1),it.lanes=4194304);ct.isBackwards?(ht.sibling=it.child,it.child=ht):(tt=ct.last,tt!==null?tt.sibling=ht:it.child=ht,ct.last=ht)}return ct.tail!==null?(it=ct.tail,ct.rendering=it,ct.tail=it.sibling,ct.renderingStartTime=B$1(),it.sibling=null,tt=M$1.current,G$1(M$1,nt?tt&1|2:tt&1),it):(S$1(it),null);case 22:case 23:return Ij(),nt=it.memoizedState!==null,et!==null&&et.memoizedState!==null!==nt&&(it.flags|=8192),nt&&(it.mode&1)!==0?(gj&1073741824)!==0&&(S$1(it),it.subtreeFlags&6&&(it.flags|=8192)):S$1(it),null;case 24:return null;case 25:return null}throw Error(p$6(156,it.tag))}function Jj(et,it){switch(wg(it),it.tag){case 1:return Zf(it.type)&&$f(),et=it.flags,et&65536?(it.flags=et&-65537|128,it):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),et=it.flags,(et&65536)!==0&&(et&128)===0?(it.flags=et&-65537|128,it):null;case 5:return Lh(it),null;case 13:if(E$1(M$1),et=it.memoizedState,et!==null&&et.dehydrated!==null){if(it.alternate===null)throw Error(p$6(340));Ig()}return et=it.flags,et&65536?(it.flags=et&-65537|128,it):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(it.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(et,it){var tt=et.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(nt){W$1(et,it,nt)}else tt.current=null}function Nj(et,it,tt){try{tt()}catch(nt){W$1(et,it,nt)}}var Oj=!1;function Pj(et,it){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var tt={start:et.selectionStart,end:et.selectionEnd};else e:{tt=(tt=et.ownerDocument)&&tt.defaultView||window;var nt=tt.getSelection&&tt.getSelection();if(nt&&nt.rangeCount!==0){tt=nt.anchorNode;var st=nt.anchorOffset,ct=nt.focusNode;nt=nt.focusOffset;try{tt.nodeType,ct.nodeType}catch{tt=null;break e}var ht=0,gt=-1,$t=-1,at=0,_t=0,mt=et,Tt=null;t:for(;;){for(var Et;mt!==tt||st!==0&&mt.nodeType!==3||(gt=ht+st),mt!==ct||nt!==0&&mt.nodeType!==3||($t=ht+nt),mt.nodeType===3&&(ht+=mt.nodeValue.length),(Et=mt.firstChild)!==null;)Tt=mt,mt=Et;for(;;){if(mt===et)break t;if(Tt===tt&&++at===st&&(gt=ht),Tt===ct&&++_t===nt&&($t=ht),(Et=mt.nextSibling)!==null)break;mt=Tt,Tt=mt.parentNode}mt=Et}tt=gt===-1||$t===-1?null:{start:gt,end:$t}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:et,selectionRange:tt},dd=!1,V=it;V!==null;)if(it=V,et=it.child,(it.subtreeFlags&1028)!==0&&et!==null)et.return=it,V=et;else for(;V!==null;){it=V;try{var Ct=it.alternate;if((it.flags&1024)!==0)switch(it.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var kt=Ct.memoizedProps,Wt=Ct.memoizedState,St=it.stateNode,It=St.getSnapshotBeforeUpdate(it.elementType===it.type?kt:Lg(it.type,kt),Wt);St.__reactInternalSnapshotBeforeUpdate=It}break;case 3:var bt=it.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$6(163))}}catch(Pt){W$1(it,it.return,Pt)}if(et=it.sibling,et!==null){et.return=it.return,V=et;break}V=it.return}return Ct=Oj,Oj=!1,Ct}function Qj(et,it,tt){var nt=it.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var st=nt=nt.next;do{if((st.tag&et)===et){var ct=st.destroy;st.destroy=void 0,ct!==void 0&&Nj(it,tt,ct)}st=st.next}while(st!==nt)}}function Rj(et,it){if(it=it.updateQueue,it=it!==null?it.lastEffect:null,it!==null){var tt=it=it.next;do{if((tt.tag&et)===et){var nt=tt.create;tt.destroy=nt()}tt=tt.next}while(tt!==it)}}function Sj(et){var it=et.ref;if(it!==null){var tt=et.stateNode;switch(et.tag){case 5:et=tt;break;default:et=tt}typeof it=="function"?it(et):it.current=et}}function Tj(et){var it=et.alternate;it!==null&&(et.alternate=null,Tj(it)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(it=et.stateNode,it!==null&&(delete it[Of],delete it[Pf],delete it[of],delete it[Qf],delete it[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Uj(et){return et.tag===5||et.tag===3||et.tag===4}function Vj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Uj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Wj(et,it,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,it?tt.nodeType===8?tt.parentNode.insertBefore(et,it):tt.insertBefore(et,it):(tt.nodeType===8?(it=tt.parentNode,it.insertBefore(et,tt)):(it=tt,it.appendChild(et)),tt=tt._reactRootContainer,tt!=null||it.onclick!==null||(it.onclick=Bf));else if(nt!==4&&(et=et.child,et!==null))for(Wj(et,it,tt),et=et.sibling;et!==null;)Wj(et,it,tt),et=et.sibling}function Xj(et,it,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,it?tt.insertBefore(et,it):tt.appendChild(et);else if(nt!==4&&(et=et.child,et!==null))for(Xj(et,it,tt),et=et.sibling;et!==null;)Xj(et,it,tt),et=et.sibling}var X$1=null,Yj=!1;function Zj(et,it,tt){for(tt=tt.child;tt!==null;)ak(et,it,tt),tt=tt.sibling}function ak(et,it,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$1||Mj(tt,it);case 6:var nt=X$1,st=Yj;X$1=null,Zj(et,it,tt),X$1=nt,Yj=st,X$1!==null&&(Yj?(et=X$1,tt=tt.stateNode,et.nodeType===8?et.parentNode.removeChild(tt):et.removeChild(tt)):X$1.removeChild(tt.stateNode));break;case 18:X$1!==null&&(Yj?(et=X$1,tt=tt.stateNode,et.nodeType===8?Kf(et.parentNode,tt):et.nodeType===1&&Kf(et,tt),bd(et)):Kf(X$1,tt.stateNode));break;case 4:nt=X$1,st=Yj,X$1=tt.stateNode.containerInfo,Yj=!0,Zj(et,it,tt),X$1=nt,Yj=st;break;case 0:case 11:case 14:case 15:if(!U$1&&(nt=tt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){st=nt=nt.next;do{var ct=st,ht=ct.destroy;ct=ct.tag,ht!==void 0&&((ct&2)!==0||(ct&4)!==0)&&Nj(tt,it,ht),st=st.next}while(st!==nt)}Zj(et,it,tt);break;case 1:if(!U$1&&(Mj(tt,it),nt=tt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=tt.memoizedProps,nt.state=tt.memoizedState,nt.componentWillUnmount()}catch(gt){W$1(tt,it,gt)}Zj(et,it,tt);break;case 21:Zj(et,it,tt);break;case 22:tt.mode&1?(U$1=(nt=U$1)||tt.memoizedState!==null,Zj(et,it,tt),U$1=nt):Zj(et,it,tt);break;default:Zj(et,it,tt)}}function bk(et){var it=et.updateQueue;if(it!==null){et.updateQueue=null;var tt=et.stateNode;tt===null&&(tt=et.stateNode=new Lj),it.forEach(function(nt){var st=ck.bind(null,et,nt);tt.has(nt)||(tt.add(nt),nt.then(st,st))})}}function dk(et,it){var tt=it.deletions;if(tt!==null)for(var nt=0;nt<tt.length;nt++){var st=tt[nt];try{var ct=et,ht=it,gt=ht;e:for(;gt!==null;){switch(gt.tag){case 5:X$1=gt.stateNode,Yj=!1;break e;case 3:X$1=gt.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=gt.stateNode.containerInfo,Yj=!0;break e}gt=gt.return}if(X$1===null)throw Error(p$6(160));ak(ct,ht,st),X$1=null,Yj=!1;var $t=st.alternate;$t!==null&&($t.return=null),st.return=null}catch(at){W$1(st,it,at)}}if(it.subtreeFlags&12854)for(it=it.child;it!==null;)ek(it,et),it=it.sibling}function ek(et,it){var tt=et.alternate,nt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(dk(it,et),fk(et),nt&4){try{Qj(3,et,et.return),Rj(3,et)}catch(kt){W$1(et,et.return,kt)}try{Qj(5,et,et.return)}catch(kt){W$1(et,et.return,kt)}}break;case 1:dk(it,et),fk(et),nt&512&&tt!==null&&Mj(tt,tt.return);break;case 5:if(dk(it,et),fk(et),nt&512&&tt!==null&&Mj(tt,tt.return),et.flags&32){var st=et.stateNode;try{ob(st,"")}catch(kt){W$1(et,et.return,kt)}}if(nt&4&&(st=et.stateNode,st!=null)){var ct=et.memoizedProps,ht=tt!==null?tt.memoizedProps:ct,gt=et.type,$t=et.updateQueue;if(et.updateQueue=null,$t!==null)try{gt==="input"&&ct.type==="radio"&&ct.name!=null&&ab(st,ct),vb(gt,ht);var at=vb(gt,ct);for(ht=0;ht<$t.length;ht+=2){var _t=$t[ht],mt=$t[ht+1];_t==="style"?sb(st,mt):_t==="dangerouslySetInnerHTML"?nb(st,mt):_t==="children"?ob(st,mt):ta(st,_t,mt,at)}switch(gt){case"input":bb(st,ct);break;case"textarea":ib(st,ct);break;case"select":var Tt=st._wrapperState.wasMultiple;st._wrapperState.wasMultiple=!!ct.multiple;var Et=ct.value;Et!=null?fb(st,!!ct.multiple,Et,!1):Tt!==!!ct.multiple&&(ct.defaultValue!=null?fb(st,!!ct.multiple,ct.defaultValue,!0):fb(st,!!ct.multiple,ct.multiple?[]:"",!1))}st[Pf]=ct}catch(kt){W$1(et,et.return,kt)}}break;case 6:if(dk(it,et),fk(et),nt&4){if(et.stateNode===null)throw Error(p$6(162));st=et.stateNode,ct=et.memoizedProps;try{st.nodeValue=ct}catch(kt){W$1(et,et.return,kt)}}break;case 3:if(dk(it,et),fk(et),nt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(it.containerInfo)}catch(kt){W$1(et,et.return,kt)}break;case 4:dk(it,et),fk(et);break;case 13:dk(it,et),fk(et),st=et.child,st.flags&8192&&(ct=st.memoizedState!==null,st.stateNode.isHidden=ct,!ct||st.alternate!==null&&st.alternate.memoizedState!==null||(gk=B$1())),nt&4&&bk(et);break;case 22:if(_t=tt!==null&&tt.memoizedState!==null,et.mode&1?(U$1=(at=U$1)||_t,dk(it,et),U$1=at):dk(it,et),fk(et),nt&8192){if(at=et.memoizedState!==null,(et.stateNode.isHidden=at)&&!_t&&(et.mode&1)!==0)for(V=et,_t=et.child;_t!==null;){for(mt=V=_t;V!==null;){switch(Tt=V,Et=Tt.child,Tt.tag){case 0:case 11:case 14:case 15:Qj(4,Tt,Tt.return);break;case 1:Mj(Tt,Tt.return);var Ct=Tt.stateNode;if(typeof Ct.componentWillUnmount=="function"){nt=Tt,tt=Tt.return;try{it=nt,Ct.props=it.memoizedProps,Ct.state=it.memoizedState,Ct.componentWillUnmount()}catch(kt){W$1(nt,tt,kt)}}break;case 5:Mj(Tt,Tt.return);break;case 22:if(Tt.memoizedState!==null){hk(mt);continue}}Et!==null?(Et.return=Tt,V=Et):hk(mt)}_t=_t.sibling}e:for(_t=null,mt=et;;){if(mt.tag===5){if(_t===null){_t=mt;try{st=mt.stateNode,at?(ct=st.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(gt=mt.stateNode,$t=mt.memoizedProps.style,ht=$t!=null&&$t.hasOwnProperty("display")?$t.display:null,gt.style.display=rb("display",ht))}catch(kt){W$1(et,et.return,kt)}}}else if(mt.tag===6){if(_t===null)try{mt.stateNode.nodeValue=at?"":mt.memoizedProps}catch(kt){W$1(et,et.return,kt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===et)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===et)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===et)break e;_t===mt&&(_t=null),mt=mt.return}_t===mt&&(_t=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:dk(it,et),fk(et),nt&4&&bk(et);break;case 21:break;default:dk(it,et),fk(et)}}function fk(et){var it=et.flags;if(it&2){try{e:{for(var tt=et.return;tt!==null;){if(Uj(tt)){var nt=tt;break e}tt=tt.return}throw Error(p$6(160))}switch(nt.tag){case 5:var st=nt.stateNode;nt.flags&32&&(ob(st,""),nt.flags&=-33);var ct=Vj(et);Xj(et,ct,st);break;case 3:case 4:var ht=nt.stateNode.containerInfo,gt=Vj(et);Wj(et,gt,ht);break;default:throw Error(p$6(161))}}catch($t){W$1(et,et.return,$t)}et.flags&=-3}it&4096&&(et.flags&=-4097)}function ik(et,it,tt){V=et,jk(et)}function jk(et,it,tt){for(var nt=(et.mode&1)!==0;V!==null;){var st=V,ct=st.child;if(st.tag===22&&nt){var ht=st.memoizedState!==null||Kj;if(!ht){var gt=st.alternate,$t=gt!==null&&gt.memoizedState!==null||U$1;gt=Kj;var at=U$1;if(Kj=ht,(U$1=$t)&&!at)for(V=st;V!==null;)ht=V,$t=ht.child,ht.tag===22&&ht.memoizedState!==null?kk(st):$t!==null?($t.return=ht,V=$t):kk(st);for(;ct!==null;)V=ct,jk(ct),ct=ct.sibling;V=st,Kj=gt,U$1=at}lk(et)}else(st.subtreeFlags&8772)!==0&&ct!==null?(ct.return=st,V=ct):lk(et)}}function lk(et){for(;V!==null;){var it=V;if((it.flags&8772)!==0){var tt=it.alternate;try{if((it.flags&8772)!==0)switch(it.tag){case 0:case 11:case 15:U$1||Rj(5,it);break;case 1:var nt=it.stateNode;if(it.flags&4&&!U$1)if(tt===null)nt.componentDidMount();else{var st=it.elementType===it.type?tt.memoizedProps:Lg(it.type,tt.memoizedProps);nt.componentDidUpdate(st,tt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var ct=it.updateQueue;ct!==null&&ih(it,ct,nt);break;case 3:var ht=it.updateQueue;if(ht!==null){if(tt=null,it.child!==null)switch(it.child.tag){case 5:tt=it.child.stateNode;break;case 1:tt=it.child.stateNode}ih(it,ht,tt)}break;case 5:var gt=it.stateNode;if(tt===null&&it.flags&4){tt=gt;var $t=it.memoizedProps;switch(it.type){case"button":case"input":case"select":case"textarea":$t.autoFocus&&tt.focus();break;case"img":$t.src&&(tt.src=$t.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(it.memoizedState===null){var at=it.alternate;if(at!==null){var _t=at.memoizedState;if(_t!==null){var mt=_t.dehydrated;mt!==null&&bd(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$6(163))}U$1||it.flags&512&&Sj(it)}catch(Tt){W$1(it,it.return,Tt)}}if(it===et){V=null;break}if(tt=it.sibling,tt!==null){tt.return=it.return,V=tt;break}V=it.return}}function hk(et){for(;V!==null;){var it=V;if(it===et){V=null;break}var tt=it.sibling;if(tt!==null){tt.return=it.return,V=tt;break}V=it.return}}function kk(et){for(;V!==null;){var it=V;try{switch(it.tag){case 0:case 11:case 15:var tt=it.return;try{Rj(4,it)}catch($t){W$1(it,tt,$t)}break;case 1:var nt=it.stateNode;if(typeof nt.componentDidMount=="function"){var st=it.return;try{nt.componentDidMount()}catch($t){W$1(it,st,$t)}}var ct=it.return;try{Sj(it)}catch($t){W$1(it,ct,$t)}break;case 5:var ht=it.return;try{Sj(it)}catch($t){W$1(it,ht,$t)}}}catch($t){W$1(it,it.return,$t)}if(it===et){V=null;break}var gt=it.sibling;if(gt!==null){gt.return=it.return,V=gt;break}V=it.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y=null,Z$1=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return(K&6)!==0?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(et){return(et.mode&1)===0?1:(K&2)!==0&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(et=C,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et)}function mh(et,it,tt,nt){if(50<zk)throw zk=0,Ak=null,Error(p$6(185));Ac(et,tt,nt),((K&2)===0||et!==R$1)&&(et===R$1&&((K&2)===0&&(rk|=tt),T===4&&Dk(et,Z$1)),Ek(et,nt),tt===1&&K===0&&(it.mode&1)===0&&(Hj=B$1()+500,fg&&jg()))}function Ek(et,it){var tt=et.callbackNode;wc(et,it);var nt=uc(et,et===R$1?Z$1:0);if(nt===0)tt!==null&&bc(tt),et.callbackNode=null,et.callbackPriority=0;else if(it=nt&-nt,et.callbackPriority!==it){if(tt!=null&&bc(tt),it===1)et.tag===0?ig(Fk.bind(null,et)):hg(Fk.bind(null,et)),Jf(function(){(K&6)===0&&jg()}),tt=null;else{switch(Dc(nt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Gk(tt,Hk.bind(null,et))}et.callbackPriority=it,et.callbackNode=tt}}function Hk(et,it){if(Bk=-1,Ck=0,(K&6)!==0)throw Error(p$6(327));var tt=et.callbackNode;if(Ik()&&et.callbackNode!==tt)return null;var nt=uc(et,et===R$1?Z$1:0);if(nt===0)return null;if((nt&30)!==0||(nt&et.expiredLanes)!==0||it)it=Jk(et,nt);else{it=nt;var st=K;K|=2;var ct=Kk();(R$1!==et||Z$1!==it)&&(vk=null,Hj=B$1()+500,Lk(et,it));do try{Mk();break}catch(gt){Nk(et,gt)}while(1);Qg(),nk.current=ct,K=st,Y!==null?it=0:(R$1=null,Z$1=0,it=T)}if(it!==0){if(it===2&&(st=xc(et),st!==0&&(nt=st,it=Ok(et,st))),it===1)throw tt=qk,Lk(et,0),Dk(et,nt),Ek(et,B$1()),tt;if(it===6)Dk(et,nt);else{if(st=et.current.alternate,(nt&30)===0&&!Pk(st)&&(it=Jk(et,nt),it===2&&(ct=xc(et),ct!==0&&(nt=ct,it=Ok(et,ct))),it===1))throw tt=qk,Lk(et,0),Dk(et,nt),Ek(et,B$1()),tt;switch(et.finishedWork=st,et.finishedLanes=nt,it){case 0:case 1:throw Error(p$6(345));case 2:Qk(et,uk,vk);break;case 3:if(Dk(et,nt),(nt&130023424)===nt&&(it=gk+500-B$1(),10<it)){if(uc(et,0)!==0)break;if(st=et.suspendedLanes,(st&nt)!==nt){L$1(),et.pingedLanes|=et.suspendedLanes&st;break}et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),it);break}Qk(et,uk,vk);break;case 4:if(Dk(et,nt),(nt&4194240)===nt)break;for(it=et.eventTimes,st=-1;0<nt;){var ht=31-oc(nt);ct=1<<ht,ht=it[ht],ht>st&&(st=ht),nt&=~ct}if(nt=st,nt=B$1()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),nt);break}Qk(et,uk,vk);break;case 5:Qk(et,uk,vk);break;default:throw Error(p$6(329))}}}return Ek(et,B$1()),et.callbackNode===tt?Hk.bind(null,et):null}function Ok(et,it){var tt=tk;return et.current.memoizedState.isDehydrated&&(Lk(et,it).flags|=256),et=Jk(et,it),et!==2&&(it=uk,uk=tt,it!==null&&Gj(it)),et}function Gj(et){uk===null?uk=et:uk.push.apply(uk,et)}function Pk(et){for(var it=et;;){if(it.flags&16384){var tt=it.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var nt=0;nt<tt.length;nt++){var st=tt[nt],ct=st.getSnapshot;st=st.value;try{if(!He(ct(),st))return!1}catch{return!1}}}if(tt=it.child,it.subtreeFlags&16384&&tt!==null)tt.return=it,it=tt;else{if(it===et)break;for(;it.sibling===null;){if(it.return===null||it.return===et)return!0;it=it.return}it.sibling.return=it.return,it=it.sibling}}return!0}function Dk(et,it){for(it&=~sk,it&=~rk,et.suspendedLanes|=it,et.pingedLanes&=~it,et=et.expirationTimes;0<it;){var tt=31-oc(it),nt=1<<tt;et[tt]=-1,it&=~nt}}function Fk(et){if((K&6)!==0)throw Error(p$6(327));Ik();var it=uc(et,0);if((it&1)===0)return Ek(et,B$1()),null;var tt=Jk(et,it);if(et.tag!==0&&tt===2){var nt=xc(et);nt!==0&&(it=nt,tt=Ok(et,nt))}if(tt===1)throw tt=qk,Lk(et,0),Dk(et,it),Ek(et,B$1()),tt;if(tt===6)throw Error(p$6(345));return et.finishedWork=et.current.alternate,et.finishedLanes=it,Qk(et,uk,vk),Ek(et,B$1()),null}function Rk(et,it){var tt=K;K|=1;try{return et(it)}finally{K=tt,K===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(et){xk!==null&&xk.tag===0&&(K&6)===0&&Ik();var it=K;K|=1;var tt=pk.transition,nt=C;try{if(pk.transition=null,C=1,et)return et()}finally{C=nt,pk.transition=tt,K=it,(K&6)===0&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(et,it){et.finishedWork=null,et.finishedLanes=0;var tt=et.timeoutHandle;if(tt!==-1&&(et.timeoutHandle=-1,Gf(tt)),Y!==null)for(tt=Y.return;tt!==null;){var nt=tt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}tt=tt.return}if(R$1=et,Y=et=wh(et.current,null),Z$1=gj=it,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(it=0;it<Wg.length;it++)if(tt=Wg[it],nt=tt.interleaved,nt!==null){tt.interleaved=null;var st=nt.next,ct=tt.pending;if(ct!==null){var ht=ct.next;ct.next=st,nt.next=ht}tt.pending=nt}Wg=null}return et}function Nk(et,it){do{var tt=Y;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N$1.memoizedState;nt!==null;){var st=nt.queue;st!==null&&(st.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,tt===null||tt.return===null){T=1,qk=it,Y=null;break}e:{var ct=et,ht=tt.return,gt=tt,$t=it;if(it=Z$1,gt.flags|=32768,$t!==null&&typeof $t=="object"&&typeof $t.then=="function"){var at=$t,_t=gt,mt=_t.tag;if((_t.mode&1)===0&&(mt===0||mt===11||mt===15)){var Tt=_t.alternate;Tt?(_t.updateQueue=Tt.updateQueue,_t.memoizedState=Tt.memoizedState,_t.lanes=Tt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Et=Vi(ht);if(Et!==null){Et.flags&=-257,Wi(Et,ht,gt,ct,it),Et.mode&1&&Ti(ct,at,it),it=Et,$t=at;var Ct=it.updateQueue;if(Ct===null){var kt=new Set;kt.add($t),it.updateQueue=kt}else Ct.add($t);break e}else{if((it&1)===0){Ti(ct,at,it),uj();break e}$t=Error(p$6(426))}}else if(I$1&&gt.mode&1){var Wt=Vi(ht);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),Wi(Wt,ht,gt,ct,it),Jg(Ki($t,gt));break e}}ct=$t=Ki($t,gt),T!==4&&(T=2),tk===null?tk=[ct]:tk.push(ct),ct=ht;do{switch(ct.tag){case 3:ct.flags|=65536,it&=-it,ct.lanes|=it;var St=Oi(ct,$t,it);fh(ct,St);break e;case 1:gt=$t;var It=ct.type,bt=ct.stateNode;if((ct.flags&128)===0&&(typeof It.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Si===null||!Si.has(bt)))){ct.flags|=65536,it&=-it,ct.lanes|=it;var Pt=Ri(ct,gt,it);fh(ct,Pt);break e}}ct=ct.return}while(ct!==null)}Tk(tt)}catch(Gt){it=Gt,Y===tt&&tt!==null&&(Y=tt=tt.return);continue}break}while(1)}function Kk(){var et=nk.current;return nk.current=ai,et===null?ai:et}function uj(){(T===0||T===3||T===2)&&(T=4),R$1===null||(hh&268435455)===0&&(rk&268435455)===0||Dk(R$1,Z$1)}function Jk(et,it){var tt=K;K|=2;var nt=Kk();(R$1!==et||Z$1!==it)&&(vk=null,Lk(et,it));do try{Uk();break}catch(st){Nk(et,st)}while(1);if(Qg(),K=tt,nk.current=nt,Y!==null)throw Error(p$6(261));return R$1=null,Z$1=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(et){var it=Wk(et.alternate,et,gj);et.memoizedProps=et.pendingProps,it===null?Tk(et):Y=it,ok.current=null}function Tk(et){var it=et;do{var tt=it.alternate;if(et=it.return,(it.flags&32768)===0){if(tt=Fj(tt,it,gj),tt!==null){Y=tt;return}}else{if(tt=Jj(tt,it),tt!==null){tt.flags&=32767,Y=tt;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T=6,Y=null;return}}if(it=it.sibling,it!==null){Y=it;return}Y=it=et}while(it!==null);T===0&&(T=5)}function Qk(et,it,tt){var nt=C,st=pk.transition;try{pk.transition=null,C=1,Xk(et,it,tt,nt)}finally{pk.transition=st,C=nt}return null}function Xk(et,it,tt,nt){do Ik();while(xk!==null);if((K&6)!==0)throw Error(p$6(327));tt=et.finishedWork;var st=et.finishedLanes;if(tt===null)return null;if(et.finishedWork=null,et.finishedLanes=0,tt===et.current)throw Error(p$6(177));et.callbackNode=null,et.callbackPriority=0;var ct=tt.lanes|tt.childLanes;if(Bc(et,ct),et===R$1&&(Y=R$1=null,Z$1=0),(tt.subtreeFlags&2064)===0&&(tt.flags&2064)===0||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),ct=(tt.flags&15990)!==0,(tt.subtreeFlags&15990)!==0||ct){ct=pk.transition,pk.transition=null;var ht=C;C=1;var gt=K;K|=4,ok.current=null,Pj(et,tt),ek(tt,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=tt,ik(tt),dc(),K=gt,C=ht,pk.transition=ct}else et.current=tt;if(wk&&(wk=!1,xk=et,yk=st),ct=et.pendingLanes,ct===0&&(Si=null),mc(tt.stateNode),Ek(et,B$1()),it!==null)for(nt=et.onRecoverableError,tt=0;tt<it.length;tt++)st=it[tt],nt(st.value,{componentStack:st.stack,digest:st.digest});if(Pi)throw Pi=!1,et=Qi,Qi=null,et;return(yk&1)!==0&&et.tag!==0&&Ik(),ct=et.pendingLanes,(ct&1)!==0?et===Ak?zk++:(zk=0,Ak=et):zk=0,jg(),null}function Ik(){if(xk!==null){var et=Dc(yk),it=pk.transition,tt=C;try{if(pk.transition=null,C=16>et?16:et,xk===null)var nt=!1;else{if(et=xk,xk=null,yk=0,(K&6)!==0)throw Error(p$6(331));var st=K;for(K|=4,V=et.current;V!==null;){var ct=V,ht=ct.child;if((V.flags&16)!==0){var gt=ct.deletions;if(gt!==null){for(var $t=0;$t<gt.length;$t++){var at=gt[$t];for(V=at;V!==null;){var _t=V;switch(_t.tag){case 0:case 11:case 15:Qj(8,_t,ct)}var mt=_t.child;if(mt!==null)mt.return=_t,V=mt;else for(;V!==null;){_t=V;var Tt=_t.sibling,Et=_t.return;if(Tj(_t),_t===at){V=null;break}if(Tt!==null){Tt.return=Et,V=Tt;break}V=Et}}}var Ct=ct.alternate;if(Ct!==null){var kt=Ct.child;if(kt!==null){Ct.child=null;do{var Wt=kt.sibling;kt.sibling=null,kt=Wt}while(kt!==null)}}V=ct}}if((ct.subtreeFlags&2064)!==0&&ht!==null)ht.return=ct,V=ht;else e:for(;V!==null;){if(ct=V,(ct.flags&2048)!==0)switch(ct.tag){case 0:case 11:case 15:Qj(9,ct,ct.return)}var St=ct.sibling;if(St!==null){St.return=ct.return,V=St;break e}V=ct.return}}var It=et.current;for(V=It;V!==null;){ht=V;var bt=ht.child;if((ht.subtreeFlags&2064)!==0&&bt!==null)bt.return=ht,V=bt;else e:for(ht=It;V!==null;){if(gt=V,(gt.flags&2048)!==0)try{switch(gt.tag){case 0:case 11:case 15:Rj(9,gt)}}catch(Gt){W$1(gt,gt.return,Gt)}if(gt===ht){V=null;break e}var Pt=gt.sibling;if(Pt!==null){Pt.return=gt.return,V=Pt;break e}V=gt.return}}if(K=st,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}nt=!0}return nt}finally{C=tt,pk.transition=it}}return!1}function Yk(et,it,tt){it=Ki(tt,it),it=Oi(et,it,1),et=dh(et,it,1),it=L$1(),et!==null&&(Ac(et,1,it),Ek(et,it))}function W$1(et,it,tt){if(et.tag===3)Yk(et,et,tt);else for(;it!==null;){if(it.tag===3){Yk(it,et,tt);break}else if(it.tag===1){var nt=it.stateNode;if(typeof it.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){et=Ki(tt,et),et=Ri(it,et,1),it=dh(it,et,1),et=L$1(),it!==null&&(Ac(it,1,et),Ek(it,et));break}}it=it.return}}function Ui(et,it,tt){var nt=et.pingCache;nt!==null&&nt.delete(it),it=L$1(),et.pingedLanes|=et.suspendedLanes&tt,R$1===et&&(Z$1&tt)===tt&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(et,0):sk|=tt),Ek(et,it)}function Zk(et,it){it===0&&((et.mode&1)===0?it=1:(it=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var tt=L$1();et=Zg(et,it),et!==null&&(Ac(et,it,tt),Ek(et,tt))}function vj(et){var it=et.memoizedState,tt=0;it!==null&&(tt=it.retryLane),Zk(et,tt)}function ck(et,it){var tt=0;switch(et.tag){case 13:var nt=et.stateNode,st=et.memoizedState;st!==null&&(tt=st.retryLane);break;case 19:nt=et.stateNode;break;default:throw Error(p$6(314))}nt!==null&&nt.delete(it),Zk(et,tt)}var Wk;Wk=function(et,it,tt){if(et!==null)if(et.memoizedProps!==it.pendingProps||Wf.current)Ug=!0;else{if((et.lanes&tt)===0&&(it.flags&128)===0)return Ug=!1,zj(et,it,tt);Ug=(et.flags&131072)!==0}else Ug=!1,I$1&&(it.flags&1048576)!==0&&ug(it,ng,it.index);switch(it.lanes=0,it.tag){case 2:var nt=it.type;jj(et,it),et=it.pendingProps;var st=Yf(it,H$1.current);Tg(it,tt),st=Xh(null,it,nt,et,st,tt);var ct=bi();return it.flags|=1,typeof st=="object"&&st!==null&&typeof st.render=="function"&&st.$$typeof===void 0?(it.tag=1,it.memoizedState=null,it.updateQueue=null,Zf(nt)?(ct=!0,cg(it)):ct=!1,it.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,ah(it),st.updater=nh,it.stateNode=st,st._reactInternals=it,rh(it,nt,et,tt),it=kj(null,it,nt,!0,ct,tt)):(it.tag=0,I$1&&ct&&vg(it),Yi(null,it,st,tt),it=it.child),it;case 16:nt=it.elementType;e:{switch(jj(et,it),et=it.pendingProps,st=nt._init,nt=st(nt._payload),it.type=nt,st=it.tag=$k(nt),et=Lg(nt,et),st){case 0:it=dj(null,it,nt,et,tt);break e;case 1:it=ij(null,it,nt,et,tt);break e;case 11:it=Zi(null,it,nt,et,tt);break e;case 14:it=aj(null,it,nt,Lg(nt.type,et),tt);break e}throw Error(p$6(306,nt,""))}return it;case 0:return nt=it.type,st=it.pendingProps,st=it.elementType===nt?st:Lg(nt,st),dj(et,it,nt,st,tt);case 1:return nt=it.type,st=it.pendingProps,st=it.elementType===nt?st:Lg(nt,st),ij(et,it,nt,st,tt);case 3:e:{if(lj(it),et===null)throw Error(p$6(387));nt=it.pendingProps,ct=it.memoizedState,st=ct.element,bh(et,it),gh(it,nt,null,tt);var ht=it.memoizedState;if(nt=ht.element,ct.isDehydrated)if(ct={element:nt,isDehydrated:!1,cache:ht.cache,pendingSuspenseBoundaries:ht.pendingSuspenseBoundaries,transitions:ht.transitions},it.updateQueue.baseState=ct,it.memoizedState=ct,it.flags&256){st=Ki(Error(p$6(423)),it),it=mj(et,it,nt,tt,st);break e}else if(nt!==st){st=Ki(Error(p$6(424)),it),it=mj(et,it,nt,tt,st);break e}else for(yg=Lf(it.stateNode.containerInfo.firstChild),xg=it,I$1=!0,zg=null,tt=Ch(it,null,nt,tt),it.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),nt===st){it=$i(et,it,tt);break e}Yi(et,it,nt,tt)}it=it.child}return it;case 5:return Kh(it),et===null&&Eg(it),nt=it.type,st=it.pendingProps,ct=et!==null?et.memoizedProps:null,ht=st.children,Ef(nt,st)?ht=null:ct!==null&&Ef(nt,ct)&&(it.flags|=32),hj(et,it),Yi(et,it,ht,tt),it.child;case 6:return et===null&&Eg(it),null;case 13:return pj(et,it,tt);case 4:return Ih(it,it.stateNode.containerInfo),nt=it.pendingProps,et===null?it.child=Bh(it,null,nt,tt):Yi(et,it,nt,tt),it.child;case 11:return nt=it.type,st=it.pendingProps,st=it.elementType===nt?st:Lg(nt,st),Zi(et,it,nt,st,tt);case 7:return Yi(et,it,it.pendingProps,tt),it.child;case 8:return Yi(et,it,it.pendingProps.children,tt),it.child;case 12:return Yi(et,it,it.pendingProps.children,tt),it.child;case 10:e:{if(nt=it.type._context,st=it.pendingProps,ct=it.memoizedProps,ht=st.value,G$1(Mg,nt._currentValue),nt._currentValue=ht,ct!==null)if(He(ct.value,ht)){if(ct.children===st.children&&!Wf.current){it=$i(et,it,tt);break e}}else for(ct=it.child,ct!==null&&(ct.return=it);ct!==null;){var gt=ct.dependencies;if(gt!==null){ht=ct.child;for(var $t=gt.firstContext;$t!==null;){if($t.context===nt){if(ct.tag===1){$t=ch(-1,tt&-tt),$t.tag=2;var at=ct.updateQueue;if(at!==null){at=at.shared;var _t=at.pending;_t===null?$t.next=$t:($t.next=_t.next,_t.next=$t),at.pending=$t}}ct.lanes|=tt,$t=ct.alternate,$t!==null&&($t.lanes|=tt),Sg(ct.return,tt,it),gt.lanes|=tt;break}$t=$t.next}}else if(ct.tag===10)ht=ct.type===it.type?null:ct.child;else if(ct.tag===18){if(ht=ct.return,ht===null)throw Error(p$6(341));ht.lanes|=tt,gt=ht.alternate,gt!==null&&(gt.lanes|=tt),Sg(ht,tt,it),ht=ct.sibling}else ht=ct.child;if(ht!==null)ht.return=ct;else for(ht=ct;ht!==null;){if(ht===it){ht=null;break}if(ct=ht.sibling,ct!==null){ct.return=ht.return,ht=ct;break}ht=ht.return}ct=ht}Yi(et,it,st.children,tt),it=it.child}return it;case 9:return st=it.type,nt=it.pendingProps.children,Tg(it,tt),st=Vg(st),nt=nt(st),it.flags|=1,Yi(et,it,nt,tt),it.child;case 14:return nt=it.type,st=Lg(nt,it.pendingProps),st=Lg(nt.type,st),aj(et,it,nt,st,tt);case 15:return cj(et,it,it.type,it.pendingProps,tt);case 17:return nt=it.type,st=it.pendingProps,st=it.elementType===nt?st:Lg(nt,st),jj(et,it),it.tag=1,Zf(nt)?(et=!0,cg(it)):et=!1,Tg(it,tt),ph(it,nt,st),rh(it,nt,st,tt),kj(null,it,nt,!0,et,tt);case 19:return yj(et,it,tt);case 22:return ej(et,it,tt)}throw Error(p$6(156,it.tag))};function Gk(et,it){return ac(et,it)}function al(et,it,tt,nt){this.tag=et,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=it,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,it,tt,nt){return new al(et,it,tt,nt)}function bj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function $k(et){if(typeof et=="function")return bj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function wh(et,it){var tt=et.alternate;return tt===null?(tt=Bg(et.tag,it,et.key,et.mode),tt.elementType=et.elementType,tt.type=et.type,tt.stateNode=et.stateNode,tt.alternate=et,et.alternate=tt):(tt.pendingProps=it,tt.type=et.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=et.flags&14680064,tt.childLanes=et.childLanes,tt.lanes=et.lanes,tt.child=et.child,tt.memoizedProps=et.memoizedProps,tt.memoizedState=et.memoizedState,tt.updateQueue=et.updateQueue,it=et.dependencies,tt.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext},tt.sibling=et.sibling,tt.index=et.index,tt.ref=et.ref,tt}function yh(et,it,tt,nt,st,ct){var ht=2;if(nt=et,typeof et=="function")bj(et)&&(ht=1);else if(typeof et=="string")ht=5;else e:switch(et){case ya:return Ah(tt.children,st,ct,it);case za:ht=8,st|=8;break;case Aa:return et=Bg(12,tt,it,st|2),et.elementType=Aa,et.lanes=ct,et;case Ea:return et=Bg(13,tt,it,st),et.elementType=Ea,et.lanes=ct,et;case Fa:return et=Bg(19,tt,it,st),et.elementType=Fa,et.lanes=ct,et;case Ia:return qj(tt,st,ct,it);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:ht=10;break e;case Ca:ht=9;break e;case Da:ht=11;break e;case Ga:ht=14;break e;case Ha:ht=16,nt=null;break e}throw Error(p$6(130,et==null?et:typeof et,""))}return it=Bg(ht,tt,it,st),it.elementType=et,it.type=nt,it.lanes=ct,it}function Ah(et,it,tt,nt){return et=Bg(7,et,nt,it),et.lanes=tt,et}function qj(et,it,tt,nt){return et=Bg(22,et,nt,it),et.elementType=Ia,et.lanes=tt,et.stateNode={isHidden:!1},et}function xh(et,it,tt){return et=Bg(6,et,null,it),et.lanes=tt,et}function zh(et,it,tt){return it=Bg(4,et.children!==null?et.children:[],et.key,it),it.lanes=tt,it.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},it}function bl(et,it,tt,nt,st){this.tag=it,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=st,this.mutableSourceEagerHydrationData=null}function cl(et,it,tt,nt,st,ct,ht,gt,$t){return et=new bl(et,it,tt,gt,$t),it===1?(it=1,ct===!0&&(it|=8)):it=0,ct=Bg(3,null,null,it),et.current=ct,ct.stateNode=et,ct.memoizedState={element:nt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(ct),et}function dl(et,it,tt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:et,containerInfo:it,implementation:tt}}function el(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$6(170));var it=et;do{switch(it.tag){case 3:it=it.stateNode.context;break e;case 1:if(Zf(it.type)){it=it.stateNode.__reactInternalMemoizedMergedChildContext;break e}}it=it.return}while(it!==null);throw Error(p$6(171))}if(et.tag===1){var tt=et.type;if(Zf(tt))return bg(et,tt,it)}return it}function fl(et,it,tt,nt,st,ct,ht,gt,$t){return et=cl(tt,nt,!0,et,st,ct,ht,gt,$t),et.context=el(null),tt=et.current,nt=L$1(),st=lh(tt),ct=ch(nt,st),ct.callback=it!=null?it:null,dh(tt,ct,st),et.current.lanes=st,Ac(et,st,nt),Ek(et,nt),et}function gl(et,it,tt,nt){var st=it.current,ct=L$1(),ht=lh(st);return tt=el(tt),it.context===null?it.context=tt:it.pendingContext=tt,it=ch(ct,ht),it.payload={element:et},nt=nt===void 0?null:nt,nt!==null&&(it.callback=nt),et=dh(st,it,ht),et!==null&&(mh(et,st,ht,ct),eh(et,st,ht)),ht}function hl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function il(et,it){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var tt=et.retryLane;et.retryLane=tt!==0&&tt<it?tt:it}}function jl(et,it){il(et,it),(et=et.alternate)&&il(et,it)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(et){console.error(et)};function ml(et){this._internalRoot=et}nl.prototype.render=ml.prototype.render=function(et){var it=this._internalRoot;if(it===null)throw Error(p$6(409));gl(et,it,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var it=et.containerInfo;Sk(function(){gl(null,et,null,null)}),it[uf]=null}};function nl(et){this._internalRoot=et}nl.prototype.unstable_scheduleHydration=function(et){if(et){var it=Hc();et={blockedOn:null,target:et,priority:it};for(var tt=0;tt<Qc.length&&it!==0&&it<Qc[tt].priority;tt++);Qc.splice(tt,0,et),tt===0&&Vc(et)}};function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function pl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(et,it,tt,nt,st){if(st){if(typeof nt=="function"){var ct=nt;nt=function(){var at=hl(ht);ct.call(at)}}var ht=fl(it,nt,et,0,null,!1,!1,"",ql);return et._reactRootContainer=ht,et[uf]=ht.current,sf(et.nodeType===8?et.parentNode:et),Sk(),ht}for(;st=et.lastChild;)et.removeChild(st);if(typeof nt=="function"){var gt=nt;nt=function(){var at=hl($t);gt.call(at)}}var $t=cl(et,0,!1,null,null,!1,!1,"",ql);return et._reactRootContainer=$t,et[uf]=$t.current,sf(et.nodeType===8?et.parentNode:et),Sk(function(){gl(it,$t,tt,nt)}),$t}function sl(et,it,tt,nt,st){var ct=tt._reactRootContainer;if(ct){var ht=ct;if(typeof st=="function"){var gt=st;st=function(){var $t=hl(ht);gt.call($t)}}gl(it,ht,et,st)}else ht=rl(tt,it,et,st,nt);return hl(ht)}Ec=function(et){switch(et.tag){case 3:var it=et.stateNode;if(it.current.memoizedState.isDehydrated){var tt=tc(it.pendingLanes);tt!==0&&(Cc(it,tt|1),Ek(it,B$1()),(K&6)===0&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(et,1);if(nt!==null){var st=L$1();mh(nt,et,1,st)}}),jl(et,1)}};Fc=function(et){if(et.tag===13){var it=Zg(et,134217728);if(it!==null){var tt=L$1();mh(it,et,134217728,tt)}jl(et,134217728)}};Gc=function(et){if(et.tag===13){var it=lh(et),tt=Zg(et,it);if(tt!==null){var nt=L$1();mh(tt,et,it,nt)}jl(et,it)}};Hc=function(){return C};Ic=function(et,it){var tt=C;try{return C=et,it()}finally{C=tt}};yb=function(et,it,tt){switch(it){case"input":if(bb(et,tt),it=tt.name,tt.type==="radio"&&it!=null){for(tt=et;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+it)+'][type="radio"]'),it=0;it<tt.length;it++){var nt=tt[it];if(nt!==et&&nt.form===et.form){var st=Db(nt);if(!st)throw Error(p$6(90));Wa(nt),bb(nt,st)}}}break;case"textarea":ib(et,tt);break;case"select":it=tt.value,it!=null&&fb(et,!!tt.multiple,it,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(et,it){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(it))throw Error(p$6(200));return dl(et,it,null,tt)};reactDom_production_min.createRoot=function(et,it){if(!ol(et))throw Error(p$6(299));var tt=!1,nt="",st=ll;return it!=null&&(it.unstable_strictMode===!0&&(tt=!0),it.identifierPrefix!==void 0&&(nt=it.identifierPrefix),it.onRecoverableError!==void 0&&(st=it.onRecoverableError)),it=cl(et,1,!1,null,null,tt,!1,nt,st),et[uf]=it.current,sf(et.nodeType===8?et.parentNode:et),new ml(it)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var it=et._reactInternals;if(it===void 0)throw typeof et.render=="function"?Error(p$6(188)):(et=Object.keys(et).join(","),Error(p$6(268,et)));return et=Zb(it),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Sk(et)};reactDom_production_min.hydrate=function(et,it,tt){if(!pl(it))throw Error(p$6(200));return sl(null,et,it,!0,tt)};reactDom_production_min.hydrateRoot=function(et,it,tt){if(!ol(et))throw Error(p$6(405));var nt=tt!=null&&tt.hydratedSources||null,st=!1,ct="",ht=ll;if(tt!=null&&(tt.unstable_strictMode===!0&&(st=!0),tt.identifierPrefix!==void 0&&(ct=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(ht=tt.onRecoverableError)),it=fl(it,null,et,1,tt!=null?tt:null,st,!1,ct,ht),et[uf]=it.current,sf(et),nt)for(et=0;et<nt.length;et++)tt=nt[et],st=tt._getVersion,st=st(tt._source),it.mutableSourceEagerHydrationData==null?it.mutableSourceEagerHydrationData=[tt,st]:it.mutableSourceEagerHydrationData.push(tt,st);return new nl(it)};reactDom_production_min.render=function(et,it,tt){if(!pl(it))throw Error(p$6(200));return sl(null,et,it,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(et){if(!pl(et))throw Error(p$6(40));return et._reactRootContainer?(Sk(function(){sl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,it,tt,nt){if(!pl(tt))throw Error(p$6(200));if(et==null||et._reactInternals===void 0)throw Error(p$6(38));return sl(et,it,tt,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(et){function it(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(it)}catch(tt){console.error(tt)}}it(),et.exports=reactDom_production_min})(reactDom);var createRoot,m$5=reactDom.exports;createRoot=m$5.createRoot,m$5.hydrateRoot;function r$4(et){var it,tt,nt="";if(typeof et=="string"||typeof et=="number")nt+=et;else if(typeof et=="object")if(Array.isArray(et))for(it=0;it<et.length;it++)et[it]&&(tt=r$4(et[it]))&&(nt&&(nt+=" "),nt+=tt);else for(it in et)et[it]&&(nt&&(nt+=" "),nt+=it);return nt}function clsx(){for(var et,it,tt=0,nt="";tt<arguments.length;)(et=arguments[tt++])&&(it=r$4(et))&&(nt&&(nt+=" "),nt+=it);return nt}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=react.exports;function h$4(et,it){return et===it&&(et!==0||1/et===1/it)||et!==et&&it!==it}var k$4=typeof Object.is=="function"?Object.is:h$4,l$4=e$2.useState,m$4=e$2.useEffect,n$5=e$2.useLayoutEffect,p$5=e$2.useDebugValue;function q$5(et,it){var tt=it(),nt=l$4({inst:{value:tt,getSnapshot:it}}),st=nt[0].inst,ct=nt[1];return n$5(function(){st.value=tt,st.getSnapshot=it,r$3(st)&&ct({inst:st})},[et,tt,it]),m$4(function(){return r$3(st)&&ct({inst:st}),et(function(){r$3(st)&&ct({inst:st})})},[et]),p$5(tt),tt}function r$3(et){var it=et.getSnapshot;et=et.value;try{var tt=it();return!k$4(et,tt)}catch{return!0}}function t$4(et,it){return it()}var u$3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$5;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$3;(function(et){et.exports=useSyncExternalStoreShim_production_min})(shim);var withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$3=react.exports,n$4=shim.exports;function p$4(et,it){return et===it&&(et!==0||1/et===1/it)||et!==et&&it!==it}var q$4=typeof Object.is=="function"?Object.is:p$4,r$2=n$4.useSyncExternalStore,t$3=h$3.useRef,u$2=h$3.useEffect,v$3=h$3.useMemo,w$2=h$3.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(et,it,tt,nt,st){var ct=t$3(null);if(ct.current===null){var ht={hasValue:!1,value:null};ct.current=ht}else ht=ct.current;ct=v$3(function(){function $t(Et){if(!at){if(at=!0,_t=Et,Et=nt(Et),st!==void 0&&ht.hasValue){var Ct=ht.value;if(st(Ct,Et))return mt=Ct}return mt=Et}if(Ct=mt,q$4(_t,Et))return Ct;var kt=nt(Et);return st!==void 0&&st(Ct,kt)?Ct:(_t=Et,mt=kt)}var at=!1,_t,mt,Tt=tt===void 0?null:tt;return[function(){return $t(it())},Tt===null?void 0:function(){return $t(Tt())}]},[it,tt,nt,st]);var gt=r$2(et,ct[0],ct[1]);return u$2(function(){ht.hasValue=!0,ht.value=gt},[gt]),w$2(gt),gt};(function(et){et.exports=withSelector_production_min})(withSelector);function defaultNoopBatch(et){et()}let batch=defaultNoopBatch;const setBatch=et=>batch=et,getBatch=()=>batch,ReactReduxContext=react.exports.createContext(null);function useReduxContext(){return react.exports.useContext(ReactReduxContext)}const notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector=notInitialized;const initializeUseSelector=et=>{useSyncExternalStoreWithSelector=et},refEquality=(et,it)=>et===it;function createSelectorHook(et=ReactReduxContext){const it=et===ReactReduxContext?useReduxContext:()=>react.exports.useContext(et);return function(nt,st=refEquality){const{store:ct,subscription:ht,getServerState:gt}=it(),$t=useSyncExternalStoreWithSelector(ht.addNestedSub,ct.getState,gt||ct.getState,nt,st);return react.exports.useDebugValue($t),$t}}const useSelector=createSelectorHook();var reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=typeof Symbol=="function"&&Symbol.for,c$2=b$2?Symbol.for("react.element"):60103,d$2=b$2?Symbol.for("react.portal"):60106,e$1=b$2?Symbol.for("react.fragment"):60107,f$3=b$2?Symbol.for("react.strict_mode"):60108,g$2=b$2?Symbol.for("react.profiler"):60114,h$2=b$2?Symbol.for("react.provider"):60109,k$3=b$2?Symbol.for("react.context"):60110,l$3=b$2?Symbol.for("react.async_mode"):60111,m$3=b$2?Symbol.for("react.concurrent_mode"):60111,n$3=b$2?Symbol.for("react.forward_ref"):60112,p$3=b$2?Symbol.for("react.suspense"):60113,q$3=b$2?Symbol.for("react.suspense_list"):60120,r$1=b$2?Symbol.for("react.memo"):60115,t$2=b$2?Symbol.for("react.lazy"):60116,v$2=b$2?Symbol.for("react.block"):60121,w$1=b$2?Symbol.for("react.fundamental"):60117,x$1=b$2?Symbol.for("react.responder"):60118,y$1=b$2?Symbol.for("react.scope"):60119;function z$1(et){if(typeof et=="object"&&et!==null){var it=et.$$typeof;switch(it){case c$2:switch(et=et.type,et){case l$3:case m$3:case e$1:case g$2:case f$3:case p$3:return et;default:switch(et=et&&et.$$typeof,et){case k$3:case n$3:case t$2:case r$1:case h$2:return et;default:return it}}case d$2:return it}}}function A$1(et){return z$1(et)===m$3}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$3;reactIs_production_min$1.ContextConsumer=k$3;reactIs_production_min$1.ContextProvider=h$2;reactIs_production_min$1.Element=c$2;reactIs_production_min$1.ForwardRef=n$3;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$2;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$3;reactIs_production_min$1.Suspense=p$3;reactIs_production_min$1.isAsyncMode=function(et){return A$1(et)||z$1(et)===l$3};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(et){return z$1(et)===k$3};reactIs_production_min$1.isContextProvider=function(et){return z$1(et)===h$2};reactIs_production_min$1.isElement=function(et){return typeof et=="object"&&et!==null&&et.$$typeof===c$2};reactIs_production_min$1.isForwardRef=function(et){return z$1(et)===n$3};reactIs_production_min$1.isFragment=function(et){return z$1(et)===e$1};reactIs_production_min$1.isLazy=function(et){return z$1(et)===t$2};reactIs_production_min$1.isMemo=function(et){return z$1(et)===r$1};reactIs_production_min$1.isPortal=function(et){return z$1(et)===d$2};reactIs_production_min$1.isProfiler=function(et){return z$1(et)===g$2};reactIs_production_min$1.isStrictMode=function(et){return z$1(et)===f$3};reactIs_production_min$1.isSuspense=function(et){return z$1(et)===p$3};reactIs_production_min$1.isValidElementType=function(et){return typeof et=="string"||typeof et=="function"||et===e$1||et===m$3||et===g$2||et===f$3||et===p$3||et===q$3||typeof et=="object"&&et!==null&&(et.$$typeof===t$2||et.$$typeof===r$1||et.$$typeof===h$2||et.$$typeof===k$3||et.$$typeof===n$3||et.$$typeof===w$1||et.$$typeof===x$1||et.$$typeof===y$1||et.$$typeof===v$2)};reactIs_production_min$1.typeOf=z$1;(function(et){et.exports=reactIs_production_min$1})(reactIs$2);var reactIs$1=reactIs$2.exports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$1=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f$2=Symbol.for("react.profiler"),g$1=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$2=Symbol.for("react.forward_ref"),m$2=Symbol.for("react.suspense"),n$2=Symbol.for("react.suspense_list"),p$2=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1(et){if(typeof et=="object"&&et!==null){var it=et.$$typeof;switch(it){case b$1:switch(et=et.type,et){case d$1:case f$2:case e:case m$2:case n$2:return et;default:switch(et=et&&et.$$typeof,et){case k$2:case h$1:case l$2:case q$2:case p$2:case g$1:return et;default:return it}}case c$1:return it}}}reactIs_production_min.ContextConsumer=h$1;reactIs_production_min.ContextProvider=g$1;reactIs_production_min.Element=b$1;reactIs_production_min.ForwardRef=l$2;reactIs_production_min.Fragment=d$1;reactIs_production_min.Lazy=q$2;reactIs_production_min.Memo=p$2;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f$2;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m$2;reactIs_production_min.SuspenseList=n$2;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(et){return v$1(et)===h$1};reactIs_production_min.isContextProvider=function(et){return v$1(et)===g$1};reactIs_production_min.isElement=function(et){return typeof et=="object"&&et!==null&&et.$$typeof===b$1};reactIs_production_min.isForwardRef=function(et){return v$1(et)===l$2};reactIs_production_min.isFragment=function(et){return v$1(et)===d$1};reactIs_production_min.isLazy=function(et){return v$1(et)===q$2};reactIs_production_min.isMemo=function(et){return v$1(et)===p$2};reactIs_production_min.isPortal=function(et){return v$1(et)===c$1};reactIs_production_min.isProfiler=function(et){return v$1(et)===f$2};reactIs_production_min.isStrictMode=function(et){return v$1(et)===e};reactIs_production_min.isSuspense=function(et){return v$1(et)===m$2};reactIs_production_min.isSuspenseList=function(et){return v$1(et)===n$2};reactIs_production_min.isValidElementType=function(et){return typeof et=="string"||typeof et=="function"||et===d$1||et===f$2||et===e||et===m$2||et===n$2||et===t$1||typeof et=="object"&&et!==null&&(et.$$typeof===q$2||et.$$typeof===p$2||et.$$typeof===g$1||et.$$typeof===h$1||et.$$typeof===l$2||et.$$typeof===u$1||et.getModuleId!==void 0)};reactIs_production_min.typeOf=v$1;(function(et){et.exports=reactIs_production_min})(reactIs);function createListenerCollection(){const et=getBatch();let it=null,tt=null;return{clear(){it=null,tt=null},notify(){et(()=>{let nt=it;for(;nt;)nt.callback(),nt=nt.next})},get(){let nt=[],st=it;for(;st;)nt.push(st),st=st.next;return nt},subscribe(nt){let st=!0,ct=tt={callback:nt,next:null,prev:tt};return ct.prev?ct.prev.next=ct:it=ct,function(){!st||it===null||(st=!1,ct.next?ct.next.prev=ct.prev:tt=ct.prev,ct.prev?ct.prev.next=ct.next:it=ct.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription(et,it){let tt,nt=nullListeners;function st(mt){return $t(),nt.subscribe(mt)}function ct(){nt.notify()}function ht(){_t.onStateChange&&_t.onStateChange()}function gt(){return Boolean(tt)}function $t(){tt||(tt=it?it.addNestedSub(ht):et.subscribe(ht),nt=createListenerCollection())}function at(){tt&&(tt(),tt=void 0,nt.clear(),nt=nullListeners)}const _t={addNestedSub:st,notifyNestedSubs:ct,handleChangeWrapper:ht,isSubscribed:gt,trySubscribe:$t,tryUnsubscribe:at,getListeners:()=>nt};return _t}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect=canUseDOM?react.exports.useLayoutEffect:react.exports.useEffect;var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=react.exports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(et,it,tt){var nt,st={},ct=null,ht=null;tt!==void 0&&(ct=""+tt),it.key!==void 0&&(ct=""+it.key),it.ref!==void 0&&(ht=it.ref);for(nt in it)m$1.call(it,nt)&&!p$1.hasOwnProperty(nt)&&(st[nt]=it[nt]);if(et&&et.defaultProps)for(nt in it=et.defaultProps,it)st[nt]===void 0&&(st[nt]=it[nt]);return{$$typeof:k$1,type:et,key:ct,ref:ht,props:st,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;(function(et){et.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntime.exports.Fragment,jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;function Provider({store:et,context:it,children:tt,serverState:nt}){const st=react.exports.useMemo(()=>{const gt=createSubscription(et);return{store:et,subscription:gt,getServerState:nt?()=>nt:void 0}},[et,nt]),ct=react.exports.useMemo(()=>et.getState(),[et]);return useIsomorphicLayoutEffect(()=>{const{subscription:gt}=st;return gt.onStateChange=gt.notifyNestedSubs,gt.trySubscribe(),ct!==et.getState()&&gt.notifyNestedSubs(),()=>{gt.tryUnsubscribe(),gt.onStateChange=void 0}},[st,ct]),jsx((it||ReactReduxContext).Provider,{value:st,children:tt})}function createStoreHook(et=ReactReduxContext){const it=et===ReactReduxContext?useReduxContext:()=>react.exports.useContext(et);return function(){const{store:nt}=it();return nt}}const useStore=createStoreHook();function createDispatchHook(et=ReactReduxContext){const it=et===ReactReduxContext?useStore:createStoreHook(et);return function(){return it().dispatch}}const useDispatch=createDispatchHook();initializeUseSelector(withSelector.exports.useSyncExternalStoreWithSelector);setBatch(reactDom.exports.unstable_batchedUpdates);function n(et){for(var it=arguments.length,tt=Array(it>1?it-1:0),nt=1;nt<it;nt++)tt[nt-1]=arguments[nt];throw Error("[Immer] minified error nr: "+et+(tt.length?" "+tt.map(function(st){return"'"+st+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(et){return!!et&&!!et[Q]}function t(et){return!!et&&(function(it){if(!it||typeof it!="object")return!1;var tt=Object.getPrototypeOf(it);if(tt===null)return!0;var nt=Object.hasOwnProperty.call(tt,"constructor")&&tt.constructor;return nt===Object||typeof nt=="function"&&Function.toString.call(nt)===Z}(et)||Array.isArray(et)||!!et[L]||!!et.constructor[L]||s(et)||v(et))}function i(et,it,tt){tt===void 0&&(tt=!1),o(et)===0?(tt?Object.keys:nn)(et).forEach(function(nt){tt&&typeof nt=="symbol"||it(nt,et[nt],et)}):et.forEach(function(nt,st){return it(st,nt,et)})}function o(et){var it=et[Q];return it?it.i>3?it.i-4:it.i:Array.isArray(et)?1:s(et)?2:v(et)?3:0}function u(et,it){return o(et)===2?et.has(it):Object.prototype.hasOwnProperty.call(et,it)}function a(et,it){return o(et)===2?et.get(it):et[it]}function f(et,it,tt){var nt=o(et);nt===2?et.set(it,tt):nt===3?(et.delete(it),et.add(tt)):et[it]=tt}function c(et,it){return et===it?et!==0||1/et==1/it:et!=et&&it!=it}function s(et){return X&&et instanceof Map}function v(et){return q&&et instanceof Set}function p(et){return et.o||et.t}function l(et){if(Array.isArray(et))return Array.prototype.slice.call(et);var it=rn(et);delete it[Q];for(var tt=nn(it),nt=0;nt<tt.length;nt++){var st=tt[nt],ct=it[st];ct.writable===!1&&(ct.writable=!0,ct.configurable=!0),(ct.get||ct.set)&&(it[st]={configurable:!0,writable:!0,enumerable:ct.enumerable,value:et[st]})}return Object.create(Object.getPrototypeOf(et),it)}function d(et,it){return it===void 0&&(it=!1),y(et)||r(et)||!t(et)||(o(et)>1&&(et.set=et.add=et.clear=et.delete=h),Object.freeze(et),it&&i(et,function(tt,nt){return d(nt,!0)},!0)),et}function h(){n(2)}function y(et){return et==null||typeof et!="object"||Object.isFrozen(et)}function b(et){var it=tn[et];return it||n(18,et),it}function m(et,it){tn[et]||(tn[et]=it)}function _(){return U}function j(et,it){it&&(b("Patches"),et.u=[],et.s=[],et.v=it)}function O(et){g(et),et.p.forEach(S),et.p=null}function g(et){et===U&&(U=et.l)}function w(et){return U={p:[],l:U,h:et,m:!0,_:0}}function S(et){var it=et[Q];it.i===0||it.i===1?it.j():it.O=!0}function P(et,it){it._=it.p.length;var tt=it.p[0],nt=et!==void 0&&et!==tt;return it.h.g||b("ES5").S(it,et,nt),nt?(tt[Q].P&&(O(it),n(4)),t(et)&&(et=M(it,et),it.l||x(it,et)),it.u&&b("Patches").M(tt[Q].t,et,it.u,it.s)):et=M(it,tt,[]),O(it),it.u&&it.v(it.u,it.s),et!==H?et:void 0}function M(et,it,tt){if(y(it))return it;var nt=it[Q];if(!nt)return i(it,function(ct,ht){return A(et,nt,it,ct,ht,tt)},!0),it;if(nt.A!==et)return it;if(!nt.P)return x(et,nt.t,!0),nt.t;if(!nt.I){nt.I=!0,nt.A._--;var st=nt.i===4||nt.i===5?nt.o=l(nt.k):nt.o;i(nt.i===3?new Set(st):st,function(ct,ht){return A(et,nt,st,ct,ht,tt)}),x(et,st,!1),tt&&et.u&&b("Patches").R(nt,tt,et.u,et.s)}return nt.o}function A(et,it,tt,nt,st,ct){if(r(st)){var ht=M(et,st,ct&&it&&it.i!==3&&!u(it.D,nt)?ct.concat(nt):void 0);if(f(tt,nt,ht),!r(ht))return;et.m=!1}if(t(st)&&!y(st)){if(!et.h.F&&et._<1)return;M(et,st),it&&it.A.l||x(et,st)}}function x(et,it,tt){tt===void 0&&(tt=!1),et.h.F&&et.m&&d(it,tt)}function z(et,it){var tt=et[Q];return(tt?p(tt):et)[it]}function I(et,it){if(it in et)for(var tt=Object.getPrototypeOf(et);tt;){var nt=Object.getOwnPropertyDescriptor(tt,it);if(nt)return nt;tt=Object.getPrototypeOf(tt)}}function k(et){et.P||(et.P=!0,et.l&&k(et.l))}function E(et){et.o||(et.o=l(et.t))}function R(et,it,tt){var nt=s(it)?b("MapSet").N(it,tt):v(it)?b("MapSet").T(it,tt):et.g?function(st,ct){var ht=Array.isArray(st),gt={i:ht?1:0,A:ct?ct.A:_(),P:!1,I:!1,D:{},l:ct,t:st,k:null,o:null,j:null,C:!1},$t=gt,at=en$1;ht&&($t=[gt],at=on);var _t=Proxy.revocable($t,at),mt=_t.revoke,Tt=_t.proxy;return gt.k=Tt,gt.j=mt,Tt}(it,tt):b("ES5").J(it,tt);return(tt?tt.A:_()).p.push(nt),nt}function D(et){return r(et)||n(22,et),function it(tt){if(!t(tt))return tt;var nt,st=tt[Q],ct=o(tt);if(st){if(!st.P&&(st.i<4||!b("ES5").K(st)))return st.t;st.I=!0,nt=F(tt,ct),st.I=!1}else nt=F(tt,ct);return i(nt,function(ht,gt){st&&a(st.t,ht)===gt||f(nt,ht,it(gt))}),ct===3?new Set(nt):nt}(et)}function F(et,it){switch(it){case 2:return new Map(et);case 3:return Array.from(et)}return l(et)}function N(){function et(ct,ht){var gt=st[ct];return gt?gt.enumerable=ht:st[ct]=gt={configurable:!0,enumerable:ht,get:function(){var $t=this[Q];return en$1.get($t,ct)},set:function($t){var at=this[Q];en$1.set(at,ct,$t)}},gt}function it(ct){for(var ht=ct.length-1;ht>=0;ht--){var gt=ct[ht][Q];if(!gt.P)switch(gt.i){case 5:nt(gt)&&k(gt);break;case 4:tt(gt)&&k(gt)}}}function tt(ct){for(var ht=ct.t,gt=ct.k,$t=nn(gt),at=$t.length-1;at>=0;at--){var _t=$t[at];if(_t!==Q){var mt=ht[_t];if(mt===void 0&&!u(ht,_t))return!0;var Tt=gt[_t],Et=Tt&&Tt[Q];if(Et?Et.t!==mt:!c(Tt,mt))return!0}}var Ct=!!ht[Q];return $t.length!==nn(ht).length+(Ct?0:1)}function nt(ct){var ht=ct.k;if(ht.length!==ct.t.length)return!0;var gt=Object.getOwnPropertyDescriptor(ht,ht.length-1);if(gt&&!gt.get)return!0;for(var $t=0;$t<ht.length;$t++)if(!ht.hasOwnProperty($t))return!0;return!1}var st={};m("ES5",{J:function(ct,ht){var gt=Array.isArray(ct),$t=function(_t,mt){if(_t){for(var Tt=Array(mt.length),Et=0;Et<mt.length;Et++)Object.defineProperty(Tt,""+Et,et(Et,!0));return Tt}var Ct=rn(mt);delete Ct[Q];for(var kt=nn(Ct),Wt=0;Wt<kt.length;Wt++){var St=kt[Wt];Ct[St]=et(St,_t||!!Ct[St].enumerable)}return Object.create(Object.getPrototypeOf(mt),Ct)}(gt,ct),at={i:gt?5:4,A:ht?ht.A:_(),P:!1,I:!1,D:{},l:ht,t:ct,k:$t,o:null,O:!1,C:!1};return Object.defineProperty($t,Q,{value:at,writable:!0}),$t},S:function(ct,ht,gt){gt?r(ht)&&ht[Q].A===ct&&it(ct.p):(ct.u&&function $t(at){if(at&&typeof at=="object"){var _t=at[Q];if(_t){var mt=_t.t,Tt=_t.k,Et=_t.D,Ct=_t.i;if(Ct===4)i(Tt,function(bt){bt!==Q&&(mt[bt]!==void 0||u(mt,bt)?Et[bt]||$t(Tt[bt]):(Et[bt]=!0,k(_t)))}),i(mt,function(bt){Tt[bt]!==void 0||u(Tt,bt)||(Et[bt]=!1,k(_t))});else if(Ct===5){if(nt(_t)&&(k(_t),Et.length=!0),Tt.length<mt.length)for(var kt=Tt.length;kt<mt.length;kt++)Et[kt]=!1;else for(var Wt=mt.length;Wt<Tt.length;Wt++)Et[Wt]=!0;for(var St=Math.min(Tt.length,mt.length),It=0;It<St;It++)Tt.hasOwnProperty(It)||(Et[It]=!0),Et[It]===void 0&&$t(Tt[It])}}}}(ct.p[0]),it(ct.p))},K:function(ct){return ct.i===4?tt(ct):nt(ct)}})}var G,U,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X=typeof Map<"u",q=typeof Set<"u",B=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Z=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(et){return Object.getOwnPropertyNames(et).concat(Object.getOwnPropertySymbols(et))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(et){var it={};return nn(et).forEach(function(tt){it[tt]=Object.getOwnPropertyDescriptor(et,tt)}),it},tn={},en$1={get:function(et,it){if(it===Q)return et;var tt=p(et);if(!u(tt,it))return function(st,ct,ht){var gt,$t=I(ct,ht);return $t?"value"in $t?$t.value:(gt=$t.get)===null||gt===void 0?void 0:gt.call(st.k):void 0}(et,tt,it);var nt=tt[it];return et.I||!t(nt)?nt:nt===z(et.t,it)?(E(et),et.o[it]=R(et.A.h,nt,et)):nt},has:function(et,it){return it in p(et)},ownKeys:function(et){return Reflect.ownKeys(p(et))},set:function(et,it,tt){var nt=I(p(et),it);if(nt!=null&&nt.set)return nt.set.call(et.k,tt),!0;if(!et.P){var st=z(p(et),it),ct=st==null?void 0:st[Q];if(ct&&ct.t===tt)return et.o[it]=tt,et.D[it]=!1,!0;if(c(tt,st)&&(tt!==void 0||u(et.t,it)))return!0;E(et),k(et)}return et.o[it]===tt&&typeof tt!="number"&&(tt!==void 0||it in et.o)||(et.o[it]=tt,et.D[it]=!0,!0)},deleteProperty:function(et,it){return z(et.t,it)!==void 0||it in et.t?(et.D[it]=!1,E(et),k(et)):delete et.D[it],et.o&&delete et.o[it],!0},getOwnPropertyDescriptor:function(et,it){var tt=p(et),nt=Reflect.getOwnPropertyDescriptor(tt,it);return nt&&{writable:!0,configurable:et.i!==1||it!=="length",enumerable:nt.enumerable,value:tt[it]}},defineProperty:function(){n(11)},getPrototypeOf:function(et){return Object.getPrototypeOf(et.t)},setPrototypeOf:function(){n(12)}},on={};i(en$1,function(et,it){on[et]=function(){return arguments[0]=arguments[0][0],it.apply(this,arguments)}}),on.deleteProperty=function(et,it){return on.set.call(this,et,it,void 0)},on.set=function(et,it,tt){return en$1.set.call(this,et[0],it,tt,et[0])};var un=function(){function et(tt){var nt=this;this.g=B,this.F=!0,this.produce=function(st,ct,ht){if(typeof st=="function"&&typeof ct!="function"){var gt=ct;ct=st;var $t=nt;return function(kt){var Wt=this;kt===void 0&&(kt=gt);for(var St=arguments.length,It=Array(St>1?St-1:0),bt=1;bt<St;bt++)It[bt-1]=arguments[bt];return $t.produce(kt,function(Pt){var Gt;return(Gt=ct).call.apply(Gt,[Wt,Pt].concat(It))})}}var at;if(typeof ct!="function"&&n(6),ht!==void 0&&typeof ht!="function"&&n(7),t(st)){var _t=w(nt),mt=R(nt,st,void 0),Tt=!0;try{at=ct(mt),Tt=!1}finally{Tt?O(_t):g(_t)}return typeof Promise<"u"&&at instanceof Promise?at.then(function(kt){return j(_t,ht),P(kt,_t)},function(kt){throw O(_t),kt}):(j(_t,ht),P(at,_t))}if(!st||typeof st!="object"){if((at=ct(st))===void 0&&(at=st),at===H&&(at=void 0),nt.F&&d(at,!0),ht){var Et=[],Ct=[];b("Patches").M(st,at,Et,Ct),ht(Et,Ct)}return at}n(21,st)},this.produceWithPatches=function(st,ct){if(typeof st=="function")return function(at){for(var _t=arguments.length,mt=Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)mt[Tt-1]=arguments[Tt];return nt.produceWithPatches(at,function(Et){return st.apply(void 0,[Et].concat(mt))})};var ht,gt,$t=nt.produce(st,ct,function(at,_t){ht=at,gt=_t});return typeof Promise<"u"&&$t instanceof Promise?$t.then(function(at){return[at,ht,gt]}):[$t,ht,gt]},typeof(tt==null?void 0:tt.useProxies)=="boolean"&&this.setUseProxies(tt.useProxies),typeof(tt==null?void 0:tt.autoFreeze)=="boolean"&&this.setAutoFreeze(tt.autoFreeze)}var it=et.prototype;return it.createDraft=function(tt){t(tt)||n(8),r(tt)&&(tt=D(tt));var nt=w(this),st=R(this,tt,void 0);return st[Q].C=!0,g(nt),st},it.finishDraft=function(tt,nt){var st=tt&&tt[Q],ct=st.A;return j(ct,nt),P(void 0,ct)},it.setAutoFreeze=function(tt){this.F=tt},it.setUseProxies=function(tt){tt&&!B&&n(20),this.g=tt},it.applyPatches=function(tt,nt){var st;for(st=nt.length-1;st>=0;st--){var ct=nt[st];if(ct.path.length===0&&ct.op==="replace"){tt=ct.value;break}}st>-1&&(nt=nt.slice(st+1));var ht=b("Patches").$;return r(tt)?ht(tt,nt):this.produce(tt,function(gt){return ht(gt,nt)})},et}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _defineProperty(et,it,tt){return it in et?Object.defineProperty(et,it,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[it]=tt,et}function ownKeys(et,it){var tt=Object.keys(et);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(et);it&&(nt=nt.filter(function(st){return Object.getOwnPropertyDescriptor(et,st).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2(et){for(var it=1;it<arguments.length;it++){var tt=arguments[it]!=null?arguments[it]:{};it%2?ownKeys(Object(tt),!0).forEach(function(nt){_defineProperty(et,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(tt)):ownKeys(Object(tt)).forEach(function(nt){Object.defineProperty(et,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return et}function formatProdErrorMessage(et){return"Minified Redux error #"+et+"; visit https://redux.js.org/Errors?code="+et+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$1(et){if(typeof et!="object"||et===null)return!1;for(var it=et;Object.getPrototypeOf(it)!==null;)it=Object.getPrototypeOf(it);return Object.getPrototypeOf(et)===it}function createStore(et,it,tt){var nt;if(typeof it=="function"&&typeof tt=="function"||typeof tt=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof it=="function"&&typeof tt>"u"&&(tt=it,it=void 0),typeof tt<"u"){if(typeof tt!="function")throw new Error(formatProdErrorMessage(1));return tt(createStore)(et,it)}if(typeof et!="function")throw new Error(formatProdErrorMessage(2));var st=et,ct=it,ht=[],gt=ht,$t=!1;function at(){gt===ht&&(gt=ht.slice())}function _t(){if($t)throw new Error(formatProdErrorMessage(3));return ct}function mt(kt){if(typeof kt!="function")throw new Error(formatProdErrorMessage(4));if($t)throw new Error(formatProdErrorMessage(5));var Wt=!0;return at(),gt.push(kt),function(){if(!!Wt){if($t)throw new Error(formatProdErrorMessage(6));Wt=!1,at();var It=gt.indexOf(kt);gt.splice(It,1),ht=null}}}function Tt(kt){if(!isPlainObject$1(kt))throw new Error(formatProdErrorMessage(7));if(typeof kt.type>"u")throw new Error(formatProdErrorMessage(8));if($t)throw new Error(formatProdErrorMessage(9));try{$t=!0,ct=st(ct,kt)}finally{$t=!1}for(var Wt=ht=gt,St=0;St<Wt.length;St++){var It=Wt[St];It()}return kt}function Et(kt){if(typeof kt!="function")throw new Error(formatProdErrorMessage(10));st=kt,Tt({type:ActionTypes.REPLACE})}function Ct(){var kt,Wt=mt;return kt={subscribe:function(It){if(typeof It!="object"||It===null)throw new Error(formatProdErrorMessage(11));function bt(){It.next&&It.next(_t())}bt();var Pt=Wt(bt);return{unsubscribe:Pt}}},kt[$$observable]=function(){return this},kt}return Tt({type:ActionTypes.INIT}),nt={dispatch:Tt,subscribe:mt,getState:_t,replaceReducer:Et},nt[$$observable]=Ct,nt}function assertReducerShape(et){Object.keys(et).forEach(function(it){var tt=et[it],nt=tt(void 0,{type:ActionTypes.INIT});if(typeof nt>"u")throw new Error(formatProdErrorMessage(12));if(typeof tt(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(et){for(var it=Object.keys(et),tt={},nt=0;nt<it.length;nt++){var st=it[nt];typeof et[st]=="function"&&(tt[st]=et[st])}var ct=Object.keys(tt),ht;try{assertReducerShape(tt)}catch(gt){ht=gt}return function($t,at){if($t===void 0&&($t={}),ht)throw ht;for(var _t=!1,mt={},Tt=0;Tt<ct.length;Tt++){var Et=ct[Tt],Ct=tt[Et],kt=$t[Et],Wt=Ct(kt,at);if(typeof Wt>"u")throw at&&at.type,new Error(formatProdErrorMessage(14));mt[Et]=Wt,_t=_t||Wt!==kt}return _t=_t||ct.length!==Object.keys($t).length,_t?mt:$t}}function compose(){for(var et=arguments.length,it=new Array(et),tt=0;tt<et;tt++)it[tt]=arguments[tt];return it.length===0?function(nt){return nt}:it.length===1?it[0]:it.reduce(function(nt,st){return function(){return nt(st.apply(void 0,arguments))}})}function applyMiddleware(){for(var et=arguments.length,it=new Array(et),tt=0;tt<et;tt++)it[tt]=arguments[tt];return function(nt){return function(){var st=nt.apply(void 0,arguments),ct=function(){throw new Error(formatProdErrorMessage(15))},ht={getState:st.getState,dispatch:function(){return ct.apply(void 0,arguments)}},gt=it.map(function($t){return $t(ht)});return ct=compose.apply(void 0,gt)(st.dispatch),_objectSpread2(_objectSpread2({},st),{},{dispatch:ct})}}}var NOT_FOUND="NOT_FOUND";function createSingletonCache(et){var it;return{get:function(nt){return it&&et(it.key,nt)?it.value:NOT_FOUND},put:function(nt,st){it={key:nt,value:st}},getEntries:function(){return it?[it]:[]},clear:function(){it=void 0}}}function createLruCache(et,it){var tt=[];function nt(gt){var $t=tt.findIndex(function(_t){return it(gt,_t.key)});if($t>-1){var at=tt[$t];return $t>0&&(tt.splice($t,1),tt.unshift(at)),at.value}return NOT_FOUND}function st(gt,$t){nt(gt)===NOT_FOUND&&(tt.unshift({key:gt,value:$t}),tt.length>et&&tt.pop())}function ct(){return tt}function ht(){tt=[]}return{get:nt,put:st,getEntries:ct,clear:ht}}var defaultEqualityCheck=function(it,tt){return it===tt};function createCacheKeyComparator(et){return function(tt,nt){if(tt===null||nt===null||tt.length!==nt.length)return!1;for(var st=tt.length,ct=0;ct<st;ct++)if(!et(tt[ct],nt[ct]))return!1;return!0}}function defaultMemoize(et,it){var tt=typeof it=="object"?it:{equalityCheck:it},nt=tt.equalityCheck,st=nt===void 0?defaultEqualityCheck:nt,ct=tt.maxSize,ht=ct===void 0?1:ct,gt=tt.resultEqualityCheck,$t=createCacheKeyComparator(st),at=ht===1?createSingletonCache($t):createLruCache(ht,$t);function _t(){var mt=at.get(arguments);if(mt===NOT_FOUND){if(mt=et.apply(null,arguments),gt){var Tt=at.getEntries(),Et=Tt.find(function(Ct){return gt(Ct.value,mt)});Et&&(mt=Et.value)}at.put(arguments,mt)}return mt}return _t.clearCache=function(){return at.clear()},_t}function getDependencies(et){var it=Array.isArray(et[0])?et[0]:et;if(!it.every(function(nt){return typeof nt=="function"})){var tt=it.map(function(nt){return typeof nt=="function"?"function "+(nt.name||"unnamed")+"()":typeof nt}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+tt+"]")}return it}function createSelectorCreator(et){for(var it=arguments.length,tt=new Array(it>1?it-1:0),nt=1;nt<it;nt++)tt[nt-1]=arguments[nt];var st=function(){for(var ht=arguments.length,gt=new Array(ht),$t=0;$t<ht;$t++)gt[$t]=arguments[$t];var at=0,_t,mt={memoizeOptions:void 0},Tt=gt.pop();if(typeof Tt=="object"&&(mt=Tt,Tt=gt.pop()),typeof Tt!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof Tt+"]");var Et=mt,Ct=Et.memoizeOptions,kt=Ct===void 0?tt:Ct,Wt=Array.isArray(kt)?kt:[kt],St=getDependencies(gt),It=et.apply(void 0,[function(){return at++,Tt.apply(null,arguments)}].concat(Wt)),bt=et(function(){for(var Gt=[],Jt=St.length,Kt=0;Kt<Jt;Kt++)Gt.push(St[Kt].apply(null,arguments));return _t=It.apply(null,Gt),_t});return Object.assign(bt,{resultFunc:Tt,memoizedResultFunc:It,dependencies:St,lastResult:function(){return _t},recomputations:function(){return at},resetRecomputations:function(){return at=0}}),bt};return st}var createSelector=createSelectorCreator(defaultMemoize);function createThunkMiddleware(et){var it=function(nt){var st=nt.dispatch,ct=nt.getState;return function(ht){return function(gt){return typeof gt=="function"?gt(st,ct,et):ht(gt)}}};return it}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;const thunkMiddleware=thunk;var __extends=globalThis&&globalThis.__extends||function(){var et=function(it,tt){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,st){nt.__proto__=st}||function(nt,st){for(var ct in st)Object.prototype.hasOwnProperty.call(st,ct)&&(nt[ct]=st[ct])},et(it,tt)};return function(it,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");et(it,tt);function nt(){this.constructor=it}it.prototype=tt===null?Object.create(tt):(nt.prototype=tt.prototype,new nt)}}();globalThis&&globalThis.__generator;var __spreadArray=globalThis&&globalThis.__spreadArray||function(et,it){for(var tt=0,nt=it.length,st=et.length;tt<nt;tt++,st++)et[st]=it[tt];return et},__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(et,it,tt){return it in et?__defProp(et,it,{enumerable:!0,configurable:!0,writable:!0,value:tt}):et[it]=tt},__spreadValues=function(et,it){for(var tt in it||(it={}))__hasOwnProp.call(it,tt)&&__defNormalProp(et,tt,it[tt]);if(__getOwnPropSymbols)for(var nt=0,st=__getOwnPropSymbols(it);nt<st.length;nt++){var tt=st[nt];__propIsEnum.call(it,tt)&&__defNormalProp(et,tt,it[tt])}return et},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function isPlainObject(et){if(typeof et!="object"||et===null)return!1;var it=Object.getPrototypeOf(et);if(it===null)return!0;for(var tt=it;Object.getPrototypeOf(tt)!==null;)tt=Object.getPrototypeOf(tt);return it===tt}var MiddlewareArray=function(et){__extends(it,et);function it(){for(var tt=[],nt=0;nt<arguments.length;nt++)tt[nt]=arguments[nt];var st=et.apply(this,tt)||this;return Object.setPrototypeOf(st,it.prototype),st}return Object.defineProperty(it,Symbol.species,{get:function(){return it},enumerable:!1,configurable:!0}),it.prototype.concat=function(){for(var tt=[],nt=0;nt<arguments.length;nt++)tt[nt]=arguments[nt];return et.prototype.concat.apply(this,tt)},it.prototype.prepend=function(){for(var tt=[],nt=0;nt<arguments.length;nt++)tt[nt]=arguments[nt];return tt.length===1&&Array.isArray(tt[0])?new(it.bind.apply(it,__spreadArray([void 0],tt[0].concat(this)))):new(it.bind.apply(it,__spreadArray([void 0],tt.concat(this))))},it}(Array);function freezeDraftable(et){return t(et)?fn(et,function(){}):et}function isBoolean(et){return typeof et=="boolean"}function curryGetDefaultMiddleware(){return function(it){return getDefaultMiddleware(it)}}function getDefaultMiddleware(et){et===void 0&&(et={});var it=et.thunk,tt=it===void 0?!0:it;et.immutableCheck,et.serializableCheck;var nt=new MiddlewareArray;return tt&&(isBoolean(tt)?nt.push(thunkMiddleware):nt.push(thunkMiddleware.withExtraArgument(tt.extraArgument))),nt}var IS_PRODUCTION=!0;function configureStore(et){var it=curryGetDefaultMiddleware(),tt=et||{},nt=tt.reducer,st=nt===void 0?void 0:nt,ct=tt.middleware,ht=ct===void 0?it():ct,gt=tt.devTools,$t=gt===void 0?!0:gt,at=tt.preloadedState,_t=at===void 0?void 0:at,mt=tt.enhancers,Tt=mt===void 0?void 0:mt,Et;if(typeof st=="function")Et=st;else if(isPlainObject(st))Et=combineReducers(st);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Ct=ht;typeof Ct=="function"&&(Ct=Ct(it));var kt=applyMiddleware.apply(void 0,Ct),Wt=compose;$t&&(Wt=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof $t=="object"&&$t)));var St=[kt];Array.isArray(Tt)?St=__spreadArray([kt],Tt):typeof Tt=="function"&&(St=Tt(St));var It=Wt.apply(void 0,St);return createStore(Et,_t,It)}function createAction(et,it){function tt(){for(var nt=[],st=0;st<arguments.length;st++)nt[st]=arguments[st];if(it){var ct=it.apply(void 0,nt);if(!ct)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:et,payload:ct.payload},"meta"in ct&&{meta:ct.meta}),"error"in ct&&{error:ct.error})}return{type:et,payload:nt[0]}}return tt.toString=function(){return""+et},tt.type=et,tt.match=function(nt){return nt.type===et},tt}function executeReducerBuilderCallback(et){var it={},tt=[],nt,st={addCase:function(ct,ht){var gt=typeof ct=="string"?ct:ct.type;if(gt in it)throw new Error("addCase cannot be called with two reducers for the same action type");return it[gt]=ht,st},addMatcher:function(ct,ht){return tt.push({matcher:ct,reducer:ht}),st},addDefaultCase:function(ct){return nt=ct,st}};return et(st),[it,tt,nt]}function isStateFunction(et){return typeof et=="function"}function createReducer(et,it,tt,nt){tt===void 0&&(tt=[]);var st=typeof it=="function"?executeReducerBuilderCallback(it):[it,tt,nt],ct=st[0],ht=st[1],gt=st[2],$t;if(isStateFunction(et))$t=function(){return freezeDraftable(et())};else{var at=freezeDraftable(et);$t=function(){return at}}function _t(mt,Tt){mt===void 0&&(mt=$t());var Et=__spreadArray([ct[Tt.type]],ht.filter(function(Ct){var kt=Ct.matcher;return kt(Tt)}).map(function(Ct){var kt=Ct.reducer;return kt}));return Et.filter(function(Ct){return!!Ct}).length===0&&(Et=[gt]),Et.reduce(function(Ct,kt){if(kt)if(r(Ct)){var Wt=Ct,St=kt(Wt,Tt);return St===void 0?Ct:St}else{if(t(Ct))return fn(Ct,function(It){return kt(It,Tt)});var St=kt(Ct,Tt);if(St===void 0){if(Ct===null)return Ct;throw Error("A case reducer on a non-draftable value must not return undefined")}return St}return Ct},mt)}return _t.getInitialState=$t,_t}function getType2(et,it){return et+"/"+it}function createSlice(et){var it=et.name;if(!it)throw new Error("`name` is a required option for createSlice");typeof process<"u";var tt=typeof et.initialState=="function"?et.initialState:freezeDraftable(et.initialState),nt=et.reducers||{},st=Object.keys(nt),ct={},ht={},gt={};st.forEach(function(_t){var mt=nt[_t],Tt=getType2(it,_t),Et,Ct;"reducer"in mt?(Et=mt.reducer,Ct=mt.prepare):Et=mt,ct[_t]=Et,ht[Tt]=Et,gt[_t]=Ct?createAction(Tt,Ct):createAction(Tt)});function $t(){var _t=typeof et.extraReducers=="function"?executeReducerBuilderCallback(et.extraReducers):[et.extraReducers],mt=_t[0],Tt=mt===void 0?{}:mt,Et=_t[1],Ct=Et===void 0?[]:Et,kt=_t[2],Wt=kt===void 0?void 0:kt,St=__spreadValues(__spreadValues({},Tt),ht);return createReducer(tt,St,Ct,Wt)}var at;return{name:it,reducer:function(_t,mt){return at||(at=$t()),at(_t,mt)},actions:gt,caseReducers:ct,getInitialState:function(){return at||(at=$t()),at.getInitialState()}}}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");N();const name="blockly",initialState={},blocklySlice=createSlice({name,initialState,reducers:{saveWorkspace:(et,it)=>{et.workspace=it.payload.workspace,et.code=it.payload.code},setResult:(et,it)=>{et.result=it.payload.result}}});function getWorkSpaceDpends(et){return et.blockly.workspace}createSelector([getWorkSpaceDpends],et=>et);function getCodeDepends(et){return et.blockly.code}const selectCode=createSelector([getCodeDepends],et=>et);function getResultDepends(et){return et.blockly.result}const selectResult=createSelector([getResultDepends],et=>et),{saveWorkspace,setResult}=blocklySlice.actions,blocklyReducer=blocklySlice.reducer,store=configureStore({reducer:{blockly:blocklyReducer}}),PlayButton=()=>{const code=useSelector(selectCode),dispatch=useDispatch(),onClick=react.exports.useCallback(()=>{if(code===void 0)return;console.log({code});const tmpCode=`${code}
result;
`;let result="";try{result=eval(tmpCode)}catch(et){console.error(et)}dispatch(setResult({result:`result = ${result}`}))},[dispatch,code]);return jsx("div",{children:jsx("button",{className:clsx("btn","btn-primary"),onClick,children:"play"})})},EditButton=()=>jsx("div",{children:jsx("label",{htmlFor:"blockly-modal",className:clsx("btn","btn-primary","btn-outline","modal-button"),children:"edit"})});var blockly$1={exports:{}},browser={exports:{}},coreBrowser={exports:{}},blockly={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(et,it){(function(tt,nt){et.exports=nt()})(commonjsGlobal,function(){var tt={},nt=function($,_e){st(),$.changedTouches&&$.changedTouches.length!==1||(Wu=setTimeout(function(){$.changedTouches&&($.button=2,$.clientX=$.changedTouches[0].clientX,$.clientY=$.changedTouches[0].clientY),_e&&_e.handleRightClick($)},JS))},st=function(){Wu&&(clearTimeout(Wu),Wu=0)},ct=function(){Nl=null},ht=function($){return!_t($)||$t($)},gt=function($){return $ instanceof MouseEvent?"mouse":$ instanceof PointerEvent?String($.pointerId):$.changedTouches&&$.changedTouches[0]&&$.changedTouches[0].identifier!==void 0&&$.changedTouches[0].identifier!==null?String($.changedTouches[0].identifier):"mouse"},$t=function($){const _e=gt($);return Nl!=null?Nl===_e:$.type==="mousedown"||$.type==="touchstart"||$.type==="pointerdown"?(Nl=_e,!0):!1},at=function($){if($.type.startsWith("touch")&&$.changedTouches){const _e=$.changedTouches[0];$.clientX=_e.clientX,$.clientY=_e.clientY}},_t=function($){return $.type.startsWith("touch")||$.type.startsWith("mouse")||$.type.startsWith("pointer")},mt=function($){return $.type.startsWith("touch")||$.type.startsWith("pointer")},Tt=function($){const _e=[];if($.changedTouches)for(let ot=0;ot<$.changedTouches.length;ot++)_e[ot]={type:$.type,changedTouches:[$.changedTouches[ot]],target:$.target,stopPropagation(){$.stopPropagation()},preventDefault(){$.preventDefault()}};else _e.push($);return _e},Et=function($,_e,ot,rt,lt,ut){function pt(Eo){const or=!lt;Eo=Tt(Eo);for(let $s=0;$s<Eo.length;$s++){const Kn=Eo[$s];(!or||ht(Kn))&&(at(Kn),ot?rt.call(ot,Kn):rt(Kn),vt=!0)}}let vt=!1;const At=[];if(globalThis.PointerEvent&&_e in mr)for(var xt=0;xt<mr[_e].length;xt++){var ho=mr[_e][xt];$.addEventListener(ho,pt,!1),At.push([$,ho,pt])}else if($.addEventListener(_e,pt,!1),At.push([$,_e,pt]),_e in mr)for(xt=Eo=>{pt(Eo),vt&&!ut&&Eo.preventDefault()},ho=0;ho<mr[_e].length;ho++){const Eo=mr[_e][ho];$.addEventListener(Eo,xt,!1),At.push([$,Eo,xt])}return At},Ct=function($,_e,ot,rt){function lt(At){ot?rt.call(ot,At):rt(At)}const ut=[];if(globalThis.PointerEvent&&_e in mr)for(var pt=0;pt<mr[_e].length;pt++){var vt=mr[_e][pt];$.addEventListener(vt,lt,!1),ut.push([$,vt,lt])}else if($.addEventListener(_e,lt,!1),ut.push([$,_e,lt]),_e in mr)for(pt=At=>{if(At instanceof TouchEvent&&At.changedTouches&&At.changedTouches.length===1){const xt=At.changedTouches[0];At.clientX=xt.clientX,At.clientY=xt.clientY}lt(At),At.preventDefault()},vt=0;vt<mr[_e].length;vt++){const At=mr[_e][vt];$.addEventListener(At,pt,!1),ut.push([$,At,pt])}return ut},kt=function($){const _e=$[$.length-1][2];for(;$.length;){const ot=$.pop();ot[0].removeEventListener(ot[1],ot[2],!1)}return _e},Wt=function($){if($.target instanceof HTMLElement){if($.target.isContentEditable||$.target.getAttribute("data-is-text-input")==="true")return!0;if($.target instanceof HTMLInputElement)return $=$.target,$.type==="text"||$.type==="number"||$.type==="email"||$.type==="password"||$.type==="search"||$.type==="tel"||$.type==="url";if($.target instanceof HTMLTextAreaElement)return!0}return!1},St=function($){return $.ctrlKey&&ap?!0:$.button===2},It=function($,_e,ot){const rt=_e.createSVGPoint();return rt.x=$.clientX,rt.y=$.clientY,ot||(ot=_e.getScreenCTM().inverse()),rt.matrixTransform(ot)},bt=function($){switch($.deltaMode){default:return{x:$.deltaX,y:$.deltaY};case 1:return{x:$.deltaX*dT,y:$.deltaY*dT};case 2:return{x:$.deltaX*_T,y:$.deltaY*_T}}},Pt=function($){return Os[$]||null},Gt=function(){const $=[];for(const _e in Os)$.push(Os[_e]);return $},Jt=function($){Os[$.id]=$},Kt=function($){delete Os[$.id]},Xt=function(){return pT},ko=function($){pT=$},Qt=function(){return hp},xo=function($){hp=$},br=function(){return gT},Yr=function($){gT=$},vr=function($){for(;$.options.parentWorkspace;)$=$.options.parentWorkspace;const _e=$.getParentSvg(),ot=$.getCachedParentSvgSize();var rt=_e.parentElement;if(rt instanceof HTMLElement){var lt=rt.offsetWidth;rt=rt.offsetHeight,ot.width!==lt&&(_e.setAttribute("width",lt+"px"),$.setCachedParentSvgSize(lt,null)),ot.height!==rt&&(_e.setAttribute("height",rt+"px"),$.setCachedParentSvgSize(null,rt)),$.resize()}},Wo=function($,_e){const ot=Object.create(null),rt=$.getDescendants(!0);_e&&($=$.getNextBlock())&&($=rt.indexOf($),rt.splice($,rt.length-$));for(let lt=0,ut;ut=rt[lt];lt++)ot[ut.type]?ot[ut.type]++:ot[ut.type]=1;return ot},po=function($){return function(){this.jsonInit($)}},Bn=function($){dp.defineBlocksWithJsonArrayInternal($)},zt=function($){lo(so($))},so=function($){const _e={};for(let ot=0;ot<$.length;ot++){const rt=$[ot];if(!rt){console.warn(`Block definition #${ot} in JSON array is ${rt}. Skipping`);continue}const lt=rt.type;lt?_e[lt]={init:po(rt)}:console.warn(`Block definition #${ot} in JSON array is missing a type attribute. Skipping.`)}return _e},lo=function($){for(const _e of Object.keys($)){const ot=$[_e];_e in ur&&console.warn(`Block definiton "${_e}" overwrites previous definition.`),ur[_e]=ot}},Lt=function($,_e,ot){$=document.createElementNS(ks,String($));for(const rt in _e)$.setAttribute(rt,`${_e[rt]}`);return ot&&ot.appendChild($),$},Ft=function($,_e){return _e=_e.split(" "),_e.every(ot=>$.classList.contains(ot))?!1:($.classList.add(..._e),!0)},Kr=function($,_e){$.classList.remove(..._e.split(" "))},uo=function($,_e){return _e=_e.split(" "),_e.every(ot=>!$.classList.contains(ot))?!1:($.classList.remove(..._e),!0)},Jn=function($,_e){return $.classList.contains(_e)},go=function($){return $&&$.parentNode?$.parentNode.removeChild($):null},ir=function($,_e){const ot=_e.nextSibling;if(_e=_e.parentNode,!_e)throw Error("Reference node has no parent.");ot?_e.insertBefore($,ot):_e.appendChild($)},wr=function($,_e){return!!($.compareDocumentPosition(_e)&ln.DOCUMENT_POSITION_CONTAINED_BY)},$n=function($,_e){$.style.transform=_e,$.style["-webkit-transform"]=_e},Tn=function(){_p++,Ur||(Ur=Object.create(null))},In=function(){_p--,_p||(Ur=null)},$_=function($){const _e=$.textContent+`
`+$.className.baseVal;let ot;if(Ur&&(ot=Ur[_e]))return ot;try{ot=$.getComputedTextLength()}catch{return 8*$.textContent.length}return Ur&&(Ur[_e]=ot),ot},Un=function($,_e,ot,rt){return _l($,_e+"pt",ot,rt)},_l=function($,_e,ot,rt){const lt=$.textContent;$=lt+`
`+$.className.baseVal;var ut;return Ur&&(ut=Ur[$])||(zu||(ut=document.createElement("canvas"),ut.className="blocklyComputeCanvas",document.body.appendChild(ut),zu=ut.getContext("2d")),zu.font=ot+" "+_e+" "+rt,ut=lt?zu.measureText(lt).width:0,Ur&&(Ur[$]=ut)),ut},$l=function($,_e,ot,rt){const lt=document.createElement("span");lt.style.font=ot+" "+_e+" "+rt,lt.textContent=$,$=document.createElement("div"),$.style.width="1px",$.style.height="0",_e=document.createElement("div"),_e.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),_e.appendChild(lt),_e.appendChild($),document.body.appendChild(_e),ot={height:0,baseline:0};try{_e.style.alignItems="baseline",ot.baseline=$.offsetTop-lt.offsetTop,_e.style.alignItems="flex-end",ot.height=$.offsetTop-lt.offsetTop}finally{document.body.removeChild(_e)}return ot},Sr=function($){return $*Math.PI/180},Jr=function($){return 180*$/Math.PI},Qn=function($,_e,ot){if(ot<$){const rt=ot;ot=$,$=rt}return Math.max($,Math.min(_e,ot))},mo=function($,_e,ot,rt){$=$+" was deprecated in "+_e+" and will be deleted in "+ot+".",rt&&($+=`
Use `+rt+" instead."),console.warn($)},fs=function($){return mT.getSizeInternal($)},f_=function($){if(Ar($,"display")!=="none")return gu($);const _e=$.style,ot=_e.display,rt=_e.visibility,lt=_e.position;_e.visibility="hidden",_e.position="absolute",_e.display="inline";const ut=$.offsetWidth;return $=$.offsetHeight,_e.display=ot,_e.position=lt,_e.visibility=rt,new Yo(ut,$)},gu=function($){return new Yo($.offsetWidth,$.offsetHeight)},Ar=function($,_e){return $=window.getComputedStyle($),$[_e]||$.getPropertyValue(_e)},T_=function($,_e){return mo("Blockly.utils.style.getCascadedStyle","version 9","version 10"),$.currentStyle?$.currentStyle[_e]:""},bn=function($){const _e=new Ht(0,0);$=$.getBoundingClientRect();var ot=document.documentElement;return ot=new Ht(window.pageXOffset||ot.scrollLeft,window.pageYOffset||ot.scrollTop),_e.x=$.left+ot.x,_e.y=$.top+ot.y,_e},Zo=function(){const $=document.body,_e=document.documentElement;return new Ht($.scrollLeft||_e.scrollLeft,$.scrollTop||_e.scrollTop)},Qr=function($){const _e=parseFloat(Ar($,"borderLeftWidth")),ot=parseFloat(Ar($,"borderRightWidth")),rt=parseFloat(Ar($,"borderTopWidth"));return $=parseFloat(Ar($,"borderBottomWidth")),new Do(rt,$,_e,ot)},Ut=function($,_e,ot){$=mu($,_e,ot),_e.scrollLeft=$.x,_e.scrollTop=$.y},mu=function($,_e,ot){var rt=bn($),lt=bn(_e),ut=Qr(_e);const pt=rt.x-lt.x-ut.left;return rt=rt.y-lt.y-ut.top,lt=gu($),$=_e.clientWidth-lt.width,lt=_e.clientHeight-lt.height,ut=_e.scrollLeft,_e=_e.scrollTop,ot?(ut+=pt-$/2,_e+=rt-lt/2):(ut+=Math.min(pt,Math.max(pt-$,0)),_e+=Math.min(rt,Math.max(rt-lt,0))),new Ht(ut,_e)},$u=function(){bo||(bo=document.createElement("div"),bo.className="blocklyDropDownDiv",(br()||document.body).appendChild(bo),ws=document.createElement("div"),ws.className="blocklyDropDownContent",bo.appendChild(ws),ss=document.createElement("div"),ss.className="blocklyDropDownArrow",bo.appendChild(ss),bo.style.opacity="0",bo.style.transition="transform "+Ku+"s, opacity "+Ku+"s",bo.addEventListener("focusin",function(){Ft(bo,"blocklyFocused")}),bo.addEventListener("focusout",function(){uo(bo,"blocklyFocused")}))},Zn=function($){$p=$},Ts=function(){return ws},Tl=function(){ws.textContent="",ws.style.width=""},qo=function($,_e){bo.style.backgroundColor=$,bo.style.borderColor=_e},dt=function($,_e,ot,rt){return Mt(yt(_e),$,ot,rt)},ft=function($,_e,ot){return fT=!0,Mt(Nt($),$,_e,ot)},yt=function($){var _e=$.getSvgRoot();const ot=$.workspace.scale,rt=$.height*ot;return $=$.width*ot,_e=bn(_e),new Do(_e.y,_e.y+rt,_e.x,_e.x+$)},Nt=function($){return $=$.getScaledBBox(),new Do($.top,$.bottom,$.left,$.right)},Mt=function($,_e,ot,rt){const lt=$.left+($.right-$.left)/2,ut=$.bottom;$=$.top,rt&&($+=rt),rt=_e.getSourceBlock();let pt=rt.workspace;for(;pt.options.parentWorkspace;)pt=pt.options.parentWorkspace;return Zn(pt.getParentSvg().parentNode),Io(_e,rt.RTL,lt,ut,lt,$,ot)},Io=function($,_e,ot,rt,lt,ut,pt){return ls=$,ns=pt||null,bo.style.direction=_e?"rtl":"ltr",$=Xt(),Cs=$.getRenderer().getClassName(),Ls=$.getTheme().getClassName(),Cs&&Ft(bo,Cs),Ls&&Ft(bo,Ls),Em(ot,rt,lt,ut)},qn=function($,_e,ot,rt){return $=fu($,ot.left,ot.right,rt.width),{initialX:$.divX,initialY:_e,finalX:$.divX,finalY:_e+gp,arrowX:$.arrowX,arrowY:-(Dl/2+pp),arrowAtTop:!0,arrowVisible:!0}},fm=function($,_e,ot,rt){return $=fu($,ot.left,ot.right,rt.width),{initialX:$.divX,initialY:_e-rt.height,finalX:$.divX,finalY:_e-rt.height-gp,arrowX:$.arrowX,arrowY:rt.height-2*pp-Dl/2,arrowAtTop:!1,arrowVisible:!0}},TI=function($,_e,ot){return $=fu($,_e.left,_e.right,ot.width),{initialX:$.divX,initialY:0,finalX:$.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},fu=function($,_e,ot,rt){return _e=Qn(_e,$-rt/2,ot-rt),$=$-Dl/2-_e,ot=$T,$=Qn(ot,$,rt-ot-Dl),{arrowX:$,divX:_e}},Tm=function(){return!!ls},El=function($,_e){return ls===$?(_e?Zr():E_(),!0):!1},E_=function(){bo.style.transform="translate(0, 0)",bo.style.opacity="0",mp=setTimeout(function(){Zr()},1e3*Ku),ns&&(ns(),ns=null)},Zr=function(){Tm()&&(mp&&clearTimeout(mp),bo.style.transform="",bo.style.left="",bo.style.top="",bo.style.opacity="0",bo.style.display="none",bo.style.backgroundColor="",bo.style.borderColor="",ns&&(ns(),ns=null),Tl(),ls=null,Cs&&(uo(bo,Cs),Cs=""),Ls&&(uo(bo,Ls),Ls=""),Xt().markFocused())},Em=function($,_e,ot,rt){$=fp.getPositionMetrics($,_e,ot,rt),$.arrowVisible?(ss.style.display="",ss.style.transform="translate("+$.arrowX+"px,"+$.arrowY+"px) rotate(45deg)",ss.setAttribute("class",$.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):ss.style.display="none",_e=Math.floor($.initialX),ot=Math.floor($.initialY),rt=Math.floor($.finalX);const lt=Math.floor($.finalY);return bo.style.left=_e+"px",bo.style.top=ot+"px",bo.style.display="block",bo.style.opacity="1",bo.style.transform="translate("+(rt-_e)+"px,"+(lt-ot)+"px)",!!$.arrowAtTop},EI=function(){if(ls){var $=ls.getSourceBlock();$=fT?Nt(ls):yt($);const _e=$.left+($.right-$.left)/2;Em(_e,$.bottom,_e,$.top)}else E_()},$o=function($,_e,ot,rt){if(!($ instanceof Bt)&&typeof $!="string"||String($).trim()==="")throw Error('Invalid type "'+$+'". The type must be a non-empty string or a Blockly.registry.Type.');if($=String($).toLowerCase(),typeof _e!="string"||_e.trim()==="")throw Error('Invalid name "'+_e+'". The name must be a non-empty string.');const lt=_e.toLowerCase();if(!ot)throw Error("Can not register a null value");let ut=Hn[$],pt=Ju[$];if(ut||(ut=Hn[$]=Object.create(null),pt=Ju[$]=Object.create(null)),II($,ot),!rt&&ut[lt])throw Error('Name "'+lt+'" with type "'+$+'" already registered.');ut[lt]=ot,pt[lt]=_e},II=function($,_e){switch($){case String(Bt.FIELD):if(typeof _e.fromJson!="function")throw Error('Type "'+$+'" must have a fromJson function')}},Tu=function($,_e){$=String($).toLowerCase(),_e=_e.toLowerCase();const ot=Hn[$];ot&&ot[_e]?(delete Hn[$][_e],delete Ju[$][_e]):console.warn("Unable to unregister ["+_e+"]["+$+"] from the registry.")},Im=function($,_e,ot){$=String($).toLowerCase(),_e=_e.toLowerCase();const rt=Hn[$];if(!rt||!rt[_e]){if(_e="Unable to find ["+_e+"]["+$+"] in the registry.",ot)throw Error(_e+" You must require or register a "+$+" plugin.");return console.warn(_e),null}return rt[_e]},bm=function($,_e){return $=String($).toLowerCase(),_e=_e.toLowerCase(),($=Hn[$])?!!$[_e]:!1},Es=function($,_e,ot){return Im($,_e,ot)},Eu=function($,_e,ot){return Im($,_e,ot)},I_=function($,_e,ot){$=String($).toLowerCase();var rt=Hn[$];if(!rt){if(rt=`Unable to find [${$}] in the registry.`,ot)throw Error(`${rt} You must require or register a ${$} plugin.`);return console.warn(rt),null}if(!_e)return rt;$=Ju[$],ot=Object.create(null),_e=Object.keys(rt);for(let lt=0;lt<_e.length;lt++){const ut=_e[lt];ot[$[ut]]=rt[ut]}return ot},Rr=function($,_e,ot){return _e=_e.plugins[$.toString()]||kn,typeof _e=="function"?_e:Es($,_e,ot)},Il=function(){return"blockly-"+(qS++).toString(36)},vn=function(){return ET.genUid()},pr=function($){Pl=$},Nr=function(){return Pl},to=function($){Ip.fireInternal($)},bI=function($){jo()&&(Ps.length||setTimeout(vm,0),Ps.push($))},vm=function(){const $=Iu(Ps,!0);Ps.length=0;for(let _e=0,ot;ot=$[_e];_e++){if(!ot.workspaceId)continue;const rt=Pt(ot.workspaceId);rt&&rt.fireChangeListener(ot)}},Iu=function($,_e){$=$.slice(),_e||$.reverse();const ot=[],rt=Object.create(null);for(let pt=0,vt;vt=$[pt];pt++)if(!vt.isNull()){var lt=[vt.isUiEvent?Bl:vt.type,vt.blockId,vt.workspaceId].join(" "),ut=rt[lt];const At=ut?ut.event:null;ut?vt.type===rr&&ut.index===pt-1?(lt=vt,At.newParentId=lt.newParentId,At.newInputName=lt.newInputName,At.newCoordinate=lt.newCoordinate,ut.index=pt):vt.type===zo&&vt.element===At.element&&vt.name===At.name?At.newValue=vt.newValue:vt.type===as?(ut=vt,At.viewTop=ut.viewTop,At.viewLeft=ut.viewLeft,At.scale=ut.scale,At.oldScale=ut.oldScale):(vt.type!==Wn||At.type!==Cn)&&(rt[lt]={event:vt,index:pt},ot.push(vt)):(rt[lt]={event:vt,index:pt},ot.push(vt))}$=ot.filter(function(pt){return!pt.isNull()}),_e||$.reverse();for(let pt=1,vt;vt=$[pt];pt++)vt.type===zo&&vt.element==="mutation"&&$.unshift($.splice(pt,1)[0]);return $},b_=function(){for(let $=0,_e;_e=Ps[$];$++)_e.recordUndo=!1},Fo=function(){Tp++},Ho=function(){Tp--},jo=function(){return Tp===0},Lo=function(){return IT},qt=function($){Ip.setGroupInternal($)},vI=function($){IT=typeof $=="boolean"?$?vn():"":$},bu=function($){const _e=[];$=$.getDescendants(!1);for(let ot=0,rt;rt=$[ot];ot++)_e[ot]=rt.id;return _e},Sm=function($,_e){var ot=oo($.type);if(!ot)throw Error("Unknown event type.");return ot=new ot,ot.fromJson($),ot.workspaceId=_e.id,ot},oo=function($){const _e=Es(Bt.EVENT,$);if(!_e)throw Error(`Event type ${$} not found in registry.`);return _e},v_=function($){if(($.type===rr||$.type===Jo)&&$.workspaceId){var _e=Pt($.workspaceId);if(!$.blockId)throw Error("Encountered a blockEvent without a proper blockId");if($=_e.getBlockById($.blockId)){const ot=Pl;try{Pl=!1;const rt=$.getParent();if(rt&&rt.isEnabled()){const lt=$.getDescendants(!1);for(let ut=0,pt;pt=lt[ut];ut++)pt.setEnabled(!0)}else if(($.outputConnection||$.previousConnection)&&!_e.isDragging())do $.setEnabled(!1),$=$.getNextBlock();while($)}finally{Pl=ot}}}},SI=function(){return Wl},RI=function($){Wl=$},yo=function($){return Wl.createElementNS(bp,$)},Gn=function($){return Wl.createTextNode($)},Rm=function($){return new DOMParser().parseFromString($,"text/xml")},ym=function($){return new XMLSerializer().serializeToString($)},vu=function($,_e){bT($,_e)},yI=function($){bT=$},S_=function($,_e){RT.confirmInternal($,_e)},OI=function($,_e){vT($,_e)},kI=function($){vT=$},R_=function($,_e,ot){ST($,_e,ot)},CI=function($){ST=$},y_=function($){$=$.getAllBlocks(!1);const _e=new Set;for(let ot=0;ot<$.length;ot++){const rt=$[ot].getVarModels();if(rt)for(let lt=0;lt<rt.length;lt++){const ut=rt[lt];ut.getId()&&_e.add(ut)}}return Array.from(_e.values())},LI=function($){$=$.getAllBlocks(!1);const _e=new Set;for(let rt=0,lt;lt=$[rt];rt++){var ot=lt.getDeveloperVariables;if(ot){ot=ot();for(let ut=0;ut<ot.length;ut++)_e.add(ot[ut])}}return Array.from(_e.values())},O_=function($){let _e=[];const ot=document.createElement("button");return ot.setAttribute("text","%{BKY_NEW_VARIABLE}"),ot.setAttribute("callbackKey","CREATE_VARIABLE"),$.registerButtonCallback("CREATE_VARIABLE",function(rt){Sl(rt.getTargetWorkspace())}),_e.push(ot),$=Om($),_e=_e.concat($)},Om=function($){$=$.getVariablesOfType("");const _e=[];if(0<$.length){var ot=$[$.length-1];if(ur.variables_set){var rt=yo("block");rt.setAttribute("type","variables_set"),rt.setAttribute("gap",ur.math_change?"8":"24"),rt.appendChild(Is(ot)),_e.push(rt)}if(ur.math_change&&(rt=yo("block"),rt.setAttribute("type","math_change"),rt.setAttribute("gap",ur.variables_get?"20":"8"),rt.appendChild(Is(ot)),ot=xr('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),rt.appendChild(ot),_e.push(rt)),ur.variables_get){$.sort(Xl.compareByName);for(let lt=0,ut;ut=$[lt];lt++)ot=yo("block"),ot.setAttribute("type","variables_get"),ot.setAttribute("gap","8"),ot.appendChild(Is(ut)),_e.push(ot)}}return _e},km=function($){return Sp.generateUniqueNameInternal($)},wI=function($){return k_(_h.charAt(0),$.getAllVariableNames())},k_=function($,_e){if(!_e.length)return $;const ot=_h;let rt="",lt=ot.indexOf($);for(;;){let ut=!1;for(let pt=0;pt<_e.length;pt++)if(_e[pt].toLowerCase()===$){ut=!0;break}if(!ut)return $;lt++,lt===ot.length&&(lt=0,rt=`${Number(rt)+1}`),$=ot.charAt(lt)+rt}},Sl=function($,_e,ot){function rt(ut){C_(io.NEW_VARIABLE_TITLE,ut,function(pt){if(pt){const vt=Lm(pt,$);if(vt){let At;vt.type===lt?At=io.VARIABLE_ALREADY_EXISTS.replace("%1",vt.name):(At=io.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,At=At.replace("%1",vt.name).replace("%2",vt.type)),vu(At,function(){rt(pt)})}else $.createVariable(pt,lt),_e&&_e(pt)}else _e&&_e(null)})}const lt=ot||"";rt("")},Cm=function($,_e,ot){function rt(lt){const ut=io.RENAME_VARIABLE_TITLE.replace("%1",_e.name);C_(ut,lt,function(pt){if(pt){var vt=AI(pt,_e.type,$);vt?(vt=io.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",vt.name).replace("%2",vt.type),vu(vt,function(){rt(pt)})):($.renameVariableById(_e.getId(),pt),ot&&ot(pt))}else ot&&ot(null)})}rt("")},C_=function($,_e,ot){R_($,_e,function(rt){rt&&(rt=rt.replace(/[\s\xa0]+/g," ").trim(),rt===io.RENAME_VARIABLE||rt===io.NEW_VARIABLE)&&(rt=null),ot(rt)})},AI=function($,_e,ot){ot=ot.getVariableMap().getAllVariables(),$=$.toLowerCase();for(let rt=0,lt;lt=ot[rt];rt++)if(lt.name.toLowerCase()===$&&lt.type!==_e)return lt;return null},Lm=function($,_e){_e=_e.getVariableMap().getAllVariables(),$=$.toLowerCase();for(let ot=0,rt;rt=_e[ot];ot++)if(rt.name.toLowerCase()===$)return rt;return null},Is=function($){const _e=yo("field");return _e.setAttribute("name","VAR"),_e.setAttribute("id",$.getId()),_e.setAttribute("variabletype",$.type),$=Gn($.name),_e.appendChild($),_e},Su=function($,_e,ot,rt){let lt=Ru($,_e,ot,rt);return lt||(lt=NI($,_e,ot,rt)),lt},Ru=function($,_e,ot,rt){const lt=$.getPotentialVariableMap();let ut=null;if(_e&&(ut=$.getVariableById(_e),!ut&&lt&&(ut=lt.getVariableById(_e)),ut))return ut;if(ot){if(rt===void 0)throw Error("Tried to look up a variable by name without a type");ut=$.getVariable(ot,rt),!ut&&lt&&(ut=lt.getVariable(ot,rt))}return ut},NI=function($,_e,ot,rt){const lt=$.getPotentialVariableMap();return ot||(ot=km($.isFlyout?$.targetWorkspace:$)),lt?lt.createVariable(ot,rt,_e):$.createVariable(ot,rt,_e)},L_=function($,_e){$=$.getAllVariables();const ot=[];if(_e.length!==$.length)for(let rt=0;rt<$.length;rt++){const lt=$[rt];_e.indexOf(lt)===-1&&ot.push(lt)}return ot},Mr=function($){if(Rp)throw Error("CSS already injected");yp+=`
`+$},wm=function($,_e){Rp||(Rp=!0,$&&($=_e.replace(/[\\/]$/,""),_e=yp.replace(/<<<PATH>>>/g,$),yp="",$=document.createElement("style"),$.id="blockly-common-style",_e=document.createTextNode(_e),$.appendChild(_e),document.head.insertBefore($,document.head.firstChild)))},Dr=function($){const _e=new Ht(0,0);var ot=$.x&&$.getAttribute("x");const rt=$.y&&$.getAttribute("y");return ot&&(_e.x=parseInt(ot)),rt&&(_e.y=parseInt(rt)),(ot=(ot=$.getAttribute("transform"))&&ot.match(kT))&&(_e.x+=Number(ot[1]),ot[3]&&(_e.y+=Number(ot[3]))),($=$.getAttribute("style"))&&-1<$.indexOf("translate")&&($=$.match(CT))&&(_e.x+=Number($[1]),$[3]&&(_e.y+=Number($[3]))),_e},yu=function($){let _e=0,ot=0;for(;$;){const rt=Dr($);if(_e+=rt.x,ot+=rt.y,(" "+($.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;$=$.parentNode}return new Ht(_e,ot)},Am=function(){return mo("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},w_=function(){const $=Zo();return new Do($.y,document.documentElement.clientHeight+$.y,$.x,document.documentElement.clientWidth+$.x)},A_=function(){const $=document.documentElement,_e=window;return new Ht(_e.pageXOffset||$.scrollLeft,_e.pageYOffset||$.scrollTop)},Nm=function($,_e){var ot=_e.x;_e=_e.y;const rt=$.getInjectionDiv().getBoundingClientRect();return ot=new Ht(ot-rt.left,_e-rt.top),_e=$.getOriginOffsetInPixels(),Ht.difference(ot,_e).scale(1/$.scale)},MI=function($,_e){const ot=yo("xml");var rt=Mm(y_($));rt.hasChildNodes()&&ot.appendChild(rt),rt=$.getTopComments(!0);for(let lt=0;lt<rt.length;lt++)ot.appendChild(rt[lt].toXmlWithXY(_e));for($=$.getTopBlocks(!0),rt=0;rt<$.length;rt++)ot.appendChild(Ou($[rt],_e));return ot},Mm=function($){const _e=yo("variables");for(let ot=0;ot<$.length;ot++){const rt=$[ot],lt=yo("variable");lt.appendChild(Gn(rt.name)),rt.type&&lt.setAttribute("type",rt.type),lt.id=rt.getId(),_e.appendChild(lt)}return _e},Ou=function($,_e){if($.isInsertionMarker()&&($=$.getChildren(!1)[0],!$))return new DocumentFragment;let ot=0;$.workspace.RTL&&(ot=$.workspace.getWidth()),_e=es($,_e);const rt=$.getRelativeToSurfaceXY();return _e.setAttribute("x",Math.round($.workspace.RTL?ot-rt.x:rt.x)),_e.setAttribute("y",Math.round(rt.y)),_e},DI=function($){if($.isSerializable()){const _e=yo("field");return _e.setAttribute("name",$.name||""),$.toXml(_e)}return null},PI=function($,_e){for(let ot=0;ot<$.inputList.length;ot++){const rt=$.inputList[ot];for(let lt=0;lt<rt.fieldRow.length;lt++){const ut=DI(rt.fieldRow[lt]);ut&&_e.appendChild(ut)}}},es=function($,_e){if($.isInsertionMarker())return(_e=$.getChildren(!1)[0])?es(_e):new DocumentFragment;const ot=yo($.isShadow()?"shadow":"block");if(ot.setAttribute("type",$.type),_e||ot.setAttribute("id",$.id),$.mutationToDom){var rt=$.mutationToDom();rt&&(rt.hasChildNodes()||rt.hasAttributes())&&ot.appendChild(rt)}if(PI($,ot),rt=$.getCommentText()){var lt=$.commentModel.size,ut=$.commentModel.pinned,pt=yo("comment");pt.appendChild(Gn(rt)),pt.setAttribute("pinned",ut),pt.setAttribute("h",lt.height),pt.setAttribute("w",lt.width),ot.appendChild(pt)}for($.data&&(rt=yo("data"),rt.appendChild(Gn($.data)),ot.appendChild(rt)),rt=0;rt<$.inputList.length;rt++){lt=$.inputList[rt];var vt=void 0;if(ut=!0,lt.type!==co.DUMMY){pt=lt.connection.targetBlock(),lt.type===co.VALUE?vt=yo("value"):lt.type===co.STATEMENT&&(vt=yo("statement"));const xt=lt.connection.getShadowDom();!xt||pt&&pt.isShadow()||vt.appendChild(Dm(xt,_e)),pt&&(pt=es(pt,_e),pt.nodeType===ln.ELEMENT_NODE&&(vt.appendChild(pt),ut=!1)),vt.setAttribute("name",lt.name),ut||ot.appendChild(vt)}}$.inputsInline!==void 0&&$.inputsInline!==$.inputsInlineDefault&&ot.setAttribute("inline",$.inputsInline.toString()),$.isCollapsed()&&ot.setAttribute("collapsed","true"),$.isEnabled()||ot.setAttribute("disabled","true"),$.isDeletable()||$.isShadow()||ot.setAttribute("deletable","false"),$.isMovable()||$.isShadow()||ot.setAttribute("movable","false"),$.isEditable()||ot.setAttribute("editable","false"),vt=$.getNextBlock();let At;return vt&&(rt=es(vt,_e),rt.nodeType===ln.ELEMENT_NODE&&(At=yo("next"),At.appendChild(rt),ot.appendChild(At))),$=$.nextConnection&&$.nextConnection.getShadowDom(),!$||vt&&vt.isShadow()||At.appendChild(Dm($,_e)),ot},Dm=function($,_e){let ot=$=$.cloneNode(!0),rt;for(;ot;)if(_e&&ot.nodeName==="shadow"&&ot.removeAttribute("id"),ot.firstChild)ot=ot.firstChild;else{for(;ot&&!ot.nextSibling;){rt=ot,ot=ot.parentNode;let lt;rt.nodeType===ln.TEXT_NODE&&rt.data.trim()===""&&((lt=ot)==null?void 0:lt.firstChild)!==rt&&go(rt)}ot&&(rt=ot,ot=ot.nextSibling,rt.nodeType===ln.TEXT_NODE&&rt.data.trim()===""&&go(rt))}return $},Pr=function($){return ym($).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},xI=function($){$=Pr($).split("<");let _e="";for(let ot=1;ot<$.length;ot++){const rt=$[ot];rt[0]==="/"&&(_e=_e.substring(2)),$[ot]=_e+"<"+rt,rt[0]!=="/"&&rt.slice(-2)!=="/>"&&(_e+="  ")}return $=$.join(`
`),$=$.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),$.replace(/^\n/,"")},xr=function($){const _e=Rm($);if(!_e||!_e.documentElement||_e.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+$);return _e.documentElement},BI=function($,_e){return _e.setResizesEnabled(!1),_e.clear(),$=Rl($,_e),_e.setResizesEnabled(!0),$},Rl=function($,_e){let ot=0;_e.RTL&&(ot=_e.getWidth());const rt=[];Tn();const lt=Lo();lt||qt(!0),_e.setResizesEnabled&&_e.setResizesEnabled(!1);let ut=!0;try{for(let pt=0,vt;vt=$.childNodes[pt];pt++){const At=vt.nodeName.toLowerCase(),xt=vt;if(At==="block"||At==="shadow"&&!Nr()){const ho=bs(xt,_e);rt.push(ho.id);const Eo=xt.hasAttribute("x")?parseInt(xt.getAttribute("x")):10,or=xt.hasAttribute("y")?parseInt(xt.getAttribute("y")):10;isNaN(Eo)||isNaN(or)||ho.moveBy(_e.RTL?ot-Eo:Eo,or),ut=!1}else{if(At==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(At==="comment")_e.rendered?er.fromXmlRendered(xt,_e,ot):dn.fromXml(xt,_e);else if(At==="variables"){if(ut)Pm(xt,_e);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");ut=!1}}}}finally{lt||qt(!1),In()}return _e.setResizesEnabled&&_e.setResizesEnabled(!0),to(new(oo(Ds))(_e)),rt},UI=function($,_e){if(!_e.getBlocksBoundingBox)return Rl($,_e);var ot=_e.getBlocksBoundingBox();if($=Rl($,_e),ot&&ot.top!==ot.bottom){var rt=ot.bottom;ot=_e.RTL?ot.right:ot.left;var lt=1/0;let ut=-1/0,pt=1/0;for(let vt=0;vt<$.length;vt++){const At=_e.getBlockById($[vt]).getRelativeToSurfaceXY();At.y<pt&&(pt=At.y),At.x<lt&&(lt=At.x),At.x>ut&&(ut=At.x)}for(rt=rt-pt+10,ot=_e.RTL?ot-ut:ot-lt,lt=0;lt<$.length;lt++)_e.getBlockById($[lt]).moveBy(ot,rt)}return $},bs=function($,_e){Fo();var ot=_e.getAllVariables();let rt;try{if(rt=N_($,_e),_e.rendered){const lt=rt,ut=rt.getDescendants(!1);lt.setConnectionTracking(!1);for(let pt=ut.length-1;0<=pt;pt--)ut[pt].initSvg();for(let pt=ut.length-1;0<=pt;pt--)ut[pt].render(!1);setTimeout(function(){lt.disposed||lt.setConnectionTracking(!0)},1),lt.updateDisabled(),_e.resizeContents()}else{const lt=rt.getDescendants(!1);for(let ut=lt.length-1;0<=ut;ut--)lt[ut].initModel()}}finally{Ho()}if(jo()){for($=L_(_e,ot),_e=0;_e<$.length;_e++)ot=$[_e],to(new(oo(cs))(ot));to(new(oo(Jo))(rt))}return rt},Pm=function($,_e){for(let ot=0;ot<$.children.length;ot++){const rt=$.children[ot],lt=rt.getAttribute("type"),ut=rt.getAttribute("id");_e.createVariable(rt.textContent,lt,ut)}},GI=function($){const _e={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let ot=0;ot<$.children.length;ot++){const rt=$.children[ot];if(rt.nodeType!==ln.TEXT_NODE)switch(rt.nodeName.toLowerCase()){case"mutation":_e.mutation.push(rt);break;case"comment":_e.comment.push(rt);break;case"data":_e.data.push(rt);break;case"title":case"field":_e.field.push(rt);break;case"value":case"statement":_e.input.push(rt);break;case"next":_e.next.push(rt);break;default:console.warn("Ignoring unknown tag: "+rt.nodeName)}}return _e},FI=function($,_e){let ot=!1;for(let rt=0;rt<$.length;rt++){const lt=$[rt];_e.domToMutation&&(_e.domToMutation(lt),_e.initSvg&&(ot=!0))}return ot},HI=function($,_e){for(let rt=0;rt<$.length;rt++){var ot=$[rt];const lt=ot.textContent,ut=ot.getAttribute("pinned")==="true",pt=parseInt(ot.getAttribute("w"));if(ot=parseInt(ot.getAttribute("h")),_e.setCommentText(lt),_e.commentModel.pinned=ut,isNaN(pt)||isNaN(ot)||(_e.commentModel.size=new Yo(pt,ot)),ut&&_e.getCommentIcon&&!_e.isInFlyout){const vt=_e;setTimeout(function(){vt.getCommentIcon().setVisible(!0)},1)}}},VI=function($,_e){for(let ot=0;ot<$.length;ot++)_e.data=$[ot].textContent},WI=function($,_e){for(let ot=0;ot<$.length;ot++){const rt=$[ot],lt=rt.getAttribute("name");zI(_e,lt,rt)}},xm=function($){const _e={childBlockElement:null,childShadowElement:null};for(let ot=0;ot<$.childNodes.length;ot++){const rt=$.childNodes[ot];rt.nodeType===ln.ELEMENT_NODE&&(rt.nodeName.toLowerCase()==="block"?_e.childBlockElement=rt:rt.nodeName.toLowerCase()==="shadow"&&(_e.childShadowElement=rt))}return _e},jI=function($,_e,ot,rt){for(let ut=0;ut<$.length;ut++){var lt=$[ut];const pt=lt.getAttribute("name"),vt=ot.getInput(pt);if(!vt){console.warn("Ignoring non-existent input "+pt+" in block "+rt);break}if(lt=xm(lt),lt.childBlockElement){if(!vt.connection)throw TypeError("Input connection does not exist.");N_(lt.childBlockElement,_e,vt.connection,!1)}if(lt.childShadowElement){let At;(At=vt.connection)==null||At.setShadowDom(lt.childShadowElement)}}},XI=function($,_e,ot){for(let rt=0;rt<$.length;rt++){const lt=xm($[rt]);if(lt.childBlockElement){if(!ot.nextConnection)throw TypeError("Next statement does not exist.");if(ot.nextConnection.isConnected())throw TypeError("Next statement is already connected.");N_(lt.childBlockElement,_e,ot.nextConnection,!0)}lt.childShadowElement&&ot.nextConnection&&ot.nextConnection.setShadowDom(lt.childShadowElement)}},N_=function($,_e,ot,rt){const lt=$.getAttribute("type");if(!lt)throw TypeError("Block type unspecified: "+$.outerHTML);var ut=$.getAttribute("id");ut=_e.newBlock(lt,ut);const pt=GI($),vt=FI(pt.mutation,ut);if(HI(pt.comment,ut),VI(pt.data,ut),ot)if(rt)if(ut.previousConnection)ot.connect(ut.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(ut.outputConnection)ot.connect(ut.outputConnection);else if(ut.previousConnection)ot.connect(ut.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(WI(pt.field,ut),jI(pt.input,_e,ut,lt),XI(pt.next,_e,ut),vt&&ut.initSvg(),(_e=$.getAttribute("inline"))&&ut.setInputsInline(_e==="true"),(_e=$.getAttribute("disabled"))&&ut.setEnabled(_e!=="true"&&_e!=="disabled"),(_e=$.getAttribute("deletable"))&&ut.setDeletable(_e==="true"),(_e=$.getAttribute("movable"))&&ut.setMovable(_e==="true"),(_e=$.getAttribute("editable"))&&ut.setEditable(_e==="true"),(_e=$.getAttribute("collapsed"))&&ut.setCollapsed(_e==="true"),$.nodeName.toLowerCase()==="shadow"){for($=ut.getChildren(!1),_e=0;_e<$.length;_e++)if(!$[_e].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(ut.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");ut.setShadow(!0)}return ut},zI=function($,_e,ot){const rt=$.getField(_e);rt?rt.fromXml(ot):console.warn("Ignoring non-existent field "+_e+" in block "+$.type)},YI=function($){for(let _e=0;_e<$.childNodes.length;_e++){const ot=$.childNodes[_e];if(ot.nodeName.toLowerCase()==="next"){$.removeChild(ot);break}}},KI=function($,_e){return mo("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),$.startsWith(_e)},ku=function($){return $.length?$.reduce(function(_e,ot){return _e.length<ot.length?_e:ot}).length:0},Bm=function($,_e){if(!$.length)return 0;if($.length===1)return $[0].length;let ot=0;_e=_e||ku($);let rt;for(rt=0;rt<_e;rt++){for(var lt=$[0][rt],ut=1;ut<$.length;ut++)if(lt!==$[ut][rt])return ot;lt===" "&&(ot=rt+1)}for(lt=1;lt<$.length;lt++)if((ut=$[lt][rt])&&ut!==" ")return ot;return _e},Um=function($,_e){if(!$.length)return 0;if($.length===1)return $[0].length;let ot=0;_e=_e||ku($);let rt;for(rt=0;rt<_e;rt++){for(var lt=$[0].substr(-rt-1,1),ut=1;ut<$.length;ut++)if(lt!==$[ut].substr(-rt-1,1))return ot;lt===" "&&(ot=rt+1)}for(lt=1;lt<$.length;lt++)if((ut=$[lt].charAt($[lt].length-rt-1))&&ut!==" ")return ot;return _e},Gm=function($,_e){$=$.split(`
`);for(let ot=0;ot<$.length;ot++)$[ot]=JI($[ot],_e);return $.join(`
`)},JI=function($,_e){if($.length<=_e)return $;const ot=$.trim().split(/\s+/);for(var rt=0;rt<ot.length;rt++)ot[rt].length>_e&&(_e=ot[rt].length);var lt=-1/0;let ut,pt=1;do{rt=lt,ut=$,$=[],lt=ot.length/pt;let vt=1;for(let At=0;At<ot.length-1;At++)vt<(At+1.5)/lt?(vt++,$[At]=!0):$[At]=!1;$=Fm(ot,$,_e),lt=M_(ot,$,_e),$=QI(ot,$),pt++}while(lt>rt);return ut},M_=function($,_e,ot){const rt=[0],lt=[];for(var ut=0;ut<$.length;ut++)rt[rt.length-1]+=$[ut].length,_e[ut]===!0?(rt.push(0),lt.push($[ut].charAt($[ut].length-1))):_e[ut]===!1&&rt[rt.length-1]++;for($=Math.max(...rt),_e=0,ut=0;ut<rt.length;ut++)_e-=2*Math.pow(Math.abs(ot-rt[ut]),1.5),_e-=Math.pow($-rt[ut],1.5),".?!".indexOf(lt[ut])!==-1?_e+=ot/3:",;)]}".indexOf(lt[ut])!==-1&&(_e+=ot/4);return 1<rt.length&&rt[rt.length-1]<=rt[rt.length-2]&&(_e+=.5),_e},Fm=function($,_e,ot){let rt=M_($,_e,ot),lt;for(let ut=0;ut<_e.length-1;ut++){if(_e[ut]===_e[ut+1])continue;const pt=[].concat(_e);pt[ut]=!pt[ut],pt[ut+1]=!pt[ut+1];const vt=M_($,pt,ot);vt>rt&&(rt=vt,lt=pt)}return lt?Fm($,lt,ot):_e},QI=function($,_e){const ot=[];for(let rt=0;rt<$.length;rt++)ot.push($[rt]),_e[rt]!==void 0&&ot.push(_e[rt]?`
`:" ");return ot.join("")},Hm=function($){return/^\s*-?\d+(\.\d+)?\s*$/.test($)},ZI=function($){e_=$},qI=function(){return e_},_b=function(){return Kl},ev=function(){return Go},yl=function($){if($=Vm($)){for($=$.tooltip;typeof $=="function";)$=$();if(typeof $!="string")throw Error("Tooltip function must return a string.");return $}return""},Vm=function($){for(;$&&$.tooltip;){if(typeof $.tooltip=="string"||typeof $.tooltip=="function")return $;$=$.tooltip}return null},Wm=function(){Go||(Go=document.createElement("div"),Go.className="blocklyTooltipDiv",(br()||document.body).appendChild(Go))},Cu=function($){$.mouseOverWrapper_=Ct($,"mouseover",null,tv),$.mouseOutWrapper_=Ct($,"mouseout",null,ov),$.addEventListener("mousemove",jm,!1)},Lu=function($){$&&(kt($.mouseOverWrapper_),kt($.mouseOutWrapper_),$.removeEventListener("mousemove",jm))},tv=function($){Us||($=Vm($.currentTarget),Or!==$&&(ts(),Ql=null,Or=$),clearTimeout(wT))},ov=function($){Us||(wT=setTimeout(function(){Ql=Or=null,ts()},1),clearTimeout(Jl))},jm=function($){if(Or&&Or.tooltip&&!Us)if(Kl){const _e=kp-$.pageX;$=Cp-$.pageY,Math.sqrt(_e*_e+$*$)>AT&&ts()}else Ql!==Or&&(clearTimeout(Jl),kp=$.pageX,Cp=$.pageY,Jl=setTimeout(sv,NT))},Xm=function(){Ql=Or=null,ts()},ts=function(){Kl&&(Kl=!1,Go&&(Go.style.display="none")),Jl&&clearTimeout(Jl)},zm=function(){ts(),Us=!0},Ym=function(){Us=!1},iv=function(){Go&&Or&&(typeof e_=="function"?e_(Go,Or):rv())},rv=function(){var $=yl(Or);$=Gm($,LT),$=$.split(`
`);for(let _e=0;_e<$.length;_e++){const ot=document.createElement("div");ot.appendChild(document.createTextNode($[_e])),Go.appendChild(ot)}},nv=function($){const _e=document.documentElement.clientWidth,ot=document.documentElement.clientHeight;let rt=kp;rt=$?rt-(Lp+Go.offsetWidth):rt+Lp;let lt=Cp+wp;return lt+Go.offsetHeight>ot+window.scrollY&&(lt-=Go.offsetHeight+2*wp),$?rt=Math.max(t_-window.scrollX,rt):rt+Go.offsetWidth>_e+window.scrollX-2*t_&&(rt=_e-Go.offsetWidth-2*t_),{x:rt,y:lt}},sv=function(){if(!Us&&(Ql=Or,Go)){Go.textContent="",iv();var $=Or.RTL;Go.style.direction=$?"rtl":"ltr",Go.style.display="block",Kl=!0;var{x:_e,y:ot}=nv($);Go.style.left=_e+"px",Go.style.top=ot+"px"}},Km=function(){return Ap},lv=function($){Ap=$},Jm=function(){return Np},cv=function($){Np=$},os=function($){$=String($).toLowerCase().trim();var _e=MT[$];if(_e||(_e=$.substring(0,2)==="0x"?"#"+$.substring(2):$,_e=_e[0]==="#"?_e:"#"+_e,/^#[0-9a-f]{6}$/.test(_e)))return _e;if(/^#[0-9a-f]{3}$/.test(_e))return["#",_e[1],_e[1],_e[2],_e[2],_e[3],_e[3]].join("");var ot=$.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return ot&&($=Number(ot[1]),_e=Number(ot[2]),ot=Number(ot[3]),0<=$&&256>$&&0<=_e&&256>_e&&0<=ot&&256>ot)?wu($,_e,ot):null},wu=function($,_e,ot){return _e=$<<16|_e<<8|ot,16>$?"#"+(16777216|_e).toString(16).substr(1):"#"+_e.toString(16)},D_=function($){return $=os($),$?($=parseInt($.substr(1),16),[$>>16,$>>8&255,$&255]):[0,0,0]},P_=function($,_e,ot){let rt=0,lt=0,ut=0;if(_e===0)ut=lt=rt=ot;else{const pt=Math.floor($/60),vt=$/60-pt;$=ot*(1-_e);const At=ot*(1-_e*vt);switch(_e=ot*(1-_e*(1-vt)),pt){case 1:rt=At,lt=ot,ut=$;break;case 2:rt=$,lt=ot,ut=_e;break;case 3:rt=$,lt=At,ut=ot;break;case 4:rt=_e,lt=$,ut=ot;break;case 5:rt=ot,lt=$,ut=At;break;case 6:case 0:rt=ot,lt=_e,ut=$}}return wu(Math.floor(rt),Math.floor(lt),Math.floor(ut))},vs=function($,_e,ot){return $=os($),!$||(_e=os(_e),!_e)?null:($=D_($),_e=D_(_e),wu(Math.round(_e[0]+ot*($[0]-_e[0])),Math.round(_e[1]+ot*($[1]-_e[1])),Math.round(_e[2]+ot*($[2]-_e[2]))))},x_=function($){return P_($,Ap,255*Np)},B_=function($,_e){const ot=[];var rt=$.split("");rt.push("");var lt=0;$=[];let ut=null;for(let At=0;At<rt.length;At++){var pt=rt[At];if(lt===0)pt==="%"?((lt=$.join(""))&&ot.push(lt),$.length=0,lt=1):$.push(pt);else if(lt===1)pt==="%"?($.push(pt),lt=0):_e&&"0"<=pt&&"9">=pt?(lt=2,ut=pt,(pt=$.join(""))&&ot.push(pt),$.length=0):pt==="{"?lt=3:($.push("%",pt),lt=0);else if(lt===2)if("0"<=pt&&"9">=pt)ut+=pt;else{var vt=void 0;ot.push(parseInt((vt=ut)!=null?vt:"",10)),At--,lt=0}else lt===3&&(pt===""?($.splice(0,0,"%{"),At--,lt=0):pt!=="}"?$.push(pt):(lt=$.join(""),/[A-Z]\w*/i.test(lt)?(pt=lt.toUpperCase(),(pt=pt.startsWith("BKY_")?pt.substring(4):null)&&pt in io?(lt=io[pt],typeof lt=="string"?Array.prototype.push.apply(ot,B_(lt,_e)):_e?ot.push(String(lt)):ot.push(lt)):ot.push("%{"+lt+"}")):ot.push("%{"+lt+"}"),lt=$.length=0))}for((_e=$.join(""))&&ot.push(_e),vt=[],$.length=0,rt=0;rt<ot.length;rt++)typeof ot[rt]=="string"?$.push(ot[rt]):((_e=$.join(""))&&vt.push(_e),$.length=0,vt.push(ot[rt]));return(_e=$.join(""))&&vt.push(_e),$.length=0,vt},U_=function($){return B_($,!0)},Mo=function($){return typeof $!="string"?$:($=B_($,!1),$.length?String($[0]):"")},Au=function($){let _e=!0;const ot=io,rt=$.match(/%{BKY_[A-Z]\w*}/ig);if(rt)for(let lt=0;lt<rt.length;lt++){const ut=rt[lt].toUpperCase();ot[ut.slice(6,-1)]===void 0&&(console.warn("No message string for "+rt[lt]+" in "+$),_e=!1)}return _e},Ss=function($){const _e=typeof $=="string"?Mo($):$;var ot=Number(_e);if(!isNaN(ot)&&0<=ot&&360>=ot)return{hue:ot,hex:P_(ot,Km(),255*Jm())};if(ot=os(_e))return{hue:null,hex:ot};throw ot='Invalid colour: "'+_e+'"',$!==_e&&(ot+=' (from "'+$+'")'),Error(ot)},Rs=function(){return Hr},av=function($){Hr=$},Qm=function(){Hr||(Hr=document.createElement("div"),Hr.className="blocklyWidgetDiv",(br()||document.body).appendChild(Hr))},G_=function($,_e,ot){qr(),o_=$,i_=ot,($=Hr)&&($.style.direction=_e?"rtl":"ltr",$.style.display="block",_e=Xt(),Gs=_e.getRenderer().getClassName(),Fs=_e.getTheme().getClassName(),Gs&&Ft($,Gs),Fs&&Ft($,Fs))},qr=function(){if(Zm()){o_=null;var $=Hr;$&&($.style.display="none",$.style.left="",$.style.top="",i_&&i_(),i_=null,$.textContent="",Gs&&(uo($,Gs),Gs=""),Fs&&(uo($,Fs),Fs=""),Xt().markFocused())}},Zm=function(){return!!o_},F_=function($){o_===$&&qr()},qm=function($,_e,ot){Hr.style.left=$+"px",Hr.style.top=_e+"px",Hr.style.height=ot+"px"},e$=function($,_e,ot,rt){const lt=hv($,_e,ot);$=uv($,_e,ot,rt),0>lt?qm($,0,ot.height+lt):qm($,lt,ot.height)},uv=function($,_e,ot,rt){return rt?Math.min(Math.max(_e.right-ot.width,$.left),$.right-ot.width):Math.max(Math.min(_e.left,$.right-ot.width),$.left)},hv=function($,_e,ot){return _e.bottom+ot.height>=$.bottom?_e.top-ot.height:_e.bottom},yr=function($,_e){$o(Bt.FIELD,$,_e)},dv=function($){Tu(Bt.FIELD,$)},H_=function($){return DT.fromJsonInternal($)},_v=function($){const _e=Eu(Bt.FIELD,$.type);if(_e){if(typeof _e.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return _e.fromJson($)}return console.warn("Blockly could not create a field of type "+$.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},sn=function($,_e){$.setAttribute(rR,_e)},Ao=function($,_e,ot){Array.isArray(ot)&&(ot=ot.join(" ")),$.setAttribute(iR+_e,`${ot}`)},t$=function($){if(!Array.isArray($))throw TypeError("FieldDropdown options must be an array.");if(!$.length)throw TypeError("FieldDropdown options must not be an empty array.");let _e=!1;for(let ot=0;ot<$.length;ot++){const rt=$[ot];Array.isArray(rt)?typeof rt[1]!="string"?(_e=!0,console.error("Invalid option["+ot+"]: Each FieldDropdown option id must be a string. Found "+rt[1]+" in: ",rt)):rt[0]&&typeof rt[0]!="string"&&typeof rt[0].src!="string"&&(_e=!0,console.error("Invalid option["+ot+"]: Each FieldDropdown option must have a string label or image description. Found"+rt[0]+" in: ",rt)):(_e=!0,console.error("Invalid option["+ot+"]: Each FieldDropdown option must be an array. Found: ",rt))}if(_e)throw TypeError("Found invalid FieldDropdown options.")},pv=function($,_e){mo("Blockly.utils.object.inherits","version 9","version 10"),$.superClass_=_e.prototype,Object.setPrototypeOf($,_e),$.prototype=Object.create(_e.prototype),$.prototype.constructor=$},gv=function($,_e){mo("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const ot in _e)$[ot]=_e[ot]},Fn=function($,_e){for(const ot in _e)$[ot]=_e[ot]!==null&&typeof _e[ot]=="object"?Fn($[ot]||Object.create(null),_e[ot]):_e[ot];return $},mv=function($){return mo("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values($)},Nu=function($){return $?(($ instanceof Element||typeof $=="string")&&($=i$($),$=Tv($)),$v($),$):null},$v=function($){const _e=$.kind;if($=$.contents,_e&&_e!==BT&&_e!==Bp)throw Error("Invalid toolbox kind "+_e+". Please supply either "+BT+" or "+Bp);if(!$)throw Error("Toolbox must have a contents attribute.")},Mu=function($){return $?$.contents?$.contents:Array.isArray($)&&0<$.length&&!$[0].nodeType?$:j_($):[]},V_=function($){return UT.hasCategoriesInternal($)},fv=function($){if(!$)return!1;const _e=$.kind;return _e?_e===Bp:!!$.contents.filter(function(ot){return ot.kind.toUpperCase()==="CATEGORY"}).length},W_=function($){return $&&$.contents?!!$.contents.filter(function(_e){return _e.kind.toUpperCase()==="CATEGORY"}).length:!1},Tv=function($){const _e={contents:j_($)};return $ instanceof Node&&o$($,_e),_e},j_=function($){const _e=[];let ot=$.childNodes;ot||(ot=$);for(let rt=0,lt;lt=ot[rt];rt++){if(!lt.tagName)continue;$={};const ut=lt.tagName.toUpperCase();$.kind=ut,ut==="BLOCK"?$.blockxml=lt:lt.childNodes&&0<lt.childNodes.length&&($.contents=j_(lt)),o$(lt,$),_e.push($)}return _e},o$=function($,_e){for(let ot=0;ot<$.attributes.length;ot++){const rt=$.attributes[ot];-1<rt.nodeName.indexOf("css-")?(_e.cssconfig=_e.cssconfig||{},_e.cssconfig[rt.nodeName.replace("css-","")]=rt.value):_e[rt.nodeName]=rt.value}},i$=function($){let _e=null;if($)if(typeof $=="string"){if(_e=xr($),_e.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else $ instanceof Element&&(_e=$);return _e},Du=function($,_e){if(typeof $!="string"||$.trim()==="")throw Error('Error: Invalid extension name "'+$+'"');if(Hs[$])throw Error('Error: Extension "'+$+'" is already registered.');if(typeof _e!="function")throw Error('Error: Extension "'+$+'" must be a function');Hs[$]=_e},Ev=function($,_e){if(!_e||typeof _e!="object")throw Error('Error: Mixin "'+$+'" must be a object');Du($,function(){this.mixin(_e)})},Iv=function($,_e,ot,rt){const lt='Error when registering mutator "'+$+'": ';s$(lt,_e);const ut=n$(_e,lt);if(ot&&typeof ot!="function")throw Error(lt+'Extension "'+$+'" is not a function');Du($,function(){ut&&this.setMutator(new tt.Mutator$$module$build$src$core$mutator(rt||[],this)),this.mixin(_e),ot&&ot.apply(this)})},bv=function($){r$($)?delete Hs[$]:console.warn('No extension mapping for name "'+$+'" found to unregister')},r$=function($){return!!Hs[$]},X_=function($,_e,ot){const rt=Hs[$];if(typeof rt!="function")throw Error('Error: Extension "'+$+'" not found.');let lt;if(ot?vv($,_e):lt=Y_(_e),rt.apply(_e),ot)s$('Error after applying mutator "'+$+'": ',_e);else if(!yv(lt,_e))throw Error('Error when applying extension "'+$+'": mutation properties changed when applying a non-mutator extension.')},vv=function($,_e){if(Y_(_e).length)throw Error('Error: tried to apply mutation "'+$+'" to a block that already has mutator functions.  Block id: '+_e.id)},Sv=function($,_e){return z_($.mutationToDom,$.domToMutation,_e+" mutationToDom/domToMutation")},Rv=function($,_e){return z_($.saveExtraState,$.loadExtraState,_e+" saveExtraState/loadExtraState")},n$=function($,_e){return z_($.compose,$.decompose,_e+" compose/decompose")},z_=function($,_e,ot){if($&&_e){if(typeof $!="function"||typeof _e!="function")throw Error(ot+" must be a function");return!0}if(!$&&!_e)return!1;throw Error(ot+"Must have both or neither functions")},s$=function($,_e){const ot=Sv(_e,$),rt=Rv(_e,$);if(!ot&&!rt)throw Error($+"Mutations must contain either XML hooks, or JSON hooks, or both");n$(_e,$)},Y_=function($){const _e=[];return $.domToMutation!==void 0&&_e.push($.domToMutation),$.mutationToDom!==void 0&&_e.push($.mutationToDom),$.saveExtraState!==void 0&&_e.push($.saveExtraState),$.loadExtraState!==void 0&&_e.push($.loadExtraState),$.compose!==void 0&&_e.push($.compose),$.decompose!==void 0&&_e.push($.decompose),_e},yv=function($,_e){if(_e=Y_(_e),_e.length!==$.length)return!1;for(let ot=0;ot<_e.length;ot++)if($[ot]!==_e[ot])return!1;return!0},Pu=function($){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")$();else{const _e=setInterval(function(){document.readyState==="complete"&&(clearInterval(_e),$())},10)}},Ov=function($,_e){const ot=[];return typeof document=="object"&&Pu(function(){for(const rt in _e)Au(_e[rt])}),function(){this.type&&ot.indexOf(this.type)===-1&&(kv(this,$,_e),ot.push(this.type)),this.setTooltip(function(){var rt=String(this.getFieldValue($));let lt=_e[rt];return lt===null?ot.indexOf(this.type)===-1&&(rt="No tooltip mapping for value "+rt+" of field "+$,this.type!==null&&(rt+=" of block type "+this.type),console.warn(rt+".")):lt=Mo(lt),lt}.bind(this))}},kv=function($,_e,ot){var rt=$.getField(_e);if(rt instanceof kr&&!rt.isOptionListDynamic()){rt=rt.getOptions();for(let lt=0;lt<rt.length;lt++){const ut=rt[lt][1];ot[ut]===null&&console.warn("No tooltip mapping for value "+ut+" of field "+_e+" of block type "+$.type)}}},Cv=function($,_e){return typeof document=="object"&&Pu(function(){Au($)}),function(){this.setTooltip(function(){const ot=this.getField(_e);return Mo($).replace("%1",ot?ot.getText():"")}.bind(this))}},Lv=function(){const $=this.tooltip;this.setTooltip(function(){const _e=this.getParent();return _e&&_e.getInputsInline()&&_e.tooltip||$}.bind(this))},cr=function($,_e){return _e=$.indexOf(_e),_e===-1?!1:($.splice(_e,1),!0)},Zt=function($,_e){return" "+$+","+_e+" "},gr=function($,_e){return" "+$+_e.join("")},_i=function($,_e){return" M "+$+","+_e+" "},wo=function($,_e){return" m "+$+","+_e+" "},Sn=function($,_e){return" l "+$+","+_e+" "},Ol=function($){return" l"+$.join("")},jt=function($,_e){return" "+$+" "+_e+" "},Bo=function($,_e,ot,rt){return $+" "+ot+" "+ot+" "+_e+rt},wv=function($){return mo("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Dr($)},Av=function($){return mo("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),yu($)},Nv=function($){return mo("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),U_($)},Mv=function($){return mo("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),Mo($)},Dv=function($){return mo("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),Au($)},Pv=function(){return mo("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),Am()},xv=function(){return mo("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),w_()},Bv=function($,_e){return mo("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),cr($,_e)},Uv=function(){return mo("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),A_()},Gv=function($,_e){return mo("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),Wo($,_e)},Fv=function($,_e){return mo("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),Nm($,_e)},Hv=function($){return mo("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),Ss($)},Vv=function($){mo("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),Pu($)},K_=function($,_e){$o(Bt.SERIALIZER,$,_e)},Wv=function($){Tu(Bt.SERIALIZER,$)},Rn=function($,{addCoordinates:_e=!1,addInputBlocks:ot=!0,addNextBlocks:rt=!0,doFullSerialization:lt=!0}={}){if($.isInsertionMarker())return null;const ut={type:$.type,id:$.id};return _e&&Xv($,ut),jv($,ut),zv($,ut),Yv($,ut),Kv($,ut,lt),ot&&Jv($,ut,lt),rt&&Qv($,ut,lt),ut},jv=function($,_e){$.isCollapsed()&&(_e.collapsed=!0),$.isEnabled()||(_e.enabled=!1),$.inputsInline!==void 0&&$.inputsInline!==$.inputsInlineDefault&&(_e.inline=$.inputsInline),$.data&&(_e.data=$.data)},Xv=function($,_e){const ot=$.workspace;$=$.getRelativeToSurfaceXY(),_e.x=Math.round(ot.RTL?ot.getWidth()-$.x:$.x),_e.y=Math.round($.y)},zv=function($,_e){$.saveExtraState?($=$.saveExtraState(),$!==null&&(_e.extraState=$)):$.mutationToDom&&($=$.mutationToDom(),$!==null&&(_e.extraState=Pr($).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Yv=function($,_e){$.getCommentText()&&(_e.icons={comment:{text:$.getCommentText(),pinned:$.commentModel.pinned,height:Math.round($.commentModel.size.height),width:Math.round($.commentModel.size.width)}})},Kv=function($,_e,ot){const rt=Object.create(null);for(let lt=0;lt<$.inputList.length;lt++){const ut=$.inputList[lt];for(let pt=0;pt<ut.fieldRow.length;pt++){const vt=ut.fieldRow[pt];vt.isSerializable()&&(rt[vt.name]=vt.saveState(ot))}}Object.keys(rt).length&&(_e.fields=rt)},Jv=function($,_e,ot){const rt=Object.create(null);for(let lt=0;lt<$.inputList.length;lt++){const ut=$.inputList[lt];if(ut.type===co.DUMMY)continue;const pt=l$(ut.connection,ot);pt&&(rt[ut.name]=pt)}Object.keys(rt).length&&(_e.inputs=rt)},Qv=function($,_e,ot){$.nextConnection&&($=l$($.nextConnection,ot))&&(_e.next=$)},l$=function($,_e){const ot=$.getShadowState(!0);if($=$.targetBlock(),!ot&&!$)return null;const rt=Object.create(null);return ot&&(rt.shadow=ot),$&&!$.isShadow()&&(rt.block=Rn($,{doFullSerialization:_e})),rt},is=function($,_e,{recordUndo:ot=!1}={}){return J_($,_e,{recordUndo:ot})},J_=function($,_e,{parentConnection:ot,isShadow:rt=!1,recordUndo:lt=!1}={}){const ut=Nr();pr(lt),(lt=Lo())||qt(!0),Fo();const pt=c$($,_e,{parentConnection:ot,isShadow:rt});return Ho(),to(new(oo(Jo))(pt)),qt(lt),pr(ut),_e.rendered&&setTimeout(()=>{pt.disposed||pt.setConnectionTracking(!0)},1),pt},c$=function($,_e,{parentConnection:ot,isShadow:rt=!1}={}){if(!$.type)throw new VT($);const lt=_e.newBlock($.type,$.id);return lt.setShadow(rt),Zv(lt,$),qv(lt,$),eS(lt,$),tS(ot,lt,$),oS(lt,$),iS(lt,$),rS(lt,$),nS(lt,$),sS(lt,_e.rendered),lt},Zv=function($,_e){let ot=_e.x===void 0?0:_e.x;_e=_e.y===void 0?0:_e.y;const rt=$.workspace;ot=rt.RTL?rt.getWidth()-ot:ot,$.moveBy(ot,_e)},qv=function($,_e){_e.collapsed&&$.setCollapsed(!0),_e.enabled===!1&&$.setEnabled(!1),_e.inline!==void 0&&$.setInputsInline(_e.inline),_e.data!==void 0&&($.data=_e.data)},eS=function($,_e){_e.extraState&&($.loadExtraState?$.loadExtraState(_e.extraState):$.domToMutation&&$.domToMutation(xr(_e.extraState)))},tS=function($,_e,ot){if($){if($.getSourceBlock().isShadow()&&!_e.isShadow())throw new jT(ot);if($.type===co.VALUE){var rt=_e.outputConnection;if(!rt)throw new ga("output",_e,ot)}else if(rt=_e.previousConnection,!rt)throw new ga("previous",_e,ot);if(!$.connect(rt)){const lt=_e.workspace.connectionChecker;throw new WT(lt.getErrorMessage(lt.canConnectWithReason(rt,$,!1),rt,$),$.type===co.VALUE?"output connection":"previous connection",_e,ot)}}},oS=function($,_e){_e.icons&&(_e=_e.icons.comment)&&($.setCommentText(_e.text),"pinned"in _e&&($.commentModel.pinned=_e.pinned),"width"in _e&&"height"in _e&&($.commentModel.size=new Yo(_e.width,_e.height)),_e.pinned&&$.rendered&&!$.isInFlyout&&setTimeout(()=>$.getCommentIcon().setVisible(!0),1))},iS=function($,_e){if(_e.fields){var ot=Object.keys(_e.fields);for(let rt=0;rt<ot.length;rt++){const lt=ot[rt],ut=_e.fields[lt],pt=$.getField(lt);pt?pt.loadState(ut):console.warn(`Ignoring non-existant field ${lt} in block ${$.type}`)}}},rS=function($,_e){if(_e.inputs){var ot=Object.keys(_e.inputs);for(let rt=0;rt<ot.length;rt++){const lt=ot[rt],ut=$.getInput(lt);if(!ut||!ut.connection)throw new ga(lt,$,_e);a$(ut.connection,_e.inputs[lt])}}},nS=function($,_e){if(_e.next){if(!$.nextConnection)throw new ga("next",$,_e);a$($.nextConnection,_e.next)}},a$=function($,_e){_e.shadow&&$.setShadowState(_e.shadow),_e.block&&c$(_e.block,$.getSourceBlock().workspace,{parentConnection:$})},sS=function($,_e){if(_e)for($.setConnectionTracking(!1),$.initSvg(),$.render(!1),$=$.getIcons(),_e=0;_e<$.length;_e++)$[_e].computeIconLocation();else $.initModel()},lS=function($,_e){if(!$||!_e)throw Error("Cannot connect null connections.");$.targetConnection=_e,_e.targetConnection=$},cS=function($,_e){let ot=null;_e=_e.outputConnection;const rt=_e.getConnectionChecker();for(let lt=0,ut;ut=$.inputList[lt];lt++){const pt=ut.connection;if(pt&&rt.canConnect(_e,pt,!1)){if(ot)return null;ot=pt}}return ot},aS=function($,_e){let ot;for(;ot=cS($,_e);)if($=ot.targetBlock(),!$||$.isShadow())return ot;return null},xu=function($){let _e=$.outputConnection;return(!_e||$.previousConnection&&$.previousConnection.isConnected())&&(_e=$.previousConnection),_e},u$=function($){const _e=$.workspace;var ot=$.getSvgRoot();_e.getAudioManager().play("delete");const rt=_e.getSvgXY(ot);ot=ot.cloneNode(!0),ot.setAttribute("transform","translate("+rt.x+","+rt.y+")"),_e.getParentSvg().appendChild(ot),h$(ot,{x:rt.x,y:rt.y,width:$.width,height:$.height},_e.RTL,new Date,_e.scale)},h$=function($,_e,ot,rt,lt){const ut=(new Date().getTime()-rt.getTime())/150;1<ut?go($):($.setAttribute("transform","translate("+(_e.x+(ot?-1:1)*_e.width*lt/2*ut)+","+(_e.y+_e.height*lt*ut)+") scale("+(1-ut)*lt+")"),setTimeout(h$,10,$,_e,ot,rt,lt))},d$=function($){const _e=$.workspace,ot=_e.scale;if(_e.getAudioManager().play("click"),!(1>ot)){var rt=_e.getSvgXY($.getSvgRoot());$.outputConnection?(rt.x+=($.RTL?3:-3)*ot,rt.y+=13*ot):$.previousConnection&&(rt.x+=($.RTL?-23:23)*ot,rt.y+=3*ot),$=Lt(Ot.CIRCLE,{cx:rt.x,cy:rt.y,r:0,fill:"none",stroke:"#888","stroke-width":10},_e.getParentSvg()),_$($,new Date,ot)}},_$=function($,_e,ot){const rt=(new Date().getTime()-_e.getTime())/150;1<rt?go($):($.setAttribute("r",(25*rt*ot).toString()),$.style.opacity=(1-rt).toString(),l_=setTimeout(_$,10,$,_e,ot))},p$=function($){if(Cl(),$.workspace.getAudioManager().play("disconnect"),!(1>$.workspace.scale)){var _e=$.getHeightWidth().height;_e=Math.atan(10/_e)/Math.PI*180,$.RTL||(_e*=-1),xa=$.getSvgRoot(),g$(xa,_e,new Date)}},g$=function($,_e,ot){const rt=(new Date().getTime()-ot.getTime())/200;let lt="";1>=rt&&(lt=`skewX(${Math.round(Math.sin(rt*Math.PI*3)*(1-rt)*_e)})`,l_=setTimeout(g$,10,$,_e,ot)),$.setAttribute("transform",lt)},Cl=function(){xa&&(l_&&clearTimeout(l_),xa.setAttribute("transform",""),xa=null)},Ll=function($){Vp.copyInternal($)},uS=function($){Nn=$.toCopyData()},Q_=function(){if(!Nn)return null;let $=Nn.source;return $.isFlyout&&($=$.targetWorkspace),Nn.typeCounts&&$.isCapacityAvailable(Nn.typeCounts)?$.paste(Nn.saveInfo):null},Bu=function($){return Vp.duplicateInternal($)},hS=function($){const _e=Nn;Ll($);let ot,rt,lt;return $=(lt=(ot=$.toCopyData())==null||(rt=ot.source)==null?void 0:rt.paste(Nn.saveInfo))!=null?lt:null,Nn=_e,$},m$=function(){return ou},$$=function($){ou=$},Uu=function($,_e,ot){if(G_(Wp,ot,f$),_e.length){var rt=dS(_e,ot);iu=rt,_S(rt,$,ot),setTimeout(function(){rt.focus()},1),ou=null}else Gu()},dS=function($,_e){const ot=new Mp;ot.setRole(_r.MENU);for(let rt=0;rt<$.length;rt++){const lt=$[rt],ut=new Dp(lt.text);ut.setRightToLeft(_e),ut.setRole(_r.MENUITEM),ot.addChild(ut),ut.setEnabled(lt.enabled),lt.enabled&&ut.onAction(function(){Gu(),lt.callback(lt.scope)},{})}return ot},_S=function($,_e,ot){const rt=w_();_e=new Do(_e.clientY+rt.top,_e.clientY+rt.top,_e.clientX+rt.left,_e.clientX+rt.left),pS($);const lt=$.getSize();ot&&(_e.left+=lt.width,_e.right+=lt.width,rt.left+=lt.width,rt.right+=lt.width),e$(rt,_e,lt,ot),$.focus()},pS=function($){var _e=Rs();if(!_e)throw Error("Attempting to create a context menu when widget div is null");_e=$.render(_e),Ft(_e,"blocklyContextMenu"),Et(_e,"contextmenu",null,gS),$.focus()},gS=function($){$.preventDefault(),$.stopPropagation()},Gu=function(){F_(Wp),ou=null},f$=function(){iu&&(iu.dispose(),iu=null)},mS=function($,_e){return()=>{Fo();let ot;try{ot=bs(_e,$.workspace);const rt=$.getRelativeToSurfaceXY();rt.x=$.RTL?rt.x-tt.config$$module$build$src$core$config.snapRadius:rt.x+tt.config$$module$build$src$core$config.snapRadius,rt.y+=2*tt.config$$module$build$src$core$config.snapRadius,ot.moveBy(rt.x,rt.y)}finally{Ho()}jo()&&!ot.isShadow()&&to(new(oo(Jo))(ot)),ot.select()}},T$=function($){return{text:io.REMOVE_COMMENT,enabled:!0,callback:function(){qt(!0),$.dispose(),qt(!1)}}},E$=function($){return{text:io.DUPLICATE_COMMENT,enabled:!0,callback:function(){Bu($)}}},$S=function($,_e){const ot={enabled:!0};return ot.text=io.ADD_COMMENT,ot.callback=function(){const rt=new er($,io.WORKSPACE_COMMENT_DEFAULT_TEXT,er.DEFAULT_SIZE,er.DEFAULT_SIZE);var lt=$.getInjectionDiv().getBoundingClientRect();lt=new Ht(_e.clientX-lt.left,_e.clientY-lt.top);const ut=$.getOriginOffsetInPixels();lt=Ht.difference(lt,ut),lt.scale(1/$.scale),rt.moveBy(lt.x,lt.y),$.rendered&&(rt.initSvg(),rt.render(),rt.select())},ot},Z_=function($,_e,ot,rt,lt,ut){const pt=ut.scrollbar&&ut.scrollbar.canScrollVertically();return $.horizontal===Xs.LEFT?(ot=lt.absoluteMetrics.left+ot,pt&&ut.RTL&&(ot+=No.scrollbarThickness)):(ot=lt.absoluteMetrics.left+lt.viewMetrics.width-_e.width-ot,pt&&!ut.RTL&&(ot-=No.scrollbarThickness)),$.vertical===Mn.TOP?$=lt.absoluteMetrics.top+rt:($=lt.absoluteMetrics.top+lt.viewMetrics.height-_e.height-rt,ut.scrollbar&&ut.scrollbar.canScrollHorizontally()&&($-=No.scrollbarThickness)),new Do($,$+_e.height,ot,ot+_e.width)},q_=function($,_e){return{horizontal:_e.toolboxMetrics.position===ro.LEFT||$.horizontalLayout&&!$.RTL?Xs.RIGHT:Xs.LEFT,vertical:_e.toolboxMetrics.position===ro.BOTTOM?Mn.TOP:Mn.BOTTOM}},ep=function($,_e,ot,rt){const lt=$.left,ut=$.right-$.left,pt=$.bottom-$.top;for(let vt=0;vt<rt.length;vt++){const At=rt[vt];$.intersects(At)&&($=ot===zn.UP?At.top-pt-_e:At.bottom+_e,$=new Do($,$+pt,lt,lt+ut),vt=-1)}return $},I$=function(){Oo.registry.register({name:_n.ESCAPE,preconditionFn($){return!$.options.readOnly},callback($){return $.hideChaff(),!0},keyCodes:[Yt.ESC]})},b$=function(){Oo.registry.register({name:_n.DELETE,preconditionFn($){const _e=Qt();return!$.options.readOnly&&_e!=null&&_e.isDeletable()},callback($,_e){return _e.preventDefault(),Dn.inProgress()?!1:(Qt().checkAndDelete(),!0)},keyCodes:[Yt.DELETE,Yt.BACKSPACE]})},v$=function(){const $=Oo.registry.createSerializedKey(Yt.C,[Yt.CTRL]),_e=Oo.registry.createSerializedKey(Yt.C,[Yt.ALT]),ot=Oo.registry.createSerializedKey(Yt.C,[Yt.META]);Oo.registry.register({name:_n.COPY,preconditionFn(rt){const lt=Qt();return!rt.options.readOnly&&!Dn.inProgress()&&lt!=null&&lt.isDeletable()&&lt.isMovable()},callback(rt,lt){return lt.preventDefault(),rt.hideChaff(),Ll(Qt()),!0},keyCodes:[$,_e,ot]})},S$=function(){const $=Oo.registry.createSerializedKey(Yt.X,[Yt.CTRL]),_e=Oo.registry.createSerializedKey(Yt.X,[Yt.ALT]),ot=Oo.registry.createSerializedKey(Yt.X,[Yt.META]);Oo.registry.register({name:_n.CUT,preconditionFn(rt){const lt=Qt();return!rt.options.readOnly&&!Dn.inProgress()&&lt!=null&&lt instanceof Cr&&lt.isDeletable()&&lt.isMovable()&&!lt.workspace.isFlyout},callback(){const rt=Qt();return rt?(Ll(rt),rt.checkAndDelete(),!0):!1},keyCodes:[$,_e,ot]})},R$=function(){const $=Oo.registry.createSerializedKey(Yt.V,[Yt.CTRL]),_e=Oo.registry.createSerializedKey(Yt.V,[Yt.ALT]),ot=Oo.registry.createSerializedKey(Yt.V,[Yt.META]);Oo.registry.register({name:_n.PASTE,preconditionFn(rt){return!rt.options.readOnly&&!Dn.inProgress()},callback(){return!!Q_()},keyCodes:[$,_e,ot]})},y$=function(){const $=Oo.registry.createSerializedKey(Yt.Z,[Yt.CTRL]),_e=Oo.registry.createSerializedKey(Yt.Z,[Yt.ALT]),ot=Oo.registry.createSerializedKey(Yt.Z,[Yt.META]);Oo.registry.register({name:_n.UNDO,preconditionFn(rt){return!rt.options.readOnly&&!Dn.inProgress()},callback(rt){return rt.hideChaff(),rt.undo(!1),!0},keyCodes:[$,_e,ot]})},O$=function(){const $=Oo.registry.createSerializedKey(Yt.Z,[Yt.SHIFT,Yt.CTRL]),_e=Oo.registry.createSerializedKey(Yt.Z,[Yt.SHIFT,Yt.ALT]),ot=Oo.registry.createSerializedKey(Yt.Z,[Yt.SHIFT,Yt.META]),rt=Oo.registry.createSerializedKey(Yt.Y,[Yt.CTRL]);Oo.registry.register({name:_n.REDO,preconditionFn(lt){return!Dn.inProgress()&&!lt.options.readOnly},callback(lt){return lt.hideChaff(),lt.undo(!0),!0},keyCodes:[$,_e,ot,rt]})},k$=function(){I$(),b$(),v$(),S$(),R$(),y$(),O$()},tp=function($){const _e=$.getBlocksByType("procedures_defnoreturn",!1).map(function(ot){return ot.getProcedureDef()});return $=$.getBlocksByType("procedures_defreturn",!1).map(function(ot){return ot.getProcedureDef()}),_e.sort(C$),$.sort(C$),[_e,$]},C$=function($,_e){return $[0].localeCompare(_e[0],void 0,{sensitivity:"base"})},L$=function($,_e){if(_e.isInFlyout)return $;for($=$||io.UNNAMED_KEY||"unnamed";!fS($,_e.workspace,_e);){const ot=$.match(/^(.*?)(\d+)$/);$=ot?ot[1]+(parseInt(ot[2])+1):$+"2"}return $},fS=function($,_e,ot){return!w$($,_e,ot)},w$=function($,_e,ot){_e=_e.getAllBlocks(!1);for(let lt=0;lt<_e.length;lt++)if(_e[lt]!==ot){var rt=_e[lt];if(rt.getProcedureDef&&(rt=rt.getProcedureDef(),Lr.equals(rt[0],$)))return!0}return!1},TS=function($){$=$.trim();const _e=L$($,this.getSourceBlock()),ot=this.getValue();if(ot!==$&&ot!==_e){$=this.getSourceBlock().workspace.getAllBlocks(!1);for(let rt=0;rt<$.length;rt++){const lt=$[rt];lt.renameProcedure&&lt.renameProcedure(ot,_e)}}return _e},op=function($){function _e(ut,pt){for(let At=0;At<ut.length;At++){var vt=ut[At][0];const xt=ut[At][1],ho=yo("block");ho.setAttribute("type",pt),ho.setAttribute("gap","16");const Eo=yo("mutation");for(Eo.setAttribute("name",vt),ho.appendChild(Eo),vt=0;vt<xt.length;vt++){const or=yo("arg");or.setAttribute("name",xt[vt]),Eo.appendChild(or)}ot.push(ho)}}const ot=[];if(ur.procedures_defnoreturn){var rt=yo("block");rt.setAttribute("type","procedures_defnoreturn"),rt.setAttribute("gap","16");var lt=yo("field");lt.setAttribute("name","NAME"),lt.appendChild(Gn(io.PROCEDURES_DEFNORETURN_PROCEDURE)),rt.appendChild(lt),ot.push(rt)}return ur.procedures_defreturn&&(rt=yo("block"),rt.setAttribute("type","procedures_defreturn"),rt.setAttribute("gap","16"),lt=yo("field"),lt.setAttribute("name","NAME"),lt.appendChild(Gn(io.PROCEDURES_DEFRETURN_PROCEDURE)),rt.appendChild(lt),ot.push(rt)),ur.procedures_ifreturn&&(rt=yo("block"),rt.setAttribute("type","procedures_ifreturn"),rt.setAttribute("gap","16"),ot.push(rt)),ot.length&&ot[ot.length-1].setAttribute("gap","24"),$=tp($),_e($[0],"procedures_callnoreturn"),_e($[1],"procedures_callreturn"),ot},A$=function($){var _e=[],ot=$.getBlocksByType("procedures_mutatorarg",!1);for(let ut=0,pt;pt=ot[ut];ut++)_e.push(pt.getFieldValue("NAME"));ot=yo("xml");const rt=yo("block");rt.setAttribute("type","procedures_mutatorarg");const lt=yo("field");lt.setAttribute("name","NAME"),_e=k_(em,_e),_e=Gn(_e),lt.appendChild(_e),rt.appendChild(lt),ot.appendChild(rt),$.updateToolbox(ot)},N$=function($){if($.type===Cn&&$.bubbleType==="mutator"&&$.isOpen&&$.blockId){$=Pt($.workspaceId).getBlockById($.blockId);var _e=$.type;(_e==="procedures_defnoreturn"||_e==="procedures_defreturn")&&($=$.mutator.getWorkspace(),A$($),$.addChangeListener(ES))}},ES=function($){($.type===Jo||$.type===hn||$.type===zo)&&($=Pt($.workspaceId),A$($))},M$=function($,_e){const ot=[];_e=_e.getAllBlocks(!1);for(let lt=0;lt<_e.length;lt++){var rt=_e[lt];rt.getProcedureCall&&(rt=rt.getProcedureCall())&&Lr.equals(rt,$)&&ot.push(_e[lt])}return ot},IS=function($){const _e=Nr();var ot=$.getProcedureDef()[0];const rt=$.mutationToDom(!0);$=M$(ot,$.workspace);for(let ut=0,pt;pt=$[ut];ut++){ot=(ot=pt.mutationToDom())&&Pr(ot),pt.domToMutation&&pt.domToMutation(rt);var lt=pt.mutationToDom();lt=lt&&Pr(lt),ot!==lt&&(pr(!1),to(new(oo(zo))(pt,"mutation",null,ot,lt)),pr(_e))}},bS=function($,_e){_e=_e.getAllBlocks(!1);for(let rt=0;rt<_e.length;rt++){var ot=_e[rt];if(ot.getProcedureDef&&(ot=ot.getProcedureDef())&&Lr.equals(ot[0],$))return _e[rt]}return null},D$=function($){return $.isDynamic},Fu=function(){return TE},vS=function(){mo("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),TE=!1},Al=function($,_e){$o(Bt.RENDERER,$,_e)},SS=function($){Tu(Bt.RENDERER,$)},RS=function(){mo("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),vS()},P$=function($,_e,ot){return $=new(Es(Bt.RENDERER,$))($),$.init(_e,ot),$},x$=function($){Sl($.getTargetWorkspace(),void 0,"String")},B$=function($){Sl($.getTargetWorkspace(),void 0,"Number")},U$=function($){Sl($.getTargetWorkspace(),void 0,"Colour")},ip=function($){let _e=[],ot=document.createElement("button");return ot.setAttribute("text",io.NEW_STRING_VARIABLE),ot.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),_e.push(ot),ot=document.createElement("button"),ot.setAttribute("text",io.NEW_NUMBER_VARIABLE),ot.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),_e.push(ot),ot=document.createElement("button"),ot.setAttribute("text",io.NEW_COLOUR_VARIABLE),ot.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),_e.push(ot),$.registerButtonCallback("CREATE_VARIABLE_STRING",x$),$.registerButtonCallback("CREATE_VARIABLE_NUMBER",B$),$.registerButtonCallback("CREATE_VARIABLE_COLOUR",U$),$=G$($),_e=_e.concat($)},G$=function($){$=$.getAllVariables();const _e=[];if(0<$.length){if(ur.variables_set_dynamic){var ot=$[$.length-1];const rt=yo("block");rt.setAttribute("type","variables_set_dynamic"),rt.setAttribute("gap","24"),rt.appendChild(Is(ot)),_e.push(rt)}if(ur.variables_get_dynamic){$.sort(Xl.compareByName);for(let rt=0,lt;lt=$[rt];rt++)ot=yo("block"),ot.setAttribute("type","variables_get_dynamic"),ot.setAttribute("gap","8"),ot.appendChild(Is(lt)),_e.push(ot)}}return _e},yS=function($){$.resizeContents()},OS=function($){const _e=Object.create(null),ot=I_(Bt.SERIALIZER,!0);for(const rt in ot){let lt;const ut=(lt=ot[rt])==null?void 0:lt.save($);ut&&(_e[rt]=ut)}return _e},kS=function($,_e,{recordUndo:ot=!1}={}){var rt=I_(Bt.SERIALIZER,!0);if(rt){rt=Object.entries(rt).sort((ut,pt)=>pt[1].priority-ut[1].priority);var lt=Nr();pr(ot),(ot=Lo())||qt(!0),Tn(),_e instanceof Xr&&_e.setResizesEnabled(!1);for(const[,ut]of rt.reverse()){let pt;(pt=ut)==null||pt.clear(_e)}for(let[ut,pt]of rt.reverse())if($[ut]){let vt;(vt=pt)==null||vt.load($[ut],_e)}_e instanceof Xr&&_e.setResizesEnabled(!0),In(),to(new(oo(Ds))(_e)),qt(ot),pr(lt)}},Hu=function($,_e,ot){const rt=ot.getBoundingRectangle(),lt=rt.right-rt.left,ut=Qn(_e.top,rt.top,_e.top+_e.height-(rt.bottom-rt.top))-rt.top;let pt=_e.left;return _e=_e.left+_e.width-lt,$.RTL?pt=Math.min(_e,pt):_e=Math.max(pt,_e),($=Qn(pt,rt.left,_e)-rt.left)||ut?(ot.moveBy($,ut),!0):!1},F$=function($){return _e=>{var ot=$.getMetricsManager();if(ot.hasFixedEdges()&&!$.isDragging()){var rt;if(Ep.indexOf((rt=_e.type)!=null?rt:"")!==-1){rt=ot.getScrollMetrics(!0);const lt=CS($,_e);lt&&(ot=Lo(),qt(_e.group),Hu($,rt,lt)&&!_e.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),ot!==null&&qt(ot))}else _e.type===as&&_e.scale&&_e.oldScale&&_e.scale>_e.oldScale&&rp($)}}},CS=function($,_e){let ot=null;switch(_e.type){case Jo:case rr:(ot=$.getBlockById(_e.blockId))&&(ot=ot.getRootBlock());break;case us:case Ln:ot=$.getCommentById(_e.commentId)}return ot},rp=function($){var _e=$.getMetricsManager();if(_e.hasFixedEdges()&&!$.isDragging()){_e=_e.getScrollMetrics(!0);var ot=$.getTopBoundedElements();for(let rt=0,lt;lt=ot[rt];rt++)Hu($,_e,lt)}},LS=function($,_e){if(typeof $=="string"&&($=document.getElementById($)||document.querySelector($)),!$||!wr(document,$))throw Error("Error: container is not in current document.");_e=new Wr(_e||{});const ot=document.createElement("div");ot.className="injectionDiv",ot.tabIndex=0,Ao(ot,Co.LABEL,io.WORKSPACE_ARIA_LABEL),$.appendChild(ot),$=wS(ot,_e);const rt=new tI(ot),lt=new eI(ot),ut=AS($,_e,rt,lt);return NS(ut),ko(ut),vr(ut),ot.addEventListener("focusin",function(){ko(ut)}),ut},wS=function($,_e){$.setAttribute("dir","LTR"),wm(_e.hasCss,_e.pathToMedia),$=Lt(Ot.SVG,{xmlns:ks,"xmlns:html":Br,"xmlns:xlink":hr,version:"1.1",class:"blocklySvg",tabindex:"0"},$);const ot=Lt(Ot.DEFS,{},$),rt=String(Math.random()).substring(2);return _e.gridPattern=_g.createDom(rt,_e.gridOptions,ot),$},AS=function($,_e,ot,rt){_e.parentWorkspace=null,_e=new Xr(_e,ot,rt),ot=_e.options,_e.scale=ot.zoomOptions.startScale,$.appendChild(_e.createDom("blocklyMainBackground")),rt=_e.getInjectionDiv();var lt=_e.getRenderer().getClassName();return lt&&Ft(rt,lt),(lt=_e.getTheme().getClassName())&&Ft(rt,lt),!ot.hasCategories&&ot.languageTree&&(rt=_e.addFlyout(Ot.SVG),ir(rt,$)),ot.hasTrashcan&&_e.addTrashcan(),ot.zoomOptions&&ot.zoomOptions.controls&&_e.addZoomControls(),_e.getThemeManager().subscribe($,"workspaceBackgroundColour","background-color"),_e.translate(0,0),_e.addChangeListener(F$(_e)),vr(_e),Qm(),$u(),Wm(),_e},NS=function($){const _e=$.options;var ot=$.getParentSvg();if(Et(ot.parentNode,"contextmenu",null,function(rt){Wt(rt)||rt.preventDefault()}),ot=Et(window,"resize",null,function(){$.hideChaff(!0),vr($),rp($)}),$.setResizeHandlerWrapper(ot),DS(),_e.languageTree){ot=$.getToolbox();const rt=$.getFlyout(!0);ot?ot.init():rt&&(rt.init($),rt.show(_e.languageTree),typeof rt.scrollToStart=="function"&&rt.scrollToStart())}_e.hasTrashcan&&$.trashcan.init(),_e.zoomOptions&&_e.zoomOptions.controls&&$.zoomControls_.init(),_e.moveOptions&&_e.moveOptions.scrollbars?($.scrollbar=new dm($,_e.moveOptions.scrollbars===!0||!!_e.moveOptions.scrollbars.horizontal,_e.moveOptions.scrollbars===!0||!!_e.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),$.scrollbar.resize()):$.setMetrics({x:.5,y:.5}),_e.hasSounds&&PS(_e.pathToMedia,$)},MS=function($){const _e=Xt();_e&&!(Wt($)||_e.rendered&&!_e.isVisible())&&Oo.registry.onKeyDown(_e,$)},DS=function(){oI||(Et(document,"scroll",null,function(){const $=Gt();for(let _e=0,ot;ot=$[_e];_e++)ot instanceof Xr&&ot.updateInverseScreenCTM()}),Et(document,"keydown",null,MS),Ct(document,"touchend",null,st),Ct(document,"touchcancel",null,st),ys&&Et(window,"orientationchange",document,function(){vr(Xt())})),oI=!0},PS=function($,_e){function ot(){for(;lt.length;)kt(lt.pop());rt.preload()}const rt=_e.getAudioManager();rt.load([$+"click.mp3",$+"click.wav",$+"click.ogg"],"click"),rt.load([$+"disconnect.wav",$+"disconnect.mp3",$+"disconnect.ogg"],"disconnect"),rt.load([$+"delete.mp3",$+"delete.ogg",$+"delete.wav"],"delete");const lt=[];lt.push(Et(document,"mousemove",null,ot,!0)),lt.push(Et(document,"touchstart",null,ot,!0))},H$=function(){So.registry.register({displayText(){return io.UNDO},preconditionFn($){return 0<$.workspace.getUndoStack().length?"enabled":"disabled"},callback($){$.workspace.undo(!1)},scopeType:So.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},V$=function(){So.registry.register({displayText(){return io.REDO},preconditionFn($){return 0<$.workspace.getRedoStack().length?"enabled":"disabled"},callback($){$.workspace.undo(!0)},scopeType:So.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},W$=function(){So.registry.register({displayText(){return io.CLEAN_UP},preconditionFn($){return $.workspace.isMovable()?1<$.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback($){$.workspace.cleanUp()},scopeType:So.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},j$=function($,_e){function ot(ut){lt--,ut.setCollapsed($),lt===0&&qt(!1)}let rt=0,lt=0;qt(!0);for(let ut=0;ut<_e.length;ut++){let pt=_e[ut];for(;pt;)lt++,setTimeout(ot.bind(null,pt),rt),pt=pt.getNextBlock(),rt+=10}},X$=function(){So.registry.register({displayText(){return io.COLLAPSE_ALL},preconditionFn($){if($.workspace.options.collapse){$=$.workspace.getTopBlocks(!1);for(let _e=0;_e<$.length;_e++){let ot=$[_e];for(;ot;){if(!ot.isCollapsed())return"enabled";ot=ot.getNextBlock()}}return"disabled"}return"hidden"},callback($){j$(!0,$.workspace.getTopBlocks(!0))},scopeType:So.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},z$=function(){So.registry.register({displayText(){return io.EXPAND_ALL},preconditionFn($){if($.workspace.options.collapse){$=$.workspace.getTopBlocks(!1);for(let _e=0;_e<$.length;_e++){let ot=$[_e];for(;ot;){if(ot.isCollapsed())return"enabled";ot=ot.getNextBlock()}}return"disabled"}return"hidden"},callback($){j$(!1,$.workspace.getTopBlocks(!0))},scopeType:So.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Y$=function($,_e){if($.isDeletable())Array.prototype.push.apply(_e,$.getDescendants(!1));else{$=$.getChildren(!1);for(let ot=0;ot<$.length;ot++)Y$($[ot],_e)}},np=function($){const _e=[];$=$.getTopBlocks(!0);for(let ot=0;ot<$.length;ot++)Y$($[ot],_e);return _e},Vu=function($,_e){qt(_e);const ot=$.shift();ot&&(ot.isDeadOrDying()?Vu($,_e):(ot.dispose(!1,!0),setTimeout(Vu,10,$,_e))),qt(!1)},K$=function(){So.registry.register({displayText($){return $.workspace?($=np($.workspace).length,$===1?io.DELETE_BLOCK:io.DELETE_X_BLOCKS.replace("%1",String($))):""},preconditionFn($){return $.workspace&&0<np($.workspace).length?"enabled":"disabled"},callback($){if($.workspace){$.workspace.cancelCurrentGesture();var _e=np($.workspace),ot=vn();2>_e.length?Vu(_e,ot):S_(io.DELETE_ALL_BLOCKS.replace("%1",String(_e.length)),function(rt){rt&&Vu(_e,ot)})}},scopeType:So.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},xS=function(){H$(),V$(),W$(),X$(),z$(),K$()},J$=function(){So.registry.register({displayText(){return io.DUPLICATE_BLOCK},preconditionFn($){return $=$.block,!$.isInFlyout&&$.isDeletable()&&$.isMovable()?$.isDuplicatable()?"enabled":"disabled":"hidden"},callback($){$.block&&Bu($.block)},scopeType:So.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Q$=function(){So.registry.register({displayText($){return $.block.getCommentIcon()?io.REMOVE_COMMENT:io.ADD_COMMENT},preconditionFn($){return $=$.block,!$.isInFlyout&&$.workspace.options.comments&&!$.isCollapsed()&&$.isEditable()?"enabled":"hidden"},callback($){$=$.block,$.getCommentIcon()?$.setCommentText(null):$.setCommentText("")},scopeType:So.ScopeType.BLOCK,id:"blockComment",weight:2})},Z$=function(){So.registry.register({displayText($){return $.block.getInputsInline()?io.EXTERNAL_INPUTS:io.INLINE_INPUTS},preconditionFn($){if($=$.block,!$.isInFlyout&&$.isMovable()&&!$.isCollapsed()){for(let _e=1;_e<$.inputList.length;_e++)if($.inputList[_e-1].type!==co.STATEMENT&&$.inputList[_e].type!==co.STATEMENT)return"enabled"}return"hidden"},callback($){$.block.setInputsInline(!$.block.getInputsInline())},scopeType:So.ScopeType.BLOCK,id:"blockInline",weight:3})},q$=function(){So.registry.register({displayText($){return $.block.isCollapsed()?io.EXPAND_BLOCK:io.COLLAPSE_BLOCK},preconditionFn($){return $=$.block,!$.isInFlyout&&$.isMovable()&&$.workspace.options.collapse?"enabled":"hidden"},callback($){$.block.setCollapsed(!$.block.isCollapsed())},scopeType:So.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},_f=function(){So.registry.register({displayText($){return $.block.isEnabled()?io.DISABLE_BLOCK:io.ENABLE_BLOCK},preconditionFn($){return $=$.block,!$.isInFlyout&&$.workspace.options.disable&&$.isEditable()?$.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback($){$=$.block;const _e=Lo();_e||qt(!0),$.setEnabled(!$.isEnabled()),_e||qt(!1)},scopeType:So.ScopeType.BLOCK,id:"blockDisable",weight:5})},eT=function(){So.registry.register({displayText($){var _e=$.block;return $=_e.getDescendants(!1).length,(_e=_e.getNextBlock())&&($-=_e.getDescendants(!1).length),$===1?io.DELETE_BLOCK:io.DELETE_X_BLOCKS.replace("%1",String($))},preconditionFn($){return!$.block.isInFlyout&&$.block.isDeletable()?"enabled":"hidden"},callback($){$.block&&$.block.checkAndDelete()},scopeType:So.ScopeType.BLOCK,id:"blockDelete",weight:6})},tT=function(){So.registry.register({displayText(){return io.HELP},preconditionFn($){return $=$.block,(typeof $.helpUrl=="function"?$.helpUrl():$.helpUrl)?"enabled":"hidden"},callback($){$.block.showHelp()},scopeType:So.ScopeType.BLOCK,id:"blockHelp",weight:7})},BS=function(){J$(),Q$(),Z$(),q$(),_f(),eT(),tT()},oT=function(){xS(),BS()},US=function($){const _e=[];$=$.getDescendants(!1);for(let ot=0,rt;rt=$[ot];ot++){const lt=rt.getIcons();for(let ut=0;ut<lt.length;ut++){const pt={location:lt[ut].getIconLocation(),icon:lt[ut]};_e.push(pt)}}return _e},GS=function($){Xt().hideChaff($)},FS=function($){mo("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),yS($)},HS=function($){mo("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),Ll($)},VS=function(){return mo("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!Q_()},WS=function($){mo("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),Bu($)},jS=function($){return mo("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Hm($)},XS=function($){return mo("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),x_($)},zS=function($,_e,ot,rt){return mo("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),Ct($,_e,ot,rt)},YS=function($){return mo("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),kt($)},KS=function($,_e,ot,rt,lt,ut){return mo("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),Et($,_e,ot,rt,lt,ut)},eo=eo||{};eo.scope={},eo.ASSUME_ES5=!1,eo.ASSUME_NO_NATIVE_MAP=!1,eo.ASSUME_NO_NATIVE_SET=!1,eo.SIMPLE_FROUND_POLYFILL=!1,eo.ISOLATE_POLYFILLS=!1,eo.FORCE_POLYFILL_PROMISE=!1,eo.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,eo.defineProperty=eo.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function($,_e,ot){return $==Array.prototype||$==Object.prototype||($[_e]=ot.value),$},eo.getGlobal=function($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var _e=0;_e<$.length;++_e){var ot=$[_e];if(ot&&ot.Math==Math)return ot}throw Error("Cannot find global object")},eo.global=eo.getGlobal(this),eo.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",eo.TRUST_ES6_POLYFILLS=!eo.ISOLATE_POLYFILLS||eo.IS_SYMBOL_NATIVE,eo.polyfills={},eo.propertyToPolyfillSymbol={},eo.POLYFILL_PREFIX="$jscp$",eo.polyfill=function($,_e,ot,rt){_e&&(eo.ISOLATE_POLYFILLS?eo.polyfillIsolated($,_e,ot,rt):eo.polyfillUnisolated($,_e,ot,rt))},eo.polyfillUnisolated=function($,_e,ot,rt){for(ot=eo.global,$=$.split("."),rt=0;rt<$.length-1;rt++){var lt=$[rt];if(!(lt in ot))return;ot=ot[lt]}$=$[$.length-1],rt=ot[$],_e=_e(rt),_e!=rt&&_e!=null&&eo.defineProperty(ot,$,{configurable:!0,writable:!0,value:_e})},eo.polyfillIsolated=function($,_e,ot,rt){var lt=$.split(".");$=lt.length===1,rt=lt[0],rt=!$&&rt in eo.polyfills?eo.polyfills:eo.global;for(var ut=0;ut<lt.length-1;ut++){var pt=lt[ut];if(!(pt in rt))return;rt=rt[pt]}lt=lt[lt.length-1],ot=eo.IS_SYMBOL_NATIVE&&ot==="es6"?rt[lt]:null,_e=_e(ot),_e!=null&&($?eo.defineProperty(eo.polyfills,lt,{configurable:!0,writable:!0,value:_e}):_e!==ot&&(eo.propertyToPolyfillSymbol[lt]===void 0&&(ot=1e9*Math.random()>>>0,eo.propertyToPolyfillSymbol[lt]=eo.IS_SYMBOL_NATIVE?eo.global.Symbol(lt):eo.POLYFILL_PREFIX+ot+"$"+lt),eo.defineProperty(rt,eo.propertyToPolyfillSymbol[lt],{configurable:!0,writable:!0,value:_e})))},eo.polyfill("globalThis",function($){return $||eo.global},"es_2020","es3"),eo.arrayIteratorImpl=function($){var _e=0;return function(){return _e<$.length?{done:!1,value:$[_e++]}:{done:!0}}},eo.arrayIterator=function($){return{next:eo.arrayIteratorImpl($)}},eo.initSymbol=function(){},eo.iteratorPrototype=function($){return $={next:$},$[Symbol.iterator]=function(){return this},$},eo.iteratorFromArray=function($,_e){$ instanceof String&&($+="");var ot=0,rt=!1,lt={next:function(){if(!rt&&ot<$.length){var ut=ot++;return{value:_e(ut,$[ut]),done:!1}}return rt=!0,{done:!0,value:void 0}}};return lt[Symbol.iterator]=function(){return lt},lt},eo.polyfill("Array.prototype.values",function($){return $||function(){return eo.iteratorFromArray(this,function(_e,ot){return ot})}},"es8","es3"),eo.owns=function($,_e){return Object.prototype.hasOwnProperty.call($,_e)},eo.polyfill("Object.values",function($){return $||function(_e){var ot=[],rt;for(rt in _e)eo.owns(_e,rt)&&ot.push(_e[rt]);return ot}},"es8","es3"),eo.polyfill("Array.prototype.flat",function($){return $||function(_e){_e=_e===void 0?1:_e;for(var ot=[],rt=0;rt<this.length;rt++){var lt=this[rt];Array.isArray(lt)&&0<_e?(lt=Array.prototype.flat.call(lt,_e-1),ot.push.apply(ot,lt)):ot.push(lt)}return ot}},"es9","es5"),eo.polyfill("Object.entries",function($){return $||function(_e){var ot=[],rt;for(rt in _e)eo.owns(_e,rt)&&ot.push([rt,_e[rt]]);return ot}},"es8","es3");var ar=ar||{};ar.global=globalThis||root,ar.define=function($,_e){return _e},ar.DEBUG=!1,ar.DISALLOW_TEST_ONLY_CODE=!ar.DEBUG,ar.provide=function($){},ar.module=function($){},ar.module.get=function($){},ar.module.declareLegacyNamespace=function(){},ar.setTestOnly=function($){if(ar.DISALLOW_TEST_ONLY_CODE)throw $=$||"",Error("Importing test-only code into non-debug environment"+($?": "+$:"."))},ar.require=function($){},ar.requireType=function($){};var JS=750,iT="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Nl=null,mr=globalThis.PointerEvent?{mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:{mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]},Wu=0,$r={};$r.TOUCH_ENABLED=iT,$r.TOUCH_MAP=mr,$r.checkTouchIdentifier=$t,$r.clearTouchIdentifier=ct,$r.getTouchIdentifierFromEvent=gt,$r.isMouseOrTouchEvent=_t,$r.isTouchEvent=mt,$r.longStart=nt,$r.longStop=st,$r.setClientFromTouch=at,$r.shouldHandleEvent=ht,$r.splitEventByTouches=Tt;var sp,rT,nT,sT,ju,Xu,lp,lT,cT,aT;(function($){function _e(rt){return ot.indexOf(rt.toUpperCase())!==-1}sp=$;const ot=sp.toUpperCase();rT=_e("JavaFX"),nT=_e("WebKit"),sT=_e("Gecko")&&!nT,ju=_e("Android"),$=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Xu=_e("iPad")||_e("Macintosh")&&0<$,lp=_e("iPhone")&&!Xu,lT=_e("Macintosh"),cT=Xu||ju&&!_e("Mobile")||_e("Silk"),aT=!cT&&(lp||ju)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var QS=sp,uT=rT,cp=sT,Ml=ju,ys=Xu,hT=lp,ap=lT,up=aT,yn={};yn.ANDROID=Ml,yn.GECKO=cp,yn.IPAD=ys,yn.IPHONE=hT,yn.JavaFx=uT,yn.MAC=ap,yn.MOBILE=up,yn.raw=QS;var dT=40,_T=125,On={};On.bind=Ct,On.conditionalBind=Et,On.getScrollDeltaPixels=bt,On.isRightButton=St,On.isTargetInput=Wt,On.mouseToSvg=It,On.unbind=kt;var ur=Object.create(null),Os,pT,hp,gT,rs,dp;Os=Object.create(null),hp=null,rs=[],dp={defineBlocksWithJsonArrayInternal:zt},tt.module$build$src$core$common={},tt.module$build$src$core$common.TEST_ONLY=dp,tt.module$build$src$core$common.createBlockDefinitionsFromJsonArray=so,tt.module$build$src$core$common.defineBlocks=lo,tt.module$build$src$core$common.defineBlocksWithJsonArray=Bn,tt.module$build$src$core$common.draggingConnections=rs,tt.module$build$src$core$common.getAllWorkspaces=Gt,tt.module$build$src$core$common.getBlockTypeCounts=Wo,tt.module$build$src$core$common.getMainWorkspace=Xt,tt.module$build$src$core$common.getParentContainer=br,tt.module$build$src$core$common.getSelected=Qt,tt.module$build$src$core$common.getWorkspaceById=Pt,tt.module$build$src$core$common.registerWorkspace=Jt,tt.module$build$src$core$common.setMainWorkspace=ko,tt.module$build$src$core$common.setParentContainer=Yr,tt.module$build$src$core$common.setSelected=xo,tt.module$build$src$core$common.svgResize=vr,tt.module$build$src$core$common.unregisterWorkpace=Kt;var ks="http://www.w3.org/2000/svg",Br="http://www.w3.org/1999/xhtml",hr="http://www.w3.org/1999/xlink",ln;(function($){$[$.ELEMENT_NODE=1]="ELEMENT_NODE",$[$.TEXT_NODE=3]="TEXT_NODE",$[$.COMMENT_NODE=8]="COMMENT_NODE",$[$.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(ln||(ln={}));var Ur=null,_p=0,zu=null,Vo={};Vo.HTML_NS=Br,Vo.NodeType=ln,Vo.SVG_NS=ks,Vo.XLINK_NS=hr,Vo.addClass=Ft,Vo.containsNode=wr,Vo.createSvgElement=Lt,Vo.getFastTextWidth=Un,Vo.getFastTextWidthWithSizeString=_l,Vo.getTextWidth=$_,Vo.hasClass=Jn,Vo.insertAfter=ir,Vo.measureFontMetrics=$l,Vo.removeClass=uo,Vo.removeClasses=Kr,Vo.removeNode=go,Vo.setCssTransform=$n,Vo.startTextWidthCache=Tn,Vo.stopTextWidthCache=In;var Yu={};Yu.clamp=Qn,Yu.toDegrees=Jr,Yu.toRadians=Sr;var Do=class{constructor($,_e,ot,rt){this.top=$,this.bottom=_e,this.left=ot,this.right=rt}contains($,_e){return $>=this.left&&$<=this.right&&_e>=this.top&&_e<=this.bottom}intersects($){return!(this.left>$.right||this.right<$.left||this.top>$.bottom||this.bottom<$.top)}},Xo={};Xo.warn=mo;var Ht=class{constructor($,_e){this.x=$,this.y=_e}clone(){return new Ht(this.x,this.y)}scale($){return this.x*=$,this.y*=$,this}translate($,_e){return this.x+=$,this.y+=_e,this}static equals($,_e){return $===_e?!0:$&&_e?$.x===_e.x&&$.y===_e.y:!1}static distance($,_e){const ot=$.x-_e.x;return $=$.y-_e.y,Math.sqrt(ot*ot+$*$)}static magnitude($){return Math.sqrt($.x*$.x+$.y*$.y)}static difference($,_e){return new Ht($.x-_e.x,$.y-_e.y)}static sum($,_e){return new Ht($.x+_e.x,$.y+_e.y)}},Yo=class{constructor($,_e){this.width=$,this.height=_e}static equals($,_e){return $===_e?!0:$&&_e?$.width===_e.width&&$.height===_e.height:!1}},mT={getSizeInternal:f_},cn={};cn.TEST_ONLY=mT,cn.getBorderBox=Qr,cn.getCascadedStyle=T_,cn.getComputedStyle=Ar,cn.getContainerOffsetToScrollInto=mu,cn.getPageOffset=bn,cn.getSize=fs,cn.getViewportPageOffset=Zo,cn.scrollIntoContainerView=Ut;var Dl=16,pp=1,$T=12,gp=16,Ku=.25,mp=null,ns=null,Cs="",Ls="",bo,ws,ss,$p=null,ls=null,fT=null,fp={getBoundsInfo:function(){const $=bn($p),_e=fs($p);return{left:$.x,right:$.x+_e.width,top:$.y,bottom:$.y+_e.height,width:_e.width,height:_e.height}},getPositionMetrics:function($,_e,ot,rt){const lt=fp.getBoundsInfo(),ut=fs(bo);return _e+ut.height<lt.bottom?qn($,_e,lt,ut):rt-ut.height>lt.top?fm(ot,rt,lt,ut):_e+ut.height<document.documentElement.clientHeight?qn($,_e,lt,ut):rt-ut.height>document.documentElement.clientTop?fm(ot,rt,lt,ut):TI($,lt,ut)}},Uo={};Uo.ANIMATION_TIME=Ku,Uo.ARROW_HORIZONTAL_PADDING=$T,Uo.ARROW_SIZE=Dl,Uo.BORDER_SIZE=pp,Uo.PADDING_Y=gp,Uo.TEST_ONLY=fp,Uo.clearContent=Tl,Uo.createDom=$u,Uo.getContentDiv=Ts,Uo.getPositionX=fu,Uo.hide=E_,Uo.hideIfOwner=El,Uo.hideWithoutAnimation=Zr,Uo.isVisible=Tm,Uo.repositionForWindowResize=EI,Uo.setBoundsElement=Zn,Uo.setColour=qo,Uo.show=Io,Uo.showPositionedByBlock=dt,Uo.showPositionedByField=ft;var Hn=Object.create(null),ZS={typeMap:Hn},Ju=Object.create(null),kn="default",Bt=class{constructor($){this.name=$}toString(){return this.name}};Bt.CONNECTION_CHECKER=new Bt("connectionChecker"),Bt.CURSOR=new Bt("cursor"),Bt.EVENT=new Bt("event"),Bt.FIELD=new Bt("field"),Bt.RENDERER=new Bt("renderer"),Bt.TOOLBOX=new Bt("toolbox"),Bt.THEME=new Bt("theme"),Bt.TOOLBOX_ITEM=new Bt("toolboxItem"),Bt.FLYOUTS_VERTICAL_TOOLBOX=new Bt("flyoutsVerticalToolbox"),Bt.FLYOUTS_HORIZONTAL_TOOLBOX=new Bt("flyoutsHorizontalToolbox"),Bt.METRICS_MANAGER=new Bt("metricsManager"),Bt.BLOCK_DRAGGER=new Bt("blockDragger"),Bt.SERIALIZER=new Bt("serializer");var Gr={};Gr.DEFAULT=kn,Gr.TEST_ONLY=ZS,Gr.Type=Bt,Gr.getAllItems=I_,Gr.getClass=Es,Gr.getClassFromOptions=Rr,Gr.getObject=Eu,Gr.hasItem=bm,Gr.register=$o,Gr.unregister=Tu;var TT="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ET={genUid:()=>{const $=TT.length,_e=[];for(let ot=0;20>ot;ot++)_e[ot]=TT.charAt(Math.random()*$);return _e.join("")}},qS=0,Qu={};Qu.TEST_ONLY=ET,Qu.genUid=vn,Qu.getNextUniqueId=Il;var IT="",Pl=!0,Tp=0,Jo="create",hn="delete",zo="change",rr="move",cs="var_create",As="var_delete",xl="var_rename",Bl="ui",Ns="drag",Vn="selected",Wn="click",Ul="marker_move",Cn="bubble_open",Gl="trashcan_open",Fl="toolbox_item_select",Hl="theme_change",as="viewport_change",us="comment_create",Ms="comment_delete",Vl="comment_change",Ln="comment_move",Ds="finished_loading",Ep=[Jo,rr,us,Ln],Ps=[],Ip={FIRE_QUEUE:Ps,fireNow:vm,fireInternal:bI,setGroupInternal:vI},ao={};ao.BLOCK_CHANGE=zo,ao.BLOCK_CREATE=Jo,ao.BLOCK_DELETE=hn,ao.BLOCK_DRAG=Ns,ao.BLOCK_MOVE=rr,ao.BUBBLE_OPEN=Cn,ao.BUMP_EVENTS=Ep,ao.CHANGE=zo,ao.CLICK=Wn,ao.COMMENT_CHANGE=Vl,ao.COMMENT_CREATE=us,ao.COMMENT_DELETE=Ms,ao.COMMENT_MOVE=Ln,ao.CREATE=Jo,ao.DELETE=hn,ao.FINISHED_LOADING=Ds,ao.MARKER_MOVE=Ul,ao.MOVE=rr,ao.SELECTED=Vn,ao.TEST_ONLY=Ip,ao.THEME_CHANGE=Hl,ao.TOOLBOX_ITEM_SELECT=Fl,ao.TRASHCAN_OPEN=Gl,ao.UI=Bl,ao.VAR_CREATE=cs,ao.VAR_DELETE=As,ao.VAR_RENAME=xl,ao.VIEWPORT_CHANGE=as,ao.clearPendingUndo=b_,ao.disable=Fo,ao.disableOrphans=v_,ao.enable=Ho,ao.filter=Iu,ao.fire=to,ao.fromJson=Sm,ao.get=oo,ao.getDescendantIds=bu,ao.getGroup=Lo,ao.getRecordUndo=Nr,ao.isEnabled=jo,ao.setGroup=qt,ao.setRecordUndo=pr;var co;(function($){$[$.VALUE=1]="VALUE",$[$.STATEMENT=3]="STATEMENT",$[$.DUMMY=5]="DUMMY"})(co||(co={})),tt.module$build$src$core$input_types={},tt.module$build$src$core$input_types.inputTypes=co;var bp,Wl;bp="https://developers.google.com/blockly/xml",Wl=globalThis.document,tt.module$build$src$core$utils$xml={},tt.module$build$src$core$utils$xml.NAME_SPACE=bp,tt.module$build$src$core$utils$xml.createElement=yo,tt.module$build$src$core$utils$xml.createTextNode=Gn,tt.module$build$src$core$utils$xml.domToText=ym,tt.module$build$src$core$utils$xml.getDocument=SI,tt.module$build$src$core$utils$xml.setDocument=RI,tt.module$build$src$core$utils$xml.textToDomDocument=Rm;var bT=function($,_e){window.alert($),_e&&_e()},vT=function($,_e){_e(window.confirm($))},ST=function($,_e,ot){ot(window.prompt($,_e))},RT={confirmInternal:OI},dr={};dr.TEST_ONLY=RT,dr.alert=vu,dr.confirm=S_,dr.prompt=R_,dr.setAlert=yI,dr.setConfirm=kI,dr.setPrompt=CI;var io,vp;io=Object.create(null),vp=function($){Object.keys($).forEach(function(_e){io[_e]=$[_e]})},tt.module$build$src$core$msg={},tt.module$build$src$core$msg.Msg=io,tt.module$build$src$core$msg.setLocale=vp;var xs=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Lo(),this.recordUndo=Nr()}toJson(){return{type:this.type,group:this.group}}fromJson($){this.isBlank=!1,this.group=$.group||""}isNull(){return!1}run($){}getEventWorkspace_(){let $;if(this.workspaceId&&($=Pt(this.workspaceId)),!$)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return $}},Zu=class extends xs{constructor($){super(),this.isBlank=typeof $>"u",$&&(this.varId=$.getId(),this.workspaceId=$.workspace.id)}toJson(){const $=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return $.varId=this.varId,$}fromJson($){super.fromJson($),this.varId=$.varId}},yT=class extends Zu{constructor($){super($),this.type=cs,$&&(this.varType=$.type,this.varName=$.name)}toJson(){const $=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return $.varType=this.varType,$.varName=this.varName,$}fromJson($){super.fromJson($),this.varType=$.varType,this.varName=$.varName}run($){const _e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");$?_e.createVariable(this.varName,this.varType,this.varId):_e.deleteVariableById(this.varId)}};$o(Bt.EVENT,cs,yT);var Xl=class{constructor($,_e,ot,rt){this.workspace=$,this.name=_e,this.type=ot||"",this.id_=rt||vn(),to(new(oo(cs))(this))}getId(){return this.id_}static compareByName($,_e){return $.name.localeCompare(_e.name,void 0,{sensitivity:"base"})}},qu,_h,Sp;qu="VARIABLE",_h="ijkmnopqrstuvwxyzabcdefgh",Sp={generateUniqueNameInternal:wI},tt.module$build$src$core$variables={},tt.module$build$src$core$variables.CATEGORY_NAME=qu,tt.module$build$src$core$variables.TEST_ONLY=Sp,tt.module$build$src$core$variables.VAR_LETTER_OPTIONS=_h,tt.module$build$src$core$variables.allDeveloperVariables=LI,tt.module$build$src$core$variables.allUsedVarModels=y_,tt.module$build$src$core$variables.createVariableButtonHandler=Sl,tt.module$build$src$core$variables.flyoutCategory=O_,tt.module$build$src$core$variables.flyoutCategoryBlocks=Om,tt.module$build$src$core$variables.generateUniqueName=km,tt.module$build$src$core$variables.generateUniqueNameFromOptions=k_,tt.module$build$src$core$variables.generateVariableFieldDom=Is,tt.module$build$src$core$variables.getAddedVariables=L_,tt.module$build$src$core$variables.getOrCreateVariablePackage=Su,tt.module$build$src$core$variables.getVariable=Ru,tt.module$build$src$core$variables.nameUsedWithAnyType=Lm,tt.module$build$src$core$variables.promptName=C_,tt.module$build$src$core$variables.renameVariable=Cm;var dn=class{constructor($,_e,ot,rt,lt){this.workspace=$,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=lt&&!$.getCommentById(lt)?lt:vn(),$.addTopComment(this),this.xy_=new Ht(0,0),this.height_=ot,this.width_=rt,this.RTL=$.RTL,this.content_=_e,dn.fireCreateEvent(this)}dispose(){this.disposed_||(jo()&&to(new(oo(Ms))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight($){this.height_=$}getWidth(){return this.width_}setWidth($){this.width_=$}getXY(){return new Ht(this.xy_.x,this.xy_.y)}moveBy($,_e){const ot=new(oo(Ln))(this);this.xy_.translate($,_e),ot.recordNew(),to(ot)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable($){this.deletable_=$}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable($){this.movable_=$}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable($){this.editable_=$}getContent(){return this.content_}setContent($){this.content_!==$&&(to(new(oo(Vl))(this,this.content_,$)),this.content_=$)}toXmlWithXY($){return $=this.toXml($),$.setAttribute("x",`${Math.round(this.xy_.x)}`),$.setAttribute("y",`${Math.round(this.xy_.y)}`),$.setAttribute("h",`${this.height_}`),$.setAttribute("w",`${this.width_}`),$}toXml($){const _e=yo("comment");return $||(_e.id=this.id),_e.textContent=this.getContent(),_e}static fireCreateEvent($){if(jo()){const _e=Lo();_e||qt(!0);try{to(new(oo(us))($))}finally{_e||qt(!1)}}}static fromXml($,_e){var ot=dn.parseAttributes($);return _e=new dn(_e,ot.content,ot.h,ot.w,ot.id),ot=$.getAttribute("x"),$=$.getAttribute("y"),ot=ot?parseInt(ot,10):NaN,$=$?parseInt($,10):NaN,isNaN(ot)||isNaN($)||_e.moveBy(ot,$),dn.fireCreateEvent(_e),_e}static parseAttributes($){const _e=$.getAttribute("h"),ot=$.getAttribute("w"),rt=$.getAttribute("x"),lt=$.getAttribute("y"),ut=$.getAttribute("id");if(!ut)throw Error("No ID present in XML comment definition.");let pt;return{id:ut,h:_e?parseInt(_e):100,w:ot?parseInt(ot):100,x:rt?parseInt(rt):NaN,y:lt?parseInt(lt):NaN,content:(pt=$.textContent)!=null?pt:""}}},Fr=class extends xs{constructor($){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof $>"u",this.workspaceId=$||""}},OT=class extends Fr{constructor($,_e,ot){super(ot),this.type=Vn,this.oldElementId=$!=null?$:void 0,this.newElementId=_e!=null?_e:void 0}toJson(){const $=super.toJson();return $.oldElementId=this.oldElementId,$.newElementId=this.newElementId,$}fromJson($){super.fromJson($),this.oldElementId=$.oldElementId,this.newElementId=$.newElementId}};$o(Bt.EVENT,Vn,OT);var Rp=!1,yp=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  // @todo: spec for maximum height.
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,Op={};Op.inject=wm,Op.register=Mr;var Ot=class{constructor($){this.tagName=$}toString(){return this.tagName}};Ot.ANIMATE=new Ot("animate"),Ot.CIRCLE=new Ot("circle"),Ot.CLIPPATH=new Ot("clipPath"),Ot.DEFS=new Ot("defs"),Ot.FECOMPOSITE=new Ot("feComposite"),Ot.FECOMPONENTTRANSFER=new Ot("feComponentTransfer"),Ot.FEFLOOD=new Ot("feFlood"),Ot.FEFUNCA=new Ot("feFuncA"),Ot.FEGAUSSIANBLUR=new Ot("feGaussianBlur"),Ot.FEPOINTLIGHT=new Ot("fePointLight"),Ot.FESPECULARLIGHTING=new Ot("feSpecularLighting"),Ot.FILTER=new Ot("filter"),Ot.FOREIGNOBJECT=new Ot("foreignObject"),Ot.G=new Ot("g"),Ot.IMAGE=new Ot("image"),Ot.LINE=new Ot("line"),Ot.PATH=new Ot("path"),Ot.PATTERN=new Ot("pattern"),Ot.POLYGON=new Ot("polygon"),Ot.RECT=new Ot("rect"),Ot.SVG=new Ot("svg"),Ot.TEXT=new Ot("text"),Ot.TSPAN=new Ot("tspan");var kT=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,CT=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,eR={XY_REGEX:kT,XY_STYLE_REGEX:CT},jn={};jn.TEST_ONLY=eR,jn.getDocumentScroll=A_,jn.getInjectionDivXY=yu,jn.getRelativeXY=Dr,jn.getViewportBBox=w_,jn.is3dSupported=Am,jn.screenToWsCoordinates=Nm;var Qo=8,_d=3,tR=2,er=class extends dn{constructor($,_e,ot,rt,lt){super($,_e,ot,rt,lt),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=Lt(Ot.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=$,this.svgRect_=Lt(Ot.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:_d,ry:_d}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!$.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(Qt()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),jo()&&to(new(oo(Ms))(this)),go(this.svgGroup_),this.disposeInternal_(),Fo(),super.dispose(),Ho())}initSvg($){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Et(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),Et(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!$&&this.textarea_&&this.textarea_.select()}pathMouseDown_($){const _e=this.workspace.getGesture($);_e&&_e.handleBubbleStart($,this)}showContextMenu($){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(Qt()!==this){var $=null;if(Qt()){$=Qt().id,Fo();try{Qt().unselect()}finally{Ho()}}$=new(oo(Vn))($,this.id,this.workspace.id),to($),xo(this),this.addSelect()}}unselect(){if(Qt()===this){var $=new(oo(Vn))(this.id,null,this.workspace.id);to($),xo(null),this.removeSelect(),this.blurFocus()}}addSelect(){Ft(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){Ft(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){Ft(this.svgGroup_,"blocklyFocused")}removeFocus(){uo(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let $=0,_e=0;const ot=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let rt=this.getSvgRoot();if(rt)do{var lt=Dr(rt);$+=lt.x,_e+=lt.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===rt&&(lt=this.workspace.getBlockDragSurface().getSurfaceTranslation(),$+=lt.x,_e+=lt.y),rt=rt.parentNode}while(rt&&rt!==this.workspace.getBubbleCanvas()&&rt!==ot);return this.xy_=new Ht($,_e)}moveBy($,_e){const ot=new(oo(Ln))(this),rt=this.getRelativeToSurfaceXY();this.translate(rt.x+$,rt.y+_e),this.xy_=new Ht(rt.x+$,rt.y+_e),ot.recordNew(),to(ot),this.workspace.resizeContents()}translate($,_e){this.xy_=new Ht($,_e),this.getSvgRoot().setAttribute("transform","translate("+$+","+_e+")")}moveToDragSurface(){if(this.useDragSurface_){var $=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface($.x,$.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag($,_e){$?$.translateSurface(_e.x,_e.y):(this.svgGroup_.translate_="translate("+_e.x+","+_e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo($,_e){this.translate($,_e)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var $=this.getRelativeToSurfaceXY();const _e=this.getHeightWidth(),ot=$.y,rt=$.y+_e.height;let lt;return this.RTL?(lt=$.x-_e.width,$=$.x):(lt=$.x,$=$.x+_e.width),new Do(ot,rt,lt,$)}updateMovable(){this.isMovable()?Ft(this.svgGroup_,"blocklyDraggable"):uo(this.svgGroup_,"blocklyDraggable")}setMovable($){super.setMovable($),this.updateMovable()}setEditable($){super.setEditable($),this.textarea_&&(this.textarea_.readOnly=!$)}setDragging($){$?($=this.getSvgRoot(),$.translate_="",$.skew_="",Ft(this.svgGroup_,"blocklyDragging")):uo(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent($){super.setContent($),this.textarea_&&(this.textarea_.value=$)}setDeleteStyle($){$?Ft(this.svgGroup_,"blocklyDraggingDelete"):uo(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout($){}toXmlWithXY($){let _e=0;this.workspace.RTL&&(_e=this.workspace.getWidth()),$=this.toXml($);const ot=this.getRelativeToSurfaceXY();return $.setAttribute("x",Math.round(this.workspace.RTL?_e-ot.x:ot.x)),$.setAttribute("y",Math.round(ot.y)),$.setAttribute("h",this.getHeight()),$.setAttribute("w",this.getWidth()),$}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var $=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=Lt(Ot.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=Lt(Ot.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:_d,ry:_d}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_($.width,$.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&Et(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&(Et(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),Et(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),Et(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=Lt(Ot.FOREIGNOBJECT,{x:0,y:er.TOP_OFFSET,class:"blocklyCommentForeignObject"});const $=document.createElementNS(Br,"body");$.setAttribute("xmlns",Br),$.className="blocklyMinimalBody";const _e=document.createElementNS(Br,"textarea");return _e.className="blocklyCommentTextarea",_e.setAttribute("dir",this.RTL?"RTL":"LTR"),_e.readOnly=!this.isEditable(),$.appendChild(_e),this.textarea_=_e,this.foreignObject_.appendChild($),Et(_e,"wheel",this,function(ot){ot.stopPropagation()}),Et(_e,"change",this,function(ot){this.setContent(_e.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=Lt(Ot.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),Lt(Ot.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Qo.toString())},this.resizeGroup_),Lt(Ot.LINE,{class:"blocklyResizeLine",x1:Qo/3,y1:Qo-1,x2:Qo-1,y2:Qo/3},this.resizeGroup_),Lt(Ot.LINE,{class:"blocklyResizeLine",x1:2*Qo/3,y1:Qo-1,x2:Qo-1,y2:2*Qo/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=Lt(Ot.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Lt(Ot.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),Lt(Ot.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),Lt(Ot.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_($){this.unbindDragEvents_(),St($)||(this.workspace.startDrag($,new Ht(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Et(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Et(document,"mousemove",this,this.resizeMouseMove_),this.workspace.hideChaff()),$.stopPropagation()}deleteMouseDown_($){this.deleteIconBorder_&&Ft(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),$.stopPropagation()}deleteMouseOut_($){this.deleteIconBorder_&&uo(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_($){this.dispose(),$.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(kt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(kt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_($){ct(),this.unbindDragEvents_()}resizeMouseMove_($){this.autoLayout_=!1,$=this.workspace.moveDrag($),this.setSize_(this.RTL?-$.x:$.x,$.y)}resizeComment_(){const $=this.getHeightWidth(),_e=er.TOP_OFFSET,ot=2*tR;this.foreignObject_.setAttribute("width",$.width),this.foreignObject_.setAttribute("height",($.height-_e).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-$.width).toString()),this.textarea_.style.width=$.width-ot+"px",this.textarea_.style.height=$.height-ot-_e+"px"}setSize_($,_e){$=Math.max($,45),_e=Math.max(_e,20+er.TOP_OFFSET),this.width_=$,this.height_=_e,this.svgRect_.setAttribute("width",$),this.svgRect_.setAttribute("height",_e),this.svgRectTarget_.setAttribute("width",$),this.svgRectTarget_.setAttribute("height",_e),this.svgHandleTarget_.setAttribute("width",$),this.svgHandleTarget_.setAttribute("height",er.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-$+Qo)+","+(_e-Qo)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-$+Qo)+","+-Qo+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+($-Qo)+","+(_e-Qo)+")"),this.deleteGroup_.setAttribute("transform","translate("+($-Qo)+","+-Qo+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&Ft(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&Ft(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&uo(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&uo(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered($,_e,ot){Fo();let rt;try{const lt=dn.parseAttributes($);if(rt=new er(_e,lt.content,lt.h,lt.w,lt.id),_e.rendered&&(rt.initSvg(!0),rt.render()),!isNaN(lt.x)&&!isNaN(lt.y))if(_e.RTL){const ut=ot||_e.getWidth();rt.moveBy(ut-lt.x,lt.y)}else rt.moveBy(lt.x,lt.y)}finally{Ho()}return dn.fireCreateEvent(rt),rt}};er.DEFAULT_SIZE=100,er.TOP_OFFSET=10,Mr(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),tt.module$build$src$core$xml={},tt.module$build$src$core$xml.appendDomToWorkspace=UI,tt.module$build$src$core$xml.blockToDom=es,tt.module$build$src$core$xml.blockToDomWithXY=Ou,tt.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=BI,tt.module$build$src$core$xml.deleteNext=YI,tt.module$build$src$core$xml.domToBlock=bs,tt.module$build$src$core$xml.domToPrettyText=xI,tt.module$build$src$core$xml.domToText=Pr,tt.module$build$src$core$xml.domToVariables=Pm,tt.module$build$src$core$xml.domToWorkspace=Rl,tt.module$build$src$core$xml.textToDom=xr,tt.module$build$src$core$xml.variablesToDom=Mm,tt.module$build$src$core$xml.workspaceToDom=MI;var zl=class extends xs{constructor($){super(),this.isBlank=!!$,$&&(this.blockId=$.id,this.workspaceId=$.workspace.id)}toJson(){const $=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return $.blockId=this.blockId,$}fromJson($){super.fromJson($),this.blockId=$.blockId}},Bs=class extends zl{constructor($,_e,ot,rt,lt){super($),this.type=zo,$&&(this.element=_e,this.name=ot||void 0,this.oldValue=rt,this.newValue=lt)}toJson(){const $=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return $.element=this.element,$.name=this.name,$.oldValue=this.oldValue,$.newValue=this.newValue,$}fromJson($){super.fromJson($),this.element=$.element,this.name=$.name,this.oldValue=$.oldValue,this.newValue=$.newValue}isNull(){return this.oldValue===this.newValue}run($){var _e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(_e=_e.getBlockById(this.blockId),!_e)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(_e.mutator&&_e.mutator.setVisible(!1),$=$?this.newValue:this.oldValue,this.element){case"field":(_e=_e.getField(this.name))?_e.setValue($):console.warn("Can't set non-existent field: "+this.name);break;case"comment":_e.setCommentText($||null);break;case"collapsed":_e.setCollapsed(!!$);break;case"disabled":_e.setEnabled(!$);break;case"inline":_e.setInputsInline(!!$);break;case"mutation":const ot=Bs.getExtraBlockState_(_e);_e.loadExtraState?_e.loadExtraState(JSON.parse($||"{}")):_e.domToMutation&&_e.domToMutation(xr($||"<mutation/>")),to(new Bs(_e,"mutation",null,ot,$));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_($){return $.saveExtraState?($=$.saveExtraState())?JSON.stringify($):"":$.mutationToDom&&($=$.mutationToDom())?Pr($):""}};$o(Bt.EVENT,zo,Bs);var Yl=class{constructor($){this.workspace=$,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker($,_e){this.markers.has($)&&this.unregisterMarker($),_e.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,_e)),this.setMarkerSvg(_e.getDrawer().createDom()),this.markers.set($,_e)}unregisterMarker($){const _e=this.markers.get($);if(_e)_e.dispose(),this.markers.delete($);else throw Error("Marker with ID "+$+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker($){return this.markers.get($)||null}setCursor($){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=$)&&($=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer($),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg($){$?(this.workspace.getBlockCanvas().appendChild($),this.cursorSvg_=$):this.cursorSvg_=null}setMarkerSvg($){$?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore($,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild($)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const $=Object.keys(this.markers);for(let _e=0,ot;ot=$[_e];_e++)this.unregisterMarker(ot);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Yl.LOCAL_MARKER="local_marker_1",tt.module$build$src$core$utils$string={},tt.module$build$src$core$utils$string.commonWordPrefix=Bm,tt.module$build$src$core$utils$string.commonWordSuffix=Um,tt.module$build$src$core$utils$string.isNumber=Hm,tt.module$build$src$core$utils$string.shortestStringLength=ku,tt.module$build$src$core$utils$string.startsWith=KI,tt.module$build$src$core$utils$string.wrap=Gm;var e_=void 0,Kl=!1,Us=!1,LT=50,wT=0,Jl=0,kp=0,Cp=0,Or=null,Ql=null,Lp=0,wp=10,AT=10,NT=750,t_=5,Go=null,Po={};Po.HOVER_MS=NT,Po.LIMIT=LT,Po.MARGINS=t_,Po.OFFSET_X=Lp,Po.OFFSET_Y=wp,Po.RADIUS_OK=AT,Po.bindMouseEvents=Cu,Po.block=zm,Po.createDom=Wm,Po.dispose=Xm,Po.getCustomTooltip=qI,Po.getDiv=ev,Po.getTooltipOfObject=yl,Po.hide=ts,Po.isVisible=_b,Po.setCustomTooltip=ZI,Po.unbindMouseEvents=Lu,Po.unblock=Ym;var Ap=.45,Np=.65,MT={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},tr={};tr.blend=vs,tr.getHsvSaturation=Km,tr.getHsvValue=Jm,tr.hexToRgb=D_,tr.hsvToHex=P_,tr.hueToHex=x_,tr.names=MT,tr.parse=os,tr.rgbToHex=wu,tr.setHsvSaturation=lv,tr.setHsvValue=cv;var Zl={};Zl.checkMessageReferences=Au,Zl.parseBlockColour=Ss,Zl.replaceMessageReferences=Mo,Zl.tokenizeInterpolation=U_;var oR=class{},o_=null,i_=null,Gs="",Fs="",Hr,Vr={};Vr.createDom=Qm,Vr.getDiv=Rs,Vr.hide=qr,Vr.hideIfOwner=F_,Vr.isVisible=Zm,Vr.positionWithAnchor=e$,Vr.show=G_,Vr.testOnly_setDiv=av;var fo=class{constructor($,_e,ot){this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:null,this.size_=new Yo(0,0),$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){$.tooltip&&this.setTooltip(Mo($.tooltip))}setSourceBlock($){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=$}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){if(!this.sourceBlock_)throw Error(`The source block is ${this.sourceBlock_}.`);return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Lt(Ot.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=Lt(Ot.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Lt(Ot.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const $=this.getClickTarget_();if(!$)throw Error("A click target has not been set.");Cu($),this.mouseDownWrapper_=Et($,"mousedown",this,this.onMouseDown_)}fromXml($){this.setValue($.textContent)}toXml($){return $.textContent=this.getValue(),$}saveState($){return $=this.saveLegacyState(fo),$!==null?$:this.getValue()}loadState($){this.loadLegacyState(fo,$)||this.setValue($)}saveLegacyState($){return $.prototype.saveState===this.saveState&&$.prototype.toXml!==this.toXml?($=yo("field"),$.setAttribute("name",this.name||""),Pr(this.toXml($)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState($,_e){return $.prototype.loadState===this.loadState&&$.prototype.fromXml!==this.fromXml?(this.fromXml(xr(_e)),!0):!1}dispose(){El(this),F_(this),Lu(this.getClickTarget_()),this.mouseDownWrapper_&&kt(this.mouseDownWrapper_),go(this.fieldGroup_),this.disposed=!0}updateEditable(){const $=this.fieldGroup_;this.EDITABLE&&$&&(this.enabled_&&this.getSourceBlock().isEditable()?(Ft($,"blocklyEditableText"),uo($,"blocklyNonEditableText"),$.style.cursor=this.CURSOR):(Ft($,"blocklyNonEditableText"),uo($,"blocklyEditableText"),$.style.cursor=""))}setEnabled($){this.enabled_=$,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==fo.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let $=!1;return this.name&&(this.SERIALIZABLE?$=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),$=!0)),$}isVisible(){return this.visible_}setVisible($){if(this.visible_!==$){this.visible_=$;var _e=this.fieldGroup_;_e&&(_e.style.display=$?"block":"none")}}setValidator($){this.validator_=$}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor($){this.isClickable()&&this.showEditor_($)}showEditor_($){}updateSize_($){const _e=this.getConstants();$=$!==void 0?$:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let ot=2*$,rt=_e.FIELD_TEXT_HEIGHT,lt=0;this.textElement_&&(lt=Un(this.textElement_,_e.FIELD_TEXT_FONTSIZE,_e.FIELD_TEXT_FONTWEIGHT,_e.FIELD_TEXT_FONTFAMILY),ot+=lt),this.borderRect_&&(rt=Math.max(rt,_e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=rt,this.size_.width=ot,this.positionTextElement_($,lt),this.positionBorderRect_()}positionTextElement_($,_e){if(this.textElement_){var ot=this.getConstants(),rt=this.size_.height/2;this.textElement_.setAttribute("x",`${this.getSourceBlock().RTL?this.size_.width-_e-$:$}`),this.textElement_.setAttribute("y",`${ot.FIELD_TEXT_BASELINE_CENTER?rt:rt-ot.FIELD_TEXT_HEIGHT/2+ot.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new Yo(0,0)}getScaledBBox(){let $,_e;if(this.borderRect_){var ot=this.borderRect_.getBoundingClientRect();_e=bn(this.borderRect_),$=ot.width;var rt=ot.height}else rt=this.sourceBlock_.getHeightWidth(),ot=this.getSourceBlock().workspace.scale,_e=this.getAbsoluteXY_(),$=(rt.width+1)*ot,rt=(rt.height+1)*ot,cp?(_e.x+=1.5*ot,_e.y+=1.5*ot):(_e.x-=.5*ot,_e.y-=.5*ot);return new Do(_e.y,_e.y+rt,_e.x,_e.x+$)}getDisplayText_(){let $=this.getText();return $?($.length>this.maxDisplayLength&&($=$.substring(0,this.maxDisplayLength-2)+"\u2026"),$=$.replace(/\s/g,fo.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&($+="\u200F"),$):fo.NBSP}getText(){const $=this.getText_();return String($!==null?$:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue($){if($!==null){var _e=this.doClassValidation_($);if($=this.processValidation_($,_e),!($ instanceof Error)){if((_e=this.getValidator())&&(_e=_e.call(this,$),$=this.processValidation_($,_e),$ instanceof Error))return;if(_e=this.sourceBlock_,!_e||!_e.disposed){var ot=this.getValue();ot===$?this.doValueUpdate_($):(this.doValueUpdate_($),_e&&jo()&&to(new(oo(zo))(_e,"field",this.name||null,ot,$)),this.isDirty_&&this.forceRerender())}}}}processValidation_($,_e){return _e===null?(this.doValueInvalid_($),this.isDirty_&&this.forceRerender(),Error()):(_e!==void 0&&($=_e),$)}getValue(){return this.value_}doClassValidation_($){return $==null?null:$}doValueUpdate_($){this.value_=$,this.isDirty_=!0}doValueInvalid_($){}onMouseDown_($){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&($=this.sourceBlock_.workspace.getGesture($))&&$.setStartField(this)}setTooltip($){$||$===""||($=this.sourceBlock_);const _e=this.getClickTarget_();_e?_e.tooltip=$:this.tooltip_=$}getTooltip(){const $=this.getClickTarget_();return yl($||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return bn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let $=null;const _e=this.getSourceBlock(),ot=_e.inputList;for(let rt=0;rt<_e.inputList.length;rt++){const lt=ot[rt],ut=lt.fieldRow;for(let pt=0;pt<ut.length;pt++)if(ut[pt]===this){$=lt;break}}return $}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut($){return!1}setCursorSvg($){if($){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild($),this.cursorSvg_=$}else this.cursorSvg_=null}setMarkerSvg($){if($){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild($),this.markerSvg_=$}else this.markerSvg_=null}updateMarkers_(){const $=this.getSourceBlock().workspace;$.keyboardAccessibilityMode&&this.cursorSvg_&&$.getCursor().draw(),$.keyboardAccessibilityMode&&this.markerSvg_&&$.getMarker(Yl.LOCAL_MARKER).draw()}};fo.NBSP="\xA0",fo.SKIP_SETUP=new oR;var DT={fromJsonInternal:_v},_c={};_c.TEST_ONLY=DT,_c.fromJson=H_,_c.register=yr,_c.unregister=dv;var iR="aria-",rR="role",_r;(function($){$.GRID="grid",$.GRIDCELL="gridcell",$.GROUP="group",$.LISTBOX="listbox",$.MENU="menu",$.MENUITEM="menuitem",$.MENUITEMCHECKBOX="menuitemcheckbox",$.OPTION="option",$.PRESENTATION="presentation",$.ROW="row",$.TREE="tree",$.TREEITEM="treeitem"})(_r||(_r={}));var Co;(function($){$.ACTIVEDESCENDANT="activedescendant",$.COLCOUNT="colcount",$.DISABLED="disabled",$.EXPANDED="expanded",$.INVALID="invalid",$.LABEL="label",$.LABELLEDBY="labelledby",$.LEVEL="level",$.ORIENTATION="orientation",$.POSINSET="posinset",$.ROWCOUNT="rowcount",$.SELECTED="selected",$.SETSIZE="setsize",$.VALUEMAX="valuemax",$.VALUEMIN="valuemin"})(Co||(Co={}));var na={};na.Role=_r,na.State=Co,na.setRole=sn,na.setState=Ao;var Yt;(function($){$[$.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",$[$.MAC_ENTER=3]="MAC_ENTER",$[$.BACKSPACE=8]="BACKSPACE",$[$.TAB=9]="TAB",$[$.NUM_CENTER=12]="NUM_CENTER",$[$.ENTER=13]="ENTER",$[$.SHIFT=16]="SHIFT",$[$.CTRL=17]="CTRL",$[$.ALT=18]="ALT",$[$.PAUSE=19]="PAUSE",$[$.CAPS_LOCK=20]="CAPS_LOCK",$[$.ESC=27]="ESC",$[$.SPACE=32]="SPACE",$[$.PAGE_UP=33]="PAGE_UP",$[$.PAGE_DOWN=34]="PAGE_DOWN",$[$.END=35]="END",$[$.HOME=36]="HOME",$[$.LEFT=37]="LEFT",$[$.UP=38]="UP",$[$.RIGHT=39]="RIGHT",$[$.DOWN=40]="DOWN",$[$.PLUS_SIGN=43]="PLUS_SIGN",$[$.PRINT_SCREEN=44]="PRINT_SCREEN",$[$.INSERT=45]="INSERT",$[$.DELETE=46]="DELETE",$[$.ZERO=48]="ZERO",$[$.ONE=49]="ONE",$[$.TWO=50]="TWO",$[$.THREE=51]="THREE",$[$.FOUR=52]="FOUR",$[$.FIVE=53]="FIVE",$[$.SIX=54]="SIX",$[$.SEVEN=55]="SEVEN",$[$.EIGHT=56]="EIGHT",$[$.NINE=57]="NINE",$[$.FF_SEMICOLON=59]="FF_SEMICOLON",$[$.FF_EQUALS=61]="FF_EQUALS",$[$.FF_DASH=173]="FF_DASH",$[$.FF_HASH=163]="FF_HASH",$[$.QUESTION_MARK=63]="QUESTION_MARK",$[$.AT_SIGN=64]="AT_SIGN",$[$.A=65]="A",$[$.B=66]="B",$[$.C=67]="C",$[$.D=68]="D",$[$.E=69]="E",$[$.F=70]="F",$[$.G=71]="G",$[$.H=72]="H",$[$.I=73]="I",$[$.J=74]="J",$[$.K=75]="K",$[$.L=76]="L",$[$.M=77]="M",$[$.N=78]="N",$[$.O=79]="O",$[$.P=80]="P",$[$.Q=81]="Q",$[$.R=82]="R",$[$.S=83]="S",$[$.T=84]="T",$[$.U=85]="U",$[$.V=86]="V",$[$.W=87]="W",$[$.X=88]="X",$[$.Y=89]="Y",$[$.Z=90]="Z",$[$.META=91]="META",$[$.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",$[$.CONTEXT_MENU=93]="CONTEXT_MENU",$[$.NUM_ZERO=96]="NUM_ZERO",$[$.NUM_ONE=97]="NUM_ONE",$[$.NUM_TWO=98]="NUM_TWO",$[$.NUM_THREE=99]="NUM_THREE",$[$.NUM_FOUR=100]="NUM_FOUR",$[$.NUM_FIVE=101]="NUM_FIVE",$[$.NUM_SIX=102]="NUM_SIX",$[$.NUM_SEVEN=103]="NUM_SEVEN",$[$.NUM_EIGHT=104]="NUM_EIGHT",$[$.NUM_NINE=105]="NUM_NINE",$[$.NUM_MULTIPLY=106]="NUM_MULTIPLY",$[$.NUM_PLUS=107]="NUM_PLUS",$[$.NUM_MINUS=109]="NUM_MINUS",$[$.NUM_PERIOD=110]="NUM_PERIOD",$[$.NUM_DIVISION=111]="NUM_DIVISION",$[$.F1=112]="F1",$[$.F2=113]="F2",$[$.F3=114]="F3",$[$.F4=115]="F4",$[$.F5=116]="F5",$[$.F6=117]="F6",$[$.F7=118]="F7",$[$.F8=119]="F8",$[$.F9=120]="F9",$[$.F10=121]="F10",$[$.F11=122]="F11",$[$.F12=123]="F12",$[$.NUMLOCK=144]="NUMLOCK",$[$.SCROLL_LOCK=145]="SCROLL_LOCK",$[$.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",$[$.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",$[$.SEMICOLON=186]="SEMICOLON",$[$.DASH=189]="DASH",$[$.EQUALS=187]="EQUALS",$[$.COMMA=188]="COMMA",$[$.PERIOD=190]="PERIOD",$[$.SLASH=191]="SLASH",$[$.APOSTROPHE=192]="APOSTROPHE",$[$.TILDE=192]="TILDE",$[$.SINGLE_QUOTE=222]="SINGLE_QUOTE",$[$.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",$[$.BACKSLASH=220]="BACKSLASH",$[$.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",$[$.WIN_KEY=224]="WIN_KEY",$[$.MAC_FF_META=224]="MAC_FF_META",$[$.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",$[$.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",$[$.WIN_IME=229]="WIN_IME",$[$.VK_NONAME=252]="VK_NONAME",$[$.PHANTOM=255]="PHANTOM"})(Yt||(Yt={}));var Mp=class{constructor(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null}addChild($){this.menuItems_.push($)}render($){const _e=document.createElement("div");_e.className="blocklyMenu goog-menu blocklyNonSelectable",_e.tabIndex=0,this.roleName_&&sn(_e,this.roleName_),this.element_=_e;for(let ot=0,rt;rt=this.menuItems_[ot];ot++)_e.appendChild(rt.createDom());return this.mouseOverHandler_=Et(_e,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=Et(_e,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=Et(_e,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=Et(_e,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=Et(_e,"keydown",this,this.handleKeyEvent_),$.appendChild(_e),_e}getElement(){return this.element_}focus(){const $=this.getElement();$&&($.focus({preventScroll:!0}),Ft($,"blocklyFocused"))}blur_(){const $=this.getElement();$&&($.blur(),uo($,"blocklyFocused"))}setRole($){this.roleName_=$}dispose(){this.mouseOverHandler_&&(kt(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(kt(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(kt(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(kt(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(kt(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(let $=0,_e;_e=this.menuItems_[$];$++)_e.dispose();this.element_=null}getMenuItem_($){const _e=this.getElement();for(;$&&$!==_e;){if($.classList.contains("blocklyMenuItem")){for(let ot=0,rt;rt=this.menuItems_[ot];ot++)if(rt.getElement()===$)return rt}$=$.parentElement}return null}setHighlighted($){var _e=this.highlightedItem_;_e&&(_e.setHighlighted(!1),this.highlightedItem_=null),$&&($.setHighlighted(!0),this.highlightedItem_=$,_e=this.getElement(),Ut($.getElement(),_e),Ao(_e,Co.ACTIVEDESCENDANT,$.getId()))}highlightNext(){const $=this.highlightedItem_?this.menuItems_.indexOf(this.highlightedItem_):-1;this.highlightHelper_($,1)}highlightPrevious(){const $=this.highlightedItem_?this.menuItems_.indexOf(this.highlightedItem_):-1;this.highlightHelper_(0>$?this.menuItems_.length:$,-1)}highlightFirst_(){this.highlightHelper_(-1,1)}highlightLast_(){this.highlightHelper_(this.menuItems_.length,-1)}highlightHelper_($,_e){$+=_e;let ot;for(;ot=this.menuItems_[$];){if(ot.isEnabled()){this.setHighlighted(ot);break}$+=_e}}handleMouseOver_($){($=this.getMenuItem_($.target))&&($.isEnabled()?this.highlightedItem_!==$&&this.setHighlighted($):this.setHighlighted(null))}handleClick_($){const _e=this.openingCoords;if(this.openingCoords=null,_e&&typeof $.clientX=="number"){const ot=new Ht($.clientX,$.clientY);if(1>Ht.distance(_e,ot))return}($=this.getMenuItem_($.target))&&$.performAction()}handleMouseEnter_($){this.focus()}handleMouseLeave_($){this.getElement()&&(this.blur_(),this.setHighlighted(null))}handleKeyEvent_($){if(this.menuItems_.length&&!($.shiftKey||$.ctrlKey||$.metaKey||$.altKey)){var _e=this.highlightedItem_;switch($.keyCode){case Yt.ENTER:case Yt.SPACE:_e&&_e.performAction();break;case Yt.UP:this.highlightPrevious();break;case Yt.DOWN:this.highlightNext();break;case Yt.PAGE_UP:case Yt.HOME:this.highlightFirst_();break;case Yt.PAGE_DOWN:case Yt.END:this.highlightLast_();break;default:return}$.preventDefault(),$.stopPropagation()}}getSize(){const $=this.getElement(),_e=fs($);return _e.height=$.scrollHeight,_e}},Dp=class{constructor($,_e){this.content=$,this.opt_value=_e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null}createDom(){const $=document.createElement("div");$.id=Il(),this.element_=$,$.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const _e=document.createElement("div");if(_e.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var ot=document.createElement("div");ot.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",_e.appendChild(ot)}return ot=this.content,typeof this.content=="string"&&(ot=document.createTextNode(this.content)),_e.appendChild(ot),$.appendChild(_e),this.roleName_&&sn($,this.roleName_),Ao($,Co.SELECTED,this.checkable_&&this.checked_||!1),Ao($,Co.DISABLED,!this.enabled_),$}dispose(){this.element_=null}getElement(){return this.element_}getId(){return this.element_.id}getValue(){let $;return($=this.opt_value)!=null?$:null}setRightToLeft($){this.rightToLeft_=$}setRole($){this.roleName_=$}setCheckable($){this.checkable_=$}setChecked($){this.checked_=$}setHighlighted($){this.highlight_=$;const _e=this.getElement();_e&&this.isEnabled()&&($?(Ft(_e,"blocklyMenuItemHighlight"),Ft(_e,"goog-menuitem-highlight")):(uo(_e,"blocklyMenuItemHighlight"),uo(_e,"goog-menuitem-highlight")))}isEnabled(){return this.enabled_}setEnabled($){this.enabled_=$}performAction(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)}onAction($,_e){this.actionHandler_=$.bind(_e)}},kr=class extends fo{constructor($,_e,ot){super(fo.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.suffixField=this.prefixField=this.generatedOptions_=null,$!==fo.SKIP_SETUP&&(Array.isArray($)&&(t$($),$=JSON.parse(JSON.stringify($))),this.menuGenerator_=$,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],ot&&this.configure_(ot),this.setValue(this.selectedOption_[1]),_e&&this.setValidator(_e))}fromXml($){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue($.textContent)}loadState($){this.loadLegacyState(kr,$)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue($))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=Lt(Ot.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ft(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.getSourceBlock().isShadow()}createTextArrow_(){this.arrow_=Lt(Ot.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.getSourceBlock().RTL?kr.ARROW_CHAR+" ":" "+kr.ARROW_CHAR)),this.getSourceBlock().RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=Lt(Ot.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(hr,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_($){if(this.dropdownCreate_(),this.menu_.openingCoords=$&&typeof $.clientX=="number"?new Ht($.clientX,$.clientY):null,Tl(),$=this.menu_.render(Ts()),Ft($,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){$=this.getSourceBlock().isShadow()?this.getSourceBlock().getParent().getColour():this.getSourceBlock().getColour();const _e=this.getSourceBlock().isShadow()?this.getSourceBlock().getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;if(!_e)throw Error("The renderer did not properly initialize the block style");qo($,_e)}ft(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const $=new Mp;$.setRole(_r.LISTBOX),this.menu_=$;const _e=this.getOptions(!1);this.selectedMenuItem_=null;for(let rt=0;rt<_e.length;rt++){var ot=_e[rt][0];const lt=_e[rt][1];if(typeof ot=="object"){const ut=new Image(ot.width,ot.height);ut.src=ot.src,ut.alt=ot.alt||"",ot=ut}ot=new Dp(ot,lt),ot.setRole(_r.OPTION),ot.setRightToLeft(this.getSourceBlock().RTL),ot.setCheckable(!0),$.addChild(ot),ot.setChecked(lt===this.value_),lt===this.value_&&(this.selectedMenuItem_=ot),ot.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_($){El(this,!0),this.onItemSelected_(this.menu_,$)}onItemSelected_($,_e){this.setValue(_e.getValue())}trimOptions_(){const $=this.menuGenerator_;if(Array.isArray($)){for(var _e=!1,ot=0;ot<$.length;ot++){var rt=$[ot][0];typeof rt=="string"?$[ot][0]=Mo(rt):(rt.alt!==null&&($[ot][0].alt=Mo(rt.alt)),_e=!0)}if(!(_e||2>$.length)){for(_e=[],ot=0;ot<$.length;ot++)_e.push($[ot][0]);ot=ku(_e),rt=Bm(_e,ot);var lt=Um(_e,ot);!rt&&!lt||ot<=rt+lt||(rt&&(this.prefixField=_e[0].substring(0,rt-1)),lt&&(this.suffixField=_e[0].substr(1-lt)),this.menuGenerator_=kr.applyTrim_($,rt,lt))}}}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions($){return this.isOptionListDynamic()?(this.generatedOptions_&&$||(this.generatedOptions_=this.menuGenerator_.call(this),t$(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_}doClassValidation_($){let _e=!1;const ot=this.getOptions(!0);for(let rt=0,lt;lt=ot[rt];rt++)if(lt[1]===$){_e=!0;break}return _e?$:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+$),null)}doValueUpdate_($){super.doValueUpdate_($),$=this.getOptions(!0);for(let _e=0,ot;ot=$[_e];_e++)ot[1]===this.value_&&(this.selectedOption_=ot)}applyColour(){const $=this.sourceBlock_.style;if(!$.colourSecondary||!$.colourTertiary)throw Error("The renderer did not properly initialize the block style");this.borderRect_&&(this.borderRect_.setAttribute("stroke",$.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",$.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=$.colourSecondary:this.arrow_.style.fill=$.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const $=this.selectedOption_&&this.selectedOption_[0];$&&typeof $=="object"?this.renderSelectedImage_($):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_($){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(hr,"xlink:href",$.src),this.imageElement_.setAttribute("height",$.height),this.imageElement_.setAttribute("width",$.width);const _e=Number($.height);$=Number($.width);var ot=!!this.borderRect_;const rt=Math.max(ot?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,_e+sR);ot=ot?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let lt;lt=this.svgArrow_?this.positionSVGArrow_($+ot,rt/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Un(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=$+lt+2*ot,this.size_.height=rt;let ut=0;this.getSourceBlock().RTL?this.imageElement_.setAttribute("x",(ot+lt).toString()):(ut=$+lt,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",ot.toString())),this.imageElement_.setAttribute("y",(rt/2-_e/2).toString()),this.positionTextElement_(ut+ot,$+lt)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var $=this.getTextElement();Ft($,"blocklyDropdownText"),$.setAttribute("text-anchor","start");var _e=!!this.borderRect_;$=Math.max(_e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const ot=Un(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);_e=_e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let rt=0;this.svgArrow_&&(rt=this.positionSVGArrow_(ot+_e,$/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=ot+rt+2*_e,this.size_.height=$,this.positionTextElement_(_e,ot)}positionSVGArrow_($,_e){if(!this.svgArrow_)return 0;const ot=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,rt=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,lt=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return $=this.getSourceBlock().RTL?ot:$+rt,this.svgArrow_.setAttribute("transform","translate("+$+","+_e+")"),lt+rt}getText_(){if(!this.selectedOption_)return null;const $=this.selectedOption_[0];return typeof $=="object"?$.alt:$}static fromJson($){if(!$.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this($.options,void 0,$)}static applyTrim_($,_e,ot){const rt=[];for(let lt=0;lt<$.length;lt++){let ut=$[lt][0];const pt=$[lt][1];ut=ut.substring(_e,ut.length-ot),rt[lt]=[ut,pt]}return rt}};kr.CHECKMARK_OVERHANG=25,kr.MAX_MENU_HEIGHT_VH=.45;var nR=5,sR=2*nR;kr.ARROW_CHAR=Ml?"\u25BC":"\u25BE",yr("field_dropdown",kr),tt.module$build$src$core$field_dropdown={},tt.module$build$src$core$field_dropdown.FieldDropdown=kr;var PT=class extends Fr{constructor($,_e,ot){super($?$.workspace.id:void 0),this.type=Cn,$&&(this.blockId=$.id,this.isOpen=_e,this.bubbleType=ot)}toJson(){const $=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return $.isOpen=this.isOpen,$.bubbleType=this.bubbleType,$.blockId=this.blockId||"",$}fromJson($){super.fromJson($),this.isOpen=$.isOpen,this.bubbleType=$.bubbleType,this.blockId=$.blockId}},Pp;(function($){$.MUTATOR="mutator",$.COMMENT="comment",$.WARNING="warning"})(Pp||(Pp={})),$o(Bt.EVENT,Cn,PT);var No=class{constructor($,_e,ot,rt,lt){this.workspace=$,this.horizontal=_e,this.oldHostMetrics_=null,this.ratio=1,this.startDragHandle=this.handlePosition_=this.handleLength_=this.scrollbarLength_=this.startDragMouse_=0,this.containerVisible_=this.isVisible_=!0,this.svgGroup_=this.outerSvg_=this.svgHandle_=this.svgBackground_=null,this.lengthAttribute_="width",this.positionAttribute_="x",this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair_=ot||!1,this.margin_=lt!==void 0?lt:No.DEFAULT_SCROLLBAR_MARGIN,this.origin_=new Ht(0,0),this.createDom_(rt),this.position=new Ht(0,0),$=No.scrollbarThickness,_e?(this.svgBackground_.setAttribute("height",String($)),this.outerSvg_.setAttribute("height",String($)),this.svgHandle_.setAttribute("height",String($-5)),this.svgHandle_.setAttribute("y","2.5")):(this.svgBackground_.setAttribute("width",String($)),this.outerSvg_.setAttribute("width",String($)),this.svgHandle_.setAttribute("width",String($-5)),this.svgHandle_.setAttribute("x","2.5"),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Et(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=Et(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)}dispose(){this.cleanUp_(),this.onMouseDownBarWrapper_&&(kt(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null),this.onMouseDownHandleWrapper_&&(kt(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null),go(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null)}constrainHandleLength_($){return $=0>=$||isNaN($)?0:Math.min($,this.scrollbarLength_)}setHandleLength_($){this.handleLength_=$,this.svgHandle_.setAttribute(this.lengthAttribute_,String(this.handleLength_))}constrainHandlePosition_($){return $=0>=$||isNaN($)?0:Math.min($,this.scrollbarLength_-this.handleLength_)}setHandlePosition($){this.handlePosition_=$,this.svgHandle_.setAttribute(this.positionAttribute_,String(this.handlePosition_))}setScrollbarLength_($){this.scrollbarLength_=$,this.outerSvg_.setAttribute(this.lengthAttribute_,String(this.scrollbarLength_)),this.svgBackground_.setAttribute(this.lengthAttribute_,String(this.scrollbarLength_))}setPosition($,_e){this.position.x=$,this.position.y=_e,$=this.position.x+this.origin_.x,_e=this.position.y+this.origin_.y,this.outerSvg_&&$n(this.outerSvg_,"translate("+$+"px,"+_e+"px)")}resize($){!$&&($=this.workspace.getMetrics(),!$)||this.oldHostMetrics_&&No.metricsAreEquivalent_($,this.oldHostMetrics_)||(this.horizontal?this.resizeHorizontal_($):this.resizeVertical_($),this.oldHostMetrics_=$,this.updateMetrics_())}requiresViewResize_($){return this.oldHostMetrics_?this.oldHostMetrics_.viewWidth!==$.viewWidth||this.oldHostMetrics_.viewHeight!==$.viewHeight||this.oldHostMetrics_.absoluteLeft!==$.absoluteLeft||this.oldHostMetrics_.absoluteTop!==$.absoluteTop:!0}resizeHorizontal_($){this.requiresViewResize_($)?this.resizeViewHorizontal($):this.resizeContentHorizontal($)}resizeViewHorizontal($){var _e=$.viewWidth-2*this.margin_;this.pair_&&(_e-=No.scrollbarThickness),this.setScrollbarLength_(Math.max(0,_e)),_e=$.absoluteLeft+this.margin_,this.pair_&&this.workspace.RTL&&(_e+=No.scrollbarThickness),this.setPosition(_e,$.absoluteTop+$.viewHeight-No.scrollbarThickness-this.margin_),this.resizeContentHorizontal($)}resizeContentHorizontal($){if($.viewWidth>=$.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var _e=this.scrollbarLength_*$.viewWidth/$.scrollWidth;_e=this.constrainHandleLength_(_e),this.setHandleLength_(_e),_e=$.scrollWidth-$.viewWidth;var ot=this.scrollbarLength_-this.handleLength_;$=($.viewLeft-$.scrollLeft)/_e*ot,$=this.constrainHandlePosition_($),this.setHandlePosition($),this.ratio=ot/_e}}resizeVertical_($){this.requiresViewResize_($)?this.resizeViewVertical($):this.resizeContentVertical($)}resizeViewVertical($){let _e=$.viewHeight-2*this.margin_;this.pair_&&(_e-=No.scrollbarThickness),this.setScrollbarLength_(Math.max(0,_e)),this.setPosition(this.workspace.RTL?$.absoluteLeft+this.margin_:$.absoluteLeft+$.viewWidth-No.scrollbarThickness-this.margin_,$.absoluteTop+this.margin_),this.resizeContentVertical($)}resizeContentVertical($){if($.viewHeight>=$.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var _e=this.scrollbarLength_*$.viewHeight/$.scrollHeight;_e=this.constrainHandleLength_(_e),this.setHandleLength_(_e),_e=$.scrollHeight-$.viewHeight;var ot=this.scrollbarLength_-this.handleLength_;$=($.viewTop-$.scrollTop)/_e*ot,$=this.constrainHandlePosition_($),this.setHandlePosition($),this.ratio=ot/_e}}createDom_($){let _e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical");$&&(_e+=" "+$),this.outerSvg_=Lt(Ot.SVG,{class:_e}),this.svgGroup_=Lt(Ot.G,{},this.outerSvg_),this.svgBackground_=Lt(Ot.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),$=Math.floor((No.scrollbarThickness-5)/2),this.svgHandle_=Lt(Ot.RECT,{class:"blocklyScrollbarHandle",rx:$,ry:$},this.svgGroup_),this.workspace.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),ir(this.outerSvg_,this.workspace.getParentSvg())}isVisible(){return this.isVisible_}setContainerVisible($){const _e=$!==this.containerVisible_;this.containerVisible_=$,_e&&this.updateDisplay_()}setVisible($){const _e=$!==this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=$,_e&&this.updateDisplay_()}updateDisplay_(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")}onMouseDownBar_($){if(this.workspace.markFocused(),ct(),this.cleanUp_(),St($))$.stopPropagation();else{var _e=It($,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());_e=this.horizontal?_e.x:_e.y;var ot=yu(this.svgHandle_);ot=this.horizontal?ot.x:ot.y;var rt=this.handlePosition_,lt=.95*this.handleLength_;_e<=ot?rt-=lt:_e>=ot+this.handleLength_&&(rt+=lt),this.setHandlePosition(this.constrainHandlePosition_(rt)),this.updateMetrics_(),$.stopPropagation(),$.preventDefault()}}onMouseDownHandle_($){this.workspace.markFocused(),this.cleanUp_(),St($)?$.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace.setupDragSurface(),this.startDragMouse_=this.horizontal?$.clientX:$.clientY,this.onMouseUpWrapper_=Et(document,"mouseup",this,this.onMouseUpHandle_),this.onMouseMoveWrapper_=Et(document,"mousemove",this,this.onMouseMoveHandle_),$.stopPropagation(),$.preventDefault())}onMouseMoveHandle_($){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal?$.clientX:$.clientY)-this.startDragMouse_))),this.updateMetrics_()}onMouseUpHandle_(){this.workspace.resetDragSurface(),ct(),this.cleanUp_()}cleanUp_(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(kt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(kt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let $=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN($)&&($=0),$}updateMetrics_(){const $=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:$}):this.workspace.setMetrics({y:$})}set($,_e){this.setHandlePosition(this.constrainHandlePosition_($*this.ratio)),(_e||_e===void 0)&&this.updateMetrics_()}setOrigin($,_e){this.origin_=new Ht($,_e)}static metricsAreEquivalent_($,_e){return $.viewWidth===_e.viewWidth&&$.viewHeight===_e.viewHeight&&$.viewLeft===_e.viewLeft&&$.viewTop===_e.viewTop&&$.absoluteTop===_e.absoluteTop&&$.absoluteLeft===_e.absoluteLeft&&$.scrollWidth===_e.scrollWidth&&$.scrollHeight===_e.scrollHeight&&$.scrollLeft===_e.scrollLeft&&$.scrollTop===_e.scrollTop}};No.scrollbarThickness=iT?25:15,No.DEFAULT_SCROLLBAR_MARGIN=.5;var no=class{constructor($,_e,ot,rt,lt,ut){this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null,this.height_=this.width_=this.relativeTop_=this.relativeLeft_=0,this.autoLayout_=!0,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.rendered_=this.disposed=!1,this.workspace_=$,this.content_=_e,this.shape_=ot,ot=no.ARROW_ANGLE,this.workspace_.RTL&&(ot=-ot),this.arrow_radians_=Sr(ot),$.getBubbleCanvas().appendChild(this.createDom_(_e,!(!lt||!ut))),this.setAnchorLocation(rt),lt&&ut||($=this.content_.getBBox(),lt=$.width+2*no.BORDER_WIDTH,ut=$.height+2*no.BORDER_WIDTH),this.setBubbleSize(lt,ut),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0}createDom_($,_e){this.bubbleGroup_=Lt(Ot.G,{});var ot={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return uT&&(ot={}),ot=Lt(Ot.G,ot,this.bubbleGroup_),this.bubbleArrow_=Lt(Ot.PATH,{},ot),this.bubbleBack_=Lt(Ot.RECT,{class:"blocklyDraggable",x:0,y:0,rx:no.BORDER_WIDTH,ry:no.BORDER_WIDTH},ot),_e?(this.resizeGroup_=Lt(Ot.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),_e=2*no.BORDER_WIDTH,Lt(Ot.POLYGON,{points:"0,x x,x x,0".replace(/x/g,_e.toString())},this.resizeGroup_),Lt(Ot.LINE,{class:"blocklyResizeLine",x1:_e/3,y1:_e-1,x2:_e-1,y2:_e/3},this.resizeGroup_),Lt(Ot.LINE,{class:"blocklyResizeLine",x1:2*_e/3,y1:_e-1,x2:_e-1,y2:2*_e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=Et(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=Et(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild($),this.bubbleGroup_}getSvgRoot(){return this.bubbleGroup_}setSvgId($){let _e;(_e=this.bubbleGroup_)==null||_e.setAttribute("data-block-id",$)}bubbleMouseDown_($){const _e=this.workspace_.getGesture($);_e&&_e.handleBubbleStart($,this)}showContextMenu($){}isDeletable(){return!1}setDeleteStyle($){}resizeMouseDown_($){this.promote(),no.unbindDragEvents_(),St($)||(this.workspace_.startDrag($,new Ht(this.workspace_.RTL?-this.width_:this.width_,this.height_)),no.onMouseUpWrapper_=Et(document,"mouseup",this,no.bubbleMouseUp_),no.onMouseMoveWrapper_=Et(document,"mousemove",this,this.resizeMouseMove_),this.workspace_.hideChaff()),$.stopPropagation()}resizeMouseMove_($){this.autoLayout_=!1,$=this.workspace_.moveDrag($),this.setBubbleSize(this.workspace_.RTL?-$.x:$.x,$.y),this.workspace_.RTL&&this.positionBubble_()}registerResizeEvent($){this.resizeCallback_=$}registerMoveEvent($){this.moveCallback_=$}promote(){let $;const _e=($=this.bubbleGroup_)==null?void 0:$.parentNode;return(_e==null?void 0:_e.lastChild)!==this.bubbleGroup_&&this.bubbleGroup_?(_e==null||_e.appendChild(this.bubbleGroup_),!0):!1}setAnchorLocation($){this.anchorXY_=$,this.rendered_&&this.positionBubble_()}layoutBubble_(){var $=this.workspace_.getMetricsManager().getViewMetrics(!0),_e=this.getOptimalRelativeLeft_($),ot=this.getOptimalRelativeTop_($),rt=this.shape_.getBBox();const lt={x:_e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},ut={x:-this.width_-30,y:ot};ot={x:rt.width,y:ot};var pt={x:_e,y:rt.height};_e=rt.width<rt.height?ot:pt,rt=rt.width<rt.height?pt:ot,ot=this.getOverlap_(lt,$),pt=this.getOverlap_(ut,$);const vt=this.getOverlap_(_e,$);$=this.getOverlap_(rt,$),$=Math.max(ot,pt,vt,$),ot===$?(this.relativeLeft_=lt.x,this.relativeTop_=lt.y):pt===$?(this.relativeLeft_=ut.x,this.relativeTop_=ut.y):vt===$?(this.relativeLeft_=_e.x,this.relativeTop_=_e.y):(this.relativeLeft_=rt.x,this.relativeTop_=rt.y)}getOverlap_($,_e){var ot=this.workspace_.RTL?this.anchorXY_.x-$.x-this.width_:$.x+this.anchorXY_.x;return $=$.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(ot+this.width_,_e.left+_e.width)-Math.max(ot,_e.left))*(Math.min($+this.height_,_e.top+_e.height)-Math.max($,_e.top))/(this.width_*this.height_)))}getOptimalRelativeLeft_($){let _e=-this.width_/4;if(this.width_>$.width)return _e;if(this.workspace_.RTL){var ot=this.anchorXY_.x-_e,rt=$.left+$.width;$=$.left+No.scrollbarThickness/this.workspace_.scale,ot-this.width_<$?_e=-($-this.anchorXY_.x+this.width_):ot>rt&&(_e=-(rt-this.anchorXY_.x))}else{ot=_e+this.anchorXY_.x,rt=ot+this.width_;const lt=$.left;$=$.left+$.width-No.scrollbarThickness/this.workspace_.scale,ot<lt?_e=lt-this.anchorXY_.x:rt>$&&(_e=$-this.anchorXY_.x-this.width_)}return _e}getOptimalRelativeTop_($){let _e=-this.height_/4;if(this.height_>$.height)return _e;const ot=this.anchorXY_.y+_e,rt=ot+this.height_,lt=$.top;$=$.top+$.height-No.scrollbarThickness/this.workspace_.scale;const ut=this.anchorXY_.y;return ot<lt?_e=lt-ut:rt>$&&(_e=$-ut-this.height_),_e}positionBubble_(){let $=this.anchorXY_.x;$=this.workspace_.RTL?$-(this.relativeLeft_+this.width_):$+this.relativeLeft_,this.moveTo($,this.relativeTop_+this.anchorXY_.y)}moveTo($,_e){let ot;(ot=this.bubbleGroup_)==null||ot.setAttribute("transform","translate("+$+","+_e+")")}setDragging($){!$&&this.moveCallback_&&this.moveCallback_()}getBubbleSize(){return new Yo(this.width_,this.height_)}setBubbleSize($,_e){const ot=2*no.BORDER_WIDTH;$=Math.max($,ot+45),_e=Math.max(_e,ot+20),this.width_=$,this.height_=_e;let rt;(rt=this.bubbleBack_)==null||rt.setAttribute("width",$.toString());let lt;(lt=this.bubbleBack_)==null||lt.setAttribute("height",_e.toString()),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*no.BORDER_WIDTH+","+(_e-ot)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+($-ot)+","+(_e-ot)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()}renderArrow_(){const $=[];var _e=this.width_/2,ot=this.height_/2,rt=-this.relativeLeft_,lt=-this.relativeTop_;if(_e===rt&&ot===lt)$.push("M "+_e+","+ot);else{lt-=ot,rt-=_e,this.workspace_.RTL&&(rt*=-1);var ut=Math.sqrt(lt*lt+rt*rt),pt=Math.acos(rt/ut);0>lt&&(pt=2*Math.PI-pt);var vt=pt+Math.PI/2;vt>2*Math.PI&&(vt-=2*Math.PI);var At=Math.sin(vt);const Eo=Math.cos(vt);var xt=this.getBubbleSize();vt=(xt.width+xt.height)/no.ARROW_THICKNESS,vt=Math.min(vt,xt.width,xt.height)/4,xt=1-no.ANCHOR_RADIUS/ut,rt=_e+xt*rt,lt=ot+xt*lt,xt=_e+vt*Eo;const or=ot+vt*At;_e-=vt*Eo,ot-=vt*At,At=pt+this.arrow_radians_,At>2*Math.PI&&(At-=2*Math.PI),pt=Math.sin(At)*ut/no.ARROW_BEND,ut=Math.cos(At)*ut/no.ARROW_BEND,$.push("M"+xt+","+or),$.push("C"+(xt+ut)+","+(or+pt)+" "+rt+","+lt+" "+rt+","+lt),$.push("C"+rt+","+lt+" "+(_e+ut)+","+(ot+pt)+" "+_e+","+ot)}$.push("z");let ho;(ho=this.bubbleArrow_)==null||ho.setAttribute("d",$.join(" "))}setColour($){let _e;(_e=this.bubbleBack_)==null||_e.setAttribute("fill",$);let ot;(ot=this.bubbleArrow_)==null||ot.setAttribute("fill",$)}dispose(){this.onMouseDownBubbleWrapper_&&kt(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&kt(this.onMouseDownResizeWrapper_),no.unbindDragEvents_(),go(this.bubbleGroup_),this.disposed=!0}moveDuringDrag($,_e){$?$.translateSurface(_e.x,_e.y):this.moveTo(_e.x,_e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-_e.x-this.width_:_e.x-this.anchorXY_.x,this.relativeTop_=_e.y-this.anchorXY_.y,this.renderArrow_()}getRelativeToSurfaceXY(){return new Ht(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)}setAutoLayout($){this.autoLayout_=$}static unbindDragEvents_(){no.onMouseUpWrapper_&&(kt(no.onMouseUpWrapper_),no.onMouseUpWrapper_=null),no.onMouseMoveWrapper_&&(kt(no.onMouseMoveWrapper_),no.onMouseMoveWrapper_=null)}static bubbleMouseUp_($){ct(),no.unbindDragEvents_()}static textToDom($){const _e=Lt(Ot.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:no.BORDER_WIDTH});$=$.split(`
`);for(let ot=0;ot<$.length;ot++){const rt=Lt(Ot.TSPAN,{dy:"1em",x:no.BORDER_WIDTH},_e),lt=document.createTextNode($[ot]);rt.appendChild(lt)}return _e}static createNonEditableBubble($,_e,ot){if(ot=new no(_e.workspace,$,_e.pathObject.svgPath,ot,null,null),ot.setSvgId(_e.id),_e.RTL){_e=$.getBBox().width;for(let rt=0,lt;lt=$.childNodes[rt];rt++)lt.setAttribute("text-anchor","end"),lt.setAttribute("x",(_e+no.BORDER_WIDTH).toString())}return ot}};no.BORDER_WIDTH=6,no.ARROW_THICKNESS=5,no.ARROW_ANGLE=20,no.ARROW_BEND=4,no.ANCHOR_RADIUS=8,no.onMouseUpWrapper_=null,no.onMouseMoveWrapper_=null;var xp,xT;xp=28,tt.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:xp,connectingSnapRadius:xp,currentConnectionPreference:8,bumpDelay:250},xT={},xT.config=tt.config$$module$build$src$core$config;var r_=class{constructor($){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,$||mo("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=$}createIcon(){this.iconGroup_||(this.iconGroup_=Lt(Ot.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&Ft(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),Et(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())}dispose(){go(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_($){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||St($)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation($){this.iconXY_=$,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation($)}computeIconLocation(){var $=this.getBlock().getRelativeToSurfaceXY();const _e=Dr(this.iconGroup_);$=new Ht($.x+_e.x+this.SIZE/2,$.y+_e.y+this.SIZE/2),Ht.equals(this.getIconLocation(),$)||this.setIconLocation($)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Yo(this.SIZE,this.SIZE-2)}drawIcon_($){}setVisible($){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}};tt.module$build$src$core$utils$object={},tt.module$build$src$core$utils$object.deepMerge=Fn,tt.module$build$src$core$utils$object.inherits=pv,tt.module$build$src$core$utils$object.mixin=gv,tt.module$build$src$core$utils$object.values=mv;var hs=class{constructor($,_e,ot,rt){this.name=$,this.startHats=!1,this.blockStyles=_e||Object.create(null),this.categoryStyles=ot||Object.create(null),this.componentStyles=rt||Object.create(null),this.fontStyle=Object.create(null),$o(Bt.THEME,$,this)}getClassName(){return this.name+"-theme"}setBlockStyle($,_e){this.blockStyles[$]=_e}setCategoryStyle($,_e){this.categoryStyles[$]=_e}getComponentStyle($){return($=this.componentStyles[$])&&typeof $=="string"&&this.getComponentStyle($)?this.getComponentStyle($):$?String($):null}setComponentStyle($,_e){this.componentStyles[$]=_e}setFontStyle($){this.fontStyle=$}setStartHats($){this.startHats=$}static defineTheme($,_e){$=$.toLowerCase();const ot=new hs($);let rt=_e.base;if(rt){if(typeof rt=="string"){let lt;rt=(lt=Eu(Bt.THEME,rt))!=null?lt:void 0}rt instanceof hs&&(Fn(ot,rt),ot.name=$)}return Fn(ot.blockStyles,_e.blockStyles),Fn(ot.categoryStyles,_e.categoryStyles),Fn(ot.componentStyles,_e.componentStyles),Fn(ot.fontStyle,_e.fontStyle),_e.startHats!==null&&(ot.startHats=_e.startHats),ot}},lR={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},cR={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},n_=new hs("classic",lR,cR),Bp="categoryToolbox",BT="flyoutToolbox",ro;(function($){$[$.TOP=0]="TOP",$[$.BOTTOM=1]="BOTTOM",$[$.LEFT=2]="LEFT",$[$.RIGHT=3]="RIGHT"})(ro||(ro={}));var UT={hasCategoriesInternal:fv},Xn={};Xn.Position=ro,Xn.TEST_ONLY=UT,Xn.convertFlyoutDefToJsonArray=Mu,Xn.convertToolboxDefToJson=Nu,Xn.hasCategories=V_,Xn.isCategoryCollapsible=W_,Xn.parseToolboxTree=i$;var Wr=class{constructor($){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let _e=null,ot=!1;var rt=!1,lt=!1,ut=!1,pt=!1,vt=!1;const At=!!$.readOnly;if(!At){var xt;_e=Nu((xt=$.toolbox)!=null?xt:null),ot=V_(_e),rt=$.trashcan,rt=rt===void 0?ot:rt,lt=$.collapse,lt=lt===void 0?ot:lt,ut=$.comments,ut=ut===void 0?ot:ut,pt=$.disable,pt=pt===void 0?ot:pt,vt=$.sounds,vt=vt===void 0?!0:vt}xt=$.maxTrashcanContents,rt?xt===void 0&&(xt=32):xt=0;const ho=!!$.rtl;let Eo=$.horizontalLayout;Eo===void 0&&(Eo=!1);var or=$.toolboxPosition!=="end";or=Eo?or?ro.TOP:ro.BOTTOM:or===ho?ro.RIGHT:ro.LEFT;let $s=$.css;$s===void 0&&($s=!0);let Kn="https://blockly-demo.appspot.com/static/media/";$.media?Kn=$.media.endsWith("/")?$.media:$.media+"/":"path"in $&&(mo("path","Nov 2014","Jul 2023","media"),Kn=$.path+"media/");const gI=$.oneBasedIndex,VR=$.renderer||"geras",WR=$.plugins||{};this.RTL=ho,this.oneBasedIndex=gI===void 0?!0:gI,this.collapse=lt,this.comments=ut,this.disable=pt,this.readOnly=At,this.maxBlocks=$.maxBlocks||1/0;let mI;this.maxInstances=(mI=$.maxInstances)!=null?mI:null,this.pathToMedia=Kn,this.hasCategories=ot,this.moveOptions=Wr.parseMoveOptions_($,ot),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=rt,this.maxTrashcanContents=xt,this.hasSounds=vt,this.hasCss=$s,this.horizontalLayout=Eo,this.languageTree=_e,this.gridOptions=Wr.parseGridOptions_($),this.zoomOptions=Wr.parseZoomOptions_($),this.toolboxPosition=or,this.theme=Wr.parseThemeOptions_($),this.renderer=VR;let $I;this.rendererOverrides=($I=$.rendererOverrides)!=null?$I:null;let fI;this.parentWorkspace=(fI=$.parentWorkspace)!=null?fI:null,this.plugins=WR}static parseMoveOptions_($,_e){const ot=$.move||{},rt={};return ot.scrollbars===void 0&&$.scrollbars===void 0?rt.scrollbars=_e:typeof ot.scrollbars=="object"?(rt.scrollbars={horizontal:!!ot.scrollbars.horizontal,vertical:!!ot.scrollbars.vertical},rt.scrollbars.horizontal&&rt.scrollbars.vertical?rt.scrollbars=!0:rt.scrollbars.horizontal||rt.scrollbars.vertical||(rt.scrollbars=!1)):rt.scrollbars=!!ot.scrollbars||!!$.scrollbars,rt.wheel=rt.scrollbars&&ot.wheel!==void 0?!!ot.wheel:typeof rt.scrollbars=="object",rt.drag=rt.scrollbars?ot.drag===void 0?!0:!!ot.drag:!1,rt}static parseZoomOptions_($){$=$.zoom||{};const _e={};return _e.controls=$.controls===void 0?!1:!!$.controls,_e.wheel=$.wheel===void 0?!1:!!$.wheel,_e.startScale=$.startScale===void 0?1:Number($.startScale),_e.maxScale=$.maxScale===void 0?3:Number($.maxScale),_e.minScale=$.minScale===void 0?.3:Number($.minScale),_e.scaleSpeed=$.scaleSpeed===void 0?1.2:Number($.scaleSpeed),_e.pinch=$.pinch===void 0?_e.wheel||_e.controls:!!$.pinch,_e}static parseGridOptions_($){$=$.grid||{};const _e={};return _e.spacing=Number($.spacing)||0,_e.colour=$.colour||"#888",_e.length=$.length===void 0?1:Number($.length),_e.snap=0<_e.spacing&&!!$.snap,_e}static parseThemeOptions_($){return $=$.theme||n_,typeof $=="string"?Eu(Bt.THEME,$):$ instanceof hs?$:hs.defineTheme($.name||"builtin"+Il(),$)}},GT;tt.Mutator$$module$build$src$core$mutator=class extends r_{constructor($,_e){_e||mo("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(_e!=null?_e:null),this.workspace_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.updateWorkspacePid_=this.sourceListener_=this.rootBlock_=this.svgDialog_=null,this.quarkNames_=$}setBlock($){this.block_=$}getWorkspace(){return this.workspace_}drawIcon_($){Lt(Ot.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},$),Lt(Ot.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},$),Lt(Ot.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},$)}iconClick_($){this.getBlock().isEditable()&&super.iconClick_($)}createEditor_(){if(this.svgDialog_=Lt(Ot.SVG,{x:no.BORDER_WIDTH,y:no.BORDER_WIDTH}),this.quarkNames_.length){var $=yo("xml");for(let rt=0,lt;lt=this.quarkNames_[rt];rt++){var _e=yo("block");_e.setAttribute("type",lt),$.appendChild(_e)}}else $=null;var ot=this.getBlock();return _e=new Wr({disable:!1,parentWorkspace:ot.workspace,media:ot.workspace.options.pathToMedia,rtl:ot.RTL,horizontalLayout:!1,renderer:ot.workspace.options.renderer,rendererOverrides:ot.workspace.options.rendererOverrides}),_e.toolboxPosition=ot.RTL?ro.RIGHT:ro.LEFT,(ot=!!$)&&(_e.languageTree=Nu($)),this.workspace_=this.newWorkspaceSvg(_e),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(v_),$=ot?this.workspace_.addFlyout(Ot.G):null,_e=this.workspace_.createDom("blocklyMutatorBackground"),$&&_e.insertBefore($,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(_e),this.svgDialog_}newWorkspaceSvg($){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&uo(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Ft(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble_(){var $=2*no.BORDER_WIDTH;const _e=this.workspace_.getCanvas().getBBox();let ot=_e.width+_e.x,rt=_e.height+3*$;const lt=this.workspace_.getFlyout();if(lt){const ut=lt.getWorkspace().getMetricsManager().getScrollMetrics();rt=Math.max(rt,ut.height+20),ot+=lt.getWidth()}this.getBlock().RTL&&(ot=-_e.x),ot+=3*$,(Math.abs(this.workspaceWidth_-ot)>$||Math.abs(this.workspaceHeight_-rt)>$)&&(this.workspaceWidth_=ot,this.workspaceHeight_=rt,this.bubble_.setBubbleSize(ot+$,rt+$),this.svgDialog_.setAttribute("width",`${this.workspaceWidth_}`),this.svgDialog_.setAttribute("height",`${this.workspaceHeight_}`),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.getBlock().RTL&&($="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",$)),this.workspace_.resize()}onBubbleMove_(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible($){if($!==this.isVisible()){var _e=this.getBlock();if(to(new(oo(Cn))(_e,$,"mutator")),$){this.bubble_=new no(_e.workspace,this.createEditor_(),_e.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(_e.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var ot=this.workspace_.options.languageTree;$=this.workspace_.getFlyout(),ot&&($.init(this.workspace_),$.show(ot)),this.rootBlock_=_e.decompose(this.workspace_),ot=this.rootBlock_.getDescendants(!1);for(let rt=0,lt;lt=ot[rt];rt++)lt.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),$?(ot=2*$.CORNER_RADIUS,$=this.rootBlock_.RTL?$.getWidth()+ot:ot):$=ot=16,_e.RTL&&($=-$),this.rootBlock_.moveBy($,ot),_e.saveConnections){const rt=this.rootBlock_;_e.saveConnections(rt),this.sourceListener_=()=>{const lt=this.getBlock();lt.saveConnections&&lt.saveConnections(rt)},_e.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateWorkspace_(),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,(ot=this.bubble_)==null||ot.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(_e.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)}}workspaceChanged_($){this.shouldIgnoreMutatorEvent_($)||this.updateWorkspacePid_||(this.updateWorkspacePid_=setTimeout(()=>{this.updateWorkspacePid_=null,this.updateWorkspace_()},0))}shouldIgnoreMutatorEvent_($){return $.isUiEvent||$.type===Jo||$.type===zo&&$.element==="disabled"}updateWorkspace_(){if(!this.workspace_.isDragging()){var $=this.workspace_.getTopBlocks(!1);for(let rt=0,lt;lt=$[rt];rt++){var _e=lt.getRelativeToSurfaceXY();if(20>_e.y&&lt.moveBy(0,20-_e.y),lt.RTL){var ot=-20;const ut=this.workspace_.getFlyout();ut&&(ot-=ut.getWidth()),_e.x>ot&&lt.moveBy(ot-_e.x,0)}else 20>_e.x&&lt.moveBy(20-_e.x,0)}}if(this.rootBlock_&&this.rootBlock_.workspace===this.workspace_){($=Lo())||qt(!0);const rt=this.getBlock();if(_e=Bs.getExtraBlockState_(rt),ot=rt.rendered,rt.rendered=!1,rt.compose(this.rootBlock_),rt.rendered=ot,rt.initSvg(),rt.rendered&&rt.render(),ot=Bs.getExtraBlockState_(rt),_e!==ot){to(new(oo(zo))(rt,"mutation",null,_e,ot));const lt=Lo();setTimeout(function(){const ut=Lo();qt(lt),rt.bumpNeighbours(),qt(ut)},tt.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble_(),0),qt($)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var $=this.workspace_;if($&&$.getAllBlocks(!1)){const _e=$.getAllBlocks(!1);for(let ot=0,rt;rt=_e[ot];ot++)rt.setStyle(rt.getStyleName());if($=$.getFlyout()){$=$.getWorkspace().getAllBlocks(!1);for(let ot=0,rt;rt=$[ot];ot++)rt.setStyle(rt.getStyleName())}}}static reconnect($,_e,ot){if(!$||!$.getSourceBlock().workspace)return!1;ot=_e.getInput(ot).connection;const rt=$.targetBlock();return rt&&rt!==_e||!ot||ot.targetConnection===$?!1:(ot.isConnected()&&ot.disconnect(),ot.connect($),!0)}static findParentWs($){let _e=null;if($&&$.options){const ot=$.options.parentWorkspace;$.isFlyout?ot&&ot.options&&(_e=ot.options.parentWorkspace):ot&&(_e=ot)}return _e}},GT={},GT.Mutator=tt.Mutator$$module$build$src$core$mutator;var Hs=Object.create(null),aR={allExtensions:Hs};Du("parent_tooltip_when_inline",Lv),tt.module$build$src$core$extensions={},tt.module$build$src$core$extensions.TEST_ONLY=aR,tt.module$build$src$core$extensions.apply=X_,tt.module$build$src$core$extensions.buildTooltipForDropdown=Ov,tt.module$build$src$core$extensions.buildTooltipWithFieldText=Cv,tt.module$build$src$core$extensions.isRegistered=r$,tt.module$build$src$core$extensions.register=Du,tt.module$build$src$core$extensions.registerMixin=Ev,tt.module$build$src$core$extensions.registerMutator=Iv,tt.module$build$src$core$extensions.runAfterPageLoad=Pu,tt.module$build$src$core$extensions.unregister=bv;var FT={};FT.removeElem=cr;var wn={};wn.arc=Bo,wn.curve=gr,wn.line=Ol,wn.lineOnAxis=jt,wn.lineTo=Sn,wn.moveBy=wo,wn.moveTo=_i,wn.point=Zt;var To={};To.Coordinate=Ht,To.KeyCodes=Yt,To.Rect=Do,To.Size=Yo,To.Svg=Ot,To.aria=na,To.array=FT,To.arrayRemove=Bv,To.browserEvents=On,To.checkMessageReferences=Dv,To.colour=tr,To.deprecation=Xo,To.dom=Vo,To.extensions=tt.module$build$src$core$extensions,To.getBlockTypeCounts=Gv,To.getDocumentScroll=Uv,To.getInjectionDivXY_=Av,To.getRelativeXY=wv,To.getViewportBBox=xv,To.idGenerator=Qu,To.is3dSupported=Pv,To.math=Yu,To.object=tt.module$build$src$core$utils$object,To.parseBlockColour=Hv,To.parsing=Zl,To.replaceMessageReferences=Mv,To.runAfterPageLoad=Vv,To.screenToWsCoordinates=Fv,To.string=tt.module$build$src$core$utils$string,To.style=cn,To.svgMath=jn,To.svgPaths=wn,To.tokenizeInterpolation=Nv,To.toolbox=Xn,To.userAgent=yn,To.xml=tt.module$build$src$core$utils$xml;var HT=class extends Fr{constructor($,_e){super(_e),this.type=Gl,this.isOpen=$}toJson(){const $=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return $.isOpen=this.isOpen,$}fromJson($){super.fromJson($),this.isOpen=$.isOpen}};$o(Bt.EVENT,Gl,HT);var An=class{constructor($){this.name_=$}toString(){return this.name_}};An.POSITIONABLE=new An("positionable"),An.DRAG_TARGET=new An("drag_target"),An.DELETE_AREA=new An("delete_area"),An.AUTOHIDEABLE=new An("autohideable");var Ko=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent($,_e){const ot=$.component.id;if(!_e&&this.componentData.has(ot)){var rt;throw Error('Plugin "'+ot+'" with capabilities "'+((rt=this.componentData.get(ot))==null?void 0:rt.capabilities)+'" already added.')}for(this.componentData.set(ot,$),_e=[],rt=0;rt<$.capabilities.length;rt++){const lt=String($.capabilities[rt]).toLowerCase();if(_e.push(lt),this.capabilityToComponentIds.has(lt)){let ut;(ut=this.capabilityToComponentIds.get(lt))==null||ut.push(ot)}else this.capabilityToComponentIds.set(lt,[ot])}this.componentData.get(ot).capabilities=_e}removeComponent($){const _e=this.componentData.get($);if(_e){for(let ot=0;ot<_e.capabilities.length;ot++){const rt=String(_e.capabilities[ot]).toLowerCase();cr(this.capabilityToComponentIds.get(rt),$)}this.componentData.delete($)}}addCapability($,_e){if(!this.getComponent($))throw Error('Cannot add capability, "'+_e+'". Plugin "'+$+'" has not been added to the ComponentManager');if(this.hasCapability($,_e))console.warn('Plugin "'+$+'already has capability "'+_e+'"');else{_e=String(_e).toLowerCase();var ot;(ot=this.componentData.get($))==null||ot.capabilities.push(_e);var rt;(rt=this.capabilityToComponentIds.get(_e))==null||rt.push($)}}removeCapability($,_e){if(!this.getComponent($))throw Error('Cannot remove capability, "'+_e+'". Plugin "'+$+'" has not been added to the ComponentManager');this.hasCapability($,_e)?(_e=String(_e).toLowerCase(),cr(this.componentData.get($).capabilities,_e),cr(this.capabilityToComponentIds.get(_e),$)):console.warn('Plugin "'+$+`doesn't have capability "`+_e+'" to remove')}hasCapability($,_e){return _e=String(_e).toLowerCase(),this.componentData.has($)&&this.componentData.get($).capabilities.indexOf(_e)!==-1}getComponent($){let _e;return(_e=this.componentData.get($))==null?void 0:_e.component}getComponents($,_e){if($=String($).toLowerCase(),$=this.capabilityToComponentIds.get($),!$)return[];const ot=[];if(_e){const rt=[];$.forEach(lt=>{rt.push(this.componentData.get(lt))}),rt.sort(function(lt,ut){return lt.weight-ut.weight}),rt.forEach(function(lt){ot.push(lt.component)})}else $.forEach(rt=>{ot.push(this.componentData.get(rt).component)});return ot}};Ko.Capability=An;var _a=class extends Error{},VT=class extends _a{constructor($){super("Expected to find a 'type' property, defining the block type"),this.state=$}},ga=class extends _a{constructor($,_e,ot){super(`The block ${_e.toDevString()} is missing a(n) ${$}
connection`),this.block=_e,this.state=ot}},WT=class extends _a{constructor($,_e,ot,rt){super(`The block ${ot.toDevString()} could not connect its
${_e} to its parent, because: ${$}`),this.childBlock=ot,this.childState=rt}},jT=class extends _a{constructor($){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=$}},Vs={};Vs.BadConnectionCheck=WT,Vs.DeserializationError=_a,Vs.MissingBlockType=VT,Vs.MissingConnection=ga,Vs.RealChildOfShadow=jT;var XT=100,zT=50,Up={};Up.BLOCKS=zT,Up.VARIABLES=XT;var Gp={};Gp.register=K_,Gp.unregister=Wv;var uR=class{constructor(){this.priority=zT}save($){const _e=[];for(const ot of $.getTopBlocks(!1))($=Rn(ot,{addCoordinates:!0,doFullSerialization:!1}))&&_e.push($);return _e.length?{languageVersion:0,blocks:_e}:null}load($,_e){$=$.blocks;for(const ot of $)is(ot,_e,{recordUndo:Nr()})}clear($){for(const _e of $.getTopBlocks(!1))_e.dispose(!1)}};K_("blocks",new uR);var s_={};s_.append=is,s_.appendInternal=J_,s_.save=Rn;var YT=class extends zl{constructor($){super($),this.type=Jo,$&&($.isShadow()&&(this.recordUndo=!1),this.xml=Ou($),this.ids=bu($),this.json=Rn($,{addCoordinates:!0}))}toJson(){const $=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return $.xml=Pr(this.xml),$.ids=this.ids,$.json=this.json,this.recordUndo||($.recordUndo=this.recordUndo),$}fromJson($){super.fromJson($),this.xml=xr($.xml),this.ids=$.ids,this.json=$.json,$.recordUndo!==void 0&&(this.recordUndo=$.recordUndo)}run($){const _e=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if($)is(this.json,_e);else for($=0;$<this.ids.length;$++){const ot=this.ids[$],rt=_e.getBlockById(ot);rt?rt.dispose(!1):ot===this.blockId&&console.warn("Can't uncreate non-existent block: "+ot)}}};$o(Bt.EVENT,Jo,YT);var KT=class extends zl{constructor($){if(super($),this.type=hn,$){if($.getParent())throw Error("Connected blocks cannot be deleted.");$.isShadow()&&(this.recordUndo=!1),this.oldXml=Ou($),this.ids=bu($),this.wasShadow=$.isShadow(),this.oldJson=Rn($,{addCoordinates:!0})}}toJson(){const $=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return $.oldXml=Pr(this.oldXml),$.ids=this.ids,$.wasShadow=this.wasShadow,$.oldJson=this.oldJson,this.recordUndo||($.recordUndo=this.recordUndo),$}fromJson($){super.fromJson($),this.oldXml=xr($.oldXml),this.ids=$.ids,this.wasShadow=$.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=$.oldJson,$.recordUndo!==void 0&&(this.recordUndo=$.recordUndo)}run($){const _e=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if($)for($=0;$<this.ids.length;$++){const ot=this.ids[$],rt=_e.getBlockById(ot);rt?rt.dispose(!1):ot===this.blockId&&console.warn("Can't delete non-existent block: "+ot)}else is(this.oldJson,_e)}};$o(Bt.EVENT,hn,KT);var Vt;(function($){$[$.INPUT_VALUE=1]="INPUT_VALUE",$[$.OUTPUT_VALUE=2]="OUTPUT_VALUE",$[$.NEXT_STATEMENT=3]="NEXT_STATEMENT",$[$.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Vt||(Vt={})),tt.module$build$src$core$connection_type={},tt.module$build$src$core$connection_type.ConnectionType=Vt;var vo=class{constructor($,_e){this.type=_e,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=$}connect_($){const _e=Vt.INPUT_VALUE,ot=this.getSourceBlock();var rt=$.getSourceBlock();$.isConnected()&&$.disconnect();let lt;if(this.isConnected()){const pt=this.stashShadowState_(),vt=this.targetBlock();vt.isShadow()?vt.dispose(!1):(this.disconnect(),lt=vt),this.applyShadowState_(pt)}let ut;jo()&&(ut=new(oo(rr))(rt)),lS(this,$),rt.setParent(ot),ut&&(ut.recordNew(),to(ut)),lt&&($=this.type===_e?lt.outputConnection:lt.previousConnection,(rt=vo.getConnectionForOrphanedConnection(rt,$))?$.connect(rt):$.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const $=this.targetBlock();$&&$.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Vt.INPUT_VALUE||this.type===Vt.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect($){}connect($){if(this.targetConnection===$)return!0;if(this.getConnectionChecker().canConnect(this,$,!1)){const _e=Lo();_e||qt(!0),this.isSuperior()?this.connect_($):$.connect_(this),_e||qt(!1)}return this.isConnected()}disconnect(){var $=this.targetConnection;if(!$)throw Error("Source connection not connected.");if($.targetConnection!==this)throw Error("Target connection not connected to source connection.");let _e,ot;this.isSuperior()?(_e=this.sourceBlock_,ot=$.getSourceBlock(),$=this):(_e=$.getSourceBlock(),ot=this.sourceBlock_);const rt=Lo();rt||qt(!0),this.disconnectInternal_(_e,ot),ot.isShadow()||$.respawnShadow_(),rt||qt(!1)}disconnectInternal_($,_e){let ot;jo()&&(ot=new(oo(rr))(_e)),($=this.targetConnection)&&($.targetConnection=null),this.targetConnection=null,_e.setParent(null),ot&&(ot.recordNew(),to(ot))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let $,_e;return(_e=($=this.targetConnection)==null?void 0:$.getSourceBlock())!=null?_e:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck($){return $?(Array.isArray($)||($=[$]),this.check_=$,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom($){this.setShadowStateInternal_({shadowDom:$})}getShadowDom($){return $&&this.targetBlock().isShadow()?es(this.targetBlock()):this.shadowDom_}setShadowState($){this.setShadowStateInternal_({shadowState:$})}getShadowState($){return $&&this.targetBlock()&&this.targetBlock().isShadow()?Rn(this.targetBlock()):this.shadowState_}neighbours($){return[]}getParentInput(){let $=null;const _e=this.sourceBlock_.inputList;for(let ot=0;ot<_e.length;ot++)if(_e[ot].connection===this){$=_e[ot];break}return $}toString(){const $=this.sourceBlock_;if(!$)return"Orphan Connection";if($.outputConnection===this)var _e="Output Connection of ";else if($.previousConnection===this)_e="Previous Connection of ";else if($.nextConnection===this)_e="Next Connection of ";else{_e=null;for(let ot=0,rt;rt=$.inputList[ot];ot++)if(rt.connection===this){_e=rt;break}if(_e)_e='Input "'+_e.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return _e+$.toDevString()}stashShadowState_(){const $=this.getShadowDom(!0),_e=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:$,shadowState:_e}}applyShadowState_({shadowDom:$,shadowState:_e}){this.shadowDom_=$,this.shadowState_=_e}setShadowStateInternal_({shadowDom:$=null,shadowState:_e=null}={}){this.shadowDom_=$,this.shadowState_=_e,($=this.targetBlock())?$.isShadow()?($.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):($=this.createShadowBlock_(!1),this.serializeShadow_($),$&&$.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_($){var _e=this.getSourceBlock();const ot=this.getShadowState(),rt=this.getShadowDom();if(_e.isDeadOrDying()||!ot&&!rt)return null;if(ot)return _e=J_(ot,_e.workspace,{parentConnection:$?this:void 0,isShadow:!0,recordUndo:!1});if(rt){if(_e=bs(rt,_e.workspace),$)if(this.type===Vt.INPUT_VALUE){if(!_e.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(_e.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Vt.NEXT_STATEMENT){if(!_e.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(_e.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return _e}return null}serializeShadow_($){$&&(this.shadowDom_=es($),this.shadowState_=Rn($))}static getConnectionForOrphanedConnection($,_e){if(_e.type===Vt.OUTPUT_VALUE)return aS($,_e.getSourceBlock());$=$.lastConnectionInStack(!0);const ot=_e.getConnectionChecker();return $&&ot.canConnect(_e,$,!1)?$:null}};vo.CAN_CONNECT=0,vo.REASON_SELF_CONNECTION=1,vo.REASON_WRONG_TYPE=2,vo.REASON_TARGET_NULL=3,vo.REASON_CHECKS_FAILED=4,vo.REASON_DIFFERENT_WORKSPACES=5,vo.REASON_SHADOW_PARENT=6,vo.REASON_DRAG_CHECKS_FAILED=7,vo.REASON_PREVIOUS_AND_OUTPUT=8;var $a="_TEMP_COLLAPSED_INPUT",ba="_TEMP_COLLAPSED_FIELD",Fp={};Fp.COLLAPSED_FIELD_NAME=ba,Fp.COLLAPSED_INPUT_NAME=$a,tt.FieldLabel$$module$build$src$core$field_label=class extends fo{constructor($,_e,ot){super(fo.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,$!==fo.SKIP_SETUP&&(ot?this.configure_(ot):this.class_=_e||null,this.setValue($))}configure_($){super.configure_($),$.class&&(this.class_=$.class)}initView(){this.createTextElement_(),this.class_&&Ft(this.getTextElement(),this.class_)}doClassValidation_($){return $==null?null:String($)}setClass($){this.textElement_&&(this.class_&&uo(this.textElement_,this.class_),$&&Ft(this.textElement_,$)),this.class_=$}static fromJson($){return new this(Mo($.text),void 0,$)}},yr("field_label",tt.FieldLabel$$module$build$src$core$field_label),tt.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",tt.FieldLabel$$module$build$src$core$field_label;var Ws=class{constructor($,_e,ot,rt){if(this.type=$,this.name=_e,this.connection=rt,this.fieldRow=[],this.visible_=!0,$!==co.DUMMY&&!_e)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock_=ot,this.align=tt.Align$$module$build$src$core$input.LEFT}getSourceBlock(){return this.sourceBlock_}appendField($,_e){return this.insertFieldAt(this.fieldRow.length,$,_e),this}insertFieldAt($,_e,ot){if(0>$||$>this.fieldRow.length)throw Error("index "+$+" out of bounds.");return(_e||_e===""&&ot)&&(typeof _e=="string"&&(_e=H_({type:"field_label",text:_e})),_e.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(_e.init(),_e.applyColour()),_e.name=ot,_e.setVisible(this.isVisible()),_e.prefixField&&($=this.insertFieldAt($,_e.prefixField)),this.fieldRow.splice($,0,_e),$++,_e.suffixField&&($=this.insertFieldAt($,_e.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),$}removeField($,_e){for(let ot=0,rt;rt=this.fieldRow[ot];ot++)if(rt.name===$)return rt.dispose(),this.fieldRow.splice(ot,1),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(_e)return!1;throw Error('Field "'+$+'" not found.')}isVisible(){return this.visible_}setVisible($){let _e=[];if(this.visible_===$)return _e;this.visible_=$;for(let rt=0,lt;lt=this.fieldRow[rt];rt++)lt.setVisible($);if(this.connection){var ot=this.connection;$?_e=ot.startTrackingAll():ot.stopTrackingAll(),(ot=ot.targetBlock())&&(ot.getSvgRoot().style.display=$?"block":"none")}return _e}markDirty(){for(let $=0,_e;_e=this.fieldRow[$];$++)_e.markDirty()}setCheck($){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck($),this}setAlign($){return this.align=$,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this}setShadowDom($){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom($),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock_.workspace.rendered)for(let $=0;$<this.fieldRow.length;$++)this.fieldRow[$].init()}dispose(){for(let $=0,_e;_e=this.fieldRow[$];$++)_e.dispose();this.connection&&this.connection.dispose()}},Hp;(function($){$=$.Align||($.Align={}),$[$.LEFT=-1]="LEFT",$[$.CENTRE=0]="CENTRE",$[$.RIGHT=1]="RIGHT"})(Ws||(Ws={})),tt.Align$$module$build$src$core$input=Ws.Align,Hp={},Hp.Align=tt.Align$$module$build$src$core$input,Hp.Input=Ws;var Dt=class{constructor($,_e,ot){if(this.wsCoordinate_=null,!_e)throw Error("Cannot create a node without a location.");this.type_=$,this.isConnection_=Dt.isConnectionType_($),this.location_=_e,this.processParams_(ot||null)}processParams_($){$&&$.wsCoordinate&&(this.wsCoordinate_=$.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var $=this.location_.getParentInput();const _e=$.getSourceBlock();for($=_e.inputList.indexOf($),$+=1;$<_e.inputList.length;$++){const ot=_e.inputList[$],rt=ot.fieldRow;for(let lt=0;lt<rt.length;lt++){const ut=rt[lt];if(ut.isClickable()||Dt.NAVIGATE_ALL_FIELDS)return Dt.createFieldNode(ut)}if(ot.connection)return Dt.createInputNode(ot)}return null}findNextForField_(){var $=this.location_,_e=$.getParentInput();const ot=$.getSourceBlock();var rt=ot.inputList.indexOf(_e);for($=_e.fieldRow.indexOf($)+1;rt<ot.inputList.length;rt++){_e=ot.inputList[rt];const lt=_e.fieldRow;for(;$<lt.length;){if(lt[$].isClickable()||Dt.NAVIGATE_ALL_FIELDS)return Dt.createFieldNode(lt[$]);$++}if($=0,_e.connection)return Dt.createInputNode(_e)}return null}findPrevForInput_(){const $=this.location_.getParentInput(),_e=$.getSourceBlock();for(var ot=_e.inputList.indexOf($);0<=ot;ot--){var rt=_e.inputList[ot];if(rt.connection&&rt!==$)return Dt.createInputNode(rt);rt=rt.fieldRow;for(let lt=rt.length-1;0<=lt;lt--){const ut=rt[lt];if(ut.isClickable()||Dt.NAVIGATE_ALL_FIELDS)return Dt.createFieldNode(ut)}}return null}findPrevForField_(){var $=this.location_;const _e=$.getParentInput(),ot=$.getSourceBlock();var rt=ot.inputList.indexOf(_e);for($=_e.fieldRow.indexOf($)-1;0<=rt;rt--){var lt=ot.inputList[rt];if(lt.connection&&lt!==_e)return Dt.createInputNode(lt);for(lt=lt.fieldRow;-1<$;){if(lt[$].isClickable()||Dt.NAVIGATE_ALL_FIELDS)return Dt.createFieldNode(lt[$]);$--}0<=rt-1&&($=ot.inputList[rt-1].fieldRow.length-1)}return null}navigateBetweenStacks_($){var _e=this.getLocation();if(_e.getSourceBlock&&(_e=_e.getSourceBlock()),!_e||_e.isDeadOrDying())return null;const ot=_e.getRootBlock();_e=ot.workspace.getTopBlocks(!0);for(let rt=0;rt<_e.length;rt++)if(ot.id===_e[rt].id)return $=rt+($?1:-1),$===-1||$===_e.length?null:Dt.createStackNode(_e[$]);throw Error("Couldn't find "+($?"next":"previous")+" stack?!")}findTopASTNodeForBlock_($){const _e=xu($);return _e?Dt.createConnectionNode(_e):Dt.createBlockNode($)}getOutAstNodeForBlock_($){if(!$)return null;$=$.getTopStackBlock();const _e=xu($);return _e&&_e.targetConnection&&_e.targetConnection.getParentInput()?Dt.createInputNode(_e.targetConnection.getParentInput()):Dt.createStackNode($)}findFirstFieldOrInput_($){$=$.inputList;for(let _e=0;_e<$.length;_e++){const ot=$[_e],rt=ot.fieldRow;for(let lt=0;lt<rt.length;lt++){const ut=rt[lt];if(ut.isClickable()||Dt.NAVIGATE_ALL_FIELDS)return Dt.createFieldNode(ut)}if(ot.connection)return Dt.createInputNode(ot)}return null}getSourceBlock(){return this.getType()===Dt.types.BLOCK?this.getLocation():this.getType()===Dt.types.STACK?this.getLocation():this.getType()===Dt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case Dt.types.STACK:return this.navigateBetweenStacks_(!0);case Dt.types.OUTPUT:return Dt.createBlockNode(this.location_.getSourceBlock());case Dt.types.FIELD:return this.findNextForField_();case Dt.types.INPUT:return this.findNextForInput_();case Dt.types.BLOCK:return Dt.createConnectionNode(this.location_.nextConnection);case Dt.types.PREVIOUS:return Dt.createBlockNode(this.location_.getSourceBlock());case Dt.types.NEXT:return Dt.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case Dt.types.WORKSPACE:const $=this.location_.getTopBlocks(!0);if(0<$.length)return Dt.createStackNode($[0]);break;case Dt.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Dt.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Dt.types.INPUT:return Dt.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case Dt.types.STACK:return this.navigateBetweenStacks_(!1);case Dt.types.FIELD:return this.findPrevForField_();case Dt.types.INPUT:return this.findPrevForInput_();case Dt.types.BLOCK:var $=xu(this.location_);return Dt.createConnectionNode($);case Dt.types.PREVIOUS:if(($=this.location_.targetConnection)&&!$.getParentInput())return Dt.createConnectionNode($);break;case Dt.types.NEXT:return Dt.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case Dt.types.STACK:var $=this.location_,_e=$.getRelativeToSurfaceXY();return _e=new Ht(_e.x,_e.y+Dt.DEFAULT_OFFSET_Y),Dt.createWorkspaceNode($.workspace,_e);case Dt.types.OUTPUT:return $=this.location_,(_e=$.targetConnection)?Dt.createConnectionNode(_e):Dt.createStackNode($.getSourceBlock());case Dt.types.FIELD:return Dt.createBlockNode(this.location_.getSourceBlock());case Dt.types.INPUT:return Dt.createBlockNode(this.location_.getSourceBlock());case Dt.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Dt.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case Dt.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_($){switch($){case Dt.types.PREVIOUS:case Dt.types.NEXT:case Dt.types.INPUT:case Dt.types.OUTPUT:return!0}return!1}static createFieldNode($){return $?new Dt(Dt.types.FIELD,$):null}static createConnectionNode($){if(!$)return null;const _e=$.type;return _e===Vt.INPUT_VALUE||_e===Vt.NEXT_STATEMENT&&$.getParentInput()?Dt.createInputNode($.getParentInput()):_e===Vt.NEXT_STATEMENT?new Dt(Dt.types.NEXT,$):_e===Vt.OUTPUT_VALUE?new Dt(Dt.types.OUTPUT,$):_e===Vt.PREVIOUS_STATEMENT?new Dt(Dt.types.PREVIOUS,$):null}static createInputNode($){return $&&$.connection?new Dt(Dt.types.INPUT,$.connection):null}static createBlockNode($){return $?new Dt(Dt.types.BLOCK,$):null}static createStackNode($){return $?new Dt(Dt.types.STACK,$):null}static createWorkspaceNode($,_e){return _e&&$?new Dt(Dt.types.WORKSPACE,$,{wsCoordinate:_e}):null}static createTopNode($){const _e=xu($);return _e?Dt.createConnectionNode(_e):Dt.createBlockNode($)}};Dt.NAVIGATE_ALL_FIELDS=!1,Dt.DEFAULT_OFFSET_Y=-20,function($){$=$.types||($.types={}),$.FIELD="field",$.BLOCK="block",$.INPUT="input",$.OUTPUT="output",$.NEXT="next",$.PREVIOUS="previous",$.STACK="stack",$.WORKSPACE="workspace"}(Dt||(Dt={}));var js=class{constructor($,_e,ot){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=$,this.id=ot&&!$.getBlockById(ot)?ot:vn(),$.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Yo(160,80)},this.xy_=new Ht(0,0),this.isInFlyout=$.isFlyout,this.isInMutator=$.isMutator,this.RTL=$.RTL,_e){if(this.type=_e,ot=ur[_e],!ot||typeof ot!="object")throw TypeError("Invalid block definition for type: "+_e);Object.assign(this,ot)}$.addTopBlock(this),$.addTypedBlock(this),new.target===js&&this.doInit_()}doInit_(){const $=Lo();$||qt(!0);const _e=Nr();try{typeof this.init=="function"&&(pr(!1),this.init(),pr(_e)),jo()&&to(new(oo(Jo))(this))}finally{$||qt(!1),pr(_e)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose($){if(!this.isDeadOrDying()){this.unplug($),jo()&&to(new(oo(hn))(this)),this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),Fo();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let ot=this.childBlocks_.length-1;0<=ot;ot--)this.childBlocks_[ot].dispose(!1);for(let ot=0,rt;rt=this.inputList[ot];ot++)rt.dispose();this.inputList.length=0;const _e=this.getConnections_(!0);for(let ot=0,rt;rt=_e[ot];ot++)rt.dispose()}finally{Ho(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let $=0,_e;_e=this.inputList[$];$++)for(let ot=0,rt;rt=_e.fieldRow[ot];ot++)rt.initModel&&rt.initModel()}unplug($){this.outputConnection&&this.unplugFromRow_($),this.previousConnection&&this.unplugFromStack_($)}unplugFromRow_($){let _e=null;this.outputConnection.isConnected()&&(_e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),_e&&$&&($=this.getOnlyValueConnection_())&&$.isConnected()&&!$.targetBlock().isShadow()&&($=$.targetConnection,$==null||$.disconnect(),this.workspace.connectionChecker.canConnect($,_e,!1)?_e.connect($):$==null||$.onFailedConnect(_e))}getOnlyValueConnection_(){let $=null;for(let _e=0;_e<this.inputList.length;_e++){const ot=this.inputList[_e].connection;if(ot&&ot.type===Vt.INPUT_VALUE&&ot.targetConnection){if($)return null;$=ot}}return $}unplugFromStack_($){let _e=null;this.previousConnection.isConnected()&&(_e=this.previousConnection.targetConnection,this.previousConnection.disconnect());const ot=this.getNextBlock();$&&ot&&!ot.isShadow()&&($=this.nextConnection.targetConnection,$==null||$.disconnect(),_e&&this.workspace.connectionChecker.canConnect(_e,$,!1)&&_e.connect($))}getConnections_($){$=[],this.outputConnection&&$.push(this.outputConnection),this.previousConnection&&$.push(this.previousConnection),this.nextConnection&&$.push(this.nextConnection);for(let _e=0,ot;ot=this.inputList[_e];_e++)ot.connection&&$.push(ot.connection);return $}lastConnectionInStack($){let _e=this.nextConnection;for(;_e;){const ot=_e.targetBlock();if(!ot||$&&ot.isShadow())return _e;_e=ot.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock($){for(let _e=0,ot;ot=this.inputList[_e];_e++)if(ot.connection&&ot.connection.targetBlock()===$)return ot;return null}getSurroundParent(){let $=this,_e;do if(_e=$,$=$.getParent(),!$)return null;while($.getNextBlock()===_e);return $}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let $=0,_e;_e=this.inputList[$];$++)if(_e.connection&&_e.connection.type===Vt.NEXT_STATEMENT)return _e.connection;return null}getRootBlock(){let $,_e=this;do $=_e,_e=$.parentBlock_;while(_e);return $}getTopStackBlock(){let $=this,_e;do _e=$.getPreviousBlock();while(_e&&_e.getNextBlock()===$&&($=_e));return $}getChildren($){if(!$)return this.childBlocks_;$=[];for(let ot=0,rt;rt=this.inputList[ot];ot++)if(rt.connection){var _e=rt.connection.targetBlock();_e&&$.push(_e)}return(_e=this.getNextBlock())&&$.push(_e),$}setParent($){if($!==this.parentBlock_){var _e=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),ot=!!_e;if(ot&&$&&_e!==$)throw Error("Block connected to superior one that is not new parent.");if(!ot&&$)throw Error("Block not connected to new parent.");if(ot&&!$)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?cr(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=$)?$.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants($){const _e=[this],ot=this.getChildren($);for(let rt,lt=0;rt=ot[lt];lt++)_e.push(...rt.getDescendants($));return _e}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable($){this.deletable_=$}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable($){this.movable_=$}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Wo(this,!0)):!0}isShadow(){return this.isShadow_}setShadow($){this.isShadow_=$}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker($){this.isInsertionMarker_=$}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable($){this.editable_=$;for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)lt.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection($,_e){const ot=this.getConnections_(!0);if($=$.getConnections_(!0),ot.length!==$.length)throw Error("Connection lists did not match in length.");for(let rt=0;rt<$.length;rt++)if($[rt]===_e)return ot[rt];return null}setHelpUrl($){this.helpUrl=$}setTooltip($){this.tooltip=$}getTooltip(){return yl(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour($){$=Ss($),this.hue_=$.hue,this.colour_=$.hex}setStyle($){this.styleName_=$}setOnChange($){if($&&typeof $!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=$,this.onchangeWrapper_=$.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField($){if(typeof $!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+($===void 0?"nothing":$+" of type "+typeof $)+" instead");for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)if(lt.name===$)return lt;return null}getVars(){const $=[];for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)lt.referencesVariables()&&$.push(lt.getValue());return $}getVarModels(){const $=[];for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)if(lt.referencesVariables()){const ut=this.workspace.getVariableById(lt.getValue());ut&&$.push(ut)}return $}updateVarName($){for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)lt.referencesVariables()&&$.getId()===lt.getValue()&&lt.refreshVariableName()}renameVarById($,_e){for(let ot=0,rt;rt=this.inputList[ot];ot++)for(let lt=0,ut;ut=rt.fieldRow[lt];lt++)ut.referencesVariables()&&$===ut.getValue()&&ut.setValue(_e)}getFieldValue($){return($=this.getField($))?$.getValue():null}setFieldValue($,_e){const ot=this.getField(_e);if(!ot)throw Error('Field "'+_e+'" not found.');ot.setValue($)}setPreviousStatement($,_e){if($)_e===void 0&&(_e=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Vt.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(_e);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement($,_e){if($)_e===void 0&&(_e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Vt.NEXT_STATEMENT)),this.nextConnection.setCheck(_e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput($,_e){if($)_e===void 0&&(_e=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Vt.OUTPUT_VALUE)),this.outputConnection.setCheck(_e);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline($){this.inputsInline!==$&&(to(new(oo(zo))(this,"inline",null,this.inputsInline,$)),this.inputsInline=$)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var $=1;$<this.inputList.length;$++)if(this.inputList[$-1].type===co.DUMMY&&this.inputList[$].type===co.DUMMY)return!1;for($=1;$<this.inputList.length;$++)if(this.inputList[$-1].type===co.VALUE&&this.inputList[$].type===co.DUMMY)return!0;return!1}setOutputShape($){this.outputShape_=$}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled($){if(this.isEnabled()!==$){const _e=this.disabled;this.disabled=!$,to(new(oo(zo))(this,"disabled",null,_e,!$))}}getInheritedDisabled(){let $=this.getSurroundParent();for(;$;){if($.disabled)return!0;$=$.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed($){this.collapsed_!==$&&(to(new(oo(zo))(this,"collapsed",null,this.collapsed_,$)),this.collapsed_=$)}toString($,_e){function ot(xt){let ho=xt.getCheck();return!ho&&xt.targetConnection&&(ho=xt.targetConnection.getCheck()),!!ho&&(ho.indexOf("Boolean")!==-1||ho.indexOf("Number")!==-1)}function rt(){let xt,ho;pt&&pt.getType()===((xt=vt)==null?void 0:xt.getType())&&pt.getLocation()===((ho=vt)==null?void 0:ho.getLocation())&&(pt=null)}var lt=[];_e=_e||"?";const ut=Dt.NAVIGATE_ALL_FIELDS;Dt.NAVIGATE_ALL_FIELDS=!0;let pt=Dt.createBlockNode(this);const vt=pt;for(;pt;){switch(pt.getType()){case Dt.types.INPUT:var At=pt.getLocation();pt.in()?ot(At)&&lt.push("("):lt.push(_e);break;case Dt.types.FIELD:At=pt.getLocation(),At.name!==ba&&lt.push(At.getText())}if(At=pt,pt=At.in()||At.next(),!pt){for(pt=At.out(),rt();pt&&!pt.next();)pt=pt.out(),rt(),pt&&pt.getType()===Dt.types.INPUT&&ot(pt.getLocation())&&lt.push(")");pt&&(pt=pt.next())}}for(Dt.NAVIGATE_ALL_FIELDS=ut,_e=2;_e<lt.length;_e++)lt[_e-2]==="("&&lt[_e]===")"&&(lt[_e-2]=lt[_e-1],lt.splice(_e-1,2));return lt=lt.reduce(function(xt,ho){return xt+(xt.substr(-1)==="("||ho===")"?"":" ")+ho},""),lt=lt.trim()||"???",$&&lt.length>$&&(lt=lt.substring(0,$-3)+"..."),lt}appendValueInput($){return this.appendInput_(co.VALUE,$)}appendStatementInput($){return this.appendInput_(co.STATEMENT,$)}appendDummyInput($){return this.appendInput_(co.DUMMY,$||"")}jsonInit($){var _e=$.type?'Block "'+$.type+'": ':"";if($.output&&$.previousStatement)throw Error(_e+"Must not have both an output and a previousStatement.");if($.style&&$.style.hat&&(this.hat=$.style.hat,$.style=null),$.style&&$.colour)throw Error(_e+"Must not have both a colour and a style.");$.style?this.jsonInitStyle_($,_e):this.jsonInitColour_($,_e);for(var ot=0;$["message"+ot]!==void 0;)this.interpolate_($["message"+ot],$["args"+ot]||[],$["lastDummyAlign"+ot],_e),ot++;if($.inputsInline!==void 0&&this.setInputsInline($.inputsInline),$.output!==void 0&&this.setOutput(!0,$.output),$.outputShape!==void 0&&this.setOutputShape($.outputShape),$.previousStatement!==void 0&&this.setPreviousStatement(!0,$.previousStatement),$.nextStatement!==void 0&&this.setNextStatement(!0,$.nextStatement),$.tooltip!==void 0&&(ot=Mo($.tooltip),this.setTooltip(ot)),$.enableContextMenu!==void 0&&(this.contextMenu=!!$.enableContextMenu),$.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!$.suppressPrefixSuffix),$.helpUrl!==void 0&&(ot=Mo($.helpUrl),this.setHelpUrl(ot)),typeof $.extensions=="string"&&(console.warn(_e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+$.type+"' block."),$.extensions=[$.extensions]),$.mutator!==void 0&&X_($.mutator,this,!0),$=$.extensions,Array.isArray($))for(_e=0;_e<$.length;_e++)X_($[_e],this,!1)}jsonInitColour_($,_e){if("colour"in $)if($.colour===void 0)console.warn(_e+"Undefined colour value.");else{$=$.colour;try{this.setColour($)}catch{console.warn(_e+"Illegal colour value: ",$)}}}jsonInitStyle_($,_e){$=$.style;try{this.setStyle($)}catch{console.warn(_e+"Style does not exist: ",$)}}mixin($,_e){if(_e!==void 0&&typeof _e!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!_e){_e=[];for(const ot in $)this[ot]!==void 0&&_e.push(ot);if(_e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(_e))}Object.assign(this,$)}interpolate_($,_e,ot,rt){$=U_($),this.validateTokens_($,_e.length),_e=this.interpolateArguments_($,_e,ot),ot=[];for(let lt=0,ut;ut=_e[lt];lt++)if(this.isInputKeyword_(ut.type)){if($=this.inputFromJson_(ut,rt)){for(let pt=0,vt;vt=ot[pt];pt++)$.appendField(vt[0],vt[1]);ot.length=0}}else($=this.fieldFromJson_(ut))&&ot.push([$,ut.name])}validateTokens_($,_e){const ot=[];let rt=0;for(let lt=0;lt<$.length;lt++){const ut=$[lt];if(typeof ut=="number"){if(1>ut||ut>_e)throw Error('Block "'+this.type+'": Message index %'+ut+" out of range.");if(ot[ut])throw Error('Block "'+this.type+'": Message index %'+ut+" duplicated.");ot[ut]=!0,rt++}}if(rt!==_e)throw Error('Block "'+this.type+'": Message does not reference all '+_e+" arg(s).")}interpolateArguments_($,_e,ot){const rt=[];for(let lt=0;lt<$.length;lt++){let ut=$[lt];typeof ut=="number"&&(ut=_e[ut-1]),!(typeof ut=="string"&&(ut=this.stringToFieldJson_(ut),!ut))&&rt.push(ut)}return($=rt.length)&&!this.isInputKeyword_(rt[$-1].type)&&($={type:"input_dummy"},ot&&($.align=ot),rt.push($)),rt}fieldFromJson_($){const _e=H_($);return!_e&&$.alt?typeof $.alt=="string"?($=this.stringToFieldJson_($.alt))?this.fieldFromJson_($):null:this.fieldFromJson_($.alt):_e}inputFromJson_($,_e){var ot={LEFT:tt.Align$$module$build$src$core$input.LEFT,RIGHT:tt.Align$$module$build$src$core$input.RIGHT,CENTRE:tt.Align$$module$build$src$core$input.CENTRE,CENTER:tt.Align$$module$build$src$core$input.CENTRE};let rt=null;switch($.type){case"input_value":rt=this.appendValueInput($.name);break;case"input_statement":rt=this.appendStatementInput($.name);break;case"input_dummy":rt=this.appendDummyInput($.name)}return rt?($.check&&rt.setCheck($.check),$.align&&(ot=ot[$.align.toUpperCase()],ot===void 0?console.warn(_e+"Illegal align value: ",$.align):rt.setAlign(ot)),rt):null}isInputKeyword_($){return $==="input_value"||$==="input_statement"||$==="input_dummy"}stringToFieldJson_($){return($=$.trim())?{type:"field_label",text:$}:null}appendInput_($,_e){let ot=null;return($===co.VALUE||$===co.STATEMENT)&&(ot=this.makeConnection_($)),$===co.STATEMENT&&this.statementInputCount++,$=new Ws($,_e,this,ot),this.inputList.push($),$}moveInputBefore($,_e){if($!==_e){var ot=-1,rt=_e?-1:this.inputList.length;for(let lt=0,ut;ut=this.inputList[lt];lt++)if(ut.name===$){if(ot=lt,rt!==-1)break}else if(_e&&ut.name===_e&&(rt=lt,ot!==-1))break;if(ot===-1)throw Error('Named input "'+$+'" not found.');if(rt===-1)throw Error('Reference input "'+_e+'" not found.');this.moveNumberedInputBefore(ot,rt)}}moveNumberedInputBefore($,_e){if($===_e)throw Error("Can't move input to itself.");if($>=this.inputList.length)throw RangeError("Input index "+$+" out of bounds.");if(_e>this.inputList.length)throw RangeError("Reference input "+_e+" out of bounds.");const ot=this.inputList[$];this.inputList.splice($,1),$<_e&&_e--,this.inputList.splice(_e,0,ot)}removeInput($,_e){for(let ot=0,rt;rt=this.inputList[ot];ot++)if(rt.name===$)return rt.type===co.STATEMENT&&this.statementInputCount--,rt.dispose(),this.inputList.splice(ot,1),!0;if(_e)return!1;throw Error("Input not found: "+$)}getInput($){for(let _e=0,ot;ot=this.inputList[_e];_e++)if(ot.name===$)return ot;return null}getInputTargetBlock($){return($=this.getInput($))&&$.connection&&$.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText($){this.commentModel.text!==$&&(to(new(oo(zo))(this,"comment",null,this.commentModel.text,$)),this.comment=this.commentModel.text=$)}setWarningText($,_e){}setMutator($){}getRelativeToSurfaceXY(){return this.xy_}moveBy($,_e){if(this.parentBlock_)throw Error("Block has parent.");const ot=new(oo(rr))(this);this.xy_.translate($,_e),ot.recordNew(),to(ot)}makeConnection_($){return new vo(this,$)}allInputsFilled($){if($===void 0&&($=!0),!$&&this.isShadow())return!1;for(let ot=0,rt;rt=this.inputList[ot];ot++)if(rt.connection){var _e=rt.connection.targetBlock();if(!_e||!_e.allInputsFilled($))return!1}return(_e=this.getNextBlock())?_e.allInputsFilled($):!0}toDevString(){let $=this.type?'"'+this.type+'" block':"Block";return this.id&&($+=' (id="'+this.id+'")'),$}};js.COLLAPSED_INPUT_NAME=$a,js.COLLAPSED_FIELD_NAME=ba;var l_=null,xa=null,eu={};eu.connectionUiEffect=d$,eu.disconnectUiEffect=p$,eu.disconnectUiStop=Cl,eu.disposeUiEffect=u$;var JT=class extends r_{constructor($){super($),this.cachedText_="",this.paragraphElement_=this.textarea_=this.foreignObject_=this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.model_=$.commentModel;let _e;this.model_.text=(_e=this.model_.text)!=null?_e:"",this.createIcon()}drawIcon_($){Lt(Ot.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},$),Lt(Ot.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},$),Lt(Ot.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},$)}createEditor_(){this.foreignObject_=Lt(Ot.FOREIGNOBJECT,{x:no.BORDER_WIDTH,y:no.BORDER_WIDTH});const $=document.createElementNS(Br,"body");$.setAttribute("xmlns",Br),$.className="blocklyMinimalBody";const _e=this.textarea_=document.createElementNS(Br,"textarea");_e.className="blocklyCommentTextarea",_e.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let ot;return _e.value=(ot=this.model_.text)!=null?ot:"",this.resizeTextarea_(),$.appendChild(_e),this.foreignObject_.appendChild($),this.onMouseUpWrapper_=Et(_e,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=Et(_e,"wheel",this,function(rt){rt.stopPropagation()}),this.onChangeWrapper_=Et(_e,"change",this,function(rt){this.cachedText_!==this.model_.text&&to(new(oo(zo))(this.getBlock(),"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=Et(_e,"input",this,function(rt){this.model_.text=_e.value}),setTimeout(_e.focus.bind(_e),0),this.foreignObject_}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())}onBubbleResize_(){this.isVisible()&&this.bubble_&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())}resizeTextarea_(){var $=this.model_.size;const _e=2*no.BORDER_WIDTH,ot=$.width-_e;$=$.height-_e,this.foreignObject_.setAttribute("width",`${ot}`),this.foreignObject_.setAttribute("height",`${$}`),this.textarea_.style.width=ot-4+"px",this.textarea_.style.height=$-4+"px"}setVisible($){$!==this.isVisible()&&(to(new(oo(Cn))(this.getBlock(),$,"comment")),(this.model_.pinned=$)?this.createBubble_():this.disposeBubble_())}createBubble_(){this.getBlock().isEditable()?this.createEditableBubble_():this.createNonEditableBubble_()}createEditableBubble_(){const $=this.getBlock();this.bubble_=new no($.workspace,this.createEditor_(),$.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId($.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()}createNonEditableBubble_(){let $;this.paragraphElement_=no.textToDom(($=this.model_.text)!=null?$:""),this.bubble_=no.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble_(){this.onMouseUpWrapper_&&(kt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(kt(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(kt(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(kt(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject_=this.textarea_=null}startEdit_($){let _e;(_e=this.bubble_)!=null&&_e.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text}getBubbleSize(){return this.model_.size}setBubbleSize($,_e){this.bubble_?this.bubble_.setBubbleSize($,_e):(this.model_.size.width=$,this.model_.size.height=_e)}updateText(){if(this.textarea_){let $;this.textarea_.value=($=this.model_.text)!=null?$:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)}dispose(){this.getBlock().comment=null,super.dispose()}};Mr(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Nn=null,Vp={duplicateInternal:hS,copyInternal:uS},tu={};tu.TEST_ONLY=Vp,tu.copy=Ll,tu.duplicate=Bu,tu.paste=Q_;var ou,Wp,iu;ou=null,Wp={},iu=null,tt.module$build$src$core$contextmenu={},tt.module$build$src$core$contextmenu.callbackFactory=mS,tt.module$build$src$core$contextmenu.commentDeleteOption=T$,tt.module$build$src$core$contextmenu.commentDuplicateOption=E$,tt.module$build$src$core$contextmenu.dispose=f$,tt.module$build$src$core$contextmenu.getCurrentBlock=m$,tt.module$build$src$core$contextmenu.hide=Gu,tt.module$build$src$core$contextmenu.setCurrentBlock=$$,tt.module$build$src$core$contextmenu.show=Uu,tt.module$build$src$core$contextmenu.workspaceCommentOption=$S;var So=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register($){if(this.registry_.has($.id))throw Error('Menu item with ID "'+$.id+'" is already registered.');this.registry_.set($.id,$)}unregister($){if(!this.registry_.has($))throw Error('Menu item with ID "'+$+'" not found.');this.registry_.delete($)}getItem($){let _e;return(_e=this.registry_.get($))!=null?_e:null}getContextMenuOptions($,_e){const ot=[];for(const lt of this.registry_.values())if($===lt.scopeType){var rt=lt.preconditionFn(_e);rt!=="hidden"&&(rt={text:typeof lt.displayText=="function"?lt.displayText(_e):lt.displayText,enabled:rt==="enabled",callback:lt.callback,scope:_e,weight:lt.weight},ot.push(rt))}return ot.sort(function(lt,ut){return lt.weight-ut.weight}),ot}};(function($){var _e=$.ScopeType||($.ScopeType={});_e.BLOCK="block",_e.WORKSPACE="workspace",$.registry=new $})(So||(So={})),So.ScopeType;var QT=30,ZT=!0,ds=[];ds[Vt.INPUT_VALUE]=Vt.OUTPUT_VALUE,ds[Vt.OUTPUT_VALUE]=Vt.INPUT_VALUE,ds[Vt.NEXT_STATEMENT]=Vt.PREVIOUS_STATEMENT,ds[Vt.PREVIOUS_STATEMENT]=Vt.NEXT_STATEMENT;var jp="RENAME_VARIABLE_ID",Xp="DELETE_VARIABLE_ID",qT=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer($){this.drawer_=$}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode($){const _e=this.curNode_;this.curNode_=$,this.drawer_&&this.drawer_.draw(_e,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},zp=class extends qT{constructor(){super(),this.type="cursor"}next(){var $=this.getCurNode();if(!$)return null;for($=$.next();$&&$.next()&&($.getType()===Dt.types.NEXT||$.getType()===Dt.types.BLOCK);)$=$.next();return $&&this.setCurNode($),$}in(){var $=this.getCurNode();if(!$)return null;($.getType()===Dt.types.PREVIOUS||$.getType()===Dt.types.OUTPUT)&&($=$.next());let _e,ot;return($=(ot=(_e=$)==null?void 0:_e.in())!=null?ot:null)&&this.setCurNode($),$}prev(){var $=this.getCurNode();if(!$)return null;for($=$.prev();$&&$.prev()&&($.getType()===Dt.types.NEXT||$.getType()===Dt.types.BLOCK);)$=$.prev();return $&&this.setCurNode($),$}out(){var $=this.getCurNode();return $?(($=$.out())&&$.getType()===Dt.types.BLOCK&&($=$.prev()||$),$&&this.setCurNode($),$):null}};$o(Bt.CURSOR,kn,zp);var ru=class extends zp{constructor(){super()}next(){var $=this.getCurNode();return $?(($=this.getNextNode_($,this.validNode_))&&this.setCurNode($),$):null}in(){return this.next()}prev(){var $=this.getCurNode();return $?(($=this.getPreviousNode_($,this.validNode_))&&this.setCurNode($),$):null}out(){return this.prev()}getNextNode_($,_e){if(!$)return null;const ot=$.in()||$.next();return _e(ot)?ot:ot?this.getNextNode_(ot,_e):($=this.findSiblingOrParent_($.out()),_e($)?$:$?this.getNextNode_($,_e):null)}getPreviousNode_($,_e){if(!$)return null;let ot=$.prev();return ot=ot?this.getRightMostChild_(ot):$.out(),_e(ot)?ot:ot?this.getPreviousNode_(ot,_e):null}validNode_($){let _e=!1;return $=$&&$.getType(),($===Dt.types.OUTPUT||$===Dt.types.INPUT||$===Dt.types.FIELD||$===Dt.types.NEXT||$===Dt.types.PREVIOUS||$===Dt.types.WORKSPACE)&&(_e=!0),_e}findSiblingOrParent_($){if(!$)return null;const _e=$.next();return _e||this.findSiblingOrParent_($.out())}getRightMostChild_($){if(!$.in())return $;for($=$.in();$&&$.next();)$=$.next();return this.getRightMostChild_($)}};ru.registrationName="basicCursor",$o(Bt.CURSOR,ru.registrationName,ru);var eE=class extends ru{validNode_($){let _e=!1;const ot=$&&$.getType();return $&&($=$.getLocation(),ot===Dt.types.FIELD&&$&&$.isTabNavigable()&&$.isClickable()&&(_e=!0)),_e}},Yp=10,nr=class extends vo{constructor($,_e){super($,_e),this.targetConnection=this.highlightPath=null,this.db_=$.workspace.connectionDBList[_e],this.dbOpposite_=$.workspace.connectionDBList[ds[_e]],this.offsetInBlock_=new Ht(0,0),this.trackedState_=nr.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===nr.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom($){const _e=this.x-$.x;return $=this.y-$.y,Math.sqrt(_e*_e+$*$)}bumpAwayFrom($){if(!this.sourceBlock_.workspace.isDragging()){var _e=this.sourceBlock_.getRootBlock();if(!_e.isInFlyout){var ot=!1;if(!_e.isMovable()){if(_e=$.getSourceBlock().getRootBlock(),!_e.isMovable())return;$=this,ot=!0}var rt=Qt()==_e;rt||_e.addSelect();var lt=$.x+tt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Yp)-this.x,ut=$.y+tt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Yp)-this.y;ot&&(ut=-ut),_e.RTL&&(lt=$.x-tt.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Yp)-this.x),_e.moveBy(lt,ut),rt||_e.removeSelect()}}}moveTo($,_e){this.trackedState_===nr.TrackedState.WILL_TRACK?(this.db_.addConnection(this,_e),this.trackedState_=nr.TrackedState.TRACKED):this.trackedState_===nr.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,_e)),this.x=$,this.y=_e}moveBy($,_e){this.moveTo(this.x+$,this.y+_e)}moveToOffset($){this.moveTo($.x+this.offsetInBlock_.x,$.y+this.offsetInBlock_.y)}setOffsetInBlock($,_e){this.offsetInBlock_.x=$,this.offsetInBlock_.y=_e}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const $=this.targetConnection.x-this.x,_e=this.targetConnection.y-this.y;if($!==0||_e!==0){const rt=this.targetBlock();var ot=rt.getSvgRoot();if(!ot)throw Error("block is not rendered.");ot=Dr(ot),rt.getSvgRoot().setAttribute("transform","translate("+(ot.x-$)+","+(ot.y-_e)+")"),rt.moveConnections(-$,-_e)}}closest($,_e){return this.dbOpposite_.searchForClosest(this,$,_e)}highlight(){var $=this.sourceBlock_.workspace.getRenderer().getConstants(),_e=$.shapeFor(this);this.type===Vt.INPUT_VALUE||this.type===Vt.OUTPUT_VALUE?($=$.TAB_OFFSET_FROM_TOP,_e=wo(0,-$)+jt("v",$)+_e.pathDown+jt("v",$)):($=$.NOTCH_OFFSET_LEFT-$.CORNER_RADIUS,_e=wo(-$,0)+jt("h",$)+_e.pathLeft+jt("h",$)),$=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=Lt(Ot.PATH,{class:"blocklyHighlightedConnectionPath",d:_e,transform:"translate("+(this.x-$.x)+","+(this.y-$.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}unhighlight(){this.highlightPath&&(go(this.highlightPath),this.highlightPath=null)}setTracking($){$&&this.trackedState_===nr.TrackedState.TRACKED||!$&&this.trackedState_===nr.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||($?(this.db_.addConnection(this,this.y),this.trackedState_=nr.TrackedState.TRACKED):(this.trackedState_===nr.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=nr.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const ot=this.targetBlock().getDescendants(!1);for(let rt=0;rt<ot.length;rt++){var $=ot[rt],_e=$.getConnections_(!0);for(let lt=0;lt<_e.length;lt++)_e[lt].setTracking(!1);for($=$.getIcons(),_e=0;_e<$.length;_e++)$[_e].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let $=[];if(this.type!==Vt.INPUT_VALUE&&this.type!==Vt.NEXT_STATEMENT)return $;const _e=this.targetBlock();if(_e){let ot;_e.isCollapsed()?(ot=[],_e.outputConnection&&ot.push(_e.outputConnection),_e.nextConnection&&ot.push(_e.nextConnection),_e.previousConnection&&ot.push(_e.previousConnection)):ot=_e.getConnections_(!0);for(let rt=0;rt<ot.length;rt++)$.push(...ot[rt].startTrackingAll());$.length||($=[_e])}return $}onFailedConnect($){const _e=this.getSourceBlock();if(Nr()){const ot=Lo();setTimeout(function(){_e.isDisposed()||_e.getParent()||(qt(ot),this.bumpAwayFrom($),qt(!1))}.bind(this),tt.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_($,_e){super.disconnectInternal_($,_e),$.rendered&&$.render(),_e.rendered&&(_e.updateDisabled(),_e.render(),_e.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var $=this.targetBlock();$&&($.initSvg(),$.render(!1),$=this.getSourceBlock(),$.rendered&&$.render())}neighbours($){return this.dbOpposite_.getNeighbours(this,$)}connect_($){super.connect_($);var _e=this.getSourceBlock();$=$.getSourceBlock();const ot=_e.rendered,rt=$.rendered;ot&&_e.updateDisabled(),rt&&$.updateDisabled(),ot&&rt&&(this.type===Vt.NEXT_STATEMENT||this.type===Vt.PREVIOUS_STATEMENT?$.render():_e.render()),(_e=_e.getInputWithBlock($))&&(_e=_e.isVisible(),$.getSvgRoot().style.display=_e?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function($){$=$.TrackedState||($.TrackedState={}),$[$.WILL_TRACK=-1]="WILL_TRACK",$[$.UNTRACKED=0]="UNTRACKED",$[$.TRACKED=1]="TRACKED"})(nr||(nr={})),nr.TrackedState;var tE=class extends r_{constructor($){super($),this.paragraphElement_=null,this.collapseHidden=!1,this.createIcon(),this.text_=Object.create(null)}drawIcon_($){Lt(Ot.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},$),Lt(Ot.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},$),Lt(Ot.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},$)}setVisible($){$!==this.isVisible()&&(to(new(oo(Cn))(this.getBlock(),$,"warning")),$?this.createBubble_():this.disposeBubble_())}createBubble_(){this.paragraphElement_=no.textToDom(this.getText()),this.bubble_=no.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble_(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=null}setText($,_e){this.text_[_e]!==$&&($?this.text_[_e]=$:delete this.text_[_e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const $=[];for(const _e in this.text_)$.push(this.text_[_e]);return $.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},Cr=class extends js{constructor($,_e,ot){super($,_e,ot),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=$,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=Lt(Ot.G,{}),this.svgGroup_.translate_="",this.style=$.getRenderer().getConstants().getBlockStyle(null),this.pathObject=$.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!$.getBlockDragSurface(),$=this.pathObject.svgPath,$.tooltip=this,Cu($),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let _e=0,ot;ot=this.inputList[_e];_e++)ot.init();var $=this.getIcons();for(let _e=0;_e<$.length;_e++)$[_e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),$=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!$||Et($,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,$.parentNode||this.workspace.getCanvas().appendChild($)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Qt()!==this){var $=null;if(Qt()){$=Qt().id,Fo();try{Qt().unselect()}finally{Ho()}}$=new(oo(Vn))($,this.id,this.workspace.id),to($),xo(this),this.addSelect()}}unselect(){if(Qt()===this){var $=new(oo(Vn))(this.id,null,this.workspace.id);$.workspaceId=this.workspace.id,to($),xo(null),this.removeSelect()}}getIcons(){const $=[];return this.mutator&&$.push(this.mutator),this.commentIcon_&&$.push(this.commentIcon_),this.warning&&$.push(this.warning),$}setParent($){const _e=this.parentBlock_;if($!==_e){Tn(),super.setParent($),In();var ot=this.getSvgRoot();if(!this.workspace.isClearing&&ot){var rt=this.getRelativeToSurfaceXY();$?($.getSvgRoot().appendChild(ot),$=this.getRelativeToSurfaceXY(),this.moveConnections($.x-rt.x,$.y-rt.y)):_e&&(this.workspace.getCanvas().appendChild(ot),this.translate(rt.x,rt.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let $=0,_e=0;const ot=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let rt=this.getSvgRoot();if(rt)do{var lt=Dr(rt);$+=lt.x,_e+=lt.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===rt&&(lt=this.workspace.getBlockDragSurface().getSurfaceTranslation(),$+=lt.x,_e+=lt.y),rt=rt.parentNode}while(rt&&rt!==this.workspace.getCanvas()&&rt!==ot);return new Ht($,_e)}moveBy($,_e){if(this.parentBlock_)throw Error("Block has parent.");const ot=jo();let rt=null;ot&&(rt=new(oo(rr))(this));const lt=this.getRelativeToSurfaceXY();this.translate(lt.x+$,lt.y+_e),this.moveConnections($,_e),ot&&rt&&(rt.recordNew(),to(rt)),this.workspace.resizeContents()}translate($,_e){this.getSvgRoot().setAttribute("transform","translate("+$+","+_e+")")}moveToDragSurface(){if(this.useDragSurface_){var $=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface($.x,$.y),($=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow($)}}moveTo($){const _e=this.getRelativeToSurfaceXY();this.moveBy($.x-_e.x,$.y-_e.y)}moveOffDragSurface($){this.useDragSurface_&&(this.translate($.x,$.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag($){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface($.x,$.y):(this.svgGroup_.translate_="translate("+$.x+","+$.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var $=this.workspace.getGrid();if($&&$.shouldSnap()){var _e=$.getSpacing(),ot=_e/2,rt=this.getRelativeToSurfaceXY();$=Math.round(Math.round((rt.x-ot)/_e)*_e+ot-rt.x),_e=Math.round(Math.round((rt.y-ot)/_e)*_e+ot-rt.y),($||_e)&&this.moveBy($,_e)}}}getBoundingRectangle(){const $=this.getRelativeToSurfaceXY(),_e=this.getHeightWidth();let ot,rt;return this.RTL?(ot=$.x-_e.width,rt=$.x):(ot=$.x,rt=$.x+_e.width),new Do($.y,$.y+_e.height,ot,rt)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let $=0,_e;_e=this.inputList[$];$++)_e.markDirty()}setCollapsed($){this.collapsed_!==$&&(super.setCollapsed($),$?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var $=this.isCollapsed();const _e=$a,ot=ba;for(let lt=0,ut;ut=this.inputList[lt];lt++)ut.name!==_e&&ut.setVisible(!$);if($){$=this.getIcons();for(let lt=0,ut;ut=$[lt];lt++)ut.setVisible(!1);$=this.toString(QT);var rt=this.getField(ot);rt?rt.setValue($):(this.getInput(_e)||this.appendDummyInput(_e)).appendField(new tt.FieldLabel$$module$build$src$core$field_label($),ot)}else this.updateDisabled(),this.removeInput(_e)}tab($,_e){const ot=new eE;ot.setCurNode(Dt.createFieldNode($)),$=ot.getCurNode(),_e?ot.next():ot.prev(),(_e=ot.getCurNode())&&_e!==$&&(_e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(_e))}onMouseDown_($){const _e=this.workspace.getGesture($);_e&&_e.handleBlockStart($,this)}showHelp(){const $=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;$&&window.open($)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const $=So.registry.getContextMenuOptions(So.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu($),$}showContextMenu($){const _e=this.generateContextMenu();_e&&_e.length&&(Uu($,_e,this.RTL),$$(this))}moveConnections($,_e){if(this.rendered){for(var ot=this.getConnections_(!1),rt=0;rt<ot.length;rt++)ot[rt].moveBy($,_e);for(ot=this.getIcons(),rt=0;rt<ot.length;rt++)ot[rt].computeIconLocation();for(ot=0;ot<this.childBlocks_.length;ot++)this.childBlocks_[ot].moveConnections($,_e)}}setDragging($){if($){var _e=this.getSvgRoot();_e.translate_="",_e.skew_="",rs.push(...this.getConnections_(!0)),Ft(this.svgGroup_,"blocklyDragging")}else rs.length=0,uo(this.svgGroup_,"blocklyDragging");for(_e=0;_e<this.childBlocks_.length;_e++)this.childBlocks_[_e].setDragging($)}setMovable($){super.setMovable($),this.pathObject.updateMovable($)}setEditable($){super.setEditable($),$=this.getIcons();for(let _e=0;_e<$.length;_e++)$[_e].updateEditable()}setShadow($){super.setShadow($),this.applyColour()}setInsertionMarker($){this.isInsertionMarker_!==$&&(this.isInsertionMarker_=$)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose($,_e){if(!this.isDeadOrDying()){Xm(),Lu(this.pathObject.svgPath),Tn();var ot=this.workspace;Qt()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),m$()===this&&Gu(),_e&&this.rendered&&(this.unplug($),u$(this)),this.rendered=!1;for(var rt of this.warningTextDb.values())clearTimeout(rt);for(this.warningTextDb.clear(),_e=this.getIcons(),rt=0;rt<_e.length;rt++)_e[rt].dispose();Qt()===this&&xo(null),super.dispose(!!$),go(this.svgGroup_),ot.resizeContents(),this.svgGroup_=null,In()}}checkAndDelete(){this.workspace.isFlyout||(qt(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),qt(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:Rn(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:Wo(this,!0)}}applyColour(){this.pathObject.applyColour(this);const $=this.getIcons();for(let _e=0;_e<$.length;_e++)$[_e].applyColour();for(let _e=0,ot;ot=this.inputList[_e];_e++)for(let rt=0,lt;lt=ot.fieldRow[rt];rt++)lt.applyColour()}updateDisabled(){const $=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let _e=0,ot;ot=$[_e];_e++)ot.rendered&&ot.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText($){this.commentModel.text!==$&&(super.setCommentText($),$=$!==null,!!this.commentIcon_===$?this.commentIcon_.updateText():($?this.comment=this.commentIcon_=new JT(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText($,_e){const ot=_e||"";if(ot)this.warningTextDb.has(ot)&&(clearTimeout(this.warningTextDb.get(ot)),this.warningTextDb.delete(ot));else{for(var rt of this.warningTextDb.values())clearTimeout(rt);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(ot,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(ot),this.setWarningText($,ot))},100));else{if(this.isInFlyout&&($=null),_e=!1,typeof $=="string"){rt=this.getSurroundParent();let lt=null;for(;rt;)rt.isCollapsed()&&(lt=rt),rt=rt.getSurroundParent();lt&&lt.setWarningText(io.COLLAPSED_WARNINGS_WARNING,Cr.COLLAPSED_WARNING_ID),this.warning||(this.warning=new tE(this),_e=!0),this.warning.setText($,ot)}else this.warning&&!ot?(this.warning.dispose(),_e=!0):this.warning&&(_e=this.warning.getText(),this.warning.setText("",ot),(rt=this.warning.getText())||this.warning.dispose(),_e=_e!==rt);_e&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator($){this.mutator&&this.mutator!==$&&this.mutator.dispose(),$&&($.setBlock(this),this.mutator=$,$.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled($){this.isEnabled()!==$&&(super.setEnabled($),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted($){this.rendered&&this.pathObject.updateHighlighted($)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle($){this.pathObject.updateDraggingDelete($)}getColour(){return this.style.colourPrimary}setColour($){super.setColour($),$=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle($.style),this.style=$.style,this.styleName_=$.name,this.applyColour()}setStyle($){const _e=this.workspace.getRenderer().getConstants().getBlockStyle($);if(this.styleName_=$,_e)this.hat=_e.hat,this.pathObject.setStyle(_e),this.colour_=_e.colourPrimary,this.style=_e,this.applyColour();else throw Error("Invalid style name: "+$)}bringToFront(){let $=this;do{const _e=$.getSvgRoot(),ot=_e.parentNode,rt=ot.childNodes;rt[rt.length-1]!==_e&&ot.appendChild(_e),$=$.getParent()}while($)}setPreviousStatement($,_e){super.setPreviousStatement($,_e),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement($,_e){super.setNextStatement($,_e),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput($,_e){super.setOutput($,_e),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline($){super.setInputsInline($),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput($,_e){return $=super.removeInput($,_e),this.rendered&&(this.render(),this.bumpNeighbours()),$}moveNumberedInputBefore($,_e){super.moveNumberedInputBefore($,_e),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_($,_e){return $=super.appendInput_($,_e),this.rendered&&(this.render(),this.bumpNeighbours()),$}setConnectionTracking($){if(this.previousConnection&&this.previousConnection.setTracking($),this.outputConnection&&this.outputConnection.setTracking($),this.nextConnection){this.nextConnection.setTracking($);var _e=this.nextConnection.targetBlock();_e&&_e.setConnectionTracking($)}if(!this.collapsed_)for(_e=0;_e<this.inputList.length;_e++){var ot=this.inputList[_e].connection;ot&&(ot.setTracking($),(ot=ot.targetBlock())&&ot.setConnectionTracking($))}}getConnections_($){const _e=[];if(($||this.rendered)&&(this.outputConnection&&_e.push(this.outputConnection),this.previousConnection&&_e.push(this.previousConnection),this.nextConnection&&_e.push(this.nextConnection),$||!this.collapsed_))for(let ot=0,rt;rt=this.inputList[ot];ot++)rt.connection&&_e.push(rt.connection);return _e}lastConnectionInStack($){return super.lastConnectionInStack($)}getMatchingConnection($,_e){return super.getMatchingConnection($,_e)}makeConnection_($){return new nr(this,$)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.isDeadOrDying()&&!this.workspace.isDragging()){var $=this.getRootBlock();if(!$.isInFlyout){var _e=this.getConnections_(!1);for(let ot=0,rt;rt=_e[ot];ot++){const lt=rt;lt.isConnected()&&lt.isSuperior()&&lt.targetBlock().bumpNeighbours();const ut=rt.neighbours(tt.config$$module$build$src$core$config.snapRadius);for(let pt=0,vt;vt=ut[pt];pt++){const At=vt;lt.isConnected()&&At.isConnected()||At.getSourceBlock().getRootBlock()!==$&&(lt.isSuperior()?At.bumpAwayFrom(lt):lt.bumpAwayFrom(At))}}}}}scheduleSnapAndBump(){const $=Lo();setTimeout(()=>{qt($),this.snapToGrid(),qt(!1)},tt.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{qt($),this.bumpNeighbours(),qt(!1)},tt.config$$module$build$src$core$config.bumpDelay)}positionNearConnection($,_e){$.type!==Vt.NEXT_STATEMENT&&$.type!==Vt.INPUT_VALUE||this.moveBy(_e.x-$.x,_e.y-$.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren($){return super.getChildren($)}render($){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Tn(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),$!==!1){const _e=this.getParent();_e?_e.render(!0):this.workspace.resizeContents()}In(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Yl.LOCAL_MARKER).draw()}updateConnectionLocations_(){const $=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset($),this.outputConnection&&this.outputConnection.moveToOffset($);for(let _e=0;_e<this.inputList.length;_e++){const ot=this.inputList[_e].connection;ot&&(ot.moveToOffset($),ot.isConnected()&&ot.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset($),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg($){this.pathObject.setCursorSvg($)}setMarkerSvg($){this.pathObject.setMarkerSvg($)}getHeightWidth(){let $=this.height,_e=this.width;var ot=this.getNextBlock();if(ot){ot=ot.getHeightWidth();const rt=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;$+=ot.height-rt,_e=Math.max(_e,ot.width)}return{height:$,width:_e}}fadeForReplacement($){this.pathObject.updateReplacementFade($)}highlightShapeForInput($,_e){this.pathObject.updateShapeForInputHighlight($,_e)}};Cr.INLINE=-1,Cr.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var oE=class{constructor(){}onDragEnter($){}onDragOver($){}onDragExit($){}onDrop($){}getClientRect(){return null}shouldPreventMove($){return!1}},c_=class extends oE{constructor(){super(),this.wouldDelete_=!1}wouldDelete($,_e){return $ instanceof Cr?($=!$.getParent()&&$.isDeletable(),this.updateWouldDelete_($&&!_e)):this.updateWouldDelete_($.isDeletable()),this.wouldDelete_}updateWouldDelete_($){this.wouldDelete_=$}},Mn;(function($){$[$.TOP=0]="TOP",$[$.BOTTOM=1]="BOTTOM"})(Mn||(Mn={}));var Xs;(function($){$[$.LEFT=0]="LEFT",$[$.RIGHT=1]="RIGHT"})(Xs||(Xs={}));var zn;(function($){$[$.UP=0]="UP",$[$.DOWN=1]="DOWN"})(zn||(zn={}));var _s={};_s.bumpDirection=zn,_s.bumpPositionRect=ep,_s.getCornerOppositeToolbox=q_,_s.getStartPositionRect=Z_,_s.horizontalPosition=Xs,_s.verticalPosition=Mn;var sr={width:96,height:124,url:"sprites.png"},iE=class extends c_{constructor($){super(),this.workspace=$,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||($=new Wr({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?($.toolboxPosition=this.workspace.toolboxPosition===ro.TOP?ro.BOTTOM:ro.TOP,this.flyout=new(Rr(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))($)):($.toolboxPosition=this.workspace.toolboxPosition===ro.RIGHT?ro.LEFT:ro.RIGHT,this.flyout=new(Rr(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))($)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=Lt(Ot.G,{class:"blocklyTrash"});let $;const _e=String(Math.random()).substring(2);$=Lt(Ot.CLIPPATH,{id:"blocklyTrashBodyClipPath"+_e},this.svgGroup_),Lt(Ot.RECT,{width:zs,height:a_,y:Ys},$);const ot=Lt(Ot.IMAGE,{width:sr.width,x:-Kp,height:sr.height,y:-Jp,"clip-path":"url(#blocklyTrashBodyClipPath"+_e+")"},this.svgGroup_);return ot.setAttributeNS(hr,"xlink:href",this.workspace.options.pathToMedia+sr.url),$=Lt(Ot.CLIPPATH,{id:"blocklyTrashLidClipPath"+_e},this.svgGroup_),Lt(Ot.RECT,{width:zs,height:Ys},$),this.svgLid_=Lt(Ot.IMAGE,{width:sr.width,x:-Kp,height:sr.height,y:-Jp,"clip-path":"url(#blocklyTrashLidClipPath"+_e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(hr,"xlink:href",this.workspace.options.pathToMedia+sr.url),Ct(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),Ct(this.svgGroup_,"mouseup",this,this.click),Ct(ot,"mouseover",this,this.mouseOver_),Ct(ot,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(ir(this.flyout.createDom(Ot.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ko.Capability.AUTOHIDEABLE,Ko.Capability.DELETE_AREA,Ko.Capability.DRAG_TARGET,Ko.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(go(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var $=this.contents_.map(function(ot){return JSON.parse(ot)}),_e;(_e=this.flyout)==null||_e.show($),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var $;($=this.flyout)==null||$.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide($){!$&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position($,_e){if(this.initialized_){var ot=q_(this.workspace,$);$=Z_(ot,new Yo(zs,a_+Ys),hR,rE,$,this.workspace),_e=ep($,rE,ot.vertical===Mn.TOP?zn.DOWN:zn.UP,_e),this.top_=_e.top,this.left_=_e.left;var rt;(rt=this.svgGroup_)==null||rt.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new Do(this.top_,this.top_+a_+Ys,this.left_,this.left_+zs)}getClientRect(){if(!this.svgGroup_)return null;var $=this.svgGroup_.getBoundingClientRect();const _e=$.top+Jp-u_;return $=$.left+Kp-u_,new Do(_e,_e+Ys+a_+2*u_,$,$+zs+2*u_)}onDragOver($){this.setLidOpen(this.wouldDelete_)}onDragExit($){this.setLidOpen(!1)}onDrop($){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen($){this.isLidOpen!==$&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=$,this.animateLid_())}animateLid_(){const $=pR;var _e=1/($+1);this.lidOpen_+=this.isLidOpen?_e:-_e,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*sE),_e=nE+this.lidOpen_*(gR-nE),this.svgGroup_&&(this.svgGroup_.style.opacity=_e.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),_R/$))}setLidAngle_($){const _e=this.workspace.toolboxPosition===ro.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let ot;(ot=this.svgLid_)==null||ot.setAttribute("transform","rotate("+(_e?-$:$)+","+(_e?4:zs-4)+","+(Ys-2)+")")}setMinOpenness_($){this.minOpenness_=$,this.isLidOpen||this.setLidAngle_($*sE)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_($){$=new(oo(Gl))($,this.workspace.id),to($)}blockMouseDownWhenOpenable_($){!this.contentsIsOpen()&&this.hasContents_()&&$.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_($){if(!(0>=this.workspace.options.maxTrashcanContents||$.type!==hn||$.type!==hn||$.wasShadow)){if(!$.oldJson)throw Error("Encountered a delete event without proper oldJson");if($=JSON.stringify(this.cleanBlockJson_($.oldJson)),this.contents_.indexOf($)===-1){for(this.contents_.unshift($);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(dR)}}}cleanBlockJson_($){function _e(ot){if(ot){if(delete ot.id,delete ot.x,delete ot.y,delete ot.enabled,ot.icons&&ot.icons.comment){var rt=ot.icons.comment;delete rt.height,delete rt.width,delete rt.pinned}rt=ot.inputs;for(var lt in rt){var ut=rt[lt];const pt=ut.block;ut=ut.shadow,pt&&_e(pt),ut&&_e(ut)}ot.next&&(lt=ot.next,ot=lt.block,lt=lt.shadow,ot&&_e(ot),lt&&_e(lt))}}return $=JSON.parse(JSON.stringify($)),_e($),Object.assign({},{kind:"BLOCK"},$)}},zs=47,a_=44,Ys=16,rE=20,hR=20,u_=10,Kp=0,Jp=32,dR=.1,_R=80,pR=4,nE=.4,gR=.8,sE=45,lE=class extends Fr{constructor($,_e,ot){super(ot),this.type=Fl,this.oldItem=$!=null?$:void 0,this.newItem=_e!=null?_e:void 0}toJson(){const $=super.toJson();return $.oldItem=this.oldItem,$.newItem=this.newItem,$}fromJson($){super.fromJson($),this.oldItem=$.oldItem,this.newItem=$.newItem}};$o(Bt.EVENT,Fl,lE);var Qp=class{constructor($,_e,ot){this.id_=$.toolboxitemid||Il(),this.level_=(this.parent_=ot||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=$,this.parentToolbox_=_e,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_($){}},jr=class extends Qp{constructor($,_e,ot){super($,_e,ot),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_($){if("custom"in $)this.flyoutItems_=$.custom;else if($=$.contents)for(let _e=0;_e<$.length;_e++){const ot=$[_e];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(ot)}}parseCategoryDef_($){this.name_="name"in $?Mo($.name):"",this.colour_=this.getColour_($),Object.assign(this.cssConfig_,$.cssconfig||$.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),sn(this.htmlDiv_,_r.TREEITEM),Ao(this.htmlDiv_,Co.SELECTED,!1),Ao(this.htmlDiv_,Co.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),sn(this.iconDom_,_r.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const $=this.labelDom_.getAttribute("id");return $&&Ao(this.htmlDiv_,Co.LABELLEDBY,$),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const $=document.createElement("div"),_e=this.cssConfig_.container;return _e&&Ft($,_e),$}createRowContainer_(){const $=document.createElement("div");var _e=this.cssConfig_.row;return _e&&Ft($,_e),_e=`${jr.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?$.style.paddingRight=_e:$.style.paddingLeft=_e,$}createRowContentsContainer_(){const $=document.createElement("div"),_e=this.cssConfig_.rowcontentcontainer;return _e&&Ft($,_e),$}createIconDom_(){const $=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const _e=this.cssConfig_.icon;_e&&Ft($,_e)}return $.style.display="inline-block",$}createLabelDom_($){const _e=document.createElement("span");return _e.setAttribute("id",this.getId()+".label"),_e.textContent=$,($=this.cssConfig_.label)&&Ft(_e,$),_e}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_($){$&&($=jr.borderWidth+"px solid "+($||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=$:this.rowDiv_.style.borderLeft=$)}getColour_($){const _e=$.categorystyle||$.categoryStyle;if(($=$.colour)&&_e)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(_e)return this.getColourfromStyle_(_e);if($)return this.parseColour_($)}return""}getColourfromStyle_($){var _e=this.workspace_.getTheme();if($&&_e){if((_e=_e.categoryStyles[$])&&_e.colour)return this.parseColour_(_e.colour);console.warn('Style "'+$+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_($){if($=Mo($),$==null||$==="")return"";var _e=Number($);return isNaN(_e)?(_e=os($))?_e:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+$),""):x_(_e)}openIcon_($){if($){var _e=this.cssConfig_.closedicon;_e&&Kr($,_e),(_e=this.cssConfig_.openicon)&&Ft($,_e)}}closeIcon_($){if($){var _e=this.cssConfig_.openicon;_e&&Kr($,_e),(_e=this.cssConfig_.closedicon)&&Ft($,_e)}}setVisible_($){this.htmlDiv_.style.display=$?"block":"none",this.isHidden_=!$,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let $=this;for(;$.getParent();)if($=$.getParent(),!$.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick($){}setSelected($){if(this.rowDiv_){var _e=this.cssConfig_.selected;if($){const ot=this.parseColour_(jr.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||ot,_e&&Ft(this.rowDiv_,_e)}else this.rowDiv_.style.backgroundColor="",_e&&uo(this.rowDiv_,_e);Ao(this.htmlDiv_,Co.SELECTED,$)}}setDisabled($){this.isDisabled_=$,this.getDiv().setAttribute("disabled",`${$}`),$?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents($){this.flyoutItems_=[],this.toolboxItemDef_=typeof $=="string"?{kind:this.toolboxItemDef_.kind,custom:$,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Mu($),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){go(this.htmlDiv_)}};jr.registrationName="category",jr.nestedPadding=19,jr.borderWidth=8,jr.defaultBackgroundColour="#57e",Mr(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),$o(Bt.TOOLBOX_ITEM,jr.registrationName,jr);var nu=class extends Qp{constructor($,_e){super($,_e),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,$.cssconfig||$.cssConfig)}init(){this.createDom_()}createDom_(){const $=document.createElement("div"),_e=this.cssConfig_.container;return _e&&Ft($,_e),this.htmlDiv_=$}getDiv(){return this.htmlDiv_}dispose(){go(this.htmlDiv_)}};nu.registrationName="sep",Mr(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),$o(Bt.TOOLBOX_ITEM,nu.registrationName,nu);var Ks=class extends jr{constructor($,_e,ot){super($,_e,ot),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const $=super.makeDefaultCssConfig_();return $.contents="blocklyToolboxContents",$}parseContents_($){const _e=$.contents;let ot=!0;if($.custom)this.flyoutItems_=$.custom;else if(_e)for($=0;$<_e.length;$++){const rt=_e[$];!bm(Bt.TOOLBOX_ITEM,rt.kind)||rt.kind.toLowerCase()===nu.registrationName&&ot?(this.flyoutItems_.push(rt),ot=!0):(this.createToolboxItem_(rt),ot=!1)}}createToolboxItem_($){let _e=$.kind;_e.toUpperCase()==="CATEGORY"&&W_($)&&(_e=Ks.registrationName),$=new(Es(Bt.TOOLBOX_ITEM,_e))($,this.parentToolbox_,this),this.toolboxItems_.push($)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const $=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_($),sn(this.subcategoriesDiv_,_r.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const $=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const _e=this.cssConfig_.icon;_e&&Ft($,_e),$.style.visibility="visible"}return $.style.display="inline-block",$}createSubCategoriesDom_($){const _e=document.createElement("div");var ot=this.cssConfig_.contents;for(ot&&Ft(_e,ot),ot=0;ot<$.length;ot++){const rt=$[ot];rt.init();const lt=rt.getDiv();if(_e.appendChild(lt),rt.getClickTarget){let ut;(ut=rt.getClickTarget())==null||ut.setAttribute("id",rt.getId())}}return _e}setExpanded($){this.expanded_!==$&&((this.expanded_=$)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),Ao(this.htmlDiv_,Co.EXPANDED,$),this.parentToolbox_.handleToolboxItemResize())}setVisible_($){this.htmlDiv_.style.display=$?"block":"none";const _e=this.getChildToolboxItems();for(let ot=0;ot<_e.length;ot++)_e[ot].setVisible_($);this.isHidden_=!$,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick($){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Ks.registrationName="collapsibleCategory",$o(Bt.TOOLBOX_ITEM,Ks.registrationName,Ks);var cE=class extends c_{constructor($){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=$,this.toolboxDef_=$.options.languageTree||{contents:[]},this.horizontalLayout_=$.options.horizontalLayout,this.RTL=$.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=$.options.toolboxPosition}onShortcut($){return!1}init(){var $=this.workspace_;const _e=$.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),ir(this.flyout_.createDom("svg"),_e),this.setVisible(!0),this.flyout_.init($),this.render(this.toolboxDef_),$=$.getThemeManager(),$.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),$.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ko.Capability.AUTOHIDEABLE,Ko.Capability.DELETE_AREA,Ko.Capability.DRAG_TARGET]})}createDom_($){$=$.getParentSvg();const _e=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,sn(this.contentsDiv_,_r.TREE),_e.appendChild(this.contentsDiv_),$.parentNode.insertBefore(_e,$),this.attachEvents_(_e,this.contentsDiv_),_e}createContainer_(){const $=document.createElement("div");return $.setAttribute("layout",this.isHorizontal()?"h":"v"),Ft($,"blocklyToolboxDiv"),Ft($,"blocklyNonSelectable"),$.setAttribute("dir",this.RTL?"RTL":"LTR"),$}createContentsContainer_(){const $=document.createElement("div");return Ft($,"blocklyToolboxContents"),this.isHorizontal()&&($.style.flexDirection="row"),$}attachEvents_($,_e){$=Et($,"click",this,this.onClick_,!1,!0),this.boundEvents_.push($),_e=Et(_e,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(_e)}onClick_($){if(St($)||$.target===this.HtmlDiv)Xt().hideChaff(!1);else{var _e=$.target.getAttribute("id");_e&&(_e=this.getToolboxItemById(_e),_e.isSelectable()&&(this.setSelectedItem(_e),_e.onClick($))),Xt().hideChaff(!0)}ct()}onKeyDown_($){let _e=!1;switch($.keyCode){case Yt.DOWN:_e=this.selectNext_();break;case Yt.UP:_e=this.selectPrevious_();break;case Yt.LEFT:_e=this.selectParent_();break;case Yt.RIGHT:_e=this.selectChild_();break;case Yt.ENTER:case Yt.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),_e=!0);break;default:_e=!1}if(!_e&&this.selectedItem_){const ot=this.selectedItem_;ot.onKeyDown&&(_e=ot.onKeyDown($))}_e&&$.preventDefault()}createFlyout_(){const $=this.workspace_,_e=new Wr({parentWorkspace:$,rtl:$.RTL,oneBasedIndex:$.options.oneBasedIndex,horizontalLayout:$.horizontalLayout,renderer:$.options.renderer,rendererOverrides:$.options.rendererOverrides,move:{scrollbars:!0}});return _e.toolboxPosition=$.options.toolboxPosition,new($.horizontalLayout?Rr(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,$.options,!0):Rr(Bt.FLYOUTS_VERTICAL_TOOLBOX,$.options,!0))(_e)}render($){this.toolboxDef_=$;for(let _e=0;_e<this.contents_.length;_e++){const ot=this.contents_[_e];ot&&ot.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_($.contents),this.position(),this.handleToolboxItemResize()}renderContents_($){const _e=document.createDocumentFragment();for(let ot=0;ot<$.length;ot++)this.createToolboxItem_($[ot],_e);this.contentsDiv_.appendChild(_e)}createToolboxItem_($,_e){var ot=$.kind;ot.toUpperCase()==="CATEGORY"&&W_($)&&(ot=Ks.registrationName),(ot=Es(Bt.TOOLBOX_ITEM,ot.toLowerCase()))&&($=new ot($,this),$.init(),this.addToolboxItem_($),(ot=$.getDiv())&&_e.appendChild(ot),$.getClickTarget()&&$.getClickTarget().setAttribute("id",$.getId()))}addToolboxItem_($){if(this.contents_.push($),this.contentMap_[$.getId()]=$,$.isCollapsible()){$=$.getChildToolboxItems();for(let _e=0;_e<$.length;_e++)this.addToolboxItem_($[_e])}}getToolboxItems(){return this.contents_}addStyle($){$&&this.HtmlDiv&&Ft(this.HtmlDiv,$)}removeStyle($){$&&this.HtmlDiv&&uo(this.HtmlDiv,$)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var $=this.HtmlDiv.getBoundingClientRect();const _e=$.top,ot=_e+$.height,rt=$.left;return $=rt+$.width,this.toolboxPosition===ro.TOP?new Do(-1e7,ot,-1e7,1e7):this.toolboxPosition===ro.BOTTOM?new Do(_e,1e7,-1e7,1e7):this.toolboxPosition===ro.LEFT?new Do(-1e7,1e7,-1e7,$):new Do(-1e7,1e7,rt,1e7)}wouldDelete($,_e){return $ instanceof Cr?this.updateWouldDelete_(!$.getParent()&&$.isDeletable()):this.updateWouldDelete_($.isDeletable()),this.wouldDelete_}onDragEnter($){this.updateCursorDeleteStyle_(!0)}onDragExit($){this.updateCursorDeleteStyle_(!1)}onDrop($){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_($){$!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=$,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_($){const _e=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";$?this.addStyle(_e):this.removeStyle(_e)}getToolboxItemById($){return this.contentMap_[$]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const $=this.workspace_.getMetrics(),_e=this.HtmlDiv;_e&&(this.horizontalLayout_?(_e.style.left="0",_e.style.height="auto",_e.style.width="100%",this.height_=_e.offsetHeight,this.width_=$.viewWidth,this.toolboxPosition===ro.TOP?_e.style.top="0":_e.style.bottom="0"):(this.toolboxPosition===ro.RIGHT?_e.style.right="0":_e.style.left="0",_e.style.height="100%",this.width_=_e.offsetWidth,this.height_=$.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const $=this.workspace_,_e=this.HtmlDiv.getBoundingClientRect();$.translate(this.toolboxPosition===ro.LEFT?$.scrollX+_e.width:$.scrollX,this.toolboxPosition===ro.TOP?$.scrollY+_e.height:$.scrollY),vr($)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let $=0;$<this.contents_.length;$++){const _e=this.contents_[$];_e.refreshTheme&&_e.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible($){this.isVisible_!==$&&(this.HtmlDiv.style.display=$?"block":"none",this.isVisible_=$,this.workspace_.recordDragTargets())}autoHide($){!$&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem($){const _e=this.selectedItem_;!$&&!_e||$&&!$.isSelectable()||(this.shouldDeselectItem_(_e,$)&&_e!==null&&this.deselectItem_(_e),this.shouldSelectItem_(_e,$)&&$!==null&&this.selectItem_(_e,$),this.updateFlyout_(_e,$),this.fireSelectEvent_(_e,$))}shouldDeselectItem_($,_e){return $!==null&&(!$.isCollapsible()||$!==_e)}shouldSelectItem_($,_e){return _e!==null&&_e!==$}deselectItem_($){this.selectedItem_=null,this.previouslySelectedItem_=$,$.setSelected(!1),Ao(this.contentsDiv_,Co.ACTIVEDESCENDANT,"")}selectItem_($,_e){this.selectedItem_=_e,this.previouslySelectedItem_=$,_e.setSelected(!0),Ao(this.contentsDiv_,Co.ACTIVEDESCENDANT,_e.getId())}selectItemByPosition($){-1<$&&$<this.contents_.length&&($=this.contents_[$],$.isSelectable()&&this.setSelectedItem($))}updateFlyout_($,_e){_e&&($!==_e||_e.isCollapsible())&&_e.getContents().length?(this.flyout_.show(_e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_($,_e){const ot=$&&$.getName();let rt=_e&&_e.getName();$===_e&&(rt=null),$=new(oo(Fl))(ot,rt,this.workspace_.id),to($)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const $=this.selectedItem_;return $.isExpanded()?this.selectNext_():$.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let $=this.contents_.indexOf(this.selectedItem_)+1;if(-1<$&&$<this.contents_.length){let _e=this.contents_[$];for(;_e&&!_e.isSelectable();)_e=this.contents_[++$];if(_e&&_e.isSelectable())return this.setSelectedItem(_e),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let $=this.contents_.indexOf(this.selectedItem_)-1;if(-1<$&&$<this.contents_.length){let _e=this.contents_[$];for(;_e&&!_e.isSelectable();)_e=this.contents_[--$];if(_e&&_e.isSelectable())return this.setSelectedItem(_e),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var $=0;$<this.contents_.length;$++)this.contents_[$].dispose();for($=0;$<this.boundEvents_.length;$++)kt(this.boundEvents_[$]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),go(this.HtmlDiv)}};Mr(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),$o(Bt.TOOLBOX,kn,cE);var mR={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},$R={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},fR=new hs("zelos",mR,$R),Zp={};Zp.Classic=n_,Zp.Zelos=fR;var aE=class extends Fr{constructor($,_e,ot){_e=$?$.workspace.id:_e,_e===null&&(_e=void 0),super(_e),this.type=Wn,this.blockId=$?$.id:void 0,this.targetType=ot}toJson(){const $=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return $.targetType=this.targetType,$.blockId=this.blockId,$}fromJson($){super.fromJson($),this.targetType=$.targetType,this.blockId=$.blockId}},qp;(function($){$.BLOCK="block",$.WORKSPACE="workspace",$.ZOOM_CONTROLS="zoom_controls"})(qp||(qp={})),$o(Bt.EVENT,Wn,aE);var uE=class{constructor($,_e){this.bubble=$,this.workspace=_e,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=_e.getBlockDragSurface()}startBubbleDrag(){Lo()||qt(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble($,_e){_e=this.pixelsToWorkspaceUnits_(_e),_e=Ht.sum(this.startXY_,_e),this.bubble.moveDuringDrag(this.dragSurface_,_e),_e=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget($),$=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),$!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==_e&&(_e&&_e.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_($){return $&&this.workspace.getComponentManager().hasCapability($.id,Ko.Capability.DELETE_AREA)?$.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag($,_e){this.dragBubble($,_e),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?$=this.startXY_:($=this.pixelsToWorkspaceUnits_(_e),$=Ht.sum(this.startXY_,$)),this.bubble.moveTo($.x,$.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),qt(!1)}fireMoveEvent_(){if(this.bubble instanceof er){const $=new(oo(Ln))(this.bubble);$.setOldCoordinate(this.startXY_),$.recordNew(),to($)}}pixelsToWorkspaceUnits_($){return $=new Ht($.x/this.workspace.scale,$.y/this.workspace.scale),this.workspace.isMutator&&$.scale(1/this.workspace.options.parentWorkspace.scale),$}},hE=class{constructor($){this.workspace=$,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new Ht($.scrollX,$.scrollY)}dispose(){this.workspace=null}startDrag(){Qt()&&Qt().unselect(),this.workspace.setupDragSurface()}endDrag($){this.drag($),this.workspace.resetDragSurface()}drag($){if($=Ht.sum(this.startScrollXY_,$),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll($.x,$.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll($.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,$.y);else throw new TypeError("Invalid state.")}},Dn=class{constructor($,_e){this.creatorWorkspace=_e,this.mouseDownXY_=new Ht(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.mostRecentEvent_=$,this.currentDragDeltaXY_=new Ht(0,0),this.healStack_=!ZT}dispose(){ct(),Ym(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&kt(this.onMoveWrapper_),this.onUpWrapper_&&kt(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose()}updateFromEvent_($){const _e=new Ht($.clientX,$.clientY);this.updateDragDelta_(_e)&&(this.updateIsDragging_(),st()),this.mostRecentEvent_=$}updateDragDelta_($){return this.currentDragDeltaXY_=Ht.difference($,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=Ht.magnitude(this.currentDragDeltaXY_)>(this.flyout_?tt.config$$module$build$src$core$config.flyoutDragRadius:tt.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let $;if(!this.targetBlock_||($=this.flyout_)==null||!$.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Lo()||qt(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new hE(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(Rr(Bt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new uE(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart($){if(Wt($))this.cancel();else{if(!this.startWorkspace_)throw Error("Cannot start the gesture because the start workspace is undefined");this.hasStarted_=!0,Cl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=$,zm(),this.targetBlock_&&this.targetBlock_.select(),St($)?this.handleRightClick($):($.type.toLowerCase()!=="touchstart"&&$.type.toLowerCase()!=="pointerdown"||$.pointerType==="mouse"||nt($,this),this.mouseDownXY_=new Ht($.clientX,$.clientY),this.healStack_=$.altKey||$.ctrlKey||$.metaKey,this.bindMouseEvents($))}}bindMouseEvents($){this.onMoveWrapper_=Et(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=Et(document,"mouseup",null,this.handleUp.bind(this)),$.preventDefault(),$.stopPropagation()}handleMove($){this.updateFromEvent_($),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),$.preventDefault(),$.stopPropagation()}handleUp($){this.updateFromEvent_($),st(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag($,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag($,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_($),$.preventDefault(),$.stopPropagation(),this.dispose())}cancel(){this.isEnding_||(st(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick($){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu($)):this.startBubble_?this.startBubble_.showContextMenu($):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu($)),$.preventDefault(),$.stopPropagation(),this.dispose()}handleWsStart($,_e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(_e),this.mostRecentEvent_=$,this.doStart($)}fireWorkspaceClick_($){to(new(oo(Wn))(null,$.id,"workspace"))}handleFlyoutStart($,_e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(_e),this.handleWsStart($,_e.getWorkspace())}handleBlockStart($,_e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(_e),this.mostRecentEvent_=$}handleBubbleStart($,_e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(_e),this.mostRecentEvent_=$}doBubbleClick_(){this.startBubble_ instanceof er&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(Lo()||qt(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const $=new(oo(Wn))(this.startBlock_,this.startWorkspace_.id,"block");to($)}this.bringBlockToFront_(),qt(!1)}doWorkspaceClick_($){$=this.creatorWorkspace,Qt()&&Qt().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||$)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField($){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=$)}setStartBubble($){this.startBubble_||(this.startBubble_=$)}setStartBlock($){this.startBlock_||this.startBubble_||(this.startBlock_=$,$.isInFlyout&&$!==$.getRootBlock()?this.setTargetBlock_($.getRootBlock()):this.setTargetBlock_($))}setTargetBlock_($){$.isShadow()?this.setTargetBlock_($.getParent()):this.targetBlock_=$}setStartWorkspace_($){this.startWorkspace_||(this.startWorkspace_=$)}setStartFlyout_($){this.flyout_||(this.flyout_=$)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let $,_e;return(_e=($=this.blockDragger_)!=null?$:this.workspaceDragger_)!=null?_e:this.bubbleDragger_}static inProgress(){const $=Gt();for(let _e=0,ot;ot=$[_e];_e++)if(ot.currentGesture_)return!0;return!1}},Oo=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register($,_e){if(this.shortcuts.get($.name)&&!_e)throw Error('Shortcut with name "'+$.name+'" already exists.');if(this.shortcuts.set($.name,$),(_e=$.keyCodes)&&0<_e.length)for(let ot=0;ot<_e.length;ot++)this.addKeyMapping(_e[ot],$.name,!!$.allowCollision)}unregister($){return this.shortcuts.get($)?(this.removeAllKeyMappings($),this.shortcuts.delete($),!0):(console.warn('Keyboard shortcut with name "'+$+'" not found.'),!1)}addKeyMapping($,_e,ot){$=String($);const rt=this.keyMap.get($);if(rt&&!ot)throw Error('Shortcut with name "'+_e+'" collides with shortcuts '+rt.toString());rt&&ot?rt.unshift(_e):this.keyMap.set($,[_e])}removeKeyMapping($,_e,ot){const rt=this.keyMap.get($);if(!rt)return ot||console.warn('No keyboard shortcut with name "'+_e+'" registered with key code "'+$+'"'),!1;const lt=rt.indexOf(_e);return-1<lt?(rt.splice(lt,1),rt.length===0&&this.keyMap.delete($),!0):(ot||console.warn('No keyboard shortcut with name "'+_e+'" registered with key code "'+$+'"'),!1)}removeAllKeyMappings($){for(const _e of this.keyMap.keys())this.removeKeyMapping(_e,$,!0)}setKeyMap($){this.keyMap.clear();for(const _e in $)this.keyMap.set(_e,$[_e])}getKeyMap(){const $=Object.create(null);for(const[_e,ot]of this.keyMap)$[_e]=ot;return $}getRegistry(){const $=Object.create(null);for(const[_e,ot]of this.shortcuts)$[_e]=ot;return Fn(Object.create(null),$)}onKeyDown($,_e){var ot=this.serializeKeyEvent_(_e);if(ot=this.getShortcutNamesByKeyCode(ot),!ot)return!1;for(let rt=0,lt;lt=ot[rt];rt++){const ut=this.shortcuts.get(lt);let pt,vt;if((pt=ut)==null||!pt.preconditionFn||((vt=ut)==null?0:vt.preconditionFn($))){let At,xt;if(((At=ut)==null?0:At.callback)&&((xt=ut)==null?0:xt.callback($,_e,ut)))return!0}}return!1}getShortcutNamesByKeyCode($){return this.keyMap.get($)||[]}getKeyCodesByShortcutName($){const _e=[];for(const[ot,rt]of this.keyMap)-1<rt.indexOf($)&&_e.push(ot);return _e}serializeKeyEvent_($){let _e="";for(const ot in Oo.modifierKeys)$.getModifierState(ot)&&(_e!==""&&(_e+="+"),_e+=ot);return _e!==""&&$.keyCode?_e=_e+"+"+$.keyCode:$.keyCode&&(_e=$.keyCode.toString()),_e}checkModifiers_($){for(let _e=0,ot;ot=$[_e];_e++)if(!(ot in Oo.modifierKeys))throw Error(ot+" is not a valid modifier key.")}createSerializedKey($,_e){let ot="";if(_e){this.checkModifiers_(_e);for(const rt in Oo.modifierKeys)-1<_e.indexOf(Oo.modifierKeys[rt])&&(ot!==""&&(ot+="+"),ot+=rt)}return ot!==""&&$?ot=ot+"+"+$:$&&(ot=$.toString()),ot}};Oo.registry=new Oo,function($){$=$.modifierKeys||($.modifierKeys={}),$[$.Shift=16]="Shift",$[$.Control=17]="Control",$[$.Alt=18]="Alt",$[$.Meta=91]="Meta"}(Oo||(Oo={}));var _n;(function($){$.ESCAPE="escape",$.DELETE="delete",$.COPY="copy",$.CUT="cut",$.PASTE="paste",$.UNDO="undo",$.REDO="redo"})(_n||(_n={})),k$();var pn={};pn.names=_n,pn.registerCopy=v$,pn.registerCut=S$,pn.registerDefaultShortcuts=k$,pn.registerDelete=b$,pn.registerEscape=I$,pn.registerPaste=R$,pn.registerRedo=O$,pn.registerUndo=y$;var dE=class extends Fr{constructor($,_e){super(_e),this.type=Hl,this.themeName=$}toJson(){const $=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return $.themeName=this.themeName,$}fromJson($){super.fromJson($),this.themeName=$.themeName}};$o(Bt.EVENT,Hl,dE);var _E=class extends Fr{constructor($,_e,ot,rt,lt){super(rt),this.type=as,this.viewTop=$,this.viewLeft=_e,this.scale=ot,this.oldScale=lt}toJson(){const $=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return $.viewTop=this.viewTop,$.viewLeft=this.viewLeft,$.scale=this.scale,$.oldScale=this.oldScale,$}fromJson($){super.fromJson($),this.viewTop=$.viewTop,this.viewLeft=$.viewLeft,this.scale=$.scale,this.oldScale=$.oldScale}};$o(Bt.EVENT,as,_E);var Js=class{constructor($){this.connectionChecker=$,this.connections_=[]}addConnection($,_e){_e=this.calculateIndexForYPos_(_e),this.connections_.splice(_e,0,$)}findIndexOfConnection_($,_e){if(!this.connections_.length)return-1;const ot=this.calculateIndexForYPos_(_e);if(ot>=this.connections_.length)return-1;_e=$.y;let rt=ot;for(;0<=rt&&this.connections_[rt].y===_e;){if(this.connections_[rt]===$)return rt;rt--}for(rt=ot;rt<this.connections_.length&&this.connections_[rt].y===_e;){if(this.connections_[rt]===$)return rt;rt++}return-1}calculateIndexForYPos_($){if(!this.connections_.length)return 0;let _e=0,ot=this.connections_.length;for(;_e<ot;){const rt=Math.floor((_e+ot)/2);if(this.connections_[rt].y<$)_e=rt+1;else if(this.connections_[rt].y>$)ot=rt;else{_e=rt;break}}return _e}removeConnection($,_e){if($=this.findIndexOfConnection_($,_e),$===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice($,1)}getNeighbours($,_e){function ot(xt){const ho=lt-rt[xt].x,Eo=ut-rt[xt].y;return Math.sqrt(ho*ho+Eo*Eo)<=_e&&At.push(rt[xt]),Eo<_e}const rt=this.connections_,lt=$.x,ut=$.y;$=0;let pt=rt.length-2,vt=pt;for(;$<vt;)rt[vt].y<ut?$=vt:pt=vt,vt=Math.floor(($+pt)/2);const At=[];if(pt=$=vt,rt.length){for(;0<=$&&ot($);)$--;do pt++;while(pt<rt.length&&ot(pt))}return At}isInYRange_($,_e,ot){return Math.abs(this.connections_[$].y-_e)<=ot}searchForClosest($,_e,ot){if(!this.connections_.length)return{connection:null,radius:_e};const rt=$.y,lt=$.x;$.x=lt+ot.x,$.y=rt+ot.y;var ut=this.calculateIndexForYPos_($.y);ot=null;let pt=_e,vt,At=ut-1;for(;0<=At&&this.isInYRange_(At,$.y,_e);)vt=this.connections_[At],this.connectionChecker.canConnect($,vt,!0,pt)&&(ot=vt,pt=vt.distanceFrom($)),At--;for(;ut<this.connections_.length&&this.isInYRange_(ut,$.y,_e);)vt=this.connections_[ut],this.connectionChecker.canConnect($,vt,!0,pt)&&(ot=vt,pt=vt.distanceFrom($)),ut++;return $.x=lt,$.y=rt,{connection:ot,radius:pt}}static init($){const _e=[];return _e[Vt.INPUT_VALUE]=new Js($),_e[Vt.OUTPUT_VALUE]=new Js($),_e[Vt.NEXT_STATEMENT]=new Js($),_e[Vt.PREVIOUS_STATEMENT]=new Js($),_e}},_g=class{constructor($,_e){this.pattern=$;let ot;this.spacing=(ot=_e.spacing)!=null?ot:0;let rt;this.length=(rt=_e.length)!=null?rt:1,this.line2=(this.line1=$.firstChild)&&this.line1.nextSibling;let lt;this.snapToGrid=(lt=_e.snap)!=null?lt:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update($){var _e=this.spacing*$||100;this.pattern.setAttribute("width",_e.toString()),this.pattern.setAttribute("height",_e.toString()),_e=Math.floor(this.spacing/2)+.5;let ot=_e-this.length/2,rt=_e+this.length/2;_e*=$,ot*=$,rt*=$,this.setLineAttributes(this.line1,$,ot,rt,_e,_e),this.setLineAttributes(this.line2,$,_e,_e,ot,rt)}setLineAttributes($,_e,ot,rt,lt,ut){$&&($.setAttribute("stroke-width",_e.toString()),$.setAttribute("x1",ot.toString()),$.setAttribute("y1",lt.toString()),$.setAttribute("x2",rt.toString()),$.setAttribute("y2",ut.toString()))}moveTo($,_e){this.pattern.setAttribute("x",$.toString()),this.pattern.setAttribute("y",_e.toString())}static createDom($,_e,ot){$=Lt(Ot.PATTERN,{id:"blocklyGridPattern"+$,patternUnits:"userSpaceOnUse"},ot);let rt,lt;if(0<((rt=_e.length)!=null?rt:1)&&0<((lt=_e.spacing)!=null?lt:0)){Lt(Ot.LINE,{stroke:_e.colour},$);let ut;(ut=_e.length)!=null&&ut&&Lt(Ot.LINE,{stroke:_e.colour},$)}else Lt(Ot.LINE,{},$);return $}},Lr=class{constructor($,_e){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=_e||"",this.reservedWords=new Set($?$.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap($){this.variableMap_=$}getNameForUserVariable_($){return this.variableMap_?($=this.variableMap_.getVariableById($))?$.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables($){$=y_($);for(let _e=0;_e<$.length;_e++)this.getName($[_e].getId(),tt.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures($){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName($,_e){let ot=$;_e===tt.NameType$$module$build$src$core$names.VARIABLE&&($=this.getNameForUserVariable_($))&&(ot=$),$=ot.toLowerCase();const rt=_e===tt.NameType$$module$build$src$core$names.VARIABLE||_e===tt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(_e)||this.db.set(_e,new Map);const lt=this.db.get(_e);return lt.has($)?rt+lt.get($):(_e=this.getDistinctName(ot,_e),lt.set($,_e.substr(rt.length)),_e)}getUserNames($){let _e;return($=(_e=this.db.get($))==null?void 0:_e.keys())?Array.from($):[]}getDistinctName($,_e){$=this.safeName_($);let ot="";for(;this.dbReverse.has($+ot)||this.reservedWords.has($+ot);)ot=ot?ot+1:2;return $+=ot,this.dbReverse.add($),(_e===tt.NameType$$module$build$src$core$names.VARIABLE||_e===tt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+$}safeName_($){return $?($=encodeURI($.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf($[0])!==-1&&($="my_"+$)):$=io.UNNAMED_KEY||"unnamed",$}static equals($,_e){return $.toLowerCase()===_e.toLowerCase()}};(function($){$=$.NameType||($.NameType={}),$.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",$.VARIABLE="VARIABLE",$.PROCEDURE="PROCEDURE"})(Lr||(Lr={})),tt.NameType$$module$build$src$core$names=Lr.NameType,Lr.DEVELOPER_VARIABLE_TYPE=tt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,tt.module$build$src$core$names={},tt.module$build$src$core$names.NameType=tt.NameType$$module$build$src$core$names,tt.module$build$src$core$names.Names=Lr;var h_,em;h_="PROCEDURE",em="x",tt.module$build$src$core$procedures={},tt.module$build$src$core$procedures.CATEGORY_NAME=h_,tt.module$build$src$core$procedures.DEFAULT_ARG=em,tt.module$build$src$core$procedures.allProcedures=tp,tt.module$build$src$core$procedures.findLegalName=L$,tt.module$build$src$core$procedures.flyoutCategory=op,tt.module$build$src$core$procedures.getCallers=M$,tt.module$build$src$core$procedures.getDefinition=bS,tt.module$build$src$core$procedures.isNameUsed=w$,tt.module$build$src$core$procedures.mutateCallers=IS,tt.module$build$src$core$procedures.mutatorOpenListener=N$,tt.module$build$src$core$procedures.rename=TS;var TR=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType($){return Object.prototype.hasOwnProperty.call(this,$)||(this[$]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[$]}isField($){return $.type&this.FIELD}isHat($){return $.type&this.HAT}isIcon($){return $.type&this.ICON}isSpacer($){return $.type&this.SPACER}isInRowSpacer($){return $.type&this.IN_ROW_SPACER}isInput($){return $.type&this.INPUT}isExternalInput($){return $.type&this.EXTERNAL_VALUE_INPUT}isInlineInput($){return $.type&this.INLINE_INPUT}isStatementInput($){return $.type&this.STATEMENT_INPUT}isPreviousConnection($){return $.type&this.PREVIOUS_CONNECTION}isNextConnection($){return $.type&this.NEXT_CONNECTION}isPreviousOrNextConnection($){return $.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner($){return $.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner($){return $.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner($){return $.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner($){return $.type&this.RIGHT_SQUARE_CORNER}isCorner($){return $.type&this.CORNER}isJaggedEdge($){return $.type&this.JAGGED_EDGE}isRow($){return $.type&this.ROW}isBetweenRowSpacer($){return $.type&this.BETWEEN_ROW_SPACER}isTopRow($){return $.type&this.TOP_ROW}isBottomRow($){return $.type&this.BOTTOM_ROW}isTopOrBottomRow($){return $.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow($){return $.type&this.INPUT_ROW}},Rt=new TR,gn=class{constructor($){this.centerline=this.xPos=this.height=this.width=0,this.constants_=$,this.type=Rt.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},su=class{constructor($){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=$,this.type=Rt.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let $=this.elements.length-1;0<=$;$--){const _e=this.elements[$];if(Rt.isInput(_e))return _e}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let $=0;$<this.elements.length;$++){const _e=this.elements[$];if(Rt.isSpacer(_e))return _e}return null}getLastSpacer(){for(let $=this.elements.length-1;0<=$;$--){const _e=this.elements[$];if(Rt.isSpacer(_e))return _e}return null}},tm=class extends su{constructor($){super($),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Rt.BOTTOM_ROW}hasLeftSquareCorner($){return!!$.outputConnection||!!$.getNextBlock()}hasRightSquareCorner($){return!0}measure(){let $=0,_e=0,ot=0;for(let rt=0;rt<this.elements.length;rt++){const lt=this.elements[rt];_e+=lt.width,Rt.isSpacer(lt)||(Rt.isNextConnection(lt)?ot=Math.max(ot,lt.height):$=Math.max($,lt.height))}this.width=Math.max(this.minWidth,_e),this.height=Math.max(this.minHeight,$)+ot,this.descenderHeight=ot,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ps=class extends gn{constructor($,_e){super($),this.connectionModel=_e,this.shape=this.constants_.shapeFor(_e),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=Rt.CONNECTION}},Pn=class extends ps{constructor($,_e){super($,_e.connection),this.input=_e,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Rt.INPUT,this.align=_e.align,(this.connectedBlock=_e.connection&&_e.connection.targetBlock()?_e.connection.targetBlock():null)?($=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=$.width,this.connectedBlockHeight=$.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},d_=class extends Pn{constructor($,_e){super($,_e),this.height=0,this.type|=Rt.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},gs=class extends gn{constructor($,_e,ot){super($),this.field=_e,this.parentInput=ot,this.isEditable=_e.EDITABLE,this.flipRtl=_e.getFlipRtl(),this.type|=Rt.FIELD,$=this.field.getSize(),this.height=$.height,this.width=$.width}},om=class extends gn{constructor($){super($),this.type|=Rt.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},pE=class extends gn{constructor($,_e){super($),this.icon=_e,this.flipRtl=!1,this.isVisible=_e.isVisible(),this.type|=Rt.ICON,$=_e.getCorrectedSize(),this.height=$.height,this.width=$.width}},fr=class extends gn{constructor($,_e){super($),this.type=this.type|Rt.SPACER|Rt.IN_ROW_SPACER,this.width=_e,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},im=class extends Pn{constructor($,_e){super($,_e),this.type|=Rt.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},lu=class extends Pn{constructor($,_e){super($,_e),this.type|=Rt.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},rm=class extends su{constructor($){super($),this.connectedBlockWidths=0,this.type|=Rt.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let $=0;for(let _e=0;_e<this.elements.length;_e++){const ot=this.elements[_e];this.width+=ot.width,Rt.isInput(ot)&&ot instanceof Pn&&(Rt.isStatementInput(ot)&&ot instanceof lu?$+=ot.connectedBlockWidth:Rt.isExternalInput(ot)&&ot instanceof d_&&ot.connectedBlockWidth!==0&&($+=ot.connectedBlockWidth-ot.connectionWidth)),Rt.isSpacer(ot)||(this.height=Math.max(this.height,ot.height))}this.connectedBlockWidths=$,this.widthWithConnectedBlocks=this.width+$}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},gE=class extends gn{constructor($){super($),this.type|=Rt.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},mE=class extends ps{constructor($,_e){super($,_e),this.type|=Rt.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},$E=class extends ps{constructor($,_e){super($,_e),this.connectionOffsetX=0,this.type|=Rt.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},fE=class extends ps{constructor($,_e){super($,_e),this.type|=Rt.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},cu=class extends gn{constructor($,_e){super($),this.type=(_e&&_e!=="left"?Rt.RIGHT_ROUND_CORNER:Rt.LEFT_ROUND_CORNER)|Rt.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},nm=class extends su{constructor($,_e,ot){super($),this.height=_e,this.width=ot,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|Rt.SPACER|Rt.BETWEEN_ROW_SPACER,this.elements=[new fr(this.constants_,ot)]}measure(){}},au=class extends gn{constructor($,_e){super($),this.type=(_e&&_e!=="left"?Rt.RIGHT_SQUARE_CORNER:Rt.LEFT_SQUARE_CORNER)|Rt.CORNER,this.width=this.height=this.constants_.NO_PADDING}},sm=class extends su{constructor($){super($),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Rt.TOP_ROW}hasLeftSquareCorner($){const _e=($.hat?$.hat==="cap":this.constants_.ADD_START_HATS)&&!$.outputConnection&&!$.previousConnection,ot=$.getPreviousBlock();return!!$.outputConnection||_e||(ot?ot.getNextBlock()===$:!1)}hasRightSquareCorner($){return!0}measure(){let $=0,_e=0,ot=0;for(let rt=0;rt<this.elements.length;rt++){const lt=this.elements[rt];_e+=lt.width,Rt.isSpacer(lt)||(Rt.isHat(lt)&&lt instanceof om?ot=Math.max(ot,lt.ascenderHeight):$=Math.max($,lt.height))}this.width=Math.max(this.minWidth,_e),this.height=Math.max(this.minHeight,$)+ot,this.capline=this.ascenderHeight=ot,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},uu=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=wo(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme($){this.blockStyles=Object.create(null);const _e=$.blockStyles;for(const ot in _e)this.blockStyles[ot]=this.validatedBlockStyle_(_e[ot]);this.setDynamicProperties_($)}setDynamicProperties_($){this.setFontConstants_($),this.setComponentConstants_($),this.ADD_START_HATS=$.startHats!==void 0?$.startHats:this.ADD_START_HATS}setFontConstants_($){$.fontStyle&&$.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=$.fontStyle.family),$.fontStyle&&$.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=$.fontStyle.weight),$.fontStyle&&$.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=$.fontStyle.size),$=$l("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=$.height,this.FIELD_TEXT_BASELINE=$.baseline}setComponentConstants_($){this.CURSOR_COLOUR=$.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=$.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=$.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number($.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour($){const _e="auto_"+$;return this.blockStyles[_e]||(this.blockStyles[_e]=this.createBlockStyle_($)),{style:this.blockStyles[_e],name:_e}}getBlockStyle($){return this.blockStyles[$||""]||($&&$.indexOf("auto_")===0?this.getBlockStyleForColour($.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_($){return this.validatedBlockStyle_({colourPrimary:$})}validatedBlockStyle_($){const _e={};return $&&Object.assign(_e,$),$=Ss(_e.colourPrimary||"#000"),_e.colourPrimary=$.hex,_e.colourSecondary=_e.colourSecondary?Ss(_e.colourSecondary).hex:this.generateSecondaryColour_(_e.colourPrimary),_e.colourTertiary=_e.colourTertiary?Ss(_e.colourTertiary).hex:this.generateTertiaryColour_(_e.colourPrimary),_e.hat=_e.hat||"",_e}generateSecondaryColour_($){return vs("#fff",$,.6)||$}generateTertiaryColour_($){return vs("#fff",$,.3)||$}dispose(){this.embossFilter_&&go(this.embossFilter_),this.disabledPattern_&&go(this.disabledPattern_),this.debugFilter_&&go(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const $=this.JAGGED_TEETH_HEIGHT,_e=this.JAGGED_TEETH_WIDTH,ot=Ol([Zt(_e,$/4),Zt(2*-_e,$/2),Zt(_e,$/4)]);return{height:$,width:_e,path:ot}}makeStartHat(){const $=this.START_HAT_HEIGHT,_e=this.START_HAT_WIDTH,ot=gr("c",[Zt(30,-$),Zt(70,-$),Zt(_e,0)]);return{height:$,width:_e,path:ot}}makePuzzleTab(){function $(ut){ut=ut?-1:1;const pt=-ut;var vt=ot/2;const At=vt+2.5,xt=vt+.5,ho=Zt(-_e,ut*vt);return vt=Zt(_e,ut*vt),gr("c",[Zt(0,ut*At),Zt(-_e,pt*xt),ho])+gr("s",[Zt(_e,2.5*pt),vt])}const _e=this.TAB_WIDTH,ot=this.TAB_HEIGHT,rt=$(!0),lt=$(!1);return{type:this.SHAPES.PUZZLE,width:_e,height:ot,pathDown:lt,pathUp:rt}}makeNotch(){function $(pt){return Ol([Zt(pt*rt,ot),Zt(3*pt,0),Zt(pt*rt,-ot)])}const _e=this.NOTCH_WIDTH,ot=this.NOTCH_HEIGHT,rt=(_e-3)/2,lt=$(1),ut=$(-1);return{type:this.SHAPES.NOTCH,width:_e,height:ot,pathLeft:lt,pathRight:ut}}makeInsideCorners(){const $=this.CORNER_RADIUS,_e=Bo("a","0 0,0",$,Zt(-$,$)),ot=Bo("a","0 0,0",$,Zt($,$));return{width:$,height:$,pathTop:_e,pathBottom:ot}}makeOutsideCorners(){const $=this.CORNER_RADIUS,_e=wo(0,$)+Bo("a","0 0,1",$,Zt($,-$)),ot=Bo("a","0 0,1",$,Zt($,$)),rt=Bo("a","0 0,1",$,Zt(-$,-$)),lt=Bo("a","0 0,1",$,Zt(-$,$));return{topLeft:_e,topRight:ot,bottomRight:lt,bottomLeft:rt,rightHeight:$}}shapeFor($){switch($.type){case Vt.INPUT_VALUE:case Vt.OUTPUT_VALUE:return this.PUZZLE_TAB;case Vt.PREVIOUS_STATEMENT:case Vt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom($,_e,ot){this.injectCSS_(_e,ot),this.defs_=Lt(Ot.DEFS,{},$),$=Lt(Ot.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),Lt(Ot.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},$),_e=Lt(Ot.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},$),Lt(Ot.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},_e),Lt(Ot.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},$),Lt(Ot.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},$),this.embossFilterId=$.id,this.embossFilter_=$,$=Lt(Ot.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),Lt(Ot.RECT,{width:10,height:10,fill:"#aaa"},$),Lt(Ot.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},$),this.disabledPatternId=$.id,this.disabledPattern_=$,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const $=Lt(Ot.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),_e=Lt(Ot.FECOMPONENTTRANSFER,{result:"outBlur"},$);Lt(Ot.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},_e),Lt(Ot.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},$),Lt(Ot.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},$),this.debugFilterId=$.id,this.debugFilter_=$}}injectCSS_($,_e){_e=this.getCSS_(_e),$="blockly-renderer-style-"+$,this.cssNode_=document.getElementById($);const ot=_e.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=ot:(_e=document.createElement("style"),_e.id=$,$=document.createTextNode(ot),_e.appendChild($),document.head.insertBefore(_e,document.head.firstChild),this.cssNode_=_e)}getCSS_($){return[`${$} .blocklyText, `,`${$} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${$} .blocklyText {`,"fill: #fff;","}",`${$} .blocklyNonEditableText>rect,`,`${$} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${$} .blocklyNonEditableText>text,`,`${$} .blocklyEditableText>text {`,"fill: #000;","}",`${$} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${$} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${$} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${$} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${$} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${$} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${$} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${$} .blocklyReplaceable .blocklyPathLight,`,`${$} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${$} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},TE=!1,Tr=class{constructor($){this.constants=$,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let $=0;$<this.debugElements_.length;$++)go(this.debugElements_[$]);this.debugElements_=[]}drawSpacerRow($,_e,ot){if(Tr.config.rowSpacers){var rt=Math.abs($.height),lt=0>$.height;lt&&(_e-=rt),this.debugElements_.push(Lt(Ot.RECT,{class:"rowSpacerRect blockRenderDebug",x:ot?-($.xPos+$.width):$.xPos,y:_e,width:$.width,height:rt,stroke:lt?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem($,_e,ot){if(Tr.config.elemSpacers){_e=Math.abs($.width);var rt=0>$.width,lt=rt?$.xPos-_e:$.xPos;ot&&(lt=-(lt+_e)),this.debugElements_.push(Lt(Ot.RECT,{class:"elemSpacerRect blockRenderDebug",x:lt,y:$.centerline-$.height/2,width:_e,height:$.height,stroke:"pink",fill:rt?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem($,_e){if(Tr.config.elems){let ot=$.xPos;_e&&(ot=-(ot+$.width)),_e=$.centerline-$.height/2,this.debugElements_.push(Lt(Ot.RECT,{class:"rowRenderingRect blockRenderDebug",x:ot,y:_e,width:$.width,height:$.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),Rt.isField($)&&$ instanceof gs&&$.field instanceof tt.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(Lt(Ot.RECT,{class:"rowRenderingRect blockRenderDebug",x:ot,y:_e+this.constants.FIELD_TEXT_BASELINE,width:$.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}Rt.isInput($)&&$ instanceof Pn&&Tr.config.connections&&this.drawConnection($.connectionModel)}drawConnection($){if(Tr.config.connections){var _e="",ot=0,rt="";$.type===Vt.INPUT_VALUE?(ot=4,_e="magenta",rt="none"):$.type===Vt.OUTPUT_VALUE?(ot=2,rt=_e="magenta"):$.type===Vt.NEXT_STATEMENT?(ot=4,_e="goldenrod",rt="none"):$.type===Vt.PREVIOUS_STATEMENT&&(ot=2,rt=_e="goldenrod"),this.debugElements_.push(Lt(Ot.CIRCLE,{class:"blockRenderDebug",cx:$.getOffsetInBlock().x,cy:$.getOffsetInBlock().y,r:ot,fill:rt,stroke:_e},this.svgRoot_))}}drawRenderedRow($,_e,ot){Tr.config.rows&&(this.debugElements_.push(Lt(Ot.RECT,{class:"elemRenderingRect blockRenderDebug",x:ot?-($.xPos+$.width):$.xPos,y:$.yPos,width:$.width,height:$.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),Rt.isTopOrBottomRow($)||Tr.config.connectedBlockBounds&&this.debugElements_.push(Lt(Ot.RECT,{class:"connectedBlockWidth blockRenderDebug",x:ot?-($.xPos+$.widthWithConnectedBlocks):$.xPos,y:$.yPos,width:$.widthWithConnectedBlocks,height:$.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements($,_e,ot){for(let rt=0;rt<$.elements.length;rt++){const lt=$.elements[rt];lt?Rt.isSpacer(lt)?this.drawSpacerElem(lt,$.height,ot):this.drawRenderedElem(lt,ot):console.warn("A row has an undefined or null element.",$,lt)}this.drawRenderedRow($,_e,ot)}drawBoundingBox($){if(Tr.config.blockBounds){var _e=$.RTL?-$.width:0;this.debugElements_.push(Lt(Ot.RECT,{class:"blockBoundingBox blockRenderDebug",x:_e,y:0,width:$.width,height:$.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Tr.config.connectedBlockBounds&&(_e=$.RTL?-$.widthWithChildren:0,this.debugElements_.push(Lt(Ot.RECT,{class:"blockRenderDebug",x:_e,y:0,width:$.widthWithChildren,height:$.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug($,_e){this.clearElems(),this.svgRoot_=$.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let ot=0;for(let rt=0;rt<_e.rows.length;rt++){const lt=_e.rows[rt];Rt.isBetweenRowSpacer(lt)?this.drawSpacerRow(lt,ot,_e.RTL):this.drawRowWithElements(lt,ot,_e.RTL),ot+=lt.height}$.previousConnection&&this.drawConnection($.previousConnection),$.nextConnection&&this.drawConnection($.nextConnection),$.outputConnection&&this.drawConnection($.outputConnection),_e.rightSide&&this.drawRenderedElem(_e.rightSide,_e.RTL),this.drawBoundingBox(_e),this.drawRender($.pathObject.svgPath)}drawRender($){Tr.config.render&&($.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){$.setAttribute("filter","")},100))}};Tr.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var hu=class{constructor($,_e){this.inlinePath_=this.outlinePath_="",this.block_=$,this.info_=_e,this.topLeft_=$.getRelativeToSurfaceXY(),this.constants_=_e.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Fu()){let $;($=this.block_.renderingDebugger)==null||$.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let $=0,_e;_e=this.info_.hiddenIcons[$];$++){let ot;(ot=_e.icon.iconGroup_)==null||ot.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let $=1;$<this.info_.rows.length-1;$++){const _e=this.info_.rows[$];_e.hasJaggedEdge?this.drawJaggedEdge_(_e):_e.hasStatement?this.drawStatementInput_(_e):_e.hasExternalInput?this.drawValueInput_(_e):this.drawRightSideRow_(_e)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const $=this.info_.topRow,_e=$.elements;this.positionPreviousConnection_(),this.outlinePath_+=wo($.xPos,this.info_.startY);for(let ot=0,rt;rt=_e[ot];ot++)Rt.isLeftRoundedCorner(rt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Rt.isRightRoundedCorner(rt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Rt.isPreviousConnection(rt)&&rt instanceof ps?this.outlinePath_+=rt.shape.pathLeft:Rt.isHat(rt)?this.outlinePath_+=this.constants_.START_HAT.path:Rt.isSpacer(rt)&&(this.outlinePath_+=jt("h",rt.width));this.outlinePath_+=jt("v",$.height)}drawJaggedEdge_($){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+jt("v",$.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_($){const _e=$.getLastInput();this.positionExternalValueConnection_($);const ot=D$(_e.shape)?_e.shape.pathDown(_e.height):_e.shape.pathDown;this.outlinePath_+=jt("H",_e.xPos+_e.width)+ot+jt("v",$.height-_e.connectionHeight)}drawStatementInput_($){var _e=$.getLastInput();if(_e){var ot=_e.xPos+_e.notchOffset+_e.shape.width;_e=_e.shape.pathRight+jt("h",-(_e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var rt=$.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=jt("H",ot)+_e+jt("v",rt)+this.constants_.INSIDE_CORNERS.pathBottom+jt("H",$.xPos+$.width),this.positionStatementInputConnection_($)}}drawRightSideRow_($){this.outlinePath_+=jt("V",$.yPos+$.height)}drawBottom_(){const $=this.info_.bottomRow,_e=$.elements;this.positionNextConnection_();let ot=0,rt="";for(let lt=_e.length-1,ut;ut=_e[lt];lt--)Rt.isNextConnection(ut)&&ut instanceof ps?rt+=ut.shape.pathRight:Rt.isLeftSquareCorner(ut)?rt+=jt("H",$.xPos):Rt.isLeftRoundedCorner(ut)?rt+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Rt.isRightRoundedCorner(ut)?(rt+=this.constants_.OUTSIDE_CORNERS.bottomRight,ot=this.constants_.OUTSIDE_CORNERS.rightHeight):Rt.isSpacer(ut)&&(rt+=jt("h",-1*ut.width));this.outlinePath_+=jt("V",$.baseline-ot),this.outlinePath_+=rt}drawLeft_(){var $=this.info_.outputConnection;if(this.positionOutputConnection_(),$){const _e=$.connectionOffsetY+$.height;$=D$($.shape)?$.shape.pathUp($.height):$.shape.pathUp,this.outlinePath_+=jt("V",_e)+$}this.outlinePath_+="z"}drawInternals_(){for(let $=0,_e;_e=this.info_.rows[$];$++)for(let ot=0,rt;rt=_e.elements[ot];ot++)Rt.isInlineInput(rt)?this.drawInlineInput_(rt):(Rt.isIcon(rt)||Rt.isField(rt))&&this.layoutField_(rt)}layoutField_($){const _e=Rt.isField($)?$.field.getSvgRoot():$.icon.iconGroup_,ot=$.centerline-$.height/2;let rt=$.xPos,lt="";this.info_.RTL&&(rt=-(rt+$.width),$.flipRtl&&(rt+=$.width,lt="scale(-1 1)")),Rt.isIcon($)?(_e.setAttribute("display","block"),_e.setAttribute("transform","translate("+rt+","+ot+")"),$.icon.computeIconLocation()):_e.setAttribute("transform","translate("+rt+","+ot+")"+lt),this.info_.isInsertionMarker&&_e.setAttribute("display","none")}drawInlineInput_($){const _e=$.width,ot=$.height,rt=$.connectionOffsetY,lt=$.connectionHeight+rt;this.inlinePath_+=_i($.xPos+$.connectionWidth,$.centerline-ot/2)+jt("v",rt)+$.shape.pathDown+jt("v",ot-lt)+jt("h",_e-$.connectionWidth)+jt("v",-ot)+"z",this.positionInlineInputConnection_($)}positionInlineInputConnection_($){const _e=$.centerline-$.height/2;if($.connectionModel){let ot=$.xPos+$.connectionWidth+$.connectionOffsetX;this.info_.RTL&&(ot*=-1),$.connectionModel.setOffsetInBlock(ot,_e+$.connectionOffsetY)}}positionStatementInputConnection_($){const _e=$.getLastInput();if(_e!=null&&_e.connectionModel){let ot=$.xPos+$.statementEdge+_e.notchOffset;this.info_.RTL&&(ot*=-1),_e.connectionModel.setOffsetInBlock(ot,$.yPos)}}positionExternalValueConnection_($){const _e=$.getLastInput();if(_e&&_e.connectionModel){let ot=$.xPos+$.width;this.info_.RTL&&(ot*=-1),_e.connectionModel.setOffsetInBlock(ot,$.yPos)}}positionPreviousConnection_(){const $=this.info_.topRow;if($.connection){const _e=$.xPos+$.notchOffset;$.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-_e:_e,0)}}positionNextConnection_(){const $=this.info_.bottomRow;if($.connection){const _e=$.connection,ot=_e.xPos;_e.connectionModel.setOffsetInBlock(this.info_.RTL?-ot:ot,$.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const $=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-$:$,this.info_.outputConnection.connectionOffsetY)}}},Qs=class{constructor($,_e){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=$,this.block_=_e,this.constants_=this.renderer_.getConstants(),this.outputConnection=_e.outputConnection?new $E(this.constants_,_e.outputConnection):null,this.isInline=_e.getInputsInline()&&!_e.isCollapsed(),this.isCollapsed=_e.isCollapsed(),this.isInsertionMarker=_e.isInsertionMarker(),this.RTL=_e.RTL,this.topRow=new sm(this.constants_),this.bottomRow=new tm(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let $=new rm(this.constants_);this.inputRows.push($);var _e=this.block_.getIcons();for(let ot=0,rt;rt=_e[ot];ot++){const lt=new pE(this.constants_,rt);this.isCollapsed&&rt.collapseHidden?this.hiddenIcons.push(lt):$.elements.push(lt)}_e=void 0;for(let ot=0,rt;rt=this.block_.inputList[ot];ot++)if(rt.isVisible()){this.shouldStartNewRow_(rt,_e)&&(this.rows.push($),$=new rm(this.constants_),this.inputRows.push($));for(let lt=0,ut;ut=rt.fieldRow[lt];lt++)$.elements.push(new gs(this.constants_,ut,rt));this.addInput_(rt,$),_e=rt}this.isCollapsed&&($.hasJaggedEdge=!0,$.elements.push(new gE(this.constants_))),($.elements.length||$.hasDummyInput)&&this.rows.push($),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var $=!!this.block_.previousConnection;const _e=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!$;let ot=this.topRow.hasLeftSquareCorner(this.block_)?au:cu;this.topRow.elements.push(new ot(this.constants_)),_e?($=new om(this.constants_),this.topRow.elements.push($),this.topRow.capline=$.ascenderHeight):$&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new fE(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===co.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,ot=this.topRow.hasRightSquareCorner(this.block_)?au:cu,this.topRow.elements.push(new ot(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===co.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new au(this.constants_)):this.bottomRow.elements.push(new cu(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new mE(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new au(this.constants_,"right")):this.bottomRow.elements.push(new cu(this.constants_,"right"))}addInput_($,_e){this.isInline&&$.type===co.VALUE?(_e.elements.push(new im(this.constants_,$)),_e.hasInlineInput=!0):$.type===co.STATEMENT?(_e.elements.push(new lu(this.constants_,$)),_e.hasStatement=!0):$.type===co.VALUE?(_e.elements.push(new d_(this.constants_,$)),_e.hasExternalInput=!0):$.type===co.DUMMY&&(_e.minHeight=Math.max(_e.minHeight,$.getSourceBlock()&&$.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),_e.hasDummyInput=!0),_e.align===null&&(_e.align=$.align)}shouldStartNewRow_($,_e){return _e?$.type===co.STATEMENT||_e.type===co.STATEMENT?!0:$.type===co.VALUE||$.type===co.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let $=0,_e;_e=this.rows[$];$++){const ot=_e.elements;if(_e.elements=[],_e.startsWithElemSpacer()&&_e.elements.push(new fr(this.constants_,this.getInRowSpacing_(null,ot[0]))),ot.length){for(let rt=0;rt<ot.length-1;rt++){_e.elements.push(ot[rt]);const lt=this.getInRowSpacing_(ot[rt],ot[rt+1]);_e.elements.push(new fr(this.constants_,lt))}_e.elements.push(ot[ot.length-1]),_e.endsWithElemSpacer()&&_e.elements.push(new fr(this.constants_,this.getInRowSpacing_(ot[ot.length-1],null)))}}}getInRowSpacing_($,_e){if(!$&&_e&&Rt.isStatementInput(_e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if($&&Rt.isInput($)&&!_e){if(Rt.isExternalInput($))return this.constants_.NO_PADDING;if(Rt.isInlineInput($))return this.constants_.LARGE_PADDING;if(Rt.isStatementInput($))return this.constants_.NO_PADDING}return $&&Rt.isLeftSquareCorner($)&&_e&&(Rt.isPreviousConnection(_e)||Rt.isNextConnection(_e))?_e.notchOffset:$&&Rt.isLeftRoundedCorner($)&&_e&&(Rt.isPreviousConnection(_e)||Rt.isNextConnection(_e))?_e.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let $=0,_e=0,ot=0;for(let lt=0,ut;ut=this.rows[lt];lt++){if(ut.measure(),_e=Math.max(_e,ut.width),ut.hasStatement){var rt=ut.getLastInput();let pt,vt;rt=ut.width-((vt=(pt=rt)==null?void 0:pt.width)!=null?vt:0),$=Math.max($,rt)}ot=Math.max(ot,ut.widthWithConnectedBlocks)}this.statementEdge=$,this.width=_e;for(let lt=0,ut;ut=this.rows[lt];lt++)ut.hasStatement&&(ut.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(_e,ot),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let _e=0,ot;ot=this.rows[_e];_e++)if(ot.hasStatement)this.alignStatementRow_(ot);else{var $=ot.width;$=this.getDesiredRowWidth_(ot)-$,0<$&&this.addAlignmentPadding_(ot,$),Rt.isTopOrBottomRow(ot)&&(ot.widthWithConnectedBlocks=ot.width)}}getDesiredRowWidth_($){return this.width-this.startX}addAlignmentPadding_($,_e){const ot=$.getFirstSpacer(),rt=$.getLastSpacer();if(($.hasExternalInput||$.hasStatement)&&($.widthWithConnectedBlocks+=_e),$.align===tt.Align$$module$build$src$core$input.LEFT&&rt)rt.width+=_e;else if($.align===tt.Align$$module$build$src$core$input.CENTRE&&ot&&rt)ot.width+=_e/2,rt.width+=_e/2;else if($.align===tt.Align$$module$build$src$core$input.RIGHT&&ot)ot.width+=_e;else if(rt)rt.width+=_e;else return;$.width+=_e}alignStatementRow_($){const _e=$.getLastInput();if(_e){var ot=$.width-_e.width,rt=this.statementEdge;ot=rt-ot,0<ot&&this.addAlignmentPadding_($,ot),ot=$.width,rt=this.getDesiredRowWidth_($),_e.width+=rt-ot,_e.height=Math.max(_e.height,$.height),$.width+=rt-ot,$.widthWithConnectedBlocks=Math.max($.width,this.statementEdge+$.connectedBlockWidths)}}addRowSpacing_(){const $=this.rows;this.rows=[];for(let _e=0;_e<$.length;_e++)this.rows.push($[_e]),_e!==$.length-1&&this.rows.push(this.makeSpacerRow_($[_e],$[_e+1]))}makeSpacerRow_($,_e){var ot=this.getSpacerRowHeight_($,_e);const rt=this.getSpacerRowWidth_($,_e);return ot=new nm(this.constants_,ot,rt),$.hasStatement&&(ot.followsStatement=!0),_e.hasStatement&&(ot.precedesStatement=!0),ot}getSpacerRowWidth_($,_e){return this.width-this.startX}getSpacerRowHeight_($,_e){return this.constants_.MEDIUM_PADDING}getElemCenterline_($,_e){return Rt.isSpacer(_e)?$.yPos+_e.height/2:Rt.isBottomRow($)?($=$.yPos+$.height-$.descenderHeight,Rt.isNextConnection(_e)?$+_e.height/2:$-_e.height/2):Rt.isTopRow($)?Rt.isHat(_e)?$.capline-_e.height/2:$.capline+_e.height/2:$.yPos+$.height/2}recordElemPositions_($){let _e=$.xPos;for(let ot=0,rt;rt=$.elements[ot];ot++)Rt.isSpacer(rt)&&(rt.height=$.height),rt.xPos=_e,rt.centerline=this.getElemCenterline_($,rt),_e+=rt.width}finalize_(){let $=0,_e=0;for(let ot=0,rt;rt=this.rows[ot];ot++)rt.yPos=_e,rt.xPos=this.startX,_e+=rt.height,$=Math.max($,rt.widthWithConnectedBlocks),this.recordElemPositions_(rt);if(this.outputConnection&&this.block_.nextConnection){const ot=this.block_.nextConnection.targetBlock();ot&&($=Math.max($,ot.getHeightWidth().width))}this.widthWithChildren=$+this.startX,this.height=_e,this.startY=this.topRow.capline,this.bottomRow.baseline=_e-this.bottomRow.descenderHeight}},EE=class extends Fr{constructor($,_e,ot,rt){let lt=$?$.workspace.id:void 0;rt&&rt.getType()===Dt.types.WORKSPACE&&(lt=rt.getLocation().id),super(lt),this.type=Ul,this.blockId=$==null?void 0:$.id,this.oldNode=ot||void 0,this.newNode=rt,this.isCursor=_e}toJson(){const $=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return $.isCursor=this.isCursor,$.blockId=this.blockId,$.oldNode=this.oldNode,$.newNode=this.newNode,$}fromJson($){super.fromJson($),this.isCursor=$.isCursor,this.blockId=$.blockId,this.oldNode=$.oldNode,this.newNode=$.newNode}};$o(Bt.EVENT,Ul,EE);var ER="blocklyCursor",IR="blocklyMarker",bR=.75,lm=class{constructor($,_e,ot){this.workspace=$,this.marker=ot,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=_e,$=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=ot.colour||$}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const $=this.isCursor()?ER:IR;return this.svgGroup_=Lt(Ot.G,{class:$}),this.createDomInternal_(),this.svgGroup_}setParent_($){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),$.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),$.setMarkerSvg(this.getSvgRoot())),this.parent_=$}draw($,_e){if(_e){this.constants_=this.workspace.getRenderer().getConstants();var ot=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||ot,this.applyColour_(_e),this.showAtLocation_(_e),this.fireMarkerEvent_($,_e),$=this.currentMarkerSvg.childNodes[0],$!==void 0&&$.beginElement&&$.beginElement()}else this.hide()}showAtLocation_($){const _e=$.getLocation().type;$.getType()===Dt.types.BLOCK?this.showWithBlock_($):$.getType()===Dt.types.OUTPUT?this.showWithOutput_($):_e===Vt.INPUT_VALUE?this.showWithInput_($):_e===Vt.NEXT_STATEMENT?this.showWithNext_($):$.getType()===Dt.types.PREVIOUS?this.showWithPrevious_($):$.getType()===Dt.types.FIELD?this.showWithField_($):$.getType()===Dt.types.WORKSPACE?this.showWithCoordinates_($):$.getType()===Dt.types.STACK&&this.showWithStack_($)}showWithBlockPrevOutput_($){$=$.getSourceBlock();const _e=$.width;var ot=$.height,rt=ot*bR;const lt=this.constants_.CURSOR_BLOCK_PADDING;$.previousConnection?(ot=this.constants_.shapeFor($.previousConnection),this.positionPrevious_(_e,lt,rt,ot)):$.outputConnection?(rt=this.constants_.shapeFor($.outputConnection),this.positionOutput_(_e,ot,rt)):this.positionBlock_(_e,lt,rt),this.setParent_($),this.showCurrent_()}showWithBlock_($){this.showWithBlockPrevOutput_($)}showWithPrevious_($){this.showWithBlockPrevOutput_($)}showWithOutput_($){this.showWithBlockPrevOutput_($)}showWithCoordinates_($){var _e=$.getWsCoordinate();$=_e.x,_e=_e.y,this.workspace.RTL&&($-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_($,_e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_($){$=$.getLocation();const _e=$.getSize().width,ot=$.getSize().height;this.positionRect_(0,0,_e,ot),this.setParent_($),this.showCurrent_()}showWithInput_($){$=$.getLocation();const _e=$.getSourceBlock();this.positionInput_($),this.setParent_(_e),this.showCurrent_()}showWithNext_($){var _e=$.getLocation();$=_e.getSourceBlock();let ot=0;_e=_e.getOffsetInBlock().y;const rt=$.getHeightWidth().width;this.workspace.RTL&&(ot=-rt),this.positionLine_(ot,_e,rt),this.setParent_($),this.showCurrent_()}showWithStack_($){$=$.getLocation();var _e=$.getHeightWidth();const ot=_e.width+this.constants_.CURSOR_STACK_PADDING;_e=_e.height+this.constants_.CURSOR_STACK_PADDING;const rt=-this.constants_.CURSOR_STACK_PADDING/2,lt=-this.constants_.CURSOR_STACK_PADDING/2;let ut=rt;this.workspace.RTL&&(ut=-(ot+rt)),this.positionRect_(ut,lt,ot,_e),this.setParent_($),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_($,_e,ot){if($=wo(-_e,ot)+jt("V",-_e)+jt("H",$+2*_e)+jt("V",ot),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",$),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_($){const _e=$.getOffsetInBlock().x,ot=$.getOffsetInBlock().y;$=_i(0,0)+this.constants_.shapeFor($).pathDown,this.markerInput_.setAttribute("d",$),this.markerInput_.setAttribute("transform","translate("+_e+","+ot+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_($,_e,ot){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${$}`),this.markerSvgLine_.setAttribute("y",`${_e}`),this.markerSvgLine_.setAttribute("width",`${ot}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_($,_e,ot){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");$=wo($,0)+jt("h",-($-ot.width))+jt("v",this.constants_.TAB_OFFSET_FROM_TOP)+ot.pathDown+jt("V",_e)+jt("H",$),this.markerBlock_.setAttribute("d",$),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_($,_e,ot,rt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");$=wo(-_e,ot)+jt("V",-_e)+jt("H",this.constants_.NOTCH_OFFSET_LEFT)+rt.pathLeft+jt("H",$+2*_e)+jt("V",ot),this.markerBlock_.setAttribute("d",$),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_($,_e,ot,rt){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${$}`),this.markerSvgRect_.setAttribute("y",`${_e}`),this.markerSvgRect_.setAttribute("width",`${ot}`),this.markerSvgRect_.setAttribute("height",`${rt}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_($){$.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_($,_e){const ot=_e.getSourceBlock();$=new(oo(Ul))(ot,this.isCursor(),$,_e),to($)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Lt(Ot.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Lt(Ot.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=Lt(Ot.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=Lt(Ot.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=Lt(Ot.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const $=this.getBlinkProperties_();Lt(Ot.ANIMATE,$,this.markerSvgLine_),Lt(Ot.ANIMATE,$,this.markerInput_),Lt(Ot.ANIMATE,Object.assign({},$,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_($){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&($=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",$),this.markerInput_.firstElementChild.setAttribute("values",$),this.markerBlock_.firstElementChild.setAttribute("values",$))}dispose(){this.svgGroup_&&go(this.svgGroup_)}},__=class{constructor($,_e,ot){this.markerSvg=this.cursorSvg=null,this.constants=ot,this.style=_e,this.svgRoot=$,this.svgPath=Lt(Ot.PATH,{class:"blocklyPath"},this.svgRoot)}setPath($){this.svgPath.setAttribute("d",$)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg($){$?(this.svgRoot.appendChild($),this.cursorSvg=$):this.cursorSvg=null}setMarkerSvg($){$?(this.cursorSvg?this.svgRoot.insertBefore($,this.cursorSvg):this.svgRoot.appendChild($),this.markerSvg=$):this.markerSvg=null}applyColour($){if(!this.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_($.isShadow()),this.updateDisabled_(!$.isEnabled()||$.getInheritedDisabled())}setStyle($){this.style=$}setClass_($,_e){$&&(_e?Ft(this.svgRoot,$):uo(this.svgRoot,$))}updateHighlighted($){$?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_($){if($){if(!this.style.colourSecondary)throw Error("The renderer did not properly initialize the block style");this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_($){this.setClass_("blocklyDisabled",$),$&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected($){this.setClass_("blocklySelected",$)}updateDraggingDelete($){this.setClass_("blocklyDraggingDelete",$)}updateInsertionMarker($){this.setClass_("blocklyInsertionMarker",$)}updateMovable($){this.setClass_("blocklyDraggable",$)}updateReplacementFade($){this.setClass_("blocklyReplaceable",$)}updateShapeForInputHighlight($,_e){}},IE="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Er=class{constructor($){this.localConnection_=this.closestConnection_=this.lastMarker_=this.lastOnStack_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,xo($),this.topBlock_=$,this.workspace_=$.workspace,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.availableConnections_=this.initAvailableConnections_()}dispose(){this.availableConnections_.length=0,Fo();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{Ho()}}updateAvailableConnections(){this.availableConnections_=this.initAvailableConnections_()}wouldDeleteBlock(){return this.wouldDeleteBlock_}wouldConnectBlock(){return!!this.closestConnection_}applyConnections(){if(this.closestConnection_){if(!this.localConnection_)throw Error("Cannot apply connections because there is no local connection");if(Fo(),this.hidePreview_(),Ho(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered){const $=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;d$($.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}}}update($,_e){const ot=this.getCandidate_($);((this.wouldDeleteBlock_=this.shouldDelete_(ot,_e))||this.shouldUpdatePreviews_(ot,$))&&(Fo(),this.maybeHidePreview_(ot),this.maybeShowPreview_(ot),Ho())}createMarkerBlock_($){var _e=$.type;Fo();let ot;try{if(ot=this.workspace_.newBlock(_e),ot.setInsertionMarker(!0),$.saveExtraState){var rt=$.saveExtraState();rt&&ot.loadExtraState&&ot.loadExtraState(rt)}else if($.mutationToDom){const lt=$.mutationToDom();lt&&ot.domToMutation&&ot.domToMutation(lt)}for(_e=0;_e<$.inputList.length;_e++){const lt=$.inputList[_e];if(lt.name===$a)continue;const ut=ot.inputList[_e];if(!ut)throw Error(IE.replace("%1","an input"));for(rt=0;rt<lt.fieldRow.length;rt++){const pt=lt.fieldRow[rt],vt=ut.fieldRow[rt];if(!vt)throw Error(IE.replace("%1","a field"));vt.setValue(pt.getValue())}}ot.setCollapsed($.isCollapsed()),ot.setInputsInline($.getInputsInline()),ot.initSvg(),ot.getSvgRoot().setAttribute("visibility","hidden")}finally{Ho()}return ot}initAvailableConnections_(){const $=this.topBlock_.getConnections_(!1),_e=this.topBlock_.lastConnectionInStack(!0);if(_e&&_e!==this.topBlock_.nextConnection){if($.push(_e),this.lastOnStack_=_e,this.lastMarker_){Fo();try{this.lastMarker_.dispose()}finally{Ho()}}this.lastMarker_=this.createMarkerBlock_(_e.getSourceBlock())}return $}shouldUpdatePreviews_($,_e){var ot=$.local;const rt=$.closest;if($=$.radius,ot&&rt){if(this.localConnection_&&this.closestConnection_)return this.closestConnection_===rt&&this.localConnection_===ot?!1:(ot=this.localConnection_.x+_e.x-this.closestConnection_.x,_e=this.localConnection_.y+_e.y-this.closestConnection_.y,_e=Math.sqrt(ot*ot+_e*_e),!(rt&&$>_e-tt.config$$module$build$src$core$config.currentConnectionPreference));if(this.localConnection_||this.closestConnection_)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!this.localConnection_||!this.closestConnection_);return console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0}getCandidate_($){let _e=this.getStartRadius_(),ot=null,rt=null;this.markerConnection_&&this.markerConnection_.isConnected()||this.updateAvailableConnections();for(let lt=0;lt<this.availableConnections_.length;lt++){const ut=this.availableConnections_[lt],pt=ut.closest(_e,$);pt.connection&&(ot=pt.connection,rt=ut,_e=pt.radius)}return{closest:ot,local:rt,radius:_e}}getStartRadius_(){return this.closestConnection_&&this.localConnection_?tt.config$$module$build$src$core$config.connectingSnapRadius:tt.config$$module$build$src$core$config.snapRadius}shouldDelete_($,_e){return _e&&this.workspace_.getComponentManager().hasCapability(_e.id,Ko.Capability.DELETE_AREA)?_e.wouldDelete(this.topBlock_,$&&!!$.closest):!1}maybeShowPreview_($){if(!this.wouldDeleteBlock_){var _e=$.closest;$=$.local,_e&&(_e===this.closestConnection_||_e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=_e,this.localConnection_=$,this.showPreview_()))}}showPreview_(){if(!this.closestConnection_)throw Error("Cannot show the preview because there is no closest connection");if(!this.localConnection_)throw Error("Cannot show the preview because there is no local connection");const $=this.closestConnection_,_e=this.workspace_.getRenderer();switch(_e.getConnectionPreviewMethod($,this.localConnection_,this.topBlock_)){case Er.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case Er.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case Er.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}$&&_e.shouldHighlightConnection($)&&$.highlight()}maybeHidePreview_($){if($.closest){const _e=this.closestConnection_!==$.closest;$=this.localConnection_!==$.local,this.closestConnection_&&this.localConnection_&&(_e||$||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null}hidePreview_(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()}showInsertionMarker_(){if(!this.localConnection_)throw Error("Cannot show the insertion marker because there is no local connection");if(!this.closestConnection_)throw Error("Cannot show the insertion marker because there is no closest connection");const $=this.localConnection_,_e=this.closestConnection_,ot=this.lastOnStack_&&$===this.lastOnStack_;let rt=ot?this.lastMarker_:this.firstMarker_;if(!rt)throw Error("Cannot show the insertion marker because there is no insertion marker block");let lt;try{lt=rt.getMatchingConnection($.getSourceBlock(),$)}catch{if(this.firstMarker_=this.createMarkerBlock_(this.topBlock_),rt=ot?this.lastMarker_:this.firstMarker_,!rt)throw Error("Cannot show the insertion marker because there is no insertion marker block");lt=rt.getMatchingConnection($.getSourceBlock(),$)}if(!lt)throw Error("Cannot show the insertion marker because there is no associated connection");if(lt===this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");rt.render(),rt.rendered=!0,rt.getSvgRoot().setAttribute("visibility","visible"),lt&&_e&&rt.positionNearConnection(lt,_e),_e&&lt.connect(_e),this.markerConnection_=lt}hideInsertionMarker_(){if(this.markerConnection_){var $=this.markerConnection_,_e=$.getSourceBlock(),ot=_e.nextConnection,rt=_e.previousConnection,lt=_e.outputConnection;if(lt=$.type===Vt.INPUT_VALUE&&!(lt&&lt.targetConnection),!($!==ot||rt&&rt.targetConnection)||lt?$.targetBlock().unplug(!1):$.type===Vt.NEXT_STATEMENT&&$!==ot?((ot=$.targetConnection)&&ot.getSourceBlock().unplug(!1),rt=rt?rt.targetConnection:null,_e.unplug(!0),rt&&ot&&rt.connect(ot)):_e.unplug(!0),$.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,($=_e.getSvgRoot())&&$.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}showInsertionInputOutline_(){if(!this.closestConnection_)throw Error("Cannot show the insertion marker outline because there is no closest connection");const $=this.closestConnection_;this.highlightedBlock_=$.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput($,!0)}hideInsertionInputOutline_(){if(!this.highlightedBlock_)throw Error("Cannot hide the insertion marker outline because there is no highlighted block");if(!this.closestConnection_)throw Error("Cannot hide the insertion marker outline because there is no closest connection");this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null}showReplacementFade_(){if(!this.closestConnection_)throw Error("Cannot show the replacement fade because there is no closest connection");if(this.fadedBlock_=this.closestConnection_.targetBlock(),!this.fadedBlock_)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock_.fadeForReplacement(!0)}hideReplacementFade_(){if(!this.fadedBlock_)throw Error("Cannot hide the replacement because there is no faded block");this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null}getInsertionMarkers(){const $=[];return this.firstMarker_&&$.push(this.firstMarker_),this.lastMarker_&&$.push(this.lastMarker_),$}};(function($){$=$.PREVIEW_TYPE||($.PREVIEW_TYPE={}),$[$.INSERTION_MARKER=0]="INSERTION_MARKER",$[$.INPUT_OUTLINE=1]="INPUT_OUTLINE",$[$.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Er||(Er={})),Er.PREVIEW_TYPE;var du=class{constructor($){this.overrides=null,this.name=$}getClassName(){return this.name+"-renderer"}init($,_e){this.constants_=this.makeConstants_(),_e&&(this.overrides=_e,Object.assign(this.constants_,_e)),this.constants_.setTheme($),this.constants_.init()}createDom($,_e){this.constants_.createDom($,this.name+"-"+_e.name,"."+this.getClassName()+"."+_e.getClassName())}refreshDom($,_e){const ot=this.getConstants();ot.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=ot.randomIdentifier,this.constants_.setTheme(_e),this.constants_.init(),this.createDom($,_e)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new uu}makeRenderInfo_($){return new Qs(this,$)}makeDrawer_($,_e){return new hu($,_e)}makeDebugger_(){return new Tr(this.getConstants())}makeMarkerDrawer($,_e){return new lm($,this.getConstants(),_e)}makePathObject($,_e){return new __($,_e,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection($){return!0}orphanCanConnectAtEnd($,_e,ot){return!!vo.getConnectionForOrphanedConnection($,ot===Vt.OUTPUT_VALUE?_e.outputConnection:_e.previousConnection)}getConnectionPreviewMethod($,_e,ot){return _e.type===Vt.OUTPUT_VALUE||_e.type===Vt.PREVIOUS_STATEMENT?!$.isConnected()||this.orphanCanConnectAtEnd(ot,$.targetBlock(),_e.type)?Er.PREVIEW_TYPE.INSERTION_MARKER:Er.PREVIEW_TYPE.REPLACEMENT_FADE:Er.PREVIEW_TYPE.INSERTION_MARKER}render($){Fu()&&!$.renderingDebugger&&($.renderingDebugger=this.makeDebugger_());const _e=this.makeRenderInfo_($);_e.measure(),this.makeDrawer_($,_e).draw()}},Ro={};Ro.BottomRow=tm,Ro.Connection=ps,Ro.ConstantProvider=uu,Ro.Debug=Tr,Ro.Drawer=hu,Ro.ExternalValueInput=d_,Ro.Field=gs,Ro.Hat=om,Ro.Icon=pE,Ro.InRowSpacer=fr,Ro.InlineInput=im,Ro.InputConnection=Pn,Ro.InputRow=rm,Ro.JaggedEdge=gE,Ro.MarkerSvg=lm,Ro.Measurable=gn,Ro.NextConnection=mE,Ro.OutputConnection=$E,Ro.PathObject=__,Ro.PreviousConnection=fE,Ro.RenderInfo=Qs,Ro.Renderer=du,Ro.RoundCorner=cu,Ro.Row=su,Ro.SpacerRow=nm,Ro.SquareCorner=au,Ro.StatementInput=lu,Ro.TopRow=sm,Ro.Types=Rt,Ro.init=P$,Ro.register=Al,Ro.stopDebugger=RS,Ro.unregister=SS;var bE=class{constructor($,_e){this.workspace=$,this.theme=_e,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme($){var _e=this.theme;this.theme=$,($=this.workspace.getInjectionDiv())&&(_e&&(_e=_e.getClassName())&&uo($,_e),(_e=this.theme.getClassName())&&Ft($,_e));for(let ot=0,rt;rt=this.subscribedWorkspaces_[ot];ot++)rt.refreshTheme();for(const[ot,rt]of this.componentDB)for(const lt of rt){$=lt.element,_e=lt.propertyName;const ut=this.theme&&this.theme.getComponentStyle(ot);$.style[_e]=ut||""}for(const ot of this.subscribedWorkspaces_)ot.hideChaff()}subscribeWorkspace($){this.subscribedWorkspaces_.push($)}unsubscribeWorkspace($){if(!cr(this.subscribedWorkspaces_,$))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe($,_e,ot){this.componentDB.has(_e)||this.componentDB.set(_e,[]),this.componentDB.get(_e).push({element:$,propertyName:ot}),_e=this.theme&&this.theme.getComponentStyle(_e),$.style[ot]=_e||""}unsubscribe($){if($)for(const[_e,ot]of this.componentDB){for(let rt=ot.length-1;0<=rt;rt--)ot[rt].element===$&&ot.splice(rt,1);ot.length||this.componentDB.delete(_e)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},vR=5,SR=6,vE=class extends Dn{constructor(){super(...arguments),this.isMultiTouch_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.onUpWrapper_=this.onMoveWrapper_=this.isPinchZoomEnabled_=this.onStartWrapper_=null}doStart($){if(!this.startWorkspace_)throw Error("Cannot start the touch event becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,super.doStart($),!this.isEnding_&&mt($)&&this.handleTouchStart($)}bindMouseEvents($){this.onStartWrapper_=Et(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Et(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Et(document,"mouseup",null,this.handleUp.bind(this),!0),$.preventDefault(),$.stopPropagation()}handleStart($){!this.isDragging()&&mt($)&&(this.handleTouchStart($),this.isMultiTouch()&&st())}handleMove($){this.isDragging()?ht($)&&super.handleMove($):this.isMultiTouch()?(mt($)&&this.handleTouchMove($),st()):super.handleMove($)}handleUp($){mt($)&&!this.isDragging()&&this.handleTouchEnd($),!this.isMultiTouch()||this.isDragging()?ht($)&&super.handleUp($):($.preventDefault(),$.stopPropagation(),this.dispose())}isMultiTouch(){return this.isMultiTouch_}dispose(){super.dispose(),this.onStartWrapper_&&kt(this.onStartWrapper_)}handleTouchStart($){var _e=gt($);this.cachedPoints.set(_e,this.getTouchPoint($));var ot=Array.from(this.cachedPoints.keys());ot.length===2&&(_e=this.cachedPoints.get(ot[0]),ot=this.cachedPoints.get(ot[1]),this.startDistance_=Ht.distance(_e,ot),this.isMultiTouch_=!0,$.preventDefault())}handleTouchMove($){const _e=gt($);this.cachedPoints.set(_e,this.getTouchPoint($)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_($):super.handleMove($)}handlePinch_($){var _e=Array.from(this.cachedPoints.keys()),ot=this.cachedPoints.get(_e[0]);if(_e=this.cachedPoints.get(_e[1]),ot=Ht.distance(ot,_e)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(_e=ot-this.previousScale_,_e=0<_e?_e*vR:_e*SR,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const rt=this.startWorkspace_,lt=It($,rt.getParentSvg(),rt.getInverseScreenCTM());rt.zoom(lt.x,lt.y,_e)}this.previousScale_=ot,$.preventDefault()}handleTouchEnd($){$=gt($),this.cachedPoints.has($)&&this.cachedPoints.delete($),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint($){return this.startWorkspace_?new Ht($.changedTouches?$.changedTouches[0].pageX:$.pageX,$.changedTouches?$.changedTouches[0].pageY:$.pageY):null}},cm="VARIABLE_DYNAMIC",Yn={};Yn.CATEGORY_NAME=cm,Yn.flyoutCategory=ip,Yn.flyoutCategoryBlocks=G$,Yn.onCreateVariableButtonClick_Colour=U$,Yn.onCreateVariableButtonClick_Number=B$,Yn.onCreateVariableButtonClick_String=x$;var SE=class{canConnect($,_e,ot,rt){return this.canConnectWithReason($,_e,ot,rt)===vo.CAN_CONNECT}canConnectWithReason($,_e,ot,rt){const lt=this.doSafetyChecks($,_e);return lt!==vo.CAN_CONNECT?lt:this.doTypeChecks($,_e)?ot&&!this.doDragChecks($,_e,rt||0)?vo.REASON_DRAG_CHECKS_FAILED:vo.CAN_CONNECT:vo.REASON_CHECKS_FAILED}getErrorMessage($,_e,ot){switch($){case vo.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case vo.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case vo.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case vo.REASON_TARGET_NULL:return"Target connection is null.";case vo.REASON_CHECKS_FAILED:return"Connection checks failed. "+(_e+" expected "+_e.getCheck()+", found "+ot.getCheck());case vo.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case vo.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case vo.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks($,_e){if(!$||!_e)return vo.REASON_TARGET_NULL;let ot,rt,lt;return $.isSuperior()?(ot=$.getSourceBlock(),rt=_e.getSourceBlock(),lt=_e):(rt=$.getSourceBlock(),ot=_e.getSourceBlock(),lt=$,$=_e),ot===rt?vo.REASON_SELF_CONNECTION:lt.type!==ds[$.type]?vo.REASON_WRONG_TYPE:ot.workspace!==rt.workspace?vo.REASON_DIFFERENT_WORKSPACES:ot.isShadow()&&!rt.isShadow()?vo.REASON_SHADOW_PARENT:lt.type===Vt.OUTPUT_VALUE&&rt.previousConnection&&rt.previousConnection.isConnected()||lt.type===Vt.PREVIOUS_STATEMENT&&rt.outputConnection&&rt.outputConnection.isConnected()?vo.REASON_PREVIOUS_AND_OUTPUT:vo.CAN_CONNECT}doTypeChecks($,_e){if($=$.getCheck(),_e=_e.getCheck(),!$||!_e)return!0;for(let ot=0;ot<$.length;ot++)if(_e.indexOf($[ot])!==-1)return!0;return!1}doDragChecks($,_e,ot){if($.distanceFrom(_e)>ot||_e.getSourceBlock().isInsertionMarker())return!1;switch(_e.type){case Vt.PREVIOUS_STATEMENT:return this.canConnectToPrevious_($,_e);case Vt.OUTPUT_VALUE:if(_e.isConnected()&&!_e.targetBlock().isInsertionMarker()||$.isConnected())return!1;break;case Vt.INPUT_VALUE:if(_e.isConnected()&&!_e.targetBlock().isMovable()&&!_e.targetBlock().isShadow())return!1;break;case Vt.NEXT_STATEMENT:if(_e.isConnected()&&!$.getSourceBlock().nextConnection&&!_e.targetBlock().isShadow()&&_e.targetBlock().nextConnection)return!1;break;default:return!1}return rs.indexOf(_e)===-1}canConnectToPrevious_($,_e){return $.targetConnection||rs.indexOf(_e)!==-1?!1:_e.targetConnection?($=_e.targetBlock(),$.isInsertionMarker()?!$.getPreviousBlock():!1):!0}};$o(Bt.CONNECTION_CHECKER,kn,SE);var RE=class extends Zu{constructor($){super($),this.type=As,$&&(this.varType=$.type,this.varName=$.name)}toJson(){const $=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return $.varType=this.varType,$.varName=this.varName,$}fromJson($){super.fromJson($),this.varType=$.varType,this.varName=$.varName}run($){const _e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");$?_e.deleteVariableById(this.varId):_e.createVariable(this.varName,this.varType,this.varId)}};$o(Bt.EVENT,As,RE);var yE=class extends Zu{constructor($,_e){super($),this.type=xl,$&&(this.oldName=$.name,this.newName=typeof _e>"u"?"":_e)}toJson(){const $=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return $.oldName=this.oldName,$.newName=this.newName,$}fromJson($){super.fromJson($),this.oldName=$.oldName,this.newName=$.newName}run($){const _e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");$?_e.renameVariableById(this.varId,this.newName):_e.renameVariableById(this.varId,this.oldName)}};$o(Bt.EVENT,xl,yE);var am=class{constructor($){this.workspace=$,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable($,_e){const ot=this.getVariable(_e,$.type),rt=this.workspace.getAllBlocks(!1);qt(!0);try{ot&&ot.getId()!==$.getId()?this.renameVariableWithConflict_($,_e,ot,rt):this.renameVariableAndUses_($,_e,rt)}finally{qt(!1)}}renameVariableById($,_e){const ot=this.getVariableById($);if(!ot)throw Error("Tried to rename a variable that didn't exist. ID: "+$);this.renameVariable(ot,_e)}renameVariableAndUses_($,_e,ot){for(to(new(oo(xl))($,_e)),$.name=_e,_e=0;_e<ot.length;_e++)ot[_e].updateVarName($)}renameVariableWithConflict_($,_e,ot,rt){const lt=$.type;for(_e!==ot.name&&this.renameVariableAndUses_(ot,_e,rt),_e=0;_e<rt.length;_e++)rt[_e].renameVarById($.getId(),ot.getId());to(new(oo(As))($)),cr(this.variableMap.get(lt),$)}createVariable($,_e,ot){var rt=this.getVariable($,_e);if(rt){if(ot&&rt.getId()!==ot)throw Error('Variable "'+$+'" is already in use and its id is "'+rt.getId()+'" which conflicts with the passed in id, "'+ot+'".');return rt}if(ot&&this.getVariableById(ot))throw Error('Variable id, "'+ot+'", is already in use.');return rt=ot||vn(),_e=_e||"",rt=new Xl(this.workspace,$,_e,rt),$=this.variableMap.get(_e)||[],$.push(rt),this.variableMap.delete(_e),this.variableMap.set(_e,$),rt}deleteVariable($){const _e=$.getId(),ot=this.variableMap.get($.type);if(ot){for(let rt=0;rt<ot.length;rt++)if(ot[rt].getId()===_e){ot.splice(rt,1),to(new(oo(As))($));break}}}deleteVariableById($){const _e=this.getVariableById($);if(_e){var ot=_e.name;const rt=this.getVariableUsesById($);for(let lt=0,ut;ut=rt[lt];lt++)if(ut.type==="procedures_defnoreturn"||ut.type==="procedures_defreturn"){$=String(ut.getFieldValue("NAME")),ot=io.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",ot).replace("%2",$),vu(ot);return}1<rt.length?(ot=io.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(rt.length)).replace("%2",ot),S_(ot,lt=>{lt&&_e&&this.deleteVariableInternal(_e,rt)})):this.deleteVariableInternal(_e,rt)}else console.warn("Can't delete non-existent variable: "+$)}deleteVariableInternal($,_e){const ot=Lo();ot||qt(!0);try{for(let rt=0;rt<_e.length;rt++)_e[rt].dispose(!0);this.deleteVariable($)}finally{ot||qt(!1)}}getVariable($,_e){if(_e=this.variableMap.get(_e||"")){for(let ot=0,rt;rt=_e[ot];ot++)if(Lr.equals(rt.name,$))return rt}return null}getVariableById($){for(const[,_e]of this.variableMap)for(const ot of _e)if(ot.getId()===$)return ot;return null}getVariablesOfType($){return($=this.variableMap.get($||""))?$.slice():[]}getVariableTypes($){const _e=new Set(this.variableMap.keys());if($&&$.getPotentialVariableMap())for(const ot of $.getPotentialVariableMap().variableMap.keys())_e.add(ot);return _e.has("")||_e.add(""),Array.from(_e.values())}getAllVariables(){let $=[];for(const _e of this.variableMap.values())$=$.concat(_e);return $}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map($=>$.name)}getVariableUsesById($){const _e=[],ot=this.workspace.getAllBlocks(!1);for(let rt=0;rt<ot.length;rt++){const lt=ot[rt].getVarModels();if(lt)for(let ut=0;ut<lt.length;ut++)lt[ut].getId()===$&&_e.push(ot[rt])}return _e}},xn=class{constructor($){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks_=[],this.topComments_=[],this.commentDB=new Map,this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.potentialVariableMap_=null,this.id=vn(),Jt(this),this.options=$||new Wr({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(Rr(Bt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap_=new am(this)}get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}dispose(){this.listeners_.length=0,this.clear(),Kt(this)}sortObjects_($,_e){return $=$.getRelativeToSurfaceXY(),_e=_e.getRelativeToSurfaceXY(),$.y+xn.prototype.sortObjects_.offset*$.x-(_e.y+xn.prototype.sortObjects_.offset*_e.x)}addTopBlock($){this.topBlocks_.push($)}removeTopBlock($){if(!cr(this.topBlocks_,$))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks($){const _e=[].concat(this.topBlocks_);return $&&1<_e.length&&(this.sortObjects_.offset=Math.sin(Sr(xn.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),_e.sort(this.sortObjects_)),_e}addTypedBlock($){this.typedBlocksDB.has($.type)||this.typedBlocksDB.set($.type,[]),this.typedBlocksDB.get($.type).push($)}removeTypedBlock($){cr(this.typedBlocksDB.get($.type),$),this.typedBlocksDB.get($.type).length||this.typedBlocksDB.delete($.type)}getBlocksByType($,_e){return this.typedBlocksDB.has($)?($=this.typedBlocksDB.get($).slice(0),_e&&$&&1<$.length&&(this.sortObjects_.offset=Math.sin(Sr(xn.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),$.sort(this.sortObjects_)),$.filter(function(ot){return!ot.isInsertionMarker()})):[]}addTopComment($){this.topComments_.push($),this.commentDB.has($.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+$.id+'"'),this.commentDB.set($.id,$)}removeTopComment($){if(!cr(this.topComments_,$))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete($.id)}getTopComments($){const _e=[].concat(this.topComments_);return $&&1<_e.length&&(this.sortObjects_.offset=Math.sin(Sr(xn.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),_e.sort(this.sortObjects_)),_e}getAllBlocks($){if($){var _e=this.getTopBlocks(!0);$=[];for(let ot=0;ot<_e.length;ot++)$.push(..._e[ot].getDescendants(!0))}else for($=this.getTopBlocks(!1),_e=0;_e<$.length;_e++)$.push(...$[_e].getChildren(!1));return $.filter(function(ot){return!ot.isInsertionMarker()})}clear(){this.isClearing=!0;try{const $=Lo();for($||qt(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();$||qt(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}}renameVariableById($,_e){this.variableMap_.renameVariableById($,_e)}createVariable($,_e,ot){return this.variableMap_.createVariable($,_e,ot)}getVariableUsesById($){return this.variableMap_.getVariableUsesById($)}deleteVariableById($){this.variableMap_.deleteVariableById($)}getVariable($,_e){return this.variableMap_.getVariable($,_e)}getVariableById($){return this.variableMap_.getVariableById($)}getVariablesOfType($){return this.variableMap_.getVariablesOfType($)}getVariableTypes(){return this.variableMap_.getVariableTypes(this)}getAllVariables(){return this.variableMap_.getAllVariables()}getAllVariableNames(){return this.variableMap_.getAllVariableNames()}getWidth(){return 0}newBlock($,_e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType($){return this.options.maxInstances?(this.options.maxInstances[$]!==void 0?this.options.maxInstances[$]:1/0)-this.getBlocksByType($,!1).length:1/0}isCapacityAvailable($){if(!this.hasBlockLimits())return!0;let _e=0;for(const ot in $){if($[ot]>this.remainingCapacityOfType(ot))return!1;_e+=$[ot]}return!(_e>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo($){var _e=$?this.redoStack_:this.undoStack_,ot=$?this.undoStack_:this.redoStack_;const rt=_e.pop();if(rt){for(var lt=[rt];_e.length&&rt.group&&rt.group===_e[_e.length-1].group;)lt.push(_e.pop());for(_e=0;_e<lt.length;_e++)ot.push(lt[_e]);lt=Iu(lt,$),pr(!1);try{for(ot=0;ot<lt.length;ot++)lt[ot].run($)}finally{pr(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,b_()}addChangeListener($){return this.listeners_.push($),$}removeChangeListener($){cr(this.listeners_,$)}fireChangeListener($){if($.recordUndo)for(this.undoStack_.push($),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let _e=0;_e<this.listeners_.length;_e++)(0,this.listeners_[_e])($)}getBlockById($){return this.blockDB.get($)||null}setBlockById($,_e){this.blockDB.set($,_e)}removeBlockById($){this.blockDB.delete($)}getCommentById($){let _e;return(_e=this.commentDB.get($))!=null?_e:null}allInputsFilled($){const _e=this.getTopBlocks(!1);for(let ot=0;ot<_e.length;ot++)if(!_e[ot].allInputsFilled($))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap_}createPotentialVariableMap(){this.potentialVariableMap_=new am(this)}getVariableMap(){return this.variableMap_}setVariableMap($){this.variableMap_=$}static getById($){return Pt($)}static getAll(){return Gt()}};xn.SCAN_ANGLE=3;var RR=100,OE=class{constructor($){this.parentWorkspace=$,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load($,_e){if($.length){try{var ot=new globalThis.Audio}catch{return}for(let lt=0;lt<$.length;lt++){const ut=$[lt],pt=ut.match(/\.(\w+)$/);if(pt&&ot.canPlayType("audio/"+pt[1])){var rt=new globalThis.Audio(ut);break}}rt&&this.sounds.set(_e,rt)}}preload(){for(const $ of this.sounds.values()){$.volume=.01;const _e=$.play();if(_e!==void 0?_e.then($.pause).catch(function(){}):$.pause(),ys||hT)break}}play($,_e){var ot=this.sounds.get($);ot?($=new Date,this.lastSound_!==null&&$.getTime()-this.lastSound_.getTime()<RR||(this.lastSound_=$,ot=ys||Ml?ot:ot.cloneNode(),ot.volume=_e===void 0?1:_e,ot.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play($,_e)}},kE=class{constructor($){this.workspace=$,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null,this.HEIGHT_=this.WIDTH_=32,this.SMALL_SPACING_=2,this.LARGE_SPACING_=11,this.MARGIN_HORIZONTAL_=this.MARGIN_VERTICAL_=20,this.svgGroup=null,this.top_=this.left_=0,this.initialized_=!1}createDom(){this.svgGroup=Lt(Ot.G,{});const $=String(Math.random()).substring(2);return this.createZoomOutSvg_($),this.createZoomInSvg_($),this.workspace.isMovable()&&this.createZoomResetSvg_($),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ko.Capability.POSITIONABLE]}),this.initialized_=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&go(this.svgGroup),this.onZoomResetWrapper_&&kt(this.onZoomResetWrapper_),this.onZoomInWrapper_&&kt(this.onZoomInWrapper_),this.onZoomOutWrapper_&&kt(this.onZoomOutWrapper_)}getBoundingRectangle(){let $=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup&&($+=this.LARGE_SPACING_+this.HEIGHT_),new Do(this.top_,this.top_+$,this.left_,this.left_+this.WIDTH_)}position($,_e){if(this.initialized_){var ot=q_(this.workspace,$),rt=this.SMALL_SPACING_+2*this.HEIGHT_;if(this.zoomResetGroup&&(rt+=this.LARGE_SPACING_+this.HEIGHT_),$=Z_(ot,new Yo(this.WIDTH_,rt),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,$,this.workspace),ot=ot.vertical,_e=ep($,this.MARGIN_VERTICAL_,ot===Mn.TOP?zn.DOWN:zn.UP,_e),ot===Mn.TOP){var lt=this.SMALL_SPACING_+this.HEIGHT_,ut;(ut=this.zoomInGroup)==null||ut.setAttribute("transform","translate(0, "+lt+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(lt+this.LARGE_SPACING_+this.HEIGHT_)+")")}else{ut=this.zoomResetGroup?this.LARGE_SPACING_+this.HEIGHT_:0;let vt;(vt=this.zoomInGroup)==null||vt.setAttribute("transform","translate(0, "+ut+")"),ut=ut+this.SMALL_SPACING_+this.HEIGHT_,(lt=this.zoomOutGroup)==null||lt.setAttribute("transform","translate(0, "+ut+")")}this.top_=_e.top,this.left_=_e.left;var pt;(pt=this.svgGroup)==null||pt.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}createZoomOutSvg_($){this.zoomOutGroup=Lt(Ot.G,{class:"blocklyZoom"},this.svgGroup);const _e=Lt(Ot.CLIPPATH,{id:"blocklyZoomoutClipPath"+$},this.zoomOutGroup);Lt(Ot.RECT,{width:32,height:32},_e),Lt(Ot.IMAGE,{width:sr.width,height:sr.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+$+")"},this.zoomOutGroup).setAttributeNS(hr,"xlink:href",this.workspace.options.pathToMedia+sr.url),this.onZoomOutWrapper_=Et(this.zoomOutGroup,"mousedown",null,this.zoom_.bind(this,-1))}createZoomInSvg_($){this.zoomInGroup=Lt(Ot.G,{class:"blocklyZoom"},this.svgGroup);const _e=Lt(Ot.CLIPPATH,{id:"blocklyZoominClipPath"+$},this.zoomInGroup);Lt(Ot.RECT,{width:32,height:32},_e),Lt(Ot.IMAGE,{width:sr.width,height:sr.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+$+")"},this.zoomInGroup).setAttributeNS(hr,"xlink:href",this.workspace.options.pathToMedia+sr.url),this.onZoomInWrapper_=Et(this.zoomInGroup,"mousedown",null,this.zoom_.bind(this,1))}zoom_($,_e){this.workspace.markFocused(),this.workspace.zoomCenter($),this.fireZoomEvent_(),ct(),_e.stopPropagation(),_e.preventDefault()}createZoomResetSvg_($){this.zoomResetGroup=Lt(Ot.G,{class:"blocklyZoom"},this.svgGroup);const _e=Lt(Ot.CLIPPATH,{id:"blocklyZoomresetClipPath"+$},this.zoomResetGroup);Lt(Ot.RECT,{width:32,height:32},_e),Lt(Ot.IMAGE,{width:sr.width,height:sr.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+$+")"},this.zoomResetGroup).setAttributeNS(hr,"xlink:href",this.workspace.options.pathToMedia+sr.url),this.onZoomResetWrapper_=Et(this.zoomResetGroup,"mousedown",null,this.resetZoom_.bind(this))}resetZoom_($){this.workspace.markFocused();const _e=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(_e),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent_(),ct(),$.stopPropagation(),$.preventDefault()}fireZoomEvent_(){const $=new(oo(Wn))(null,this.workspace.id,"zoom_controls");to($)}};Mr(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var yR=20,Xr=class extends xn{constructor($,_e,ot){super($),this.resizeHandlerWrapper_=null,this.resizesEnabled_=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY_=null,this.oldScale_=this.scale=1,this.oldLeft_=this.oldTop_=0,this.workspaceDragSurface_=this.blockDragSurface_=this.currentGesture_=this.toolbox_=this.flyout_=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive_=!1,this.inverseScreenCTM_=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll_=this.injectionDiv_=null,this.inverseScreenCTMDirty_=!0,this.highlightedBlocks_=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.zoomControls_=null,this.metricsManager_=new(Rr(Bt.METRICS_MANAGER,$,!0))(this),this.getMetrics=$.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=$.setMetrics||Xr.setTopLevelWorkspaceMetrics_,this.componentManager_=new Ko,this.connectionDBList=Js.init(this.connectionChecker),_e&&(this.blockDragSurface_=_e),ot&&(this.workspaceDragSurface_=ot),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_,this.audioManager_=new OE($.parentWorkspace),this.grid_=this.options.gridPattern?new _g(this.options.gridPattern,$.gridOptions):null,this.markerManager_=new Yl(this),tt.module$build$src$core$variables&&O_&&this.registerToolboxCategoryCallback(qu,O_),Yn&&ip&&this.registerToolboxCategoryCallback(cm,ip),tt.module$build$src$core$procedures&&op&&(this.registerToolboxCategoryCallback(h_,op),this.addChangeListener(N$)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new bE(this,this.options.theme||n_),this.themeManager_.subscribeWorkspace(this);let rt;this.renderer_=P$(this.options.renderer||"geras",this.getTheme(),(rt=this.options.rendererOverrides)!=null?rt:void 0),this.cachedParentSvgSize_=new Yo(0,0)}getMarkerManager(){return this.markerManager_}getMetricsManager(){return this.metricsManager_}setMetricsManager($){this.metricsManager_=$,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)}getComponentManager(){return this.componentManager_}setCursorSvg($){this.markerManager_.setCursorSvg($)}setMarkerSvg($){this.markerManager_.setMarkerSvg($)}getMarker($){return this.markerManager_?this.markerManager_.getMarker($):null}getCursor(){return this.markerManager_?this.markerManager_.getCursor():null}getRenderer(){return this.renderer_}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme($){$||($=n_),this.themeManager_.setTheme($)}refreshTheme(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(_e){return!!_e.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const $=new(oo(Hl))(this.getTheme().name,this.id);to($)}updateBlockStyles_($){for(let _e=0,ot;ot=$[_e];_e++){const rt=ot.getStyleName();if(rt){const lt=ot;lt.setStyle(rt),lt.mutator&&lt.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty_){const $=this.getParentSvg().getScreenCTM();$&&(this.inverseScreenCTM_=$.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_}updateInverseScreenCTM(){this.inverseScreenCTMDirty_=!0}isVisible(){return this.isVisible_}getSvgXY($){let _e=0,ot=0,rt=1;(wr(this.getCanvas(),$)||wr(this.getBubbleCanvas(),$))&&(rt=this.scale);do{const lt=Dr($);($===this.getCanvas()||$===this.getBubbleCanvas())&&(rt=1),_e+=lt.x*rt,ot+=lt.y*rt,$=$.parentNode}while($&&$!==this.getParentSvg());return new Ht(_e,ot)}getCachedParentSvgSize(){const $=this.cachedParentSvgSize_;return new Yo($.width,$.height)}getOriginOffsetInPixels(){return yu(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv_){let $=this.svgGroup_;for(;$;){if((" "+($.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv_=$;break}$=$.parentNode}}return this.injectionDiv_}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper($){this.resizeHandlerWrapper_=$}createDom($){return this.svgGroup_=Lt(Ot.G,{class:"blocklyWorkspace"}),$&&(this.svgBackground_=Lt(Ot.RECT,{height:"100%",width:"100%",class:$},this.svgGroup_),$==="blocklyMainBackground"&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=Lt(Ot.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Lt(Ot.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Et(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),document.body.addEventListener("wheel",function(){}),Et(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(Rr(Bt.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),($=Rr(Bt.CURSOR,this.options))&&this.markerManager_.setCursor(new $),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&go(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager_&&this.audioManager_.dispose(),this.grid_&&(this.grid_=null),this.renderer_.dispose(),this.markerManager_&&this.markerManager_.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const $=this.getParentSvg();$&&$.parentNode&&go($.parentNode)}this.resizeHandlerWrapper_&&(kt(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)}addTrashcan(){this.trashcan=Xr.newTrashcan(this);const $=this.trashcan.createDom();this.svgGroup_.insertBefore($,this.svgBlockCanvas_)}static newTrashcan($){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new kE(this);const $=this.zoomControls_.createDom();this.svgGroup_.appendChild($)}addFlyout($){const _e=new Wr({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return _e.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(Rr(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(_e):new(Rr(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(_e),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom($)}getFlyout($){return this.flyout_||$?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();const $=this.componentManager_.getComponents(Ko.Capability.POSITIONABLE,!0),_e=this.getMetricsManager().getUiMetrics(),ot=[];for(let rt=0,lt;lt=$[rt];rt++){lt.position(_e,ot);const ut=lt.getBoundingRectangle();ut&&ot.push(ut)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const $=A_();Ht.equals(this.lastRecordedPageScroll_,$)||(this.lastRecordedPageScroll_=$,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize($,_e){const ot=this.getParentSvg();$!=null&&(this.cachedParentSvgSize_.width=$,ot.setAttribute("data-cached-width",$.toString())),_e!=null&&(this.cachedParentSvgSize_.height=_e,ot.setAttribute("data-cached-height",_e.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg_){let $=this.svgGroup_;for(;$;){if($.tagName==="svg"){this.cachedParentSvg_=$;break}$=$.parentNode}}return this.cachedParentSvg_}maybeFireViewportChangeEvent(){if(jo()){var $=this.scale,_e=-this.scrollY,ot=-this.scrollX;if(!($===this.oldScale_&&1>Math.abs(_e-this.oldTop_)&&1>Math.abs(ot-this.oldLeft_))){var rt=new(oo(as))(_e,ot,$,this.id,this.oldScale_);this.oldScale_=$,this.oldTop_=_e,this.oldLeft_=ot,to(rt)}}}translate($,_e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_){var ot;(ot=this.workspaceDragSurface_)==null||ot.translateSurface($,_e)}else ot="translate("+$+","+_e+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",ot),this.svgBubbleCanvas_.setAttribute("transform",ot);this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup($,_e,this.scale),this.grid_&&this.grid_.moveTo($,_e),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var $=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),$="translate("+$.x+","+$.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",$),this.svgBubbleCanvas_.setAttribute("transform",$)}}setupDragSurface(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var $=this.svgBlockCanvas_.previousSibling,_e,ot=parseInt((_e=this.getParentSvg().getAttribute("width"))!=null?_e:"0"),rt;_e=parseInt((rt=this.getParentSvg().getAttribute("height"))!=null?rt:"0"),rt=Dr(this.getCanvas()),this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),$,ot,_e,this.scale),this.workspaceDragSurface_.translateSurface(rt.x,rt.y)}}getBlockDragSurface(){return this.blockDragSurface_}getWidth(){const $=this.getMetrics();return $?$.viewWidth/this.scale:0}setVisible($){if(this.isVisible_=$,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible($),this.getFlyout()&&this.getFlyout().setContainerVisible($),this.getParentSvg().style.display=$?"block":"none",this.toolbox_&&this.toolbox_.setVisible($),$){$=this.getAllBlocks(!1);for(let _e=$.length-1;0<=_e;_e--)$[_e].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var $=this.getAllBlocks(!1),_e=$.length-1;0<=_e;_e--)$[_e].render(!1);if(this.currentGesture_)for($=this.currentGesture_.getInsertionMarkers(),_e=0;_e<$.length;_e++)$[_e].render(!1);this.markerManager_.updateMarkers()}highlightBlock($,_e){if(_e===void 0){for(let ot=0,rt;rt=this.highlightedBlocks_[ot];ot++)rt.setHighlighted(!1);this.highlightedBlocks_.length=0}($=$?this.getBlockById($):null)&&((_e=_e===void 0||_e)?this.highlightedBlocks_.indexOf($)===-1&&this.highlightedBlocks_.push($):cr(this.highlightedBlocks_,$),$.setHighlighted(_e))}paste($){if(!this.rendered||!$.type&&!$.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const _e=Lo();return _e||qt(!0),$=$.type?this.pasteBlock_(null,$):$.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_($):this.pasteBlock_($,null),qt(_e),$}pasteBlock_($,_e){Fo();let ot;try{let rt=0,lt=0;if($){ot=bs($,this);let ut;rt=parseInt((ut=$.getAttribute("x"))!=null?ut:"0"),this.RTL&&(rt=-rt);let pt;lt=parseInt((pt=$.getAttribute("y"))!=null?pt:"0")}else _e&&(ot=is(_e,this),rt=_e.x||10,this.RTL&&(rt=this.getWidth()-rt),lt=_e.y||10);if(!isNaN(rt)&&!isNaN(lt)){let ut;do{ut=!1;const pt=this.getAllBlocks(!1);for(let vt=0,At;At=pt[vt];vt++){const xt=At.getRelativeToSurfaceXY();if(1>=Math.abs(rt-xt.x)&&1>=Math.abs(lt-xt.y)){ut=!0;break}}if(!ut){const vt=ot.getConnections_(!1);for(let At=0,xt;xt=vt[At];At++)if(xt.closest(tt.config$$module$build$src$core$config.snapRadius,new Ht(rt,lt)).connection){ut=!0;break}}ut&&(rt=this.RTL?rt-tt.config$$module$build$src$core$config.snapRadius:rt+tt.config$$module$build$src$core$config.snapRadius,lt+=2*tt.config$$module$build$src$core$config.snapRadius)}while(ut);ot.moveTo(new Ht(rt,lt))}}finally{Ho()}return jo()&&!ot.isShadow()&&to(new(oo(Jo))(ot)),ot.select(),ot}pasteWorkspaceComment_($){Fo();let _e;try{_e=er.fromXmlRendered($,this);let ot,rt=parseInt((ot=$.getAttribute("x"))!=null?ot:"0"),lt,ut=parseInt((lt=$.getAttribute("y"))!=null?lt:"0");isNaN(rt)||isNaN(ut)||(this.RTL&&(rt=-rt),_e.moveBy(rt+50,ut+50))}finally{Ho()}return jo()&&dn.fireCreateEvent(_e),_e.select(),_e}refreshToolboxSelection(){const $=this.isFlyout?this.targetWorkspace:this;$&&!$.currentGesture_&&$.toolbox_&&$.toolbox_.getFlyout()&&$.toolbox_.refreshSelection()}renameVariableById($,_e){super.renameVariableById($,_e),this.refreshToolboxSelection()}deleteVariableById($){super.deleteVariableById($),this.refreshToolboxSelection()}createVariable($,_e,ot){return $=super.createVariable($,_e,ot),this.refreshToolboxSelection(),$}recordDragTargets(){const $=this.componentManager_.getComponents(Ko.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(let _e=0,ot;ot=$[_e];_e++){const rt=ot.getClientRect();rt&&this.dragTargetAreas_.push({component:ot,clientRect:rt})}}newBlock($,_e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget($){for(let _e=0,ot;ot=this.dragTargetAreas_[_e];_e++)if(ot.clientRect.contains($.clientX,$.clientY))return ot.component;return null}onMouseDown_($){const _e=this.getGesture($);_e&&_e.handleWsStart($,this)}startDrag($,_e){$=It($,this.getParentSvg(),this.getInverseScreenCTM()),$.x/=this.scale,$.y/=this.scale,this.dragDeltaXY_=Ht.difference(_e,$)}moveDrag($){return $=It($,this.getParentSvg(),this.getInverseScreenCTM()),$.x/=this.scale,$.y/=this.scale,Ht.sum(this.dragDeltaXY_,$)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const $=!!this.scrollbar;return this.isMovable()&&(!$||$&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const $=!!this.scrollbar;return this.isMovable()&&(!$||$&&this.scrollbar.canScrollVertically())}onMouseWheel_($){if(Dn.inProgress())$.preventDefault(),$.stopPropagation();else{var _e=this.options.zoomOptions&&this.options.zoomOptions.wheel,ot=this.options.moveOptions&&this.options.moveOptions.wheel;if(_e||ot){var rt=bt($);if(ap)var lt=$.metaKey;_e&&($.ctrlKey||lt||!ot)?(rt=-rt.y/50,_e=It($,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(_e.x,_e.y,rt)):(_e=this.scrollX-rt.x,ot=this.scrollY-rt.y,$.shiftKey&&!rt.x&&(_e=this.scrollX-rt.y,ot=this.scrollY),this.scroll(_e,ot)),$.preventDefault()}}}getBlocksBoundingBox(){const $=this.getTopBoundedElements();if(!$.length)return new Do(0,0,0,0);const _e=$[0].getBoundingRectangle();for(let rt=1;rt<$.length;rt++){var ot=$[rt];ot.isInsertionMarker&&ot.isInsertionMarker()||(ot=ot.getBoundingRectangle(),ot.top<_e.top&&(_e.top=ot.top),ot.bottom>_e.bottom&&(_e.bottom=ot.bottom),ot.left<_e.left&&(_e.left=ot.left),ot.right>_e.right&&(_e.right=ot.right))}return _e}cleanUp(){this.setResizesEnabled(!1),qt(!0);const $=this.getTopBlocks(!0);let _e=0;for(let ot=0,rt;rt=$[ot];ot++){if(!rt.isMovable())continue;const lt=rt.getRelativeToSurfaceXY();rt.moveBy(-lt.x,_e-lt.y),rt.snapToGrid(),_e=rt.getRelativeToSurfaceXY().y+rt.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}qt(!1),this.setResizesEnabled(!0)}showContextMenu($){if(!this.options.readOnly&&!this.isFlyout){var _e=So.registry.getContextMenuOptions(So.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(_e,$),Uu($,_e,this.RTL)}}updateToolbox($){if($=Nu($)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(V_($)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=$,this.toolbox_.render($)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=$,this.flyout_.show($)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(ko(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom($,_e,ot){ot=Math.pow(this.options.zoomOptions.scaleSpeed,ot);const rt=this.scale*ot;if(this.scale!==rt){rt>this.options.zoomOptions.maxScale?ot=this.options.zoomOptions.maxScale/this.scale:rt<this.options.zoomOptions.minScale&&(ot=this.options.zoomOptions.minScale/this.scale);var lt=this.getCanvas().getCTM(),ut=this.getParentSvg().createSVGPoint();ut.x=$,ut.y=_e,ut=ut.matrixTransform(lt.inverse()),$=ut.x,_e=ut.y,lt=lt.translate($*(1-ot),_e*(1-ot)).scale(ot),this.scrollX=lt.e,this.scrollY=lt.f,this.setScale(rt)}}zoomCenter($){var _e=this.getMetrics();let ot;this.flyout_?(ot=_e.svgWidth?_e.svgWidth/2:0,_e=_e.svgHeight?_e.svgHeight/2:0):(ot=_e.viewWidth/2+_e.absoluteLeft,_e=_e.viewHeight/2+_e.absoluteTop),this.zoom(ot,_e,$)}zoomToFit(){if(this.isMovable()){var $=this.getMetrics(),_e=$.viewWidth;$=$.viewHeight;var ot=this.getBlocksBoundingBox(),rt=2*yR,lt=ot.right-ot.left+rt;if(ot=ot.bottom-ot.top+rt,lt){this.flyout_&&(this.horizontalLayout?($+=this.flyout_.getHeight(),ot+=this.flyout_.getHeight()/this.scale):(_e+=this.flyout_.getWidth(),lt+=this.flyout_.getWidth()/this.scale)),_e/=lt,$/=ot,Fo();try{this.setScale(Math.min(_e,$)),this.scrollCenter()}finally{Ho()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ft(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Ft(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){uo(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),uo(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var $=this.getMetrics(),_e=($.scrollWidth-$.viewWidth)/2,ot=($.scrollHeight-$.viewHeight)/2;_e=-_e-$.scrollLeft,ot=-ot-$.scrollTop,this.scroll(_e,ot)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock($){if(this.isMovable()){if($=$?this.getBlockById($):null){var _e=$.getRelativeToSurfaceXY(),ot=$.getHeightWidth(),rt=this.scale;$=(_e.x+(this.RTL?-1:1)*ot.width/2)*rt,_e=(_e.y+ot.height/2)*rt,ot=this.getMetrics(),this.scroll(-($-ot.viewWidth/2),-(_e-ot.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale($){this.options.zoomOptions.maxScale&&$>this.options.zoomOptions.maxScale?$=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&$<this.options.zoomOptions.minScale&&($=this.options.zoomOptions.minScale),this.scale=$,this.hideChaff(!1),($=this.getFlyout(!1))&&$.isVisible()&&($.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),$=this.getMetrics(),this.scrollX-=$.absoluteLeft,this.scrollY-=$.absoluteTop,$.viewLeft+=$.absoluteLeft,$.viewTop+=$.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView($):this.scrollbar.resizeContent($))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll($,_e){this.hideChaff(!0);const ot=this.getMetrics();$=Math.min($,-ot.scrollLeft),_e=Math.min(_e,-ot.scrollTop);const rt=ot.scrollTop+Math.max(0,ot.scrollHeight-ot.viewHeight);$=Math.max($,-(ot.scrollLeft+Math.max(0,ot.scrollWidth-ot.viewWidth))),_e=Math.max(_e,-rt),this.scrollX=$,this.scrollY=_e,this.scrollbar&&this.scrollbar.set(-($+ot.scrollLeft),-(_e+ot.scrollTop),!1),$+=ot.absoluteLeft,_e+=ot.absoluteTop,this.translate($,_e)}getBlockById($){return super.getBlockById($)}getAllBlocks($){return super.getAllBlocks($)}getTopBlocks($){return super.getTopBlocks($)}addTopBlock($){this.addTopBoundedElement($),super.addTopBlock($)}removeTopBlock($){this.removeTopBoundedElement($),super.removeTopBlock($)}addTopComment($){this.addTopBoundedElement($),super.addTopComment($)}removeTopComment($){this.removeTopBoundedElement($),super.removeTopComment($)}addTopBoundedElement($){this.topBoundedElements_.push($)}removeTopBoundedElement($){cr(this.topBoundedElements_,$)}getTopBoundedElements(){return[].concat(this.topBoundedElements_)}setResizesEnabled($){const _e=!this.resizesEnabled_&&$;this.resizesEnabled_=$,_e&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements_=[],this.setResizesEnabled(!0)}registerButtonCallback($,_e){if(typeof _e!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set($,_e)}getButtonCallback($){let _e;return(_e=this.flyoutButtonCallbacks.get($))!=null?_e:null}removeButtonCallback($){this.flyoutButtonCallbacks.delete($)}registerToolboxCategoryCallback($,_e){if(typeof _e!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set($,_e)}getToolboxCategoryCallback($){return this.toolboxCategoryCallbacks.get($)||null}removeToolboxCategoryCallback($){this.toolboxCategoryCallbacks.delete($)}getGesture($){const _e=$.type==="mousedown"||$.type==="touchstart"||$.type==="pointerdown",ot=this.currentGesture_;return ot?_e&&ot.hasStarted()?(console.warn("Tried to start the same gesture twice."),ot.cancel(),null):ot:_e?this.currentGesture_=new vE($,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager_}getGrid(){return this.grid_}hideChaff($){ts(),qr(),Zr();const _e=!!$;this.getComponentManager().getComponents(Ko.Capability.AUTOHIDEABLE,!0).forEach(ot=>ot.autoHide(_e))}static setTopLevelWorkspaceMetrics_($){const _e=this.getMetrics();typeof $.x=="number"&&(this.scrollX=-(_e.scrollLeft+(_e.scrollWidth-_e.viewWidth)*$.x)),typeof $.y=="number"&&(this.scrollY=-(_e.scrollTop+(_e.scrollHeight-_e.viewHeight)*$.y)),this.translate(this.scrollX+_e.absoluteLeft,this.scrollY+_e.absoluteTop)}},um={};um.load=kS,um.save=OS;var OR=class{constructor(){this.priority=XT}save($){const _e=[];for(const ot of $.getAllVariables())$={name:ot.name,id:ot.getId()},ot.type&&($.type=ot.type),_e.push($);return _e.length?_e:null}load($,_e){for(const ot of $)_e.createVariable(ot.name,ot.type,ot.id)}clear($){$.getVariableMap().clear()}};K_("variables",new OR);var kR={},CE=class extends uu{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_($){super.setFontConstants_($),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_($){super.setDynamicProperties_($),this.SELECTED_GLOW_COLOUR=$.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const _e=Number($.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=_e&&!isNaN(_e)?_e:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=$.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=($=Number($.getComponentStyle("replacementGlowSize")))&&!isNaN($)?$:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&go(this.selectedGlowFilter_),this.replacementGlowFilter_&&go(this.replacementGlowFilter_)}makeStartHat(){const $=this.START_HAT_HEIGHT,_e=this.START_HAT_WIDTH,ot=gr("c",[Zt(25,-$),Zt(71,-$),Zt(_e,0)]);return{height:$,width:_e,path:ot}}makeHexagonal(){function $(ot,rt,lt){var ut=ot/2;return ut=ut>_e?_e:ut,lt=lt?-1:1,ot=(rt?-1:1)*ot/2,Sn(-lt*ut,ot)+Sn(lt*ut,ot)}const _e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(ot){return ot/=2,ot>_e?_e:ot},height(ot){return ot},connectionOffsetY(ot){return ot/2},connectionOffsetX(ot){return-ot},pathDown(ot){return $(ot,!1,!1)},pathUp(ot){return $(ot,!0,!1)},pathRightDown(ot){return $(ot,!1,!0)},pathRightUp(ot){return $(ot,!1,!0)}}}makeRounded(){function $(rt,lt,ut){const pt=rt>ot?rt-ot:0;return rt=(rt>ot?ot:rt)/2,Bo("a","0 0,1",rt,Zt((lt?-1:1)*rt,(lt?-1:1)*rt))+jt("v",(ut?1:-1)*pt)+Bo("a","0 0,1",rt,Zt((lt?1:-1)*rt,(lt?-1:1)*rt))}const _e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,ot=2*_e;return{type:this.SHAPES.ROUND,isDynamic:!0,width(rt){return rt/=2,rt>_e?_e:rt},height(rt){return rt},connectionOffsetY(rt){return rt/2},connectionOffsetX(rt){return-rt},pathDown(rt){return $(rt,!1,!1)},pathUp(rt){return $(rt,!0,!1)},pathRightDown(rt){return $(rt,!1,!0)},pathRightUp(rt){return $(rt,!1,!0)}}}makeSquared(){function $(ot,rt,lt){return ot-=2*_e,Bo("a","0 0,1",_e,Zt((rt?-1:1)*_e,(rt?-1:1)*_e))+jt("v",(lt?1:-1)*ot)+Bo("a","0 0,1",_e,Zt((rt?1:-1)*_e,(rt?-1:1)*_e))}const _e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(ot){return _e},height(ot){return ot},connectionOffsetY(ot){return ot/2},connectionOffsetX(ot){return-ot},pathDown(ot){return $(ot,!1,!1)},pathUp(ot){return $(ot,!0,!1)},pathRightDown(ot){return $(ot,!1,!0)},pathRightUp(ot){return $(ot,!1,!0)}}}shapeFor($){let _e=$.getCheck();switch(!_e&&$.targetConnection&&(_e=$.targetConnection.getCheck()),$.type){case Vt.INPUT_VALUE:case Vt.OUTPUT_VALUE:if($=$.getSourceBlock().getOutputShape(),$!==null)switch($){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return _e&&_e.indexOf("Boolean")!==-1?this.HEXAGONAL:_e&&_e.indexOf("Number")!==-1?this.ROUNDED:(_e&&_e.indexOf("String"),this.ROUNDED);case Vt.PREVIOUS_STATEMENT:case Vt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function $(xt){return gr("c",[Zt(xt*lt/2,0),Zt(xt*lt*3/4,pt/2),Zt(xt*lt,pt)])+Ol([Zt(xt*lt,ut)])+gr("c",[Zt(xt*lt/4,pt/2),Zt(xt*lt/2,pt),Zt(xt*lt,pt)])+jt("h",xt*rt)+gr("c",[Zt(xt*lt/2,0),Zt(xt*lt*3/4,-(pt/2)),Zt(xt*lt,-pt)])+Ol([Zt(xt*lt,-ut)])+gr("c",[Zt(xt*lt/4,-(pt/2)),Zt(xt*lt/2,-pt),Zt(xt*lt,-pt)])}const _e=this.NOTCH_WIDTH,ot=this.NOTCH_HEIGHT,rt=_e/3,lt=rt/3,ut=ot/2,pt=ut/2,vt=$(1),At=$(-1);return{type:this.SHAPES.NOTCH,width:_e,height:ot,pathLeft:vt,pathRight:At}}makeInsideCorners(){const $=this.CORNER_RADIUS,_e=Bo("a","0 0,0",$,Zt(-$,$)),ot=Bo("a","0 0,1",$,Zt(-$,$)),rt=Bo("a","0 0,0",$,Zt($,$)),lt=Bo("a","0 0,1",$,Zt($,$));return{width:$,height:$,pathTop:_e,pathBottom:rt,rightWidth:$,rightHeight:$,pathTopRight:ot,pathBottomRight:lt}}generateSecondaryColour_($){return vs("#000",$,.15)||$}generateTertiaryColour_($){return vs("#000",$,.25)||$}createDom($,_e,ot){super.createDom($,_e,ot),$=Lt(Ot.DEFS,{},$),_e=Lt(Ot.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},$),Lt(Ot.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},_e),ot=Lt(Ot.FECOMPONENTTRANSFER,{result:"outBlur"},_e),Lt(Ot.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},ot),Lt(Ot.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},_e),Lt(Ot.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},_e),this.selectedGlowFilterId=_e.id,this.selectedGlowFilter_=_e,$=Lt(Ot.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},$),Lt(Ot.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},$),_e=Lt(Ot.FECOMPONENTTRANSFER,{result:"outBlur"},$),Lt(Ot.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},_e),Lt(Ot.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},$),Lt(Ot.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},$),Lt(Ot.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},$),this.replacementGlowFilterId=$.id,this.replacementGlowFilter_=$}getCSS_($){return[`${$} .blocklyText,`,`${$} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${$} .blocklyText {`,"fill: #fff;","}",`${$} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${$} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${$} .blocklyNonEditableText>text,`,`${$} .blocklyEditableText>text,`,`${$} .blocklyNonEditableText>g>text,`,`${$} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${$} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${$} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${$} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${$} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${$} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${$} .blocklyDropdownText {`,"fill: #fff !important;","}",`${$}.blocklyWidgetDiv .goog-menuitem,`,`${$}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${$}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${$} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${$} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${$} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},LE=class extends hu{constructor($,_e){super($,_e)}draw(){const $=this.block_.pathObject;if($.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),$.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&$.flipRTL(),Fu()){let _e,ot;(_e=this.block_)==null||(ot=_e.renderingDebugger)==null||ot.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&($.outputShapeType=this.info_.outputConnection.shape.type),$.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_($){if(!(0>=$.height))if(Rt.isSpacer($)&&($.precedesStatement||$.followsStatement)){var _e=this.constants_.INSIDE_CORNERS.rightHeight;_e=$.height-($.precedesStatement?_e:0),this.outlinePath_+=($.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<_e?jt("V",$.yPos+_e):"")+($.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=jt("V",$.yPos+$.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const $=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=wo($.xPos,this.info_.startY),this.outlinePath_+=jt("h",$.width)}drawFlatBottom_(){const $=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=jt("V",$.baseline),this.outlinePath_+=jt("h",-$.width)}drawInlineInput_($){this.positionInlineInputConnection_($);const _e=$.input.name;if(!$.connectedBlock&&!this.info_.isInsertionMarker){var ot=$.width-2*$.connectionWidth;$=_i($.xPos+$.connectionWidth,$.centerline-$.height/2)+jt("h",ot)+$.shape.pathRightDown($.height)+jt("h",-ot)+$.shape.pathUp($.height)+"z",this.block_.pathObject.setOutlinePath(_e,$)}}drawStatementInput_($){var _e=$.getLastInput();const ot=_e.xPos+_e.notchOffset+_e.shape.width,rt=_e.shape.pathRight+jt("h",-(_e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,lt=$.height-2*this.constants_.INSIDE_CORNERS.height;_e=this.constants_.INSIDE_CORNERS.pathBottom+jt("h",_e.notchOffset-this.constants_.INSIDE_CORNERS.width)+(_e.connectedBottomNextConnection?"":_e.shape.pathLeft),this.outlinePath_+=jt("H",ot)+rt+jt("v",lt)+_e+jt("H",$.xPos+$.width),this.positionStatementInputConnection_($)}};tt.FieldImage$$module$build$src$core$field_image=class extends fo{constructor($,_e,ot,rt,lt,ut,pt){if(super(fo.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",ot=Number(Mo(ot)),_e=Number(Mo(_e)),isNaN(ot)||isNaN(_e))throw Error("Height and width values of an image field must cast to numbers.");if(0>=ot||0>=_e)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Yo(_e,ot+tt.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=ot,typeof lt=="function"&&(this.clickHandler_=lt),$!==fo.SKIP_SETUP&&(pt?this.configure_(pt):(this.flipRtl_=!!ut,this.altText_=Mo(rt)||""),this.setValue(Mo($)))}configure_($){super.configure_($),$.flipRtl&&(this.flipRtl_=$.flipRtl),$.alt&&(this.altText_=Mo($.alt))}initView(){this.imageElement_=Lt(Ot.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(hr,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_($){return typeof $!="string"?null:$}doValueUpdate_($){this.value_=$,this.imageElement_&&this.imageElement_.setAttributeNS(hr,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt($){$!==this.altText_&&(this.altText_=$||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler($){this.clickHandler_=$}getText_(){return this.altText_}static fromJson($){if(!$.src||!$.width||!$.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this($.src,$.width,$.height,void 0,void 0,void 0,$)}},tt.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,yr("field_image",tt.FieldImage$$module$build$src$core$field_image),tt.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",tt.FieldImage$$module$build$src$core$field_image,tt.FieldTextInput$$module$build$src$core$field_textinput=class extends fo{constructor($,_e,ot){super(fo.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){super.configure_($),$.spellcheck!==void 0&&(this.spellcheck_=$.spellcheck)}initView(){if(this.getConstants().FULL_BLOCK_FIELDS){let $=0,_e=0;for(let ot=0,rt;rt=this.getSourceBlock().inputList[ot];ot++){for(let lt=0;rt.fieldRow[lt];lt++)$++;rt.connection&&_e++}this.fullBlockClickTarget_=1>=$&&this.getSourceBlock().outputConnection&&!_e}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_($){return $==null?null:String($)}doValueInvalid_($){this.isBeingEdited_&&(this.isTextValid_=!1,$=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&jo()&&to(new(oo(zo))(this.sourceBlock_,"field",this.name||null,$,this.value_)))}doValueUpdate_($){this.isTextValid_=!0,this.value_=$,this.isBeingEdited_||(this.isDirty_=!0)}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var $=this.sourceBlock_;if(this.borderRect_){if(!$.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");this.borderRect_.setAttribute("stroke",$.style.colourTertiary)}else $.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const $=this.htmlInput_;this.isTextValid_?(uo($,"blocklyInvalidInput"),Ao($,Co.INVALID,!1)):(Ft($,"blocklyInvalidInput"),Ao($,Co.INVALID,!0))}}setSpellcheck($){$!==this.spellcheck_&&(this.spellcheck_=$,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_($,_e){this.workspace_=this.sourceBlock_.workspace,$=_e||!1,!$&&(up||Ml||ys)?this.showPromptEditor_():this.showInlineEditor_($)}showPromptEditor_(){R_(io.CHANGE_VALUE_TITLE,this.getText(),$=>{$!==null&&this.setValue(this.getValueFromEditorText_($))})}showInlineEditor_($){G_(this,this.getSourceBlock().RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,$||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){qt(!0);const $=Rs();var _e=this.getClickTarget_();if(!_e)throw Error("A click target has not been set.");Ft(_e,"editing"),_e=document.createElement("input"),_e.className="blocklyHtmlInput",_e.setAttribute("spellcheck",this.spellcheck_);const ot=this.workspace_.getScale();var rt=this.getConstants().FIELD_TEXT_FONTSIZE*ot+"pt";if($.style.fontSize=rt,_e.style.fontSize=rt,rt=tt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*ot+"px",this.fullBlockClickTarget_){rt=this.getScaledBBox(),rt=(rt.bottom-rt.top)/2+"px";const lt=this.getSourceBlock().getParent()?this.getSourceBlock().getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;_e.style.border=1*ot+"px solid "+lt,$.style.borderRadius=rt,$.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&($.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*ot+"px")}return _e.style.borderRadius=rt,$.appendChild(_e),_e.value=_e.defaultValue=this.getEditorText_(this.value_),_e.setAttribute("data-untyped-default-value",this.value_),_e.setAttribute("data-old-value",""),this.resizeEditor_(),this.bindInputEvents_(_e),_e}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),qt(!1),this.unbindInputEvents_();var $=Rs().style;if($.width="auto",$.height="auto",$.fontSize="",$.transition="",$.boxShadow="",this.htmlInput_=null,$=this.getClickTarget_(),!$)throw Error("A click target has not been set.");uo($,"editing")}onFinishEditing_($){}bindInputEvents_($){this.onKeyDownWrapper_=Et($,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Et($,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(kt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(kt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_($){$.keyCode===Yt.ENTER?(qr(),Zr()):$.keyCode===Yt.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),qr(),Zr()):$.keyCode===Yt.TAB&&(qr(),Zr(),this.sourceBlock_.tab(this,!$.shiftKey),$.preventDefault())}onHtmlInputChange_($){$=this.htmlInput_.value,$!==this.htmlInput_.getAttribute("data-old-value")&&(this.htmlInput_.setAttribute("data-old-value",$),$=this.getValueFromEditorText_($),this.setValue($),this.forceRerender(),this.resizeEditor_())}setEditorValue_($){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_($)),this.setValue($)}resizeEditor_(){const $=Rs();var _e=this.getScaledBBox();$.style.width=_e.right-_e.left+"px",$.style.height=_e.bottom-_e.top+"px";const ot=this.getSourceBlock().RTL?_e.right-$.offsetWidth:_e.left;_e=new Ht(ot,_e.top),$.style.left=_e.x+"px",$.style.top=_e.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_($){return String($)}getValueFromEditorText_($){return $}static fromJson($){return new this(Mo($.text),void 0,$)}},tt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS=4,yr("field_input",tt.FieldTextInput$$module$build$src$core$field_textinput),tt.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",tt.FieldTextInput$$module$build$src$core$field_textinput;var wE=class extends tm{constructor($){super($)}endsWithElemSpacer(){return!1}hasLeftSquareCorner($){return!!$.outputConnection}hasRightSquareCorner($){return!!$.outputConnection&&!$.statementInputCount&&!$.nextConnection}},AE=class extends lu{constructor($,_e){if(super($,_e),this.connectedBottomNextConnection=!1,this.connectedBlock){for($=this.connectedBlock;_e=$.getNextBlock();)$=_e;$.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},NE=class extends gn{constructor($){super($),this.width=this.height=0,this.type|=Rt.getType("RIGHT_CONNECTION")}},ME=class extends sm{constructor($){super($)}endsWithElemSpacer(){return!1}hasLeftSquareCorner($){const _e=($.hat?$.hat==="cap":this.constants_.ADD_START_HATS)&&!$.outputConnection&&!$.previousConnection;return!!$.outputConnection||_e}hasRightSquareCorner($){return!!$.outputConnection&&!$.statementInputCount&&!$.nextConnection}},DE=class extends Qs{constructor($,_e){super($,_e),this.isInline=!0,this.renderer_=$,this.constants_=this.renderer_.getConstants(),this.topRow=new ME(this.constants_),this.bottomRow=new wE(this.constants_),this.isMultiRow=!_e.getInputsInline()||_e.isCollapsed(),this.hasStatementInput=0<_e.statementInputCount,this.rightSide=this.outputConnection?new NE(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_($,_e){return _e?$.type===co.STATEMENT||_e.type===co.STATEMENT?!0:$.type===co.VALUE||$.type===co.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_($){return $.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_($)}getInRowSpacing_($,_e){return $&&_e||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!$&&_e&&Rt.isStatementInput(_e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:$&&Rt.isLeftRoundedCorner($)&&_e&&(Rt.isPreviousConnection(_e)||Rt.isNextConnection(_e))?_e.notchOffset-this.constants_.CORNER_RADIUS:$&&Rt.isLeftSquareCorner($)&&_e&&Rt.isHat(_e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_($,_e){if(Rt.isTopRow($)&&Rt.isBottomRow(_e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const ot=Rt.isInputRow($)&&$.hasStatement,rt=Rt.isInputRow(_e)&&_e.hasStatement;return rt||ot?($=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),rt&&ot?Math.max($,this.constants_.DUMMY_INPUT_MIN_HEIGHT):$):Rt.isTopRow($)?$.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Rt.isBottomRow(_e)?this.outputConnection?!_e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_($,_e){const ot=this.width-this.startX;return Rt.isInputRow($)&&$.hasStatement||Rt.isInputRow(_e)&&_e.hasStatement?Math.max(ot,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):ot}getElemCenterline_($,_e){if($.hasStatement&&!Rt.isSpacer(_e)&&!Rt.isStatementInput(_e))return $.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Rt.isInlineInput(_e)&&_e instanceof Pn){const ot=_e.connectedBlock;if(ot&&ot.outputConnection&&ot.nextConnection)return $.yPos+ot.height/2}return super.getElemCenterline_($,_e)}addInput_($,_e){if($.type===co.DUMMY&&_e.hasDummyInput&&_e.align===tt.Align$$module$build$src$core$input.LEFT&&$.align===tt.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(_e,$);else if($.type===co.STATEMENT){_e.elements.push(new AE(this.constants_,$)),_e.hasStatement=!0,_e.align===null&&(_e.align=$.align);return}super.addInput_($,_e)}addAlignmentPadding_($,_e){if(this.rightAlignedDummyInputs_.get($)){let ot;for(let rt=0;rt<$.elements.length;rt++){const lt=$.elements[rt];if(Rt.isSpacer(lt)&&(ot=lt),Rt.isField(lt)&&lt instanceof gs&&lt.parentInput===this.rightAlignedDummyInputs_.get($))break}if(ot){ot.width+=_e,$.width+=_e;return}}super.addAlignmentPadding_($,_e)}adjustXPosition_(){const $=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let _e=$;for(let lt=2;lt<this.rows.length-1;lt+=2){var ot=this.rows[lt-1];const ut=this.rows[lt];var rt=this.rows[lt+1];if(ot=lt===2?!!this.topRow.hasPreviousConnection:!!ot.followsStatement,rt=lt+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!rt.precedesStatement,Rt.isInputRow(ut)&&ut.hasStatement){ut.measure();let pt,vt;_e=ut.width-((vt=(pt=ut.getLastInput())==null?void 0:pt.width)!=null?vt:0)+$}else if(ot&&(lt===2||rt)&&Rt.isInputRow(ut)&&!ut.hasStatement){rt=ut.xPos,ot=null;for(let pt=0;pt<ut.elements.length;pt++){const vt=ut.elements[pt];Rt.isSpacer(vt)&&(ot=vt),ot&&(Rt.isField(vt)||Rt.isInput(vt))&&rt<_e&&!(Rt.isField(vt)&&vt instanceof gs&&(vt.field instanceof tt.FieldLabel$$module$build$src$core$field_label||vt.field instanceof tt.FieldImage$$module$build$src$core$field_image))&&(ot.width+=_e-rt),rt+=vt.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var $=this.outputConnection.shape;if("isDynamic"in $&&$.isDynamic){for(var _e=0,ot=0;ot<this.rows.length;ot++){const rt=this.rows[ot];rt.yPos=_e,_e+=rt.height}this.height=_e,ot=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,_e=$.height(ot),ot=$.width(ot),this.outputConnection.height=_e,this.outputConnection.width=ot,this.outputConnection.startX=ot,this.outputConnection.connectionOffsetY=$.connectionOffsetY(_e),this.outputConnection.connectionOffsetX=$.connectionOffsetX(ot),$=0,this.hasStatementInput||this.bottomRow.hasNextConnection||($=ot,this.rightSide.height=_e,this.rightSide.width=$,this.rightSide.centerline=_e/2,this.rightSide.xPos=this.width+$),this.startX=ot,this.width+=ot+$,this.widthWithChildren+=ot+$}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var $=0,_e=0;_e<this.rows.length;_e++){var ot=this.rows[_e];if(!Rt.isInputRow(ot))continue;$=ot.elements[ot.elements.length-2];let rt=this.getNegativeSpacing_(ot.elements[1]),lt=this.getNegativeSpacing_($);$=rt+lt;const ut=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-$<ut&&($=this.width-ut,rt=$/2,lt=$/2),ot.elements.unshift(new fr(this.constants_,-rt)),ot.elements.push(new fr(this.constants_,-lt))}if($)for(this.width-=$,this.widthWithChildren-=$,this.rightSide.xPos-=$,_e=0;_e<this.rows.length;_e++)ot=this.rows[_e],Rt.isTopOrBottomRow(ot)&&(ot.elements[1].width-=$),ot.width-=$,ot.widthWithConnectedBlocks-=$}}getNegativeSpacing_($){if(!$||!this.outputConnection)return 0;const _e=this.outputConnection.width;var ot=this.outputConnection.shape.type;const rt=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(ot){case rt.SHAPES.ROUND:return ot=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,ot=this.height/2>ot?ot:this.height/2,_e-ot*(1-Math.sin(Math.acos((ot-this.constants_.SMALL_PADDING)/ot)));default:return 0}if(Rt.isInlineInput($)&&$ instanceof Pn){const lt=$.connectedBlock;return $=lt?lt.pathObject.outputShapeType:$.shape.type,$==null||lt&&lt.outputConnection&&(lt.statementInputCount||lt.nextConnection)||ot===rt.SHAPES.HEXAGONAL&&ot!==$?0:_e-this.constants_.SHAPE_IN_SHAPE_PADDING[ot][$]}return Rt.isField($)&&$ instanceof gs?ot===rt.SHAPES.ROUND&&$.field instanceof tt.FieldTextInput$$module$build$src$core$field_textinput?_e-2.75*rt.GRID_UNIT:_e-this.constants_.SHAPE_IN_SHAPE_PADDING[ot][0]:Rt.isIcon($)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let rt=2;rt<this.rows.length-1;rt+=2){const lt=this.rows[rt-1],ut=this.rows[rt],pt=this.rows[rt+1];var $=rt===2,_e=rt+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!pt.precedesStatement;if($?this.topRow.hasPreviousConnection:lt.followsStatement){var ot=ut.elements[1];if(ot=ut.elements.length===3&&ot instanceof gs&&(ot.field instanceof tt.FieldLabel$$module$build$src$core$field_label||ot.field instanceof tt.FieldImage$$module$build$src$core$field_image),!$&&ot)lt.height-=this.constants_.SMALL_PADDING,pt.height-=this.constants_.SMALL_PADDING,ut.height-=this.constants_.MEDIUM_PADDING;else if(!$&&!_e)lt.height+=this.constants_.SMALL_PADDING;else if(_e){for($=!1,_e=0;_e<ut.elements.length;_e++)if(ot=ut.elements[_e],ot instanceof Pn&&Rt.isInlineInput(ot)&&ot.connectedBlock&&!ot.connectedBlock.isShadow()&&40<=ot.connectedBlock.getHeightWidth().height){$=!0;break}$&&(lt.height-=this.constants_.SMALL_PADDING,pt.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},PE=class extends lm{constructor($,_e,ot){super($,_e,ot),this.markerCircle_=null}showWithInputOutput_($){const _e=$.getSourceBlock();$=$.getLocation().getOffsetInBlock(),this.positionCircle_($.x,$.y),this.setParent_(_e),this.showCurrent_()}showWithOutput_($){this.showWithInputOutput_($)}showWithInput_($){this.showWithInputOutput_($)}showWithBlock_($){$=$.getLocation();const _e=$.getHeightWidth();this.positionRect_(0,0,_e.width,_e.height),this.setParent_($),this.showCurrent_()}positionCircle_($,_e){let ot;(ot=this.markerCircle_)==null||ot.setAttribute("cx",$.toString());let rt;(rt=this.markerCircle_)==null||rt.setAttribute("cy",_e.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=Lt(Ot.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const $=this.getBlinkProperties_();Lt(Ot.ANIMATE,$,this.markerCircle_)}return this.markerSvg_}applyColour_($){super.applyColour_($);let _e;(_e=this.markerCircle_)==null||_e.setAttribute("fill",this.colour_);let ot;if((ot=this.markerCircle_)==null||ot.setAttribute("stroke",this.colour_),this.isCursor()){$=this.colour_+";transparent;transparent;";let rt;(rt=this.markerCircle_)==null||rt.firstElementChild.setAttribute("values",$)}}},xE=class extends __{constructor($,_e,ot){super($,_e,ot),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=ot}setPath($){super.setPath($),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",$)}applyColour($){super.applyColour($);const _e=$.getParent();if($.isShadow()&&_e){if(!_e.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");this.svgPath.setAttribute("stroke",_e.style.colourTertiary)}for(const ot of this.outlines.values()){if(!this.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");ot.setAttribute("fill",this.style.colourTertiary)}}flipRTL(){super.flipRTL();for(const $ of this.outlines.values())$.setAttribute("transform","scale(-1 1)")}updateSelected($){this.setClass_("blocklySelected",$),$?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade($){this.setClass_("blocklyReplaceable",$),$?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight($,_e){$=$.getParentInput().name,($=this.getOutlinePath_($))&&(_e?$.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):$.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const $ of this.outlines.keys())this.remainingOutlines.add($)}endDrawing(){if(this.remainingOutlines.size)for(const $ of this.remainingOutlines)this.removeOutlinePath_($);this.remainingOutlines.clear()}setOutlinePath($,_e){if($=this.getOutlinePath_($),$.setAttribute("d",_e),!this.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");$.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_($){return this.outlines.has($)||this.outlines.set($,Lt(Ot.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete($),this.outlines.get($)}removeOutlinePath_($){let _e,ot;(_e=this.outlines.get($))==null||(ot=_e.parentNode)==null||ot.removeChild(this.outlines.get($)),this.outlines.delete($)}},BE=class extends du{constructor($){super($)}makeConstants_(){return new CE}makeRenderInfo_($){return new DE(this,$)}makeDrawer_($,_e){return new LE($,_e)}makeMarkerDrawer($,_e){return new PE($,this.getConstants(),_e)}makePathObject($,_e){return new xE($,_e,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection($){return $.type!==Vt.INPUT_VALUE&&$.type!==Vt.OUTPUT_VALUE}getConnectionPreviewMethod($,_e,ot){return _e.type===Vt.OUTPUT_VALUE?$.isConnected()?Er.PREVIEW_TYPE.REPLACEMENT_FADE:Er.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod($,_e,ot)}};Al("zelos",BE);var zr={};zr.BottomRow=wE,zr.ConstantProvider=CE,zr.Drawer=LE,zr.MarkerSvg=PE,zr.PathObject=xE,zr.RenderInfo=DE,zr.Renderer=BE,zr.RightConnectionShape=NE,zr.StatementInput=AE,zr.TopRow=ME;var UE=class extends Qs{constructor($,_e){super($,_e)}getRenderer(){return this.renderer_}addElemSpacing_(){let $=!1;for(var _e=0;_e<this.rows.length;_e++)if(this.rows[_e].hasExternalInput){$=!0;break}for(_e=0;_e<this.rows.length;_e++){const rt=this.rows[_e];var ot=rt.elements;if(rt.elements=[],rt.startsWithElemSpacer()&&rt.elements.push(new fr(this.constants_,this.getInRowSpacing_(null,ot[0]))),ot.length){for(let lt=0;lt<ot.length-1;lt++){rt.elements.push(ot[lt]);const ut=this.getInRowSpacing_(ot[lt],ot[lt+1]);rt.elements.push(new fr(this.constants_,ut))}rt.elements.push(ot[ot.length-1]),rt.endsWithElemSpacer()&&(ot=this.getInRowSpacing_(ot[ot.length-1],null),$&&rt.hasDummyInput&&(ot+=this.constants_.TAB_WIDTH),rt.elements.push(new fr(this.constants_,ot)))}}}getInRowSpacing_($,_e){if(!$)return _e&&Rt.isField(_e)&&_e.isEditable?this.constants_.MEDIUM_PADDING:_e&&Rt.isInlineInput(_e)?this.constants_.MEDIUM_LARGE_PADDING:_e&&Rt.isStatementInput(_e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Rt.isInput($)&&!_e)return Rt.isField($)&&$.isEditable?this.constants_.MEDIUM_PADDING:Rt.isIcon($)?2*this.constants_.LARGE_PADDING+1:Rt.isHat($)?this.constants_.NO_PADDING:Rt.isPreviousOrNextConnection($)?this.constants_.LARGE_PADDING:Rt.isLeftRoundedCorner($)?this.constants_.MIN_BLOCK_WIDTH:Rt.isJaggedEdge($)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Rt.isInput($)&&!_e){if(Rt.isExternalInput($))return this.constants_.NO_PADDING;if(Rt.isInlineInput($))return this.constants_.LARGE_PADDING;if(Rt.isStatementInput($))return this.constants_.NO_PADDING}if(!Rt.isInput($)&&_e&&Rt.isInput(_e)){if(Rt.isField($)&&$.isEditable){if(Rt.isInlineInput(_e)||Rt.isExternalInput(_e))return this.constants_.SMALL_PADDING}else{if(Rt.isInlineInput(_e)||Rt.isExternalInput(_e))return this.constants_.MEDIUM_LARGE_PADDING;if(Rt.isStatementInput(_e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Rt.isIcon($)&&_e&&!Rt.isInput(_e))return this.constants_.LARGE_PADDING;if(Rt.isInlineInput($)&&_e&&Rt.isField(_e))return _e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Rt.isLeftSquareCorner($)&&_e){if(Rt.isHat(_e))return this.constants_.NO_PADDING;if(Rt.isPreviousConnection(_e)||Rt.isNextConnection(_e))return _e.notchOffset}return Rt.isLeftRoundedCorner($)&&_e?_e.notchOffset-this.constants_.CORNER_RADIUS:Rt.isField($)&&_e&&Rt.isField(_e)&&$.isEditable===_e.isEditable||_e&&Rt.isJaggedEdge(_e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_($,_e){return Rt.isTopRow($)&&Rt.isBottomRow(_e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Rt.isTopRow($)||Rt.isBottomRow(_e)?this.constants_.NO_PADDING:$.hasExternalInput&&_e.hasExternalInput?this.constants_.LARGE_PADDING:!$.hasStatement&&_e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:$.hasStatement&&_e.hasStatement||$.hasDummyInput||_e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_($,_e){if(Rt.isSpacer(_e))return $.yPos+_e.height/2;if(Rt.isBottomRow($))return $=$.yPos+$.height-$.descenderHeight,Rt.isNextConnection(_e)?$+_e.height/2:$-_e.height/2;if(Rt.isTopRow($))return Rt.isHat(_e)?$.capline-_e.height/2:$.capline+_e.height/2;let ot=$.yPos;return ot=Rt.isField(_e)&&$.hasStatement?ot+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+_e.height/2):ot+$.height/2}finalize_(){let $=0,_e=0;for(var ot=0;ot<this.rows.length;ot++){const lt=this.rows[ot];lt.yPos=_e,lt.xPos=this.startX,_e+=lt.height,$=Math.max($,lt.widthWithConnectedBlocks);var rt=_e-this.topRow.ascenderHeight;lt===this.bottomRow&&rt<this.constants_.MIN_BLOCK_HEIGHT&&(rt=this.constants_.MIN_BLOCK_HEIGHT-rt,this.bottomRow.height+=rt,_e+=rt),this.recordElemPositions_(lt)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(ot=this.block_.nextConnection.targetBlock())&&($=Math.max($,ot.getHeightWidth().width)),this.bottomRow.baseline=_e-this.bottomRow.descenderHeight,this.widthWithChildren=$+this.startX,this.height=_e,this.startY=this.topRow.capline}},GE=class extends du{constructor($){super($)}makeRenderInfo_($){return new UE(this,$)}};Al("thrasos",GE);var hm={};hm.RenderInfo=UE,hm.Renderer=GE;var FE=class extends uu{constructor(){super()}},HE=class extends hu{constructor($,_e){super($,_e)}},VE=class extends Qs{constructor($,_e){super($,_e)}getRenderer(){return this.renderer_}},WE=class extends du{constructor($){super($)}makeConstants_(){return new FE}makeRenderInfo_($){return new VE(this,$)}makeDrawer_($,_e){return new HE($,_e)}};Al("minimalist",WE);var _u={};_u.ConstantProvider=FE,_u.Drawer=HE,_u.RenderInfo=VE,_u.Renderer=WE;var jE=class extends uu{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_($){return super.getCSS_($).concat([`${$} .blocklyInsertionMarker>.blocklyPathLight,`,`${$} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},XE=class{constructor($){this.inlineSteps_=this.steps_="",this.info_=$,this.RTL_=this.info_.RTL,$=$.getRenderer(),this.constants_=$.getConstants(),this.highlightConstants_=$.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner($){this.steps_+=wo($.xPos,this.info_.startY);for(let _e=0,ot;ot=$.elements[_e];_e++)Rt.isLeftSquareCorner(ot)?this.steps_+=this.highlightConstants_.START_POINT:Rt.isLeftRoundedCorner(ot)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Rt.isPreviousConnection(ot)?this.steps_+=this.notchPaths_.pathLeft:Rt.isHat(ot)?this.steps_+=this.startPaths_.path(this.RTL_):Rt.isSpacer(ot)&&ot.width!==0&&(this.steps_+=jt("H",ot.xPos+ot.width-this.highlightOffset_));this.steps_+=jt("H",$.xPos+$.width-this.highlightOffset_)}drawJaggedEdge_($){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+jt("v",$.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput($){const _e=$.getLastInput();if(this.RTL_){const ot=$.height-_e.connectionHeight;this.steps_+=_i(_e.xPos+_e.width-this.highlightOffset_,$.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+jt("v",ot)}else this.steps_+=_i(_e.xPos+_e.width,$.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput($){const _e=$.getLastInput();if(_e)if(this.RTL_){const ot=$.height-2*this.insideCornerPaths_.height;this.steps_+=_i(_e.xPos,$.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+jt("v",ot)+this.insideCornerPaths_.pathBottom(this.RTL_)+Sn($.width-_e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=_i(_e.xPos,$.yPos+$.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Sn($.width-_e.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow($){const _e=$.xPos+$.width-this.highlightOffset_;$ instanceof nm&&$.followsStatement&&(this.steps_+=jt("H",_e)),this.RTL_&&(this.steps_+=jt("H",_e),$.height>this.highlightOffset_&&(this.steps_+=jt("V",$.yPos+$.height-this.highlightOffset_)))}drawBottomRow($){if(this.RTL_)this.steps_+=jt("V",$.baseline-this.highlightOffset_);else{const _e=this.info_.bottomRow.elements[0];Rt.isLeftSquareCorner(_e)?this.steps_+=_i($.xPos+this.highlightOffset_,$.baseline-this.highlightOffset_):Rt.isLeftRoundedCorner(_e)&&(this.steps_+=_i($.xPos,$.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var $=this.info_.outputConnection;$&&($=$.connectionOffsetY+$.height,this.RTL_?this.steps_+=_i(this.info_.startX,$):(this.steps_+=_i(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=jt("V",$)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||($=this.info_.topRow,Rt.isLeftRoundedCorner($.elements[0])?this.steps_+=jt("V",this.outsideCornerPaths_.height):this.steps_+=jt("V",$.capline+this.highlightOffset_))}drawInlineInput($){const _e=this.highlightOffset_,ot=$.xPos+$.connectionWidth;var rt=$.centerline-$.height/2;const lt=$.width-$.connectionWidth,ut=rt+_e;this.RTL_?(rt=$.connectionOffsetY-_e,$=$.height-($.connectionOffsetY+$.connectionHeight)+_e,this.inlineSteps_+=_i(ot-_e,ut)+jt("v",rt)+this.puzzleTabPaths_.pathDown(this.RTL_)+jt("v",$)+jt("h",lt)):this.inlineSteps_+=_i($.xPos+$.width+_e,ut)+jt("v",$.height)+jt("h",-lt)+_i(ot,rt+$.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},zE=class extends hu{constructor($,_e){super($,_e),this.highlighter_=new XE(_e)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const $=this.block_.pathObject;if($.setPath(this.outlinePath_+`
`+this.inlinePath_),$.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&$.flipRTL(),Fu()){let _e,ot;(_e=this.block_)==null||(ot=_e.renderingDebugger)==null||ot.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_($){this.highlighter_.drawJaggedEdge_($),super.drawJaggedEdge_($)}drawValueInput_($){this.highlighter_.drawValueInput($),super.drawValueInput_($)}drawStatementInput_($){this.highlighter_.drawStatementInput($),super.drawStatementInput_($)}drawRightSideRow_($){this.highlighter_.drawRightSideRow($),this.outlinePath_+=jt("H",$.xPos+$.width)+jt("V",$.yPos+$.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_($){this.highlighter_.drawInlineInput($),super.drawInlineInput_($)}positionInlineInputConnection_($){const _e=$.centerline-$.height/2;if($.connectionModel){let ot=$.xPos+$.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(ot*=-1),$.connectionModel.setOffsetInBlock(ot,_e+$.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_($){const _e=$.getLastInput();if(_e!=null&&_e.connectionModel){let ot=$.xPos+$.statementEdge+_e.notchOffset;ot=this.info_.RTL?-1*ot:ot+this.constants_.DARK_PATH_OFFSET,_e.connectionModel.setOffsetInBlock(ot,$.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_($){const _e=$.getLastInput();if(_e&&_e.connectionModel){let ot=$.xPos+$.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(ot*=-1),_e.connectionModel.setOffsetInBlock(ot,$.yPos)}}positionNextConnection_(){const $=this.info_.bottomRow;if($.connection){const _e=$.connection,ot=_e.xPos;_e.connectionModel.setOffsetInBlock((this.info_.RTL?-ot:ot)+this.constants_.DARK_PATH_OFFSET/2,$.baseline+this.constants_.DARK_PATH_OFFSET)}}},YE=class{constructor($){this.OFFSET=.5,this.constantProvider=$,this.START_POINT=wo(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const $=this.constantProvider.CORNER_RADIUS,_e=this.OFFSET,ot=(1-Math.SQRT1_2)*($+_e)-_e,rt=wo(ot,ot)+Bo("a","0 0,0",$,Zt(-ot-_e,$-ot)),lt=Bo("a","0 0,0",$+_e,Zt($+_e,$+_e)),ut=wo(ot,-ot)+Bo("a","0 0,0",$+_e,Zt($-ot,ot+_e));return{width:$+_e,height:$,pathTop(pt){return pt?rt:""},pathBottom(pt){return pt?lt:ut}}}makeOutsideCorner(){const $=this.constantProvider.CORNER_RADIUS,_e=this.OFFSET,ot=(1-Math.SQRT1_2)*($-_e)+_e,rt=wo(ot,ot)+Bo("a","0 0,1",$-_e,Zt($-ot,-ot+_e)),lt=wo(_e,$)+Bo("a","0 0,1",$-_e,Zt($,-$+_e)),ut=-ot,pt=wo(ot,ut)+Bo("a","0 0,1",$-_e,Zt(-ot+_e,-ut-$));return{height:$,topLeft(vt){return vt?rt:lt},bottomLeft(){return pt}}}makePuzzleTab(){const $=this.constantProvider.TAB_WIDTH,_e=this.constantProvider.TAB_HEIGHT,ot=wo(-2,-_e+3.4)+Sn(-.45*$,-2.1),rt=jt("v",2.5)+wo(.97*-$,2.5)+gr("q",[Zt(.05*-$,10),Zt(.3*$,9.5)])+wo(.67*$,-1.9)+jt("v",2.5),lt=jt("v",-1.5)+wo(-.92*$,-.5)+gr("q",[Zt(-.19*$,-5.5),Zt(0,-11)])+wo(.92*$,1),ut=wo(-5,_e-.7)+Sn(.46*$,-2.1);return{width:$,height:_e,pathUp(pt){return pt?ot:lt},pathDown(pt){return pt?rt:ut}}}makeNotch(){return{pathLeft:jt("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Sn(5.1,2.6)+wo(-10.2,6.8)+Sn(5.1,2.6),height:12,width:10.2}}makeStartHat(){const $=this.constantProvider.START_HAT.height,_e=wo(25,-8.7)+gr("c",[Zt(29.7,-6.2),Zt(57.2,-.5),Zt(75,8.7)]),ot=gr("c",[Zt(17.8,-9.2),Zt(45.3,-14.9),Zt(75,-8.7)])+_i(100.5,$+.5);return{path(rt){return rt?_e:ot}}}},KE=class extends im{constructor($,_e){super($,_e),this.constants_=$,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},JE=class extends lu{constructor($,_e){super($,_e),this.constants_=$,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},QE=class extends Qs{constructor($,_e){super($,_e),this.renderer_=$}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===co.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_($,_e){this.isInline&&$.type===co.VALUE?(_e.elements.push(new KE(this.constants_,$)),_e.hasInlineInput=!0):$.type===co.STATEMENT?(_e.elements.push(new JE(this.constants_,$)),_e.hasStatement=!0):$.type===co.VALUE?(_e.elements.push(new d_(this.constants_,$)),_e.hasExternalInput=!0):$.type===co.DUMMY&&(_e.minHeight=Math.max(_e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),_e.hasDummyInput=!0),this.isInline||_e.align!==null||(_e.align=$.align)}addElemSpacing_(){let $=!1;for(let ot=0,rt;rt=this.rows[ot];ot++)rt.hasExternalInput&&($=!0);for(let ot=0,rt;rt=this.rows[ot];ot++){var _e=rt.elements;if(rt.elements=[],rt.startsWithElemSpacer()&&rt.elements.push(new fr(this.constants_,this.getInRowSpacing_(null,_e[0]))),_e.length){for(let lt=0;lt<_e.length-1;lt++){rt.elements.push(_e[lt]);const ut=this.getInRowSpacing_(_e[lt],_e[lt+1]);rt.elements.push(new fr(this.constants_,ut))}rt.elements.push(_e[_e.length-1]),rt.endsWithElemSpacer()&&(_e=this.getInRowSpacing_(_e[_e.length-1],null),$&&rt.hasDummyInput&&(_e+=this.constants_.TAB_WIDTH),rt.elements.push(new fr(this.constants_,_e)))}}}getInRowSpacing_($,_e){if(!$)return _e&&Rt.isField(_e)&&_e.isEditable?this.constants_.MEDIUM_PADDING:_e&&Rt.isInlineInput(_e)?this.constants_.MEDIUM_LARGE_PADDING:_e&&Rt.isStatementInput(_e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Rt.isInput($)&&(!_e||Rt.isStatementInput(_e)))return Rt.isField($)&&$.isEditable?this.constants_.MEDIUM_PADDING:Rt.isIcon($)?2*this.constants_.LARGE_PADDING+1:Rt.isHat($)?this.constants_.NO_PADDING:Rt.isPreviousOrNextConnection($)?this.constants_.LARGE_PADDING:Rt.isLeftRoundedCorner($)?this.constants_.MIN_BLOCK_WIDTH:Rt.isJaggedEdge($)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Rt.isInput($)&&!_e){if(Rt.isExternalInput($))return this.constants_.NO_PADDING;if(Rt.isInlineInput($))return this.constants_.LARGE_PADDING;if(Rt.isStatementInput($))return this.constants_.NO_PADDING}if(!Rt.isInput($)&&_e&&Rt.isInput(_e)){if(Rt.isField($)&&$.isEditable){if(Rt.isInlineInput(_e)||Rt.isExternalInput(_e))return this.constants_.SMALL_PADDING}else{if(Rt.isInlineInput(_e)||Rt.isExternalInput(_e))return this.constants_.MEDIUM_LARGE_PADDING;if(Rt.isStatementInput(_e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Rt.isIcon($)&&_e&&!Rt.isInput(_e))return this.constants_.LARGE_PADDING;if(Rt.isInlineInput($)&&_e&&Rt.isField(_e))return _e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Rt.isLeftSquareCorner($)&&_e){if(Rt.isHat(_e))return this.constants_.NO_PADDING;if(Rt.isPreviousConnection(_e))return _e.notchOffset;if(Rt.isNextConnection(_e))return _e.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Rt.isLeftRoundedCorner($)&&_e){if(Rt.isPreviousConnection(_e))return _e.notchOffset-this.constants_.CORNER_RADIUS;if(Rt.isNextConnection(_e))return _e.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Rt.isField($)&&_e&&Rt.isField(_e)&&$.isEditable===_e.isEditable||_e&&Rt.isJaggedEdge(_e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_($,_e){return Rt.isTopRow($)&&Rt.isBottomRow(_e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Rt.isTopRow($)||Rt.isBottomRow(_e)?this.constants_.NO_PADDING:$.hasExternalInput&&_e.hasExternalInput?this.constants_.LARGE_PADDING:!$.hasStatement&&_e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:$.hasStatement&&_e.hasStatement||!$.hasStatement&&_e.hasDummyInput||$.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_($,_e){if(Rt.isSpacer(_e))return $.yPos+_e.height/2;if(Rt.isBottomRow($))return $=$.yPos+$.height-$.descenderHeight,Rt.isNextConnection(_e)?$+_e.height/2:$-_e.height/2;if(Rt.isTopRow($))return Rt.isHat(_e)?$.capline-_e.height/2:$.capline+_e.height/2;let ot=$.yPos;return Rt.isField(_e)||Rt.isIcon(_e)?(ot+=_e.height/2,($.hasInlineInput||$.hasStatement)&&_e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=$.height&&(ot+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):ot=Rt.isInlineInput(_e)?ot+_e.height/2:ot+$.height/2,ot}alignRowElements_(){if(this.isInline){var $=0,_e=new WeakMap,ot=null;for(let rt=this.rows.length-1,lt;lt=this.rows[rt];rt--)_e.set(lt,$),Rt.isInputRow(lt)&&(lt.hasStatement&&this.alignStatementRow_(lt),ot&&ot.hasStatement&&lt.width<ot.width?_e.set(lt,ot.width):$=lt.width,ot=lt);$=0;for(let rt=0,lt;lt=this.rows[rt];rt++)lt.hasStatement?$=this.getDesiredRowWidth_(lt):Rt.isSpacer(lt)?lt.width=Math.max($,_e.get(lt)):(ot=lt.width,$=Math.max($,_e.get(lt))-ot,0<$&&this.addAlignmentPadding_(lt,$),$=lt.width)}else super.alignRowElements_()}getDesiredRowWidth_($){return this.isInline&&$.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_($)}finalize_(){let $=0,_e=0;for(let rt=0,lt;lt=this.rows[rt];rt++){lt.yPos=_e,lt.xPos=this.startX,_e+=lt.height,$=Math.max($,lt.widthWithConnectedBlocks);var ot=_e-this.topRow.ascenderHeight;lt===this.bottomRow&&ot<this.constants_.MIN_BLOCK_HEIGHT&&(ot=this.constants_.MIN_BLOCK_HEIGHT-ot,this.bottomRow.height+=ot,_e+=ot),this.recordElemPositions_(lt)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(ot=this.block_.nextConnection.targetBlock())&&($=Math.max($,ot.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=_e-this.bottomRow.descenderHeight,this.widthWithChildren=$+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=_e+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},ZE=class extends __{constructor($,_e,ot){super($,_e,ot),this.constants=ot,this.colourDark="#000000",this.svgPathDark=Lt(Ot.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Lt(Ot.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath($){this.svgPath.setAttribute("d",$),this.svgPathDark.setAttribute("d",$)}setHighlightPath($){this.svgPathLight.setAttribute("d",$)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour($){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour($),this.svgPath.setAttribute("stroke","none")}setStyle($){this.style=$,this.colourDark=vs("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted($){$?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_($){if($){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_($){super.updateDisabled_($),$&&this.svgPath.setAttribute("stroke","none")}},qE=class extends du{constructor($){super($),this.highlightConstants_=null}init($,_e){super.init($,_e),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom($,_e){super.refreshDom($,_e),this.getHighlightConstants().init()}makeConstants_(){return new jE}makeRenderInfo_($){return new QE(this,$)}makeDrawer_($,_e){return new zE($,_e)}makePathObject($,_e){return new ZE($,_e,this.getConstants())}makeHighlightConstants_(){return new YE(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};Al("geras",qE);var mn={};mn.ConstantProvider=jE,mn.Drawer=zE,mn.HighlightConstantProvider=YE,mn.Highlighter=XE,mn.InlineInput=KE,mn.PathObject=ZE,mn.RenderInfo=QE,mn.Renderer=qE,mn.StatementInput=JE;var eI=class{constructor($){this.container=$,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=Lt(Ot.SVG,{xmlns:ks,"xmlns:html":Br,"xmlns:xlink":hr,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface($,_e){$=Math.round($),_e=Math.round(_e),this.SVG.style.display="block",$n(this.SVG,"translate3d("+$+"px, "+_e+"px, 0)")}getSurfaceTranslation(){return Dr(this.SVG)}clearAndHide($){if(!$)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const _e=this.SVG.childNodes[0],ot=this.SVG.childNodes[1];if(!_e||!ot||!_e.classList.contains("blocklyBlockCanvas")&&ot.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?ir(_e,this.previousSibling):$.insertBefore(_e,$.firstChild),ir(ot,_e),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");$n(this.SVG,""),this.previousSibling=null}setContentsAndShow($,_e,ot,rt,lt,ut){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=ot,$.setAttribute("transform","translate(0, 0) scale("+ut+")"),_e.setAttribute("transform","translate(0, 0) scale("+ut+")"),this.SVG.setAttribute("width",String(rt)),this.SVG.setAttribute("height",String(lt)),this.SVG.appendChild($),this.SVG.appendChild(_e),this.SVG.style.display="block"}},tI=class{constructor($){this.container=$,this.scale_=1,this.surfaceXY_=new Ht(0,0),this.childSurfaceXY_=new Ht(0,0),this.svg_=Lt(Ot.SVG,{xmlns:ks,"xmlns:html":Br,"xmlns:xlink":hr,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup_=Lt(Ot.G,{},this.svg_)}createDom(){mo("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow($){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild($),this.svg_.style.display="block",this.surfaceXY_=new Ht(0,0)}translateAndScaleGroup($,_e,ot){this.scale_=ot,$=Math.round($),_e=Math.round(_e),this.childSurfaceXY_.x=$,this.childSurfaceXY_.y=_e,this.dragGroup_.setAttribute("transform","translate("+$+","+_e+") scale("+ot+")")}translateSurfaceInternal_(){let $=this.surfaceXY_.x,_e=this.surfaceXY_.y;$=Math.round($),_e=Math.round(_e),this.svg_.style.display="block",$n(this.svg_,"translate3d("+$+"px, "+_e+"px, 0)")}translateBy($,_e){this.surfaceXY_=new Ht(this.surfaceXY_.x+$,this.surfaceXY_.y+_e),this.translateSurfaceInternal_()}translateSurface($,_e){this.surfaceXY_=new Ht($*this.scale_,_e*this.scale_),this.translateSurfaceInternal_()}getSurfaceTranslation(){const $=Dr(this.svg_);return new Ht($.x/this.scale_,$.y/this.scale_)}getGroup(){return this.dragGroup_}getSvgRoot(){return this.svg_}getCurrentBlock(){return this.dragGroup_.firstChild}getWsTranslation(){return this.childSurfaceXY_.clone()}clearAndHide($){const _e=this.getCurrentBlock();if(_e&&($?$.appendChild(_e):this.dragGroup_.removeChild(_e)),this.svg_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=new Ht(0,0)}},p_={};p_.bumpIntoBounds=Hu,p_.bumpIntoBoundsHandler=F$,p_.bumpTopObjectsIntoBounds=rp;var dm=class{constructor($,_e,ot,rt,lt){this.workspace=$,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,_e=_e===void 0?!0:_e,ot=ot===void 0?!0:ot;const ut=_e&&ot;_e&&(this.hScroll=new No($,!0,ut,rt,lt)),ot&&(this.vScroll=new No($,!1,ut,rt,lt)),ut&&(this.corner_=Lt(Ot.RECT,{height:No.scrollbarThickness,width:No.scrollbarThickness,class:"blocklyScrollbarBackground"}),ir(this.corner_,$.getBubbleCanvas()))}dispose(){go(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const $=this.workspace.getMetrics();if($){var _e=!1,ot=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===$.viewWidth&&this.oldHostMetrics_.viewHeight===$.viewHeight&&this.oldHostMetrics_.absoluteTop===$.absoluteTop&&this.oldHostMetrics_.absoluteLeft===$.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===$.scrollWidth&&this.oldHostMetrics_.viewLeft===$.viewLeft&&this.oldHostMetrics_.scrollLeft===$.scrollLeft||(_e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===$.scrollHeight&&this.oldHostMetrics_.viewTop===$.viewTop&&this.oldHostMetrics_.scrollTop===$.scrollTop||(ot=!0)):ot=_e=!0,_e||ot){try{Fo(),this.hScroll&&_e&&this.hScroll.resize($),this.vScroll&&ot&&this.vScroll.resize($)}finally{Ho()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==$.viewWidth||this.oldHostMetrics_.absoluteLeft!==$.absoluteLeft){let rt;(rt=this.corner_)==null||rt.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==$.viewHeight||this.oldHostMetrics_.absoluteTop!==$.absoluteTop){let rt;(rt=this.corner_)==null||rt.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=$}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin($,_e){this.hScroll&&this.hScroll.setOrigin($,_e),this.vScroll&&this.vScroll.setOrigin($,_e)}set($,_e,ot){this.hScroll&&this.hScroll.set($,!1),this.vScroll&&this.vScroll.set(_e,!1),(ot||ot===void 0)&&($={},this.hScroll&&($.x=this.hScroll.getRatio_()),this.vScroll&&($.y=this.vScroll.getRatio_()),this.workspace.setMetrics($))}setX($){this.hScroll&&this.hScroll.set($,!0)}setY($){this.vScroll&&this.vScroll.set($,!0)}setContainerVisible($){this.hScroll&&this.hScroll.setContainerVisible($),this.vScroll&&this.vScroll.setContainerVisible($)}isVisible(){let $=!1;return this.hScroll&&($=this.hScroll.isVisible()),this.vScroll&&($=$||this.vScroll.isVisible()),$}resizeContent($){this.hScroll&&this.hScroll.resizeContentHorizontal($),this.vScroll&&this.vScroll.resizeContentVertical($)}resizeView($){this.hScroll&&this.hScroll.resizeViewHorizontal($),this.vScroll&&this.vScroll.resizeViewVertical($)}},oI=!1;tt.Generator$$module$build$src$core$generator=class{constructor($){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=$,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode($){$||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),$=Xt());var _e=[];this.init($),$=$.getTopBlocks(!0);for(let ot=0,rt;rt=$[ot];ot++){let lt=this.blockToCode(rt);Array.isArray(lt)&&(lt=lt[0]),lt&&(rt.outputConnection&&(lt=this.scrubNakedValue(lt),this.STATEMENT_PREFIX&&!rt.suppressPrefixSuffix&&(lt=this.injectId(this.STATEMENT_PREFIX,rt)+lt),this.STATEMENT_SUFFIX&&!rt.suppressPrefixSuffix&&(lt+=this.injectId(this.STATEMENT_SUFFIX,rt))),_e.push(lt))}return _e=_e.join(`
`),_e=this.finish(_e),_e=_e.replace(/^\s+\n/,""),_e=_e.replace(/\n\s+$/,`
`),_e=_e.replace(/[ \t]+\n/g,`
`)}prefixLines($,_e){return _e+$.replace(/(?!\n$)\n/g,`
`+_e)}allNestedComments($){const _e=[];$=$.getDescendants(!0);for(let ot=0;ot<$.length;ot++){const rt=$[ot].getCommentText();rt&&_e.push(rt)}return _e.length&&_e.push(""),_e.join(`
`)}blockToCode($,_e){if(this.isInitialized===!1&&console.warn("Generator init was not called before blockToCode was called."),!$)return"";if(!$.isEnabled())return _e?"":this.blockToCode($.getNextBlock());if($.isInsertionMarker())return _e?"":this.blockToCode($.getChildren(!1)[0]);var ot=this[$.type];if(typeof ot!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+$.type+'".');if(ot=ot.call($,$),Array.isArray(ot)){if(!$.outputConnection)throw TypeError("Expecting string from statement block: "+$.type);return[this.scrub_($,ot[0],_e),ot[1]]}if(typeof ot=="string")return this.STATEMENT_PREFIX&&!$.suppressPrefixSuffix&&(ot=this.injectId(this.STATEMENT_PREFIX,$)+ot),this.STATEMENT_SUFFIX&&!$.suppressPrefixSuffix&&(ot+=this.injectId(this.STATEMENT_SUFFIX,$)),this.scrub_($,ot,_e);if(ot===null)return"";throw SyntaxError("Invalid code generated: "+ot)}valueToCode($,_e,ot){if(isNaN(ot))throw TypeError("Expecting valid order from block: "+$.type);var rt=$.getInputTargetBlock(_e);if(!rt||(_e=this.blockToCode(rt),_e===""))return"";if(!Array.isArray(_e))throw TypeError("Expecting tuple from value block: "+rt.type);if($=_e[0],_e=_e[1],isNaN(_e))throw TypeError("Expecting valid order from value block: "+rt.type);if(!$)return"";rt=!1;var lt=Math.floor(ot);const ut=Math.floor(_e);if(lt<=ut&&(lt!==ut||lt!==0&&lt!==99)){for(rt=!0,lt=0;lt<this.ORDER_OVERRIDES.length;lt++)if(this.ORDER_OVERRIDES[lt][0]===ot&&this.ORDER_OVERRIDES[lt][1]===_e){rt=!1;break}}return rt&&($="("+$+")"),$}statementToCode($,_e){if($=$.getInputTargetBlock(_e),_e=this.blockToCode($),typeof _e!="string")throw TypeError("Expecting code from statement block: "+($&&$.type));return _e&&(_e=this.prefixLines(_e,this.INDENT)),_e}addLoopTrap($,_e){return this.INFINITE_LOOP_TRAP&&($=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,_e),this.INDENT)+$),this.STATEMENT_SUFFIX&&!_e.suppressPrefixSuffix&&($=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,_e),this.INDENT)+$),this.STATEMENT_PREFIX&&!_e.suppressPrefixSuffix&&($+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,_e),this.INDENT)),$}injectId($,_e){return _e=_e.id.replace(/\$/g,"$$$$"),$.replace(/%1/g,"'"+_e+"'")}addReservedWords($){this.RESERVED_WORDS_+=$+","}provideFunction_($,_e){if(!this.definitions_[$]){const ot=this.nameDB_.getDistinctName($,tt.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[$]=ot,Array.isArray(_e)&&(_e=_e.join(`
`)),_e=_e.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,ot);let rt;for(;rt!==_e;)rt=_e,_e=_e.replace(/^(( {2})*) {2}/gm,"$1\0");_e=_e.replace(/\0/g,this.INDENT),this.definitions_[$]=_e}return this.functionNames_[$]}init($){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_($,_e,ot){return _e}finish($){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),$}scrubNakedValue($){return $}},Object.defineProperties(tt.Generator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return mo("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set($){mo("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=$}}}),tt.Generator$$module$build$src$core$generator;var Zs=class{constructor($,_e,ot,rt){this.workspace=$,this.targetWorkspace=_e,this.isLabel_=rt,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=ot.text,this.position_=new Ht(0,0),this.callbackKey_=ot.callbackKey||ot.callbackkey,this.cssClass_=ot["web-class"]||null,this.info=ot}createDom(){var $=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&($+=" "+this.cssClass_),this.svgGroup_=Lt(Ot.G,{class:$},this.workspace.getCanvas());let _e;this.isLabel_||(_e=Lt(Ot.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),$=Lt(Ot.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const ot=Lt(Ot.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var rt=Mo(this.text_);this.workspace.RTL&&(rt+="\u200F"),ot.textContent=rt,this.isLabel_&&(this.svgText_=ot,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const lt=Ar(ot,"fontSize"),ut=Ar(ot,"fontWeight"),pt=Ar(ot,"fontFamily");if(this.width=_l(ot,lt,ut,pt),rt=$l(rt,lt,ut,pt),this.height=rt.height,!this.isLabel_){this.width+=2*Zs.TEXT_MARGIN_X,this.height+=2*Zs.TEXT_MARGIN_Y;let vt;(vt=_e)==null||vt.setAttribute("width",this.width.toString());let At;(At=_e)==null||At.setAttribute("height",this.height.toString())}return $.setAttribute("width",this.width.toString()),$.setAttribute("height",this.height.toString()),ot.setAttribute("x",(this.width/2).toString()),ot.setAttribute("y",(this.height/2-rt.height/2+rt.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=Et(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo($,_e){this.position_.x=$,this.position_.y=_e,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&kt(this.onMouseUpWrapper_),this.svgGroup_&&go(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_($){($=this.targetWorkspace.getGesture($))&&$.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||($=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&$(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};Zs.TEXT_MARGIN_X=5,Zs.TEXT_MARGIN_Y=2,Mr(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var _m=class{constructor($){this.workspace_=$}getDimensionsPx_($){let _e=0,ot=0;return $&&(_e=$.getWidth(),ot=$.getHeight()),new Yo(_e,ot)}getFlyoutMetrics($){return $=this.getDimensionsPx_(this.workspace_.getFlyout($)),{width:$.width,height:$.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const $=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:$.width,height:$.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let $=0;const _e=this.getToolboxMetrics(),ot=this.getFlyoutMetrics(!0),rt=!!this.workspace_.getToolbox(),lt=!!this.workspace_.getFlyout(!0);var ut=rt?_e.position:ot.position,pt=ut===ro.LEFT;return ut=ut===ro.TOP,rt&&pt?$=_e.width:lt&&pt&&($=ot.width),pt=0,rt&&ut?pt=_e.height:lt&&ut&&(pt=ot.height),{top:pt,left:$}}getViewMetrics($){$=$?this.workspace_.scale:1;const _e=this.getSvgMetrics(),ot=this.getToolboxMetrics(),rt=this.getFlyoutMetrics(!0),lt=this.workspace_.getToolbox()?ot.position:rt.position;return this.workspace_.getToolbox()?lt===ro.TOP||lt===ro.BOTTOM?_e.height-=ot.height:(lt===ro.LEFT||lt===ro.RIGHT)&&(_e.width-=ot.width):this.workspace_.getFlyout(!0)&&(lt===ro.TOP||lt===ro.BOTTOM?_e.height-=rt.height:(lt===ro.LEFT||lt===ro.RIGHT)&&(_e.width-=rt.width)),{height:_e.height/$,width:_e.width/$,top:-this.workspace_.scrollY/$,left:-this.workspace_.scrollX/$}}getContentMetrics($){$=$?1:this.workspace_.scale;const _e=this.workspace_.getBlocksBoundingBox();return{height:(_e.bottom-_e.top)*$,width:(_e.right-_e.left)*$,top:_e.top*$,left:_e.left*$}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_($){if(!this.hasFixedEdges())return{};const _e=this.workspace_.isMovableHorizontally(),ot=this.workspace_.isMovableVertically();$=$||this.getViewMetrics(!1);const rt={};return ot||(rt.top=$.top,rt.bottom=$.top+$.height),_e||(rt.left=$.left,rt.right=$.left+$.width),rt}getPaddedContent_($,_e){const ot=_e.top+_e.height,rt=_e.left+_e.width,lt=$.width;$=$.height;const ut=lt/2,pt=$/2;return{top:Math.min(_e.top-pt,ot-$),bottom:Math.max(ot+pt,_e.top+$),left:Math.min(_e.left-ut,rt-lt),right:Math.max(rt+ut,_e.left+lt)}}getScrollMetrics($,_e,ot){$=$?this.workspace_.scale:1,_e=_e||this.getViewMetrics(!1);var rt=ot||this.getContentMetrics();ot=this.getComputedFixedEdges_(_e),_e=this.getPaddedContent_(_e,rt),rt=ot.top!==void 0?ot.top:_e.top;const lt=ot.left!==void 0?ot.left:_e.left;return{top:rt/$,left:lt/$,width:((ot.right!==void 0?ot.right:_e.right)-lt)/$,height:((ot.bottom!==void 0?ot.bottom:_e.bottom)-rt)/$}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const $=this.getToolboxMetrics(),_e=this.getFlyoutMetrics(!0),ot=this.getSvgMetrics(),rt=this.getAbsoluteMetrics(),lt=this.getViewMetrics(),ut=this.getContentMetrics(),pt=this.getScrollMetrics(!1,lt,ut);return{contentHeight:ut.height,contentWidth:ut.width,contentTop:ut.top,contentLeft:ut.left,scrollHeight:pt.height,scrollWidth:pt.width,scrollTop:pt.top,scrollLeft:pt.left,viewHeight:lt.height,viewWidth:lt.width,viewTop:lt.top,viewLeft:lt.left,absoluteTop:rt.top,absoluteLeft:rt.left,svgHeight:ot.height,svgWidth:ot.width,toolboxWidth:$.width,toolboxHeight:$.height,toolboxPosition:$.position,flyoutWidth:_e.width,flyoutHeight:_e.height}}};$o(Bt.METRICS_MANAGER,kn,_m);var iI=class extends _m{constructor($,_e){super($),this.flyout_=_e}getBoundingBox_(){let $;try{$=this.workspace_.getCanvas().getBBox()}catch{$={height:0,y:0,width:0,x:0}}return $}getContentMetrics($){const _e=this.getBoundingBox_();return $=$?1:this.workspace_.scale,{height:_e.height*$,width:_e.width*$,top:_e.y*$,left:_e.x*$}}getScrollMetrics($,_e,ot){return _e=ot||this.getContentMetrics(),ot=this.flyout_.MARGIN*this.workspace_.scale,$=$?this.workspace_.scale:1,{height:(_e.height+2*ot)/$,width:(_e.width+_e.left+ot)/$,top:0,left:0}}},qs;(function($){$.BLOCK="block",$.BUTTON="button"})(qs||(qs={}));var g_=class extends c_{constructor($){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,$.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Xr($),this.workspace_.setMetricsManager(new iI(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=vn(),this.RTL=!!$.RTL,this.toolboxPosition_=$.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom($){return this.svgGroup_=Lt($,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=Lt(Ot.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init($){this.targetWorkspace=$,this.workspace_.targetWorkspace=$,this.workspace_.scrollbar=new dm(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Et(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Et(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),$.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ko.Capability.DELETE_AREA,Ko.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),kt(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(go(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible($){const _e=$!==this.isVisible();this.isVisible_=$,_e&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible($){const _e=$!==this.containerVisible_;this.containerVisible_=$,_e&&this.updateDisplay_()}updateDisplay_(){let $;$=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=$?"block":"none");let _e;(_e=this.workspace_.scrollbar)==null||_e.setContainerVisible($)}positionAt_($,_e,ot,rt){let lt;(lt=this.svgGroup_)==null||lt.setAttribute("width",$.toString());let ut;(ut=this.svgGroup_)==null||ut.setAttribute("height",_e.toString()),this.workspace_.setCachedParentSvgSize($,_e);let pt;if(((pt=this.svgGroup_)==null?void 0:pt.tagName)==="svg")$n(this.svgGroup_,"translate("+ot+"px,"+rt+"px)");else{let vt;(vt=this.svgGroup_)==null||vt.setAttribute("transform","translate("+ot+","+rt+")")}($=this.workspace_.scrollbar)&&($.setOrigin(ot,rt),$.resize(),$.hScroll&&$.hScroll.setPosition($.hScroll.position.x,$.hScroll.position.y),$.vScroll&&$.vScroll.setPosition($.vScroll.position.x,$.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let $=0,_e;_e=this.listeners_[$];$++)kt(_e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show($){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof $=="string"&&($=this.getDynamicCategoryContents_($)),this.setVisible(!0),$=Mu($),$=this.createFlyoutInfo_($),this.layout_($.contents,$.gaps),this.listeners_.push(Et(this.svgBackground_,"mouseover",this,function(){const _e=this.workspace_.getTopBlocks(!1);for(let ot=0,rt;rt=_e[ot];ot++)rt.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_($){const _e=[],ot=[];this.permanentlyDisabled_.length=0;const rt=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let ut=0,pt;pt=$[ut];ut++){if("custom"in pt){var lt=this.getDynamicCategoryContents_(pt.custom);lt=Mu(lt),$.splice.apply($,[ut,1,...lt]),pt=$[ut]}switch(pt.kind.toUpperCase()){case"BLOCK":lt=pt;const vt=this.createFlyoutBlock_(lt);_e.push({type:qs.BLOCK,block:vt}),this.addBlockGap_(lt,ot,rt);break;case"SEP":this.addSeparatorGap_(pt,ot,rt);break;case"LABEL":lt=this.createButton_(pt,!0),_e.push({type:qs.BUTTON,button:lt}),ot.push(rt);break;case"BUTTON":lt=this.createButton_(pt,!1),_e.push({type:qs.BUTTON,button:lt}),ot.push(rt)}}return{contents:_e,gaps:ot}}getDynamicCategoryContents_($){if($=this.workspace_.targetWorkspace.getToolboxCategoryCallback($),typeof $!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return $(this.workspace_.targetWorkspace)}createButton_($,_e){return new Zs(this.workspace_,this.targetWorkspace,$,_e)}createFlyoutBlock_($){let _e;return $.blockxml?($=typeof $.blockxml=="string"?xr($.blockxml):$.blockxml,(_e=this.getRecycledBlock_($.getAttribute("type")))||(_e=bs($,this.workspace_))):(_e=this.getRecycledBlock_($.type),_e||($.enabled===void 0&&($.enabled=$.disabled!=="true"&&$.disabled!==!0),_e=is($,this.workspace_))),_e.isEnabled()||this.permanentlyDisabled_.push(_e),_e}getRecycledBlock_($){let _e=-1;for(let ot=0;ot<this.recycledBlocks_.length;ot++)if(this.recycledBlocks_[ot].type===$){_e=ot;break}return _e===-1?void 0:this.recycledBlocks_.splice(_e,1)[0]}addBlockGap_($,_e,ot){let rt;$.gap?rt=parseInt($.gap.toString()):$.blockxml&&($=typeof $.blockxml=="string"?xr($.blockxml):$.blockxml,rt=parseInt($.getAttribute("gap"))),_e.push(!rt||isNaN(rt)?ot:rt)}addSeparatorGap_($,_e,ot){$=parseInt($.gap.toString()),!isNaN($)&&0<_e.length?_e[_e.length-1]=$:_e.push(ot)}clearOldBlocks_(){var $=this.workspace_.getTopBlocks(!1);for(let ot=0,rt;rt=$[ot];ot++)this.blockIsRecyclable_(rt)?this.recycleBlock_(rt):rt.dispose(!1,!1);for($=0;$<this.mats_.length;$++){const ot=this.mats_[$];ot&&(Lu(ot),go(ot))}this.mats_.length=0;for(let ot=0,rt;rt=this.buttons_[ot];ot++)rt.dispose();this.buttons_.length=0;let _e;(_e=this.workspace_.getPotentialVariableMap())==null||_e.clear()}emptyRecycledBlocks_(){for(let $=0;$<this.recycledBlocks_.length;$++)this.recycledBlocks_[$].dispose();this.recycledBlocks_=[]}blockIsRecyclable_($){return!1}recycleBlock_($){const _e=$.getRelativeToSurfaceXY();$.moveBy(-_e.x,-_e.y),this.recycledBlocks_.push($)}addBlockListeners_($,_e,ot){this.listeners_.push(Et($,"mousedown",null,this.blockMouseDown_(_e))),this.listeners_.push(Et(ot,"mousedown",null,this.blockMouseDown_(_e))),this.listeners_.push(Ct($,"mouseenter",_e,_e.addSelect)),this.listeners_.push(Ct($,"mouseleave",_e,_e.removeSelect)),this.listeners_.push(Ct(ot,"mouseenter",_e,_e.addSelect)),this.listeners_.push(Ct(ot,"mouseleave",_e,_e.removeSelect))}blockMouseDown_($){return _e=>{const ot=this.targetWorkspace.getGesture(_e);ot&&(ot.setStartBlock($),ot.handleFlyoutStart(_e,this))}}onMouseDown_($){const _e=this.targetWorkspace.getGesture($);_e&&_e.handleFlyoutStart($,this)}isBlockCreatable($){return $.isEnabled()}createBlock($){let _e=null;Fo();var ot=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{_e=this.placeNewBlock_($)}finally{Ho()}if(this.targetWorkspace.hideChaff(),$=L_(this.targetWorkspace,ot),jo()){for(qt(!0),ot=0;ot<$.length;ot++){const rt=$[ot];to(new(oo(cs))(rt))}to(new(oo(Jo))(_e))}return this.autoClose?this.hide():this.filterForCapacity_(),_e}initFlyoutButton_($,_e,ot){const rt=$.createDom();$.moveTo(_e,ot),$.show(),this.listeners_.push(Et(rt,"mousedown",this,this.onMouseDown_)),this.buttons_.push($)}createRect_($,_e,ot,rt,lt){return _e=Lt(Ot.RECT,{"fill-opacity":0,x:_e,y:ot,height:rt.height,width:rt.width}),_e.tooltip=$,Cu(_e),this.workspace_.getCanvas().insertBefore(_e,$.getSvgRoot()),this.rectMap_.set($,_e),this.mats_[lt]=_e}moveRectToBlock_($,_e){const ot=_e.getHeightWidth();$.setAttribute("width",ot.width.toString()),$.setAttribute("height",ot.height.toString()),_e=_e.getRelativeToSurfaceXY(),$.setAttribute("y",_e.y.toString()),$.setAttribute("x",(this.RTL?_e.x-ot.width:_e.x).toString())}filterForCapacity_(){const $=this.workspace_.getTopBlocks(!1);for(let _e=0,ot;ot=$[_e];_e++)if(this.permanentlyDisabled_.indexOf(ot)===-1){const rt=this.targetWorkspace.isCapacityAvailable(Wo(ot));for(;ot;)ot.setEnabled(rt),ot=ot.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_($){var _e=this.targetWorkspace;if(!$.getSvgRoot())throw Error("oldBlock is not rendered.");const ot=Rn($);return _e.setResizesEnabled(!1),_e=is(ot,_e),this.positionNewBlock_($,_e),_e}positionNewBlock_($,_e){const ot=this.targetWorkspace;var rt=ot.getOriginOffsetInPixels(),lt=this.workspace_.getOriginOffsetInPixels();$=$.getRelativeToSurfaceXY(),$.scale(this.workspace_.scale),lt=Ht.sum(lt,$),rt=Ht.difference(lt,rt),rt.scale(1/ot.scale),_e.moveTo(new Ht(rt.x,rt.y))}};g_.FlyoutItemType=qs;var pm=class extends g_{constructor($){super($)}setMetrics_($){if(this.isVisible()){var _e=this.workspace_.getMetricsManager(),ot=_e.getScrollMetrics(),rt=_e.getViewMetrics();_e=_e.getAbsoluteMetrics(),typeof $.y=="number"&&(this.workspace_.scrollY=-(ot.top+(ot.height-rt.height)*$.y)),this.workspace_.translate(this.workspace_.scrollX+_e.left,this.workspace_.scrollY+_e.top)}}getX(){if(!this.isVisible())return 0;var $=this.targetWorkspace.getMetricsManager();const _e=$.getAbsoluteMetrics(),ot=$.getViewMetrics();return $=$.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===ro.LEFT?$.width:ot.width-this.width_:this.toolboxPosition_===ro.LEFT?0:ot.width:this.toolboxPosition_===ro.LEFT?0:ot.width+_e.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var $=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=$.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,$.height-2*this.CORNER_RADIUS),$=this.getX();var _e=this.getY();this.positionAt_(this.width_,this.height_,$,_e)}}setBackgroundPath_($,_e){const ot=this.toolboxPosition_===ro.RIGHT;var rt=$+this.CORNER_RADIUS;rt=["M "+(ot?rt:0)+",0"],rt.push("h",ot?-$:$),rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,ot?0:1,ot?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),rt.push("v",Math.max(0,_e)),rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,ot?0:1,ot?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),rt.push("h",ot?$:-$),rt.push("z"),this.svgBackground_.setAttribute("d",rt.join(" "))}scrollToStart(){let $;($=this.workspace_.scrollbar)==null||$.setY(0)}wheel_($){var _e=bt($);if(_e.y){const ot=this.workspace_.getMetricsManager(),rt=ot.getScrollMetrics();_e=ot.getViewMetrics().top-rt.top+_e.y;let lt;(lt=this.workspace_.scrollbar)==null||lt.setY(_e),qr(),Zr()}$.preventDefault(),$.stopPropagation()}layout_($,_e){this.workspace_.scale=this.targetWorkspace.scale;var ot=this.MARGIN;const rt=this.RTL?ot:ot+this.tabWidth_;for(let vt=0,At;At=$[vt];vt++)if(At.type==="block"){var lt=At.block,ut=lt.getDescendants(!1);for(let ho=0,Eo;Eo=ut[ho];ho++)Eo.isInFlyout=!0;lt.render(),ut=lt.getSvgRoot();const xt=lt.getHeightWidth();var pt=lt.outputConnection?rt-this.tabWidth_:rt;lt.moveBy(pt,ot),pt=this.createRect_(lt,this.RTL?pt-xt.width:pt,ot,xt,vt),this.addBlockListeners_(ut,lt,pt),ot+=xt.height+_e[vt]}else At.type==="button"&&(lt=At.button,this.initFlyoutButton_(lt,rt,ot),ot+=lt.height+_e[vt])}isDragTowardWorkspace($){$=Math.atan2($.y,$.x)/Math.PI*180;const _e=this.dragAngleRange_;return $<_e&&$>-_e||$<-180+_e||$>180-_e}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const $=this.svgGroup_.getBoundingClientRect(),_e=$.left;return this.toolboxPosition_===ro.LEFT?new Do(-1e9,1e9,-1e9,_e+$.width):new Do(-1e9,1e9,_e,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let $=0;var _e=this.workspace_.getTopBlocks(!1);for(let rt=0,lt;lt=_e[rt];rt++){var ot=lt.getHeightWidth().width;lt.outputConnection&&(ot-=this.tabWidth_),$=Math.max($,ot)}for(let rt=0,lt;lt=this.buttons_[rt];rt++)$=Math.max($,lt.width);if($+=1.5*this.MARGIN+this.tabWidth_,$*=this.workspace_.scale,$+=No.scrollbarThickness,this.width_!==$){for(let rt=0,lt;lt=_e[rt];rt++){if(this.RTL){ot=lt.getRelativeToSurfaceXY().x;let ut=$/this.workspace_.scale-this.MARGIN;lt.outputConnection||(ut-=this.tabWidth_),lt.moveBy(ut-ot,0)}this.rectMap_.has(lt)&&this.moveRectToBlock_(this.rectMap_.get(lt),lt)}if(this.RTL)for(let rt=0,lt;lt=this.buttons_[rt];rt++)_e=lt.getPosition().y,lt.moveTo($/this.workspace_.scale-lt.width-this.MARGIN-this.tabWidth_,_e);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==ro.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+$,this.targetWorkspace.scrollY),this.width_=$,this.position(),this.targetWorkspace.recordDragTargets()}}};pm.registryName="verticalFlyout",$o(Bt.FLYOUTS_VERTICAL_TOOLBOX,kn,pm);var rI=class extends g_{constructor($){super($),this.horizontalLayout=!0}setMetrics_($){if(this.isVisible()){var _e=this.workspace_.getMetricsManager(),ot=_e.getScrollMetrics(),rt=_e.getViewMetrics();_e=_e.getAbsoluteMetrics(),typeof $.x=="number"&&(this.workspace_.scrollX=-(ot.left+(ot.width-rt.width)*$.x)),this.workspace_.translate(this.workspace_.scrollX+_e.left,this.workspace_.scrollY+_e.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var $=this.targetWorkspace.getMetricsManager();const _e=$.getAbsoluteMetrics(),ot=$.getViewMetrics();$=$.getToolboxMetrics();const rt=this.toolboxPosition_===ro.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?rt?$.height:ot.height-this.height_:rt?0:ot.height:rt?0:ot.height+_e.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var $=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=$.width,this.setBackgroundPath_($.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),$=this.getX();var _e=this.getY();this.positionAt_(this.width_,this.height_,$,_e)}}setBackgroundPath_($,_e){const ot=this.toolboxPosition_===ro.TOP,rt=["M 0,"+(ot?0:this.CORNER_RADIUS)];ot?(rt.push("h",$+2*this.CORNER_RADIUS),rt.push("v",_e),rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),rt.push("h",-$),rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),rt.push("h",$),rt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),rt.push("v",_e),rt.push("h",-$-2*this.CORNER_RADIUS)),rt.push("z"),this.svgBackground_.setAttribute("d",rt.join(" "))}scrollToStart(){let $;($=this.workspace_.scrollbar)==null||$.setX(this.RTL?1/0:0)}wheel_($){var _e=bt($);if(_e=_e.x||_e.y){const ot=this.workspace_.getMetricsManager(),rt=ot.getScrollMetrics();_e=ot.getViewMetrics().left-rt.left+_e;let lt;(lt=this.workspace_.scrollbar)==null||lt.setX(_e),qr(),Zr()}$.preventDefault(),$.stopPropagation()}layout_($,_e){this.workspace_.scale=this.targetWorkspace.scale;const ot=this.MARGIN;let rt=ot+this.tabWidth_;this.RTL&&($=$.reverse());for(let vt=0,At;At=$[vt];vt++)if(At.type==="block"){var lt=At.block,ut=lt.getDescendants(!1);for(let ho=0,Eo;Eo=ut[ho];ho++)Eo.isInFlyout=!0;lt.render(),ut=lt.getSvgRoot();const xt=lt.getHeightWidth();var pt=lt.outputConnection?this.tabWidth_:0;pt=this.RTL?rt+xt.width:rt-pt,lt.moveBy(pt,ot),pt=this.createRect_(lt,pt,ot,xt,vt),rt+=xt.width+_e[vt],this.addBlockListeners_(ut,lt,pt)}else At.type==="button"&&(lt=At.button,this.initFlyoutButton_(lt,rt,ot),rt+=lt.width+_e[vt])}isDragTowardWorkspace($){$=Math.atan2($.y,$.x)/Math.PI*180;const _e=this.dragAngleRange_;return $<90+_e&&$>90-_e||$>-90-_e&&$<-90+_e}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const $=this.svgGroup_.getBoundingClientRect(),_e=$.top;return this.toolboxPosition_===ro.TOP?new Do(-1e9,_e+$.height,-1e9,1e9):new Do(_e,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let $=0;const _e=this.workspace_.getTopBlocks(!1);for(let rt=0,lt;lt=_e[rt];rt++)$=Math.max($,lt.getHeightWidth().height);const ot=this.buttons_;for(let rt=0,lt;lt=ot[rt];rt++)$=Math.max($,lt.height);if($+=1.5*this.MARGIN,$*=this.workspace_.scale,$+=No.scrollbarThickness,this.height_!==$){for(let rt=0,lt;lt=_e[rt];rt++)this.rectMap_.has(lt)&&this.moveRectToBlock_(this.rectMap_.get(lt),lt);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==ro.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+$),this.height_=$,this.position(),this.targetWorkspace.recordDragTargets()}}};$o(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,kn,rI);var pu=class extends kr{constructor($,_e,ot,rt,lt){super(fo.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=pu.dropdownCreate,this.defaultVariableName=typeof $=="string"?$:"",this.size_=new Yo(0,0),$!==fo.SKIP_SETUP&&(lt?this.configure_(lt):this.setTypes_(ot,rt),_e&&this.setValidator(_e))}configure_($){super.configure_($),this.setTypes_($.variableTypes,$.defaultType)}initModel(){if(!this.variable_){var $=Su(this.getSourceBlock().workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_($.getId())}}shouldAddBorderRect_(){return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getSourceBlock().type!=="variables_get")}fromXml($){var _e=$.getAttribute("id");const ot=$.textContent,rt=$.getAttribute("variabletype")||$.getAttribute("variableType")||"";if(_e=Su(this.getSourceBlock().workspace,_e,ot,rt),rt!==null&&rt!==_e.type)throw Error("Serialized variable type with id '"+_e.getId()+"' had type "+_e.type+", and does not match variable field that references it: "+Pr($)+".");this.setValue(_e.getId())}toXml($){return this.initModel(),$.id=this.variable_.getId(),$.textContent=this.variable_.name,this.variable_.type&&$.setAttribute("variabletype",this.variable_.type),$}saveState($){var _e=this.saveLegacyState(pu);return _e!==null||(this.initModel(),_e={id:this.variable_.getId()},$&&(_e.name=this.variable_.name,_e.type=this.variable_.type)),_e}loadState($){this.loadLegacyState(pu,$)||($=Su(this.getSourceBlock().workspace,$.id||null,$.name,$.type||""),this.setValue($.getId()))}setSourceBlock($){if($.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock($)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_($){if($===null)return null;var _e=Ru(this.getSourceBlock().workspace,$);return _e?(_e=_e.type,this.typeIsAllowed_(_e)?$:(console.warn("Variable type doesn't match this field!  Type was "+_e),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+$),null)}doValueUpdate_($){this.variable_=Ru(this.getSourceBlock().workspace,$),super.doValueUpdate_($)}typeIsAllowed_($){const _e=this.getVariableTypes_();if(!_e)return!0;for(let ot=0;ot<_e.length;ot++)if($===_e[ot])return!0;return!1}getVariableTypes_(){var $=this.variableTypes;if($===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if($=$||[""],$.length===0)throw $=this.getText(),Error("'variableTypes' of field variable "+$+" was an empty list");return $}setTypes_($,_e){if(_e=_e||"",$==null)$=null;else if(Array.isArray($)){let ot=!1;for(let rt=0;rt<$.length;rt++)$[rt]===_e&&(ot=!0);if(!ot)throw Error("Invalid default type '"+_e+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=_e,this.variableTypes=$}refreshVariableName(){this.forceRerender()}onItemSelected_($,_e){if($=_e.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if($===jp){Cm(this.sourceBlock_.workspace,this.variable_);return}if($===Xp){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue($)}referencesVariables(){return!0}static fromJson($){return new this(Mo($.variable),void 0,void 0,void 0,$)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const $=this.getText();let _e=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var ot=this.getVariableTypes_(),rt=0;rt<ot.length;rt++){const lt=this.sourceBlock_.workspace.getVariablesOfType(ot[rt]);_e=_e.concat(lt)}for(_e.sort(Xl.compareByName),ot=[],rt=0;rt<_e.length;rt++)ot[rt]=[_e[rt].name,_e[rt].getId()];return ot.push([io.RENAME_VARIABLE,jp]),io.DELETE_VARIABLE&&ot.push([io.DELETE_VARIABLE.replace("%1",$),Xp]),ot}};yr("field_variable",pu);var gm=class extends tt.FieldTextInput$$module$build$src$core$field_textinput{constructor($,_e,ot,rt,lt,ut){super(fo.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,$!==fo.SKIP_SETUP&&(ut?this.configure_(ut):this.setConstraints(_e,ot,rt),this.setValue($),lt&&this.setValidator(lt))}configure_($){super.configure_($),this.setMinInternal_($.min),this.setMaxInternal_($.max),this.setPrecisionInternal_($.precision)}setConstraints($,_e,ot){this.setMinInternal_($),this.setMaxInternal_(_e),this.setPrecisionInternal_(ot),this.setValue(this.getValue())}setMin($){this.setMinInternal_($),this.setValue(this.getValue())}setMinInternal_($){$==null?this.min_=-1/0:($=Number($),isNaN($)||(this.min_=$))}getMin(){return this.min_}setMax($){this.setMaxInternal_($),this.setValue(this.getValue())}setMaxInternal_($){$==null?this.max_=1/0:($=Number($),isNaN($)||(this.max_=$))}getMax(){return this.max_}setPrecision($){this.setPrecisionInternal_($),this.setValue(this.getValue())}setPrecisionInternal_($){this.precision_=Number($)||0;let _e=String(this.precision_);_e.indexOf("e")!==-1&&(_e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const ot=_e.indexOf(".");this.decimalPlaces_=ot===-1?$?0:null:_e.length-ot-1}getPrecision(){return this.precision_}doClassValidation_($){return $===null||($=String($),$=$.replace(/O/ig,"0"),$=$.replace(/,/g,""),$=$.replace(/infinity/i,"Infinity"),$=Number($||0),isNaN($))?null:($=Math.min(Math.max($,this.min_),this.max_),this.precision_&&isFinite($)&&($=Math.round($/this.precision_)*this.precision_),this.decimalPlaces_!==null&&($=Number($.toFixed(this.decimalPlaces_))),$)}widgetCreate_(){const $=super.widgetCreate_();return-1/0<this.min_&&Ao($,Co.VALUEMIN,this.min_),1/0>this.max_&&Ao($,Co.VALUEMAX,this.max_),$}static fromJson($){return new this($.value,void 0,void 0,void 0,void 0,$)}};yr("field_number",gm),gm.prototype.DEFAULT_VALUE=0;var mm=class extends tt.FieldTextInput$$module$build$src$core$field_textinput{constructor($,_e,ot){super(fo.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){super.configure_($),$.maxLines&&this.setMaxLines($.maxLines)}toXml($){return $.textContent=this.getValue().replace(/\n/g,"&#10;"),$}fromXml($){this.setValue($.textContent.replace(/&#10;/g,`
`))}saveState(){const $=this.saveLegacyState(mm);return $!==null?$:this.getValue()}loadState($){this.loadLegacyState(fo,$)||this.setValue($)}initView(){this.createBorderRect_(),this.textGroup_=Lt(Ot.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){let $=this.getText();if(!$)return fo.NBSP;const _e=$.split(`
`);$="";const ot=this.isOverflowedY_?this.maxLines_:_e.length;for(let rt=0;rt<ot;rt++){let lt=_e[rt];lt.length>this.maxDisplayLength?lt=lt.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&rt===ot-1&&(lt=lt.substring(0,lt.length-3)+"..."),lt=lt.replace(/\s/g,fo.NBSP),$+=lt,rt!==ot-1&&($+=`
`)}return this.getSourceBlock().RTL&&($+="\u200F"),$}doValueUpdate_($){super.doValueUpdate_($),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){for(var $;$=this.textGroup_.firstChild;)this.textGroup_.removeChild($);$=this.getDisplayText_().split(`
`);let _e=0;for(let ot=0;ot<$.length;ot++){const rt=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Lt(Ot.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:_e+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode($[ot])),_e+=rt}this.isBeingEdited_&&($=this.htmlInput_,this.isOverflowedY_?Ft($,"blocklyHtmlTextAreaInputOverflowedY"):uo($,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.getSourceBlock().RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),$=this.htmlInput_,this.isTextValid_?(uo($,"blocklyInvalidInput"),Ao($,Co.INVALID,!1)):(Ft($,"blocklyInvalidInput"),Ao($,Co.INVALID,!0)))}updateSize_(){var $=this.textGroup_.childNodes;const _e=this.getConstants().FIELD_TEXT_FONTSIZE,ot=this.getConstants().FIELD_TEXT_FONTWEIGHT,rt=this.getConstants().FIELD_TEXT_FONTFAMILY;let lt=0,ut=0;for(var pt=0;pt<$.length;pt++){var vt=Un($[pt],_e,ot,rt);vt>lt&&(lt=vt),ut+=this.getConstants().FIELD_TEXT_HEIGHT+(0<pt?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for($=this.value_.split(`
`),pt=Lt(Ot.TEXT,{class:"blocklyText blocklyMultilineText"}),vt=0;vt<$.length;vt++){$[vt].length>this.maxDisplayLength&&($[vt]=$[vt].substring(0,this.maxDisplayLength)),pt.textContent=$[vt];const At=Un(pt,_e,ot,rt);At>lt&&(lt=At)}lt+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(ut+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,lt+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",lt),this.borderRect_.setAttribute("height",ut)),this.size_.width=lt,this.size_.height=ut,this.positionBorderRect_()}showEditor_($,_e){super.showEditor_($,_e),this.forceRerender()}widgetCreate_(){const $=Rs(),_e=this.workspace_.getScale(),ot=document.createElement("textarea");ot.className="blocklyHtmlInput blocklyHtmlTextAreaInput",ot.setAttribute("spellcheck",this.spellcheck_);var rt=this.getConstants().FIELD_TEXT_FONTSIZE*_e+"pt";$.style.fontSize=rt,ot.style.fontSize=rt,ot.style.borderRadius=tt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*_e+"px",rt=this.getConstants().FIELD_BORDER_RECT_X_PADDING*_e;const lt=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*_e/2;return ot.style.padding=lt+"px "+rt+"px "+lt+"px "+rt+"px",rt=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,ot.style.lineHeight=rt*_e+"px",$.appendChild(ot),ot.value=ot.defaultValue=this.getEditorText_(this.value_),ot.setAttribute("data-untyped-default-value",this.value_),ot.setAttribute("data-old-value",""),cp?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(ot),ot}setMaxLines($){typeof $=="number"&&0<$&&$!==this.maxLines_&&(this.maxLines_=$,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_($){$.keyCode!==Yt.ENTER&&super.onHtmlInputKeyDown_($)}static fromJson($){return new this(Mo($.text),void 0,$)}};Mr(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),yr("field_multilinetext",mm);var nI=class extends tt.FieldLabel$$module$build$src$core$field_label{constructor($,_e,ot){super(String($!=null?$:""),_e,ot),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson($){return new this(Mo($.text),void 0,$)}};yr("field_label_serializable",nI);var Ir=class extends fo{constructor($,_e,ot){super(fo.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){super.configure_($),$.colourOptions&&(this.colours_=$.colourOptions),$.colourTitles&&(this.titles_=$.colourTitles),$.columns&&(this.columns_=$.columns)}initView(){this.size_=new Yo(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Cr&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Cr&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_($){return typeof $!="string"?null:os($)}doValueUpdate_($){this.value_=$,this.borderRect_?this.borderRect_.style.fill=$:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof Cr&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",$),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let $=this.value_;return/^#(.)\1(.)\2(.)\3$/.test($)&&($="#"+$[1]+$[3]+$[5]),$}setColours($,_e){return this.colours_=$,_e&&(this.titles_=_e),this}setColumns($){return this.columns_=$,this}showEditor_(){this.dropdownCreate_(),Ts().appendChild(this.picker_),ft(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_($){$=($=$.target)&&$.getAttribute("data-colour"),$!==null&&(this.setValue($),El(this))}onKeyDown_($){var _e=!1;$.keyCode===Yt.UP?(this.moveHighlightBy_(0,-1),_e=!0):$.keyCode===Yt.DOWN?(this.moveHighlightBy_(0,1),_e=!0):$.keyCode===Yt.LEFT?(this.moveHighlightBy_(-1,0),_e=!0):$.keyCode===Yt.RIGHT?(this.moveHighlightBy_(1,0),_e=!0):$.keyCode===Yt.ENTER&&((_e=this.getHighlighted_())&&(_e=_e&&_e.getAttribute("data-colour"),_e!==null&&this.setValue(_e)),Zr(),_e=!0),_e&&$.stopPropagation()}moveHighlightBy_($,_e){if(this.highlightedIndex_){var ot=this.colours_||Ir.COLOURS,rt=this.columns_||Ir.COLUMNS,lt=this.highlightedIndex_%rt,ut=Math.floor(this.highlightedIndex_/rt);lt+=$,ut+=_e,0>$?0>lt&&0<ut?(lt=rt-1,ut--):0>lt&&(lt=0):0<$?lt>rt-1&&ut<Math.floor(ot.length/rt)-1?(lt=0,ut++):lt>rt-1&&lt--:0>_e?0>ut&&(ut=0):0<_e&&ut>Math.floor(ot.length/rt)-1&&(ut=Math.floor(ot.length/rt)-1),this.setHighlightedCell_(this.picker_.childNodes[ut].childNodes[lt],ut*rt+lt)}}onMouseMove_($){const _e=($=$.target)&&Number($.getAttribute("data-index"));_e!==null&&_e!==this.highlightedIndex_&&this.setHighlightedCell_($,_e)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const $=this.getHighlighted_();$&&uo($,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const $=this.columns_||Ir.COLUMNS,_e=this.picker_.childNodes[Math.floor(this.highlightedIndex_/$)];return _e?_e.childNodes[this.highlightedIndex_%$]:null}setHighlightedCell_($,_e){const ot=this.getHighlighted_();ot&&uo(ot,"blocklyColourHighlighted"),Ft($,"blocklyColourHighlighted"),this.highlightedIndex_=_e,Ao(this.picker_,Co.ACTIVEDESCENDANT,$.getAttribute("id"))}dropdownCreate_(){const $=this.columns_||Ir.COLUMNS,_e=this.colours_||Ir.COLOURS,ot=this.titles_||Ir.TITLES,rt=this.getValue(),lt=document.createElement("table");lt.className="blocklyColourTable",lt.tabIndex=0,lt.dir="ltr",sn(lt,_r.GRID),Ao(lt,Co.EXPANDED,!0),Ao(lt,Co.ROWCOUNT,Math.floor(_e.length/$)),Ao(lt,Co.COLCOUNT,$);let ut;for(let pt=0;pt<_e.length;pt++){pt%$===0&&(ut=document.createElement("tr"),sn(ut,_r.ROW),lt.appendChild(ut));const vt=document.createElement("td");ut.appendChild(vt),vt.setAttribute("data-colour",_e[pt]),vt.title=ot[pt]||_e[pt],vt.id=Il(),vt.setAttribute("data-index",pt),sn(vt,_r.GRIDCELL),Ao(vt,Co.LABEL,_e[pt]),Ao(vt,Co.SELECTED,_e[pt]===rt),vt.style.backgroundColor=_e[pt],_e[pt]===rt&&(vt.className="blocklyColourSelected",this.highlightedIndex_=pt)}this.onClickWrapper_=Et(lt,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=Et(lt,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Et(lt,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Et(lt,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Et(lt,"keydown",this,this.onKeyDown_),this.picker_=lt}dropdownDispose_(){this.onClickWrapper_&&(kt(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(kt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(kt(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(kt(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(kt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson($){return new this($.colour,void 0,$)}};Ir.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Ir.TITLES=[],Ir.COLUMNS=7,Ir.prototype.DEFAULT_VALUE=Ir.COLOURS[0],Mr(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),yr("field_colour",Ir),tt.FieldCheckbox$$module$build$src$core$field_checkbox=class extends fo{constructor($,_e,ot){super(fo.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=tt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){super.configure_($),$.checkCharacter&&(this.checkChar_=$.checkCharacter)}saveState(){const $=this.saveLegacyState(tt.FieldCheckbox$$module$build$src$core$field_checkbox);return $!==null?$:this.getValueBoolean()}initView(){super.initView();const $=this.getTextElement();Ft($,"blocklyCheckbox"),$.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter($){this.checkChar_=$||tt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_($){return $===!0||$==="TRUE"?"TRUE":$===!1||$==="FALSE"?"FALSE":null}doValueUpdate_($){this.value_=this.convertValueToBool_($),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_($){return typeof $=="string"?$==="TRUE":!!$}static fromJson($){return new this($.checked,void 0,$)}},tt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="\u2713",yr("field_checkbox",tt.FieldCheckbox$$module$build$src$core$field_checkbox),tt.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,tt.FieldCheckbox$$module$build$src$core$field_checkbox;var _o=class extends tt.FieldTextInput$$module$build$src$core$field_textinput{constructor($,_e,ot){super(fo.SKIP_SETUP),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,this.clockwise_=_o.CLOCKWISE,this.offset_=_o.OFFSET,this.wrap_=_o.WRAP,this.round_=_o.ROUND,$!==fo.SKIP_SETUP&&(ot&&this.configure_(ot),this.setValue($),_e&&this.setValidator(_e))}configure_($){switch(super.configure_($),$.mode){case m_.COMPASS:this.clockwise_=!0,this.offset_=90;break;case m_.PROTRACTOR:this.clockwise_=!1,this.offset_=0}$.clockwise&&(this.clockwise_=$.clockwise),$.offset&&(this.offset_=$.offset),$.wrap&&(this.wrap_=$.wrap),$.round&&(this.round_=$.round)}initView(){super.initView(),this.symbol_=Lt(Ot.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("\xB0")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_($){if(super.showEditor_($,up||Ml||ys),this.dropdownCreate_(),Ts().appendChild(this.editor_),this.sourceBlock_ instanceof Cr){if(!this.sourceBlock_.style.colourTertiary)throw Error("The renderer did not properly initialize the block style");qo(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary)}ft(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const $=Lt(Ot.SVG,{xmlns:ks,"xmlns:html":Br,"xmlns:xlink":hr,version:"1.1",height:2*_o.HALF+"px",width:2*_o.HALF+"px",style:"touch-action: none"}),_e=Lt(Ot.CIRCLE,{cx:_o.HALF,cy:_o.HALF,r:_o.RADIUS,class:"blocklyAngleCircle"},$);this.gauge_=Lt(Ot.PATH,{class:"blocklyAngleGauge"},$),this.line_=Lt(Ot.LINE,{x1:_o.HALF,y1:_o.HALF,class:"blocklyAngleLine"},$);for(let ot=0;360>ot;ot+=15)Lt(Ot.LINE,{x1:_o.HALF+_o.RADIUS,y1:_o.HALF,x2:_o.HALF+_o.RADIUS-(ot%45===0?10:5),y2:_o.HALF,class:"blocklyAngleMarks",transform:"rotate("+ot+","+_o.HALF+","+_o.HALF+")"},$);this.clickWrapper_=Et($,"click",this,this.hide_),this.clickSurfaceWrapper_=Et(_e,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=Et(_e,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=$}dropdownDispose_(){this.clickWrapper_&&(kt(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(kt(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(kt(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){El(this),qr()}onMouseMove_($){var _e=this.gauge_.ownerSVGElement.getBoundingClientRect();const ot=$.clientX-_e.left-_o.HALF;$=$.clientY-_e.top-_o.HALF,_e=Math.atan(-$/ot),isNaN(_e)||(_e=Jr(_e),0>ot?_e+=180:0<$&&(_e+=360),_e=this.clockwise_?this.offset_+360-_e:360-(this.offset_-_e),this.displayMouseOrKeyboardValue_(_e))}displayMouseOrKeyboardValue_($){this.round_&&($=Math.round($/this.round_)*this.round_),$=this.wrapValue_($),$!==this.value_&&this.setEditorValue_($)}updateGraph_(){if(this.gauge_){var $=Number(this.getText())+this.offset_,_e=Sr($%360);$=["M ",_o.HALF,",",_o.HALF];var ot=_o.HALF,rt=_o.HALF;if(!isNaN(_e)){const lt=Number(this.clockwise_),ut=Sr(this.offset_),pt=Math.cos(ut)*_o.RADIUS,vt=Math.sin(ut)*-_o.RADIUS;lt&&(_e=2*ut-_e),ot+=Math.cos(_e)*_o.RADIUS,rt-=Math.sin(_e)*_o.RADIUS,_e=Math.abs(Math.floor((_e-ut)/Math.PI)%2),lt&&(_e=1-_e),$.push(" l ",pt,",",vt," A ",_o.RADIUS,",",_o.RADIUS," 0 ",_e," ",lt," ",ot,",",rt," z")}this.gauge_.setAttribute("d",$.join("")),this.line_.setAttribute("x2",ot),this.line_.setAttribute("y2",rt)}}onHtmlInputKeyDown_($){super.onHtmlInputKeyDown_($);let _e;if($.keyCode===Yt.LEFT?_e=this.getSourceBlock().RTL?1:-1:$.keyCode===Yt.RIGHT?_e=this.getSourceBlock().RTL?-1:1:$.keyCode===Yt.DOWN?_e=-1:$.keyCode===Yt.UP&&(_e=1),_e){const ot=this.getValue();this.displayMouseOrKeyboardValue_(ot+_e*this.round_),$.preventDefault(),$.stopPropagation()}}doClassValidation_($){return $=Number($),isNaN($)||!isFinite($)?null:this.wrapValue_($)}wrapValue_($){return $%=360,0>$&&($+=360),$>this.wrap_&&($-=360),$}static fromJson($){return new this($.angle,void 0,$)}};_o.ROUND=15,_o.HALF=50,_o.CLOCKWISE=!1,_o.OFFSET=0,_o.WRAP=360,_o.RADIUS=_o.HALF-1,Mr(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),yr("field_angle",_o),_o.prototype.DEFAULT_VALUE=0;var m_;(function($){$.COMPASS="compass",$.PROTRACTOR="protractor"})(m_||(m_={}));var sI=class extends zl{constructor($){super($),this.type=rr,$&&($.isShadow()&&(this.recordUndo=!1),$=this.currentLocation_(),this.oldParentId=$.parentId,this.oldInputName=$.inputName,this.oldCoordinate=$.coordinate)}toJson(){const $=super.toJson();return $.newParentId=this.newParentId,$.newInputName=this.newInputName,this.newCoordinate&&($.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||($.recordUndo=this.recordUndo),$}fromJson($){if(super.fromJson($),this.newParentId=$.newParentId,this.newInputName=$.newInputName,$.newCoordinate){const _e=$.newCoordinate.split(",");this.newCoordinate=new Ht(Number(_e[0]),Number(_e[1]))}$.recordUndo!==void 0&&(this.recordUndo=$.recordUndo)}recordNew(){const $=this.currentLocation_();this.newParentId=$.parentId,this.newInputName=$.inputName,this.newCoordinate=$.coordinate}currentLocation_(){var $=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var _e=$.getBlockById(this.blockId);if(!_e)throw Error("The block associated with the block move event could not be found");$={};const ot=_e.getParent();return ot?($.parentId=ot.id,(_e=ot.getInputWithBlock(_e))&&($.inputName=_e.name)):$.coordinate=_e.getRelativeToSurfaceXY(),$}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Ht.equals(this.oldCoordinate,this.newCoordinate)}run($){var _e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var ot=_e.getBlockById(this.blockId);if(ot){var rt=$?this.newParentId:this.oldParentId,lt=$?this.newInputName:this.oldInputName;if($=$?this.newCoordinate:this.oldCoordinate,rt){var ut=_e.getBlockById(rt);if(!ut){console.warn("Can't connect to non-existent block: "+rt);return}}if(ot.getParent()&&ot.unplug(),$)lt=ot.getRelativeToSurfaceXY(),ot.moveBy($.x-lt.x,$.y-lt.y);else{_e=ot.outputConnection,(!_e||ot.previousConnection&&ot.previousConnection.isConnected())&&(_e=ot.previousConnection);let pt;ot=_e.type,lt?(ot=ut.getInput(lt))&&(pt=ot.connection):ot===Vt.PREVIOUS_STATEMENT&&(pt=ut.nextConnection),pt?_e.connect(pt):console.warn("Can't connect to non-existent input: "+lt)}}else console.warn("Can't move non-existent block: "+this.blockId)}};$o(Bt.EVENT,rr,sI);var ms=class extends xs{constructor($){super(),this.isBlank=!$,$&&(this.commentId=$.id,this.workspaceId=$.workspace.id,this.group=Lo(),this.recordUndo=Nr())}toJson(){const $=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return $.commentId=this.commentId,$}fromJson($){super.fromJson($),this.commentId=$.commentId}static CommentCreateDeleteHelper($,_e){var ot=$.getEventWorkspace_();if(_e){if(_e=yo("xml"),!$.xml)throw Error("Ecountered a comment event without proper xml");_e.appendChild($.xml),Rl(_e,ot)}else{if(!$.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(ot=ot.getCommentById($.commentId))?ot.dispose():console.warn("Can't uncreate non-existent comment: "+$.commentId)}}},lI=class extends ms{constructor($,_e,ot){super($),this.type=Vl,$&&(this.oldContents_=typeof _e>"u"?"":_e,this.newContents_=typeof ot>"u"?"":ot)}toJson(){const $=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return $.oldContents=this.oldContents_,$.newContents=this.newContents_,$}fromJson($){super.fromJson($),this.oldContents_=$.oldContents,this.newContents_=$.newContents}isNull(){return this.oldContents_===this.newContents_}run($){var _e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(_e=_e.getCommentById(this.commentId)){var ot=$?this.newContents_:this.oldContents_;if(!ot)throw Error($?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");_e.setContent(ot)}else console.warn("Can't change non-existent comment: "+this.commentId)}};$o(Bt.EVENT,Vl,lI);var cI=class extends ms{constructor($){super($),this.type=us,$&&(this.xml=$.toXmlWithXY())}toJson(){const $=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return $.xml=Pr(this.xml),$}fromJson($){super.fromJson($),this.xml=xr($.xml)}run($){ms.CommentCreateDeleteHelper(this,$)}};$o(Bt.EVENT,us,cI);var aI=class extends ms{constructor($){super($),this.type=Ms,$&&(this.xml=$.toXmlWithXY())}run($){ms.CommentCreateDeleteHelper(this,!$)}};$o(Bt.EVENT,Ms,aI);var uI=class extends ms{constructor($){super($),this.type=Ln,$&&(this.comment_=$,this.oldCoordinate_=$.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate($){this.oldCoordinate_=$}toJson(){const $=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return $.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,$.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),$}fromJson($){super.fromJson($);let _e=$.oldCoordinate.split(",");this.oldCoordinate_=new Ht(Number(_e[0]),Number(_e[1])),_e=$.newCoordinate.split(","),this.newCoordinate_=new Ht(Number(_e[0]),Number(_e[1]))}isNull(){return Ht.equals(this.oldCoordinate_,this.newCoordinate_)}run($){var _e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(_e=_e.getCommentById(this.commentId)){if($=$?this.newCoordinate_:this.oldCoordinate_,!$)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var ot=_e.getXY();_e.moveBy($.x-ot.x,$.y-ot.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};$o(Bt.EVENT,Ln,uI);var hI=class extends Fr{constructor($,_e,ot){super($?$.workspace.id:void 0),this.type=Ns,$&&(this.blockId=$.id,this.isStart=_e,this.blocks=ot)}toJson(){const $=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return $.isStart=this.isStart,$.blockId=this.blockId,$.blocks=this.blocks,$}fromJson($){super.fromJson($),this.isStart=$.isStart,this.blockId=$.blockId,this.blocks=$.blocks}};$o(Bt.EVENT,Ns,hI);var dI=class extends Fr{constructor($,_e,ot,rt){super($?$.workspace.id:void 0),this.type=Bl,this.blockId=$?$.id:null,this.element=typeof _e>"u"?"":_e,this.oldValue=typeof ot>"u"?"":ot,this.newValue=typeof rt>"u"?"":rt}toJson(){const $=super.toJson();return $.element=this.element,this.newValue!==void 0&&($.newValue=this.newValue),this.blockId&&($.blockId=this.blockId),$}fromJson($){super.fromJson($),this.element=$.element,this.newValue=$.newValue,this.blockId=$.blockId}};$o(Bt.EVENT,Bl,dI);var _I=class extends xs{constructor($){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Ds,this.isBlank=!!$,$&&(this.workspaceId=$.id)}toJson(){const $=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return $.workspaceId=this.workspaceId,$}fromJson($){super.fromJson($),this.workspaceId=$.workspaceId}};$o(Bt.EVENT,Ds,_I),tt.module$build$src$core$events$events={},tt.module$build$src$core$events$events.Abstract=xs,tt.module$build$src$core$events$events.BLOCK_CHANGE=zo,tt.module$build$src$core$events$events.BLOCK_CREATE=Jo,tt.module$build$src$core$events$events.BLOCK_DELETE=hn,tt.module$build$src$core$events$events.BLOCK_DRAG=Ns,tt.module$build$src$core$events$events.BLOCK_MOVE=rr,tt.module$build$src$core$events$events.BUBBLE_OPEN=Cn,tt.module$build$src$core$events$events.BUMP_EVENTS=Ep,tt.module$build$src$core$events$events.BlockBase=zl,tt.module$build$src$core$events$events.BlockChange=Bs,tt.module$build$src$core$events$events.BlockCreate=YT,tt.module$build$src$core$events$events.BlockDelete=KT,tt.module$build$src$core$events$events.BlockDrag=hI,tt.module$build$src$core$events$events.BlockMove=sI,tt.module$build$src$core$events$events.BubbleOpen=PT,tt.module$build$src$core$events$events.BubbleType=Pp,tt.module$build$src$core$events$events.CHANGE=zo,tt.module$build$src$core$events$events.CLICK=Wn,tt.module$build$src$core$events$events.COMMENT_CHANGE=Vl,tt.module$build$src$core$events$events.COMMENT_CREATE=us,tt.module$build$src$core$events$events.COMMENT_DELETE=Ms,tt.module$build$src$core$events$events.COMMENT_MOVE=Ln,tt.module$build$src$core$events$events.CREATE=Jo,tt.module$build$src$core$events$events.Click=aE,tt.module$build$src$core$events$events.ClickTarget=qp,tt.module$build$src$core$events$events.CommentBase=ms,tt.module$build$src$core$events$events.CommentChange=lI,tt.module$build$src$core$events$events.CommentCreate=cI,tt.module$build$src$core$events$events.CommentDelete=aI,tt.module$build$src$core$events$events.CommentMove=uI,tt.module$build$src$core$events$events.DELETE=hn,tt.module$build$src$core$events$events.FINISHED_LOADING=Ds,tt.module$build$src$core$events$events.FinishedLoading=_I,tt.module$build$src$core$events$events.MARKER_MOVE=Ul,tt.module$build$src$core$events$events.MOVE=rr,tt.module$build$src$core$events$events.MarkerMove=EE,tt.module$build$src$core$events$events.SELECTED=Vn,tt.module$build$src$core$events$events.Selected=OT,tt.module$build$src$core$events$events.THEME_CHANGE=Hl,tt.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=Fl,tt.module$build$src$core$events$events.TRASHCAN_OPEN=Gl,tt.module$build$src$core$events$events.ThemeChange=dE,tt.module$build$src$core$events$events.ToolboxItemSelect=lE,tt.module$build$src$core$events$events.TrashcanOpen=HT,tt.module$build$src$core$events$events.UI=Bl,tt.module$build$src$core$events$events.Ui=dI,tt.module$build$src$core$events$events.UiBase=Fr,tt.module$build$src$core$events$events.VAR_CREATE=cs,tt.module$build$src$core$events$events.VAR_DELETE=As,tt.module$build$src$core$events$events.VAR_RENAME=xl,tt.module$build$src$core$events$events.VIEWPORT_CHANGE=as,tt.module$build$src$core$events$events.VarBase=Zu,tt.module$build$src$core$events$events.VarCreate=yT,tt.module$build$src$core$events$events.VarDelete=RE,tt.module$build$src$core$events$events.VarRename=yE,tt.module$build$src$core$events$events.ViewportChange=_E,tt.module$build$src$core$events$events.clearPendingUndo=b_,tt.module$build$src$core$events$events.disable=Fo,tt.module$build$src$core$events$events.disableOrphans=v_,tt.module$build$src$core$events$events.enable=Ho,tt.module$build$src$core$events$events.filter=Iu,tt.module$build$src$core$events$events.fire=to,tt.module$build$src$core$events$events.fromJson=Sm,tt.module$build$src$core$events$events.get=oo,tt.module$build$src$core$events$events.getDescendantIds=bu,tt.module$build$src$core$events$events.getGroup=Lo,tt.module$build$src$core$events$events.getRecordUndo=Nr,tt.module$build$src$core$events$events.isEnabled=jo,tt.module$build$src$core$events$events.setGroup=qt,tt.module$build$src$core$events$events.setRecordUndo=pr,oT();var lr={};lr.registerCleanup=W$,lr.registerCollapse=X$,lr.registerCollapseExpandBlock=q$,lr.registerComment=Q$,lr.registerDefaultOptions=oT,lr.registerDelete=eT,lr.registerDeleteAll=K$,lr.registerDisable=_f,lr.registerDuplicate=J$,lr.registerExpand=z$,lr.registerHelp=tT,lr.registerInline=Z$,lr.registerRedo=V$,lr.registerUndo=H$;var pI=class{constructor($,_e){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=$,this.draggedConnectionManager_=new Er(this.draggingBlock_),this.workspace_=_e,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=US($)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag($,_e){Lo()||qt(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Tn(),this.workspace_.setResizesEnabled(!1),Cl(),this.shouldDisconnect_(_e)&&this.disconnectBlock_(_e,$),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_($){return!!(this.draggingBlock_.getParent()||$&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_($,_e){this.draggingBlock_.unplug($),$=this.pixelsToWorkspaceUnits_(_e),$=Ht.sum(this.startXY_,$),this.draggingBlock_.translate($.x,$.y),p$(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const $=new(oo(Ns))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));to($)}drag($,_e){_e=this.pixelsToWorkspaceUnits_(_e);var ot=Ht.sum(this.startXY_,_e);this.draggingBlock_.moveDuringDrag(ot),this.dragIcons_(_e),ot=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget($),this.draggedConnectionManager_.update(_e,this.dragTarget_),$=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),$!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==ot&&(ot&&ot.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag($,_e){this.drag($,_e),this.dragIconData_=[],this.fireDragEndEvent_(),In(),Cl(),$=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?_e=this.startXY_:(_e=this.getNewLocationAfterDrag_(_e),$=_e.delta,_e=_e.newLocation),this.draggingBlock_.moveOffDragSurface(_e),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),$?this.updateBlockAfterMove_($):Hu(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),qt(!1)}getNewLocationAfterDrag_($){$=this.pixelsToWorkspaceUnits_($);const _e=Ht.sum(this.startXY_,$);return{delta:$,newLocation:_e}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),rs.length=0,!0):!1}updateBlockAfterMove_($){this.draggingBlock_.moveConnections($.x,$.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const $=new(oo(Ns))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));to($)}updateToolboxStyle_($){const _e=this.workspace_.getToolbox();if(_e){const ot=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";$&&typeof _e.removeStyle=="function"?_e.removeStyle(ot):$||typeof _e.addStyle!="function"||_e.addStyle(ot)}}fireMoveEvent_(){const $=new(oo(rr))(this.draggingBlock_);$.oldCoordinate=this.startXY_,$.recordNew(),to($)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_($){return $=new Ht($.x/this.workspace_.scale,$.y/this.workspace_.scale),this.workspace_.isMutator&&$.scale(1/this.workspace_.options.parentWorkspace.scale),$}dragIcons_($){for(let _e=0;_e<this.dragIconData_.length;_e++){const ot=this.dragIconData_[_e];ot.icon.setIconLocation(Ht.sum(ot.location,$))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};$o(Bt.BLOCK_DRAGGER,kn,pI);var CR="9.0.0",LR=tt.Align$$module$build$src$core$input.LEFT,wR=tt.Align$$module$build$src$core$input.CENTRE,AR=tt.Align$$module$build$src$core$input.RIGHT,NR=Vt.INPUT_VALUE,MR=Vt.OUTPUT_VALUE,DR=Vt.NEXT_STATEMENT,PR=Vt.PREVIOUS_STATEMENT,xR=co.DUMMY,BR=ro.TOP,UR=ro.BOTTOM,GR=ro.LEFT,FR=ro.RIGHT;xn.prototype.newBlock=function($,_e){return new js(this,$,_e)},Xr.prototype.newBlock=function($,_e){return new Cr(this,$,_e)},Xr.newTrashcan=function($){return new iE($)},er.prototype.showContextMenu=function($){if(!this.workspace.options.readOnly){var _e=[];this.isDeletable()&&this.isMovable()&&(_e.push(E$(this)),_e.push(T$(this))),Uu($,_e,this.RTL)}},tt.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function($){return new Xr($)},Lr.prototype.populateProcedures=function($){$=tp($),$=$[0].concat($[1]);for(let _e=0;_e<$.length;_e++)this.getName($[_e][0],Lr.NameType.PROCEDURE)};var HR=Vt,$m;(function($){$.blocks=s_,$.exceptions=Vs,$.priorities=Up,$.registry=Gp,$.variables=kR,$.workspaces=um})($m||($m={}));var wt={};return wt.ALIGN_CENTRE=wR,wt.ALIGN_LEFT=LR,wt.ALIGN_RIGHT=AR,wt.ASTNode=Dt,wt.BasicCursor=ru,wt.Block=js,wt.BlockDragSurfaceSvg=tI,wt.BlockDragger=pI,wt.BlockSvg=Cr,wt.Blocks=ur,wt.Bubble=no,wt.BubbleDragger=uE,wt.COLLAPSED_FIELD_NAME=ba,wt.COLLAPSED_INPUT_NAME=$a,wt.COLLAPSE_CHARS=QT,wt.CollapsibleToolboxCategory=Ks,wt.Comment=JT,wt.ComponentManager=Ko,wt.Connection=vo,wt.ConnectionChecker=SE,wt.ConnectionDB=Js,wt.ConnectionType=Vt,wt.ContextMenu=tt.module$build$src$core$contextmenu,wt.ContextMenuItems=lr,wt.ContextMenuRegistry=So,wt.Css=Op,wt.Cursor=zp,wt.DELETE_VARIABLE_ID=Xp,wt.DRAG_STACK=ZT,wt.DUMMY_INPUT=xR,wt.DeleteArea=c_,wt.DragTarget=oE,wt.DropDownDiv=Uo,wt.Events=tt.module$build$src$core$events$events,wt.Extensions=tt.module$build$src$core$extensions,wt.Field=fo,wt.FieldAngle=_o,wt.FieldCheckbox=tt.FieldCheckbox$$module$build$src$core$field_checkbox,wt.FieldColour=Ir,wt.FieldDropdown=kr,wt.FieldImage=tt.FieldImage$$module$build$src$core$field_image,wt.FieldLabel=tt.FieldLabel$$module$build$src$core$field_label,wt.FieldLabelSerializable=nI,wt.FieldMultilineInput=mm,wt.FieldNumber=gm,wt.FieldTextInput=tt.FieldTextInput$$module$build$src$core$field_textinput,wt.FieldVariable=pu,wt.Flyout=g_,wt.FlyoutButton=Zs,wt.FlyoutMetricsManager=iI,wt.Generator=tt.Generator$$module$build$src$core$generator,wt.Gesture=Dn,wt.Grid=_g,wt.HorizontalFlyout=rI,wt.INPUT_VALUE=NR,wt.Icon=r_,wt.Input=Ws,wt.InsertionMarkerManager=Er,wt.Marker=qT,wt.MarkerManager=Yl,wt.Menu=Mp,wt.MenuItem=Dp,wt.MetricsManager=_m,wt.Msg=io,wt.Mutator=tt.Mutator$$module$build$src$core$mutator,wt.NEXT_STATEMENT=DR,wt.Names=Lr,wt.OPPOSITE_TYPE=ds,wt.OUTPUT_VALUE=MR,wt.Options=Wr,wt.PREVIOUS_STATEMENT=PR,wt.PROCEDURE_CATEGORY_NAME=h_,wt.Procedures=tt.module$build$src$core$procedures,wt.RENAME_VARIABLE_ID=jp,wt.RenderedConnection=nr,wt.Scrollbar=No,wt.ScrollbarPair=dm,wt.ShortcutItems=pn,wt.ShortcutRegistry=Oo,wt.TOOLBOX_AT_BOTTOM=UR,wt.TOOLBOX_AT_LEFT=GR,wt.TOOLBOX_AT_RIGHT=FR,wt.TOOLBOX_AT_TOP=BR,wt.TabNavigateCursor=eE,wt.Theme=hs,wt.ThemeManager=bE,wt.Themes=Zp,wt.Toolbox=cE,wt.ToolboxCategory=jr,wt.ToolboxItem=Qp,wt.ToolboxSeparator=nu,wt.Tooltip=Po,wt.Touch=$r,wt.TouchGesture=vE,wt.Trashcan=iE,wt.VARIABLE_CATEGORY_NAME=qu,wt.VARIABLE_DYNAMIC_CATEGORY_NAME=cm,wt.VERSION=CR,wt.VariableMap=am,wt.VariableModel=Xl,wt.Variables=tt.module$build$src$core$variables,wt.VariablesDynamic=Yn,wt.VerticalFlyout=pm,wt.Warning=tE,wt.WidgetDiv=Vr,wt.Workspace=xn,wt.WorkspaceAudio=OE,wt.WorkspaceComment=dn,wt.WorkspaceCommentSvg=er,wt.WorkspaceDragSurfaceSvg=eI,wt.WorkspaceDragger=hE,wt.WorkspaceSvg=Xr,wt.Xml=tt.module$build$src$core$xml,wt.ZoomControls=kE,wt.bindEventWithChecks_=KS,wt.bindEvent_=zS,wt.blockAnimations=eu,wt.blockRendering=Ro,wt.browserEvents=On,wt.bumpObjects=p_,wt.clipboard=tu,wt.common=tt.module$build$src$core$common,wt.config=tt.config$$module$build$src$core$config,wt.connectionTypes=HR,wt.constants=Fp,wt.copy=HS,wt.defineBlocksWithJsonArray=Bn,wt.dialog=dr,wt.duplicate=WS,wt.fieldRegistry=_c,wt.geras=mn,wt.getMainWorkspace=Xt,wt.getSelected=Qt,wt.hideChaff=GS,wt.hueToHex=XS,wt.inject=LS,wt.inputTypes=co,wt.isNumber=jS,wt.minimalist=_u,wt.paste=VS,wt.registry=Gr,wt.resizeSvgContents=FS,wt.serialization=$m,wt.setLocale=vp,wt.setParentContainer=Yr,wt.svgResize=vr,wt.thrasos=hm,wt.uiPosition=_s,wt.unbindEvent_=YS,wt.utils=To,wt.zelos=zr,tt.module$build$src$core$contextmenu,tt.module$build$src$core$events$events,tt.module$build$src$core$msg,tt.module$build$src$core$common,Object.defineProperties(wt,{alert:{set:function($){Xo.warn("Blockly.alert","December 2021","December 2022"),dr.setAlert($)},get:function(){return Xo.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),dr.alert}},confirm:{set:function($){Xo.warn("Blockly.confirm","December 2021","December 2022"),dr.setConfirm($)},get:function(){return Xo.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),dr.confirm}},mainWorkspace:{set:function($){Xo.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),tt.module$build$src$core$common.setMainWorkspace($)},get:function(){return Xo.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),tt.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function($){Xo.warn("Blockly.prompt","December 2021","December 2022"),dr.setPrompt($)},get:function(){return Xo.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),dr.prompt}},selected:{get:function(){return Xo.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),tt.module$build$src$core$common.getSelected()},set:function($){Xo.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),tt.module$build$src$core$common.setSelected($)}},HSV_SATURATION:{get:function(){return tr.getHsvSaturation()},set:function($){tr.setHsvSaturation($)}},HSV_VALUE:{get:function(){return tr.getHsvValue()},set:function($){tr.setHsvValue($)}}}),Object.defineProperties(tt.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Xo.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),tt.module$build$src$core$contextmenu.getCurrentBlock()},set:function($){Xo.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),tt.module$build$src$core$contextmenu.setCurrentBlock($)}}}),Object.defineProperties(tt.module$build$src$core$events$events,{recordUndo:{get:function(){return Xo.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),ao.getRecordUndo()},set:function($){Xo.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),ao.setRecordUndo($)}}}),Object.defineProperties(Po,{visible:{get:function(){return Xo.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),Po.isVisible()}},DIV:{get:function(){return Xo.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),Po.getDiv()}}}),Object.defineProperties(Vr,{DIV:{get:function(){return Xo.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),Vr.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:tt.module$build$src$core$msg}),wt.__namespace__=tt,wt})}(blockly_compressed)),blockly_compressed.exports}var hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(et,it){(function(tt,nt){et.exports=nt(requireBlockly_compressed())})(commonjsGlobal,function(tt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return tt})}(blockly)),blockly.exports}var hasRequiredCoreBrowser;function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,function(et,it){(function(tt,nt){et.exports=nt(requireBlockly())})(commonjsGlobal,function(tt){return tt})}(coreBrowser)),coreBrowser.exports}var en={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(et,it){(function(tt,nt){et.exports=nt()})(commonjsGlobal,function(){var tt=tt||{Msg:Object.create(null)};return tt.Msg.ADD_COMMENT="Add Comment",tt.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",tt.Msg.CHANGE_VALUE_TITLE="Change value:",tt.Msg.CLEAN_UP="Clean up Blocks",tt.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",tt.Msg.COLLAPSE_ALL="Collapse Blocks",tt.Msg.COLLAPSE_BLOCK="Collapse Block",tt.Msg.COLOUR_BLEND_COLOUR1="colour 1",tt.Msg.COLOUR_BLEND_COLOUR2="colour 2",tt.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",tt.Msg.COLOUR_BLEND_RATIO="ratio",tt.Msg.COLOUR_BLEND_TITLE="blend",tt.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",tt.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",tt.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",tt.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",tt.Msg.COLOUR_RANDOM_TITLE="random colour",tt.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",tt.Msg.COLOUR_RGB_BLUE="blue",tt.Msg.COLOUR_RGB_GREEN="green",tt.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",tt.Msg.COLOUR_RGB_RED="red",tt.Msg.COLOUR_RGB_TITLE="colour with",tt.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",tt.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",tt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",tt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",tt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",tt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",tt.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",tt.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",tt.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",tt.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",tt.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",tt.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",tt.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",tt.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",tt.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",tt.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",tt.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",tt.Msg.CONTROLS_IF_MSG_ELSE="else",tt.Msg.CONTROLS_IF_MSG_ELSEIF="else if",tt.Msg.CONTROLS_IF_MSG_IF="if",tt.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",tt.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",tt.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",tt.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",tt.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",tt.Msg.CONTROLS_REPEAT_INPUT_DO="do",tt.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",tt.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",tt.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",tt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",tt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",tt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",tt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",tt.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",tt.Msg.DELETE_BLOCK="Delete Block",tt.Msg.DELETE_VARIABLE="Delete the '%1' variable",tt.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",tt.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",tt.Msg.DIALOG_CANCEL="Cancel",tt.Msg.DIALOG_OK="OK",tt.Msg.DISABLE_BLOCK="Disable Block",tt.Msg.DUPLICATE_BLOCK="Duplicate",tt.Msg.DUPLICATE_COMMENT="Duplicate Comment",tt.Msg.ENABLE_BLOCK="Enable Block",tt.Msg.EXPAND_ALL="Expand Blocks",tt.Msg.EXPAND_BLOCK="Expand Block",tt.Msg.EXTERNAL_INPUTS="External Inputs",tt.Msg.HELP="Help",tt.Msg.INLINE_INPUTS="Inline Inputs",tt.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",tt.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",tt.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",tt.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",tt.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",tt.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",tt.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",tt.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",tt.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",tt.Msg.LISTS_GET_INDEX_FIRST="first",tt.Msg.LISTS_GET_INDEX_FROM_END="# from end",tt.Msg.LISTS_GET_INDEX_FROM_START="#",tt.Msg.LISTS_GET_INDEX_GET="get",tt.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",tt.Msg.LISTS_GET_INDEX_LAST="last",tt.Msg.LISTS_GET_INDEX_RANDOM="random",tt.Msg.LISTS_GET_INDEX_REMOVE="remove",tt.Msg.LISTS_GET_INDEX_TAIL="",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",tt.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",tt.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",tt.Msg.LISTS_GET_SUBLIST_END_LAST="to last",tt.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",tt.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",tt.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",tt.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",tt.Msg.LISTS_GET_SUBLIST_TAIL="",tt.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",tt.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",tt.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",tt.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",tt.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",tt.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",tt.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",tt.Msg.LISTS_INLIST="in list",tt.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",tt.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",tt.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",tt.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",tt.Msg.LISTS_LENGTH_TITLE="length of %1",tt.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",tt.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",tt.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",tt.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",tt.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",tt.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",tt.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",tt.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",tt.Msg.LISTS_SET_INDEX_INPUT_TO="as",tt.Msg.LISTS_SET_INDEX_INSERT="insert at",tt.Msg.LISTS_SET_INDEX_SET="set",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",tt.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",tt.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",tt.Msg.LISTS_SORT_ORDER_DESCENDING="descending",tt.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",tt.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",tt.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",tt.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",tt.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",tt.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",tt.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",tt.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",tt.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",tt.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",tt.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",tt.Msg.LOGIC_BOOLEAN_FALSE="false",tt.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",tt.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",tt.Msg.LOGIC_BOOLEAN_TRUE="true",tt.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",tt.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",tt.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",tt.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",tt.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",tt.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",tt.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",tt.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",tt.Msg.LOGIC_NEGATE_TITLE="not %1",tt.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",tt.Msg.LOGIC_NULL="null",tt.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",tt.Msg.LOGIC_NULL_TOOLTIP="Returns null.",tt.Msg.LOGIC_OPERATION_AND="and",tt.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",tt.Msg.LOGIC_OPERATION_OR="or",tt.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",tt.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",tt.Msg.LOGIC_TERNARY_CONDITION="test",tt.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",tt.Msg.LOGIC_TERNARY_IF_FALSE="if false",tt.Msg.LOGIC_TERNARY_IF_TRUE="if true",tt.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",tt.Msg.MATH_ADDITION_SYMBOL="+",tt.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",tt.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",tt.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",tt.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",tt.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",tt.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",tt.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",tt.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",tt.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",tt.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",tt.Msg.MATH_CHANGE_TITLE="change %1 by %2",tt.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",tt.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",tt.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (infinity).",tt.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",tt.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",tt.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",tt.Msg.MATH_DIVISION_SYMBOL="\xF7",tt.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",tt.Msg.MATH_IS_EVEN="is even",tt.Msg.MATH_IS_NEGATIVE="is negative",tt.Msg.MATH_IS_ODD="is odd",tt.Msg.MATH_IS_POSITIVE="is positive",tt.Msg.MATH_IS_PRIME="is prime",tt.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",tt.Msg.MATH_IS_WHOLE="is whole",tt.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",tt.Msg.MATH_MODULO_TITLE="remainder of %1 \xF7 %2",tt.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",tt.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",tt.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",tt.Msg.MATH_NUMBER_TOOLTIP="A number.",tt.Msg.MATH_ONLIST_HELPURL="",tt.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",tt.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",tt.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",tt.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",tt.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",tt.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",tt.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",tt.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",tt.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",tt.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",tt.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",tt.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",tt.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",tt.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",tt.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",tt.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",tt.Msg.MATH_POWER_SYMBOL="^",tt.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",tt.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",tt.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",tt.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",tt.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",tt.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",tt.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",tt.Msg.MATH_ROUND_OPERATOR_ROUND="round",tt.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",tt.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",tt.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",tt.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",tt.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",tt.Msg.MATH_SINGLE_OP_ROOT="square root",tt.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",tt.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",tt.Msg.MATH_SUBTRACTION_SYMBOL="-",tt.Msg.MATH_TRIG_ACOS="acos",tt.Msg.MATH_TRIG_ASIN="asin",tt.Msg.MATH_TRIG_ATAN="atan",tt.Msg.MATH_TRIG_COS="cos",tt.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",tt.Msg.MATH_TRIG_SIN="sin",tt.Msg.MATH_TRIG_TAN="tan",tt.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",tt.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",tt.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",tt.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",tt.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",tt.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",tt.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",tt.Msg.NEW_NUMBER_VARIABLE="Create number variable...",tt.Msg.NEW_STRING_VARIABLE="Create string variable...",tt.Msg.NEW_VARIABLE="Create variable...",tt.Msg.NEW_VARIABLE_TITLE="New variable name:",tt.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",tt.Msg.ORDINAL_NUMBER_SUFFIX="",tt.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",tt.Msg.PROCEDURES_BEFORE_PARAMS="with:",tt.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",tt.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",tt.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",tt.Msg.PROCEDURES_CREATE_DO="Create '%1'",tt.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",tt.Msg.PROCEDURES_DEFNORETURN_DO="",tt.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",tt.Msg.PROCEDURES_DEFNORETURN_TITLE="to",tt.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",tt.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_DEFRETURN_RETURN="return",tt.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",tt.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",tt.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",tt.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",tt.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",tt.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",tt.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",tt.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",tt.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",tt.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",tt.Msg.REDO="Redo",tt.Msg.REMOVE_COMMENT="Remove Comment",tt.Msg.RENAME_VARIABLE="Rename variable...",tt.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",tt.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",tt.Msg.TEXT_APPEND_TITLE="to %1 append text %2",tt.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",tt.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",tt.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",tt.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",tt.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",tt.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",tt.Msg.TEXT_CHARAT_FIRST="get first letter",tt.Msg.TEXT_CHARAT_FROM_END="get letter # from end",tt.Msg.TEXT_CHARAT_FROM_START="get letter #",tt.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",tt.Msg.TEXT_CHARAT_LAST="get last letter",tt.Msg.TEXT_CHARAT_RANDOM="get random letter",tt.Msg.TEXT_CHARAT_TAIL="",tt.Msg.TEXT_CHARAT_TITLE="in text %1 %2",tt.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",tt.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",tt.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",tt.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",tt.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",tt.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",tt.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",tt.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",tt.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",tt.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",tt.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",tt.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",tt.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",tt.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",tt.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",tt.Msg.TEXT_GET_SUBSTRING_TAIL="",tt.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",tt.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",tt.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",tt.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",tt.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",tt.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",tt.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",tt.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",tt.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",tt.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",tt.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",tt.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",tt.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",tt.Msg.TEXT_LENGTH_TITLE="length of %1",tt.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",tt.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",tt.Msg.TEXT_PRINT_TITLE="print %1",tt.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",tt.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",tt.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",tt.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",tt.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",tt.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",tt.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",tt.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",tt.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",tt.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",tt.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",tt.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",tt.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",tt.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",tt.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",tt.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",tt.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",tt.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",tt.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",tt.Msg.TODAY="Today",tt.Msg.UNDO="Undo",tt.Msg.UNNAMED_KEY="unnamed",tt.Msg.VARIABLES_DEFAULT_NAME="item",tt.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",tt.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",tt.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",tt.Msg.VARIABLES_SET="set %1 to %2",tt.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",tt.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",tt.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",tt.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",tt.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",tt.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",tt.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",tt.Msg.CONTROLS_FOREACH_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_FOR_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=tt.Msg.CONTROLS_IF_MSG_ELSEIF,tt.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=tt.Msg.CONTROLS_IF_MSG_ELSE,tt.Msg.CONTROLS_IF_IF_TITLE_IF=tt.Msg.CONTROLS_IF_MSG_IF,tt.Msg.CONTROLS_IF_MSG_THEN=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.LISTS_CREATE_WITH_ITEM_TITLE=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.LISTS_GET_INDEX_HELPURL=tt.Msg.LISTS_INDEX_OF_HELPURL,tt.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.MATH_CHANGE_TITLE_ITEM=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.PROCEDURES_DEFRETURN_COMMENT=tt.Msg.PROCEDURES_DEFNORETURN_COMMENT,tt.Msg.PROCEDURES_DEFRETURN_DO=tt.Msg.PROCEDURES_DEFNORETURN_DO,tt.Msg.PROCEDURES_DEFRETURN_PROCEDURE=tt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,tt.Msg.PROCEDURES_DEFRETURN_TITLE=tt.Msg.PROCEDURES_DEFNORETURN_TITLE,tt.Msg.TEXT_APPEND_VARIABLE=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.MATH_HUE="230",tt.Msg.LOOPS_HUE="120",tt.Msg.LISTS_HUE="260",tt.Msg.LOGIC_HUE="210",tt.Msg.VARIABLES_HUE="330",tt.Msg.TEXTS_HUE="160",tt.Msg.PROCEDURES_HUE="290",tt.Msg.COLOUR_HUE="20",tt.Msg.VARIABLES_DYNAMIC_HUE="310",tt.Msg})}(en)),en.exports}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(et,it){(function(tt,nt){et.exports=nt(requireBlockly_compressed())})(commonjsGlobal,function(tt){var nt=tt.__namespace__,st={};nt.module$build$src$core$contextmenu,nt.module$build$src$core$extensions,nt.module$build$src$core$variables,nt.module$build$src$core$utils$xml;var ct=nt.module$build$src$core$msg.Msg,ht=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,gt=nt.module$build$src$core$common.defineBlocks;st.blocks=ht([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var $t={customContextMenu:function(dt){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ft={text:ct.RENAME_VARIABLE,enabled:!0,callback:at(this)},Mt=this.getField("VAR").getText(),Mt={text:ct.DELETE_VARIABLE.replace("%1",Mt),enabled:!0,callback:_t(this)},dt.unshift(ft),dt.unshift(Mt));else{var ft=this.getFieldValue("VAR"),yt=this.workspace.getVariableById(ft).type;if(this.type==="variables_get_dynamic"){ft="variables_set_dynamic";var Nt=ct.VARIABLES_GET_CREATE_SET}else ft="variables_get_dynamic",Nt=ct.VARIABLES_SET_CREATE_GET;var Mt={enabled:0<this.workspace.remainingCapacity()};const Io=this.getField("VAR").getText();Mt.text=Nt.replace("%1",Io),Nt=nt.module$build$src$core$utils$xml.createElement("field"),Nt.setAttribute("name","VAR"),Nt.setAttribute("variabletype",yt),Nt.appendChild(nt.module$build$src$core$utils$xml.createTextNode(Io)),yt=nt.module$build$src$core$utils$xml.createElement("block"),yt.setAttribute("type",ft),yt.appendChild(Nt),Mt.callback=nt.module$build$src$core$contextmenu.callbackFactory(this,yt),dt.push(Mt)}},onchange:function(dt){dt=this.getFieldValue("VAR"),dt=nt.module$build$src$core$variables.getVariable(this.workspace,dt),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(dt.type):this.getInput("VALUE").connection.setCheck(dt.type)}},at=function(dt){return function(){const ft=dt.workspace,yt=dt.getField("VAR").getVariable();nt.module$build$src$core$variables.renameVariable(ft,yt)}},_t=function(dt){return function(){const ft=dt.workspace,yt=dt.getField("VAR").getVariable();ft.deleteVariableById(yt.getId()),ft.refreshToolboxSelection()}};nt.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",$t),gt(st.blocks);var mt={};nt.module$build$src$core$contextmenu,nt.module$build$src$core$extensions,nt.module$build$src$core$variables,nt.module$build$src$core$utils$xml;var Tt=nt.module$build$src$core$msg.Msg,Et=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Ct=nt.module$build$src$core$common.defineBlocks;mt.blocks=Et([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var kt={customContextMenu:function(dt){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ft={text:Tt.RENAME_VARIABLE,enabled:!0,callback:Wt(this)},Nt=this.getField("VAR").getText(),Nt={text:Tt.DELETE_VARIABLE.replace("%1",Nt),enabled:!0,callback:St(this)},dt.unshift(ft),dt.unshift(Nt));else{if(this.type==="variables_get")var ft="variables_set",yt=Tt.VARIABLES_GET_CREATE_SET;else ft="variables_get",yt=Tt.VARIABLES_SET_CREATE_GET;var Nt={enabled:0<this.workspace.remainingCapacity()},Mt=this.getField("VAR").getText();Nt.text=yt.replace("%1",Mt),yt=nt.module$build$src$core$utils$xml.createElement("field"),yt.setAttribute("name","VAR"),yt.appendChild(nt.module$build$src$core$utils$xml.createTextNode(Mt)),Mt=nt.module$build$src$core$utils$xml.createElement("block"),Mt.setAttribute("type",ft),Mt.appendChild(yt),Nt.callback=nt.module$build$src$core$contextmenu.callbackFactory(this,Mt),dt.push(Nt)}}},Wt=function(dt){return function(){const ft=dt.workspace,yt=dt.getField("VAR").getVariable();nt.module$build$src$core$variables.renameVariable(ft,yt)}},St=function(dt){return function(){const ft=dt.workspace,yt=dt.getField("VAR").getVariable();ft.deleteVariableById(yt.getId()),ft.refreshToolboxSelection()}};nt.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",kt),Ct(mt.blocks);var It={};nt.module$build$src$core$extensions;var bt=nt.module$build$src$core$msg.Msg;nt.module$build$src$core$utils$xml,nt.Align$$module$build$src$core$input,nt.module$build$src$core$connection_type.ConnectionType;var Pt=nt.module$build$src$core$field_dropdown.FieldDropdown;nt.FieldImage$$module$build$src$core$field_image,nt.FieldTextInput$$module$build$src$core$field_textinput,nt.Mutator$$module$build$src$core$mutator;var Gt=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Jt=nt.module$build$src$core$common.defineBlocks;It.blocks=Gt([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xB6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),It.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[bt.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[bt.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[bt.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[bt.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[bt.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[bt.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(bt.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(bt.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),bt.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(bt.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(bt.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");var ft=this.getInput("AT1").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return dt.setAttribute("at1",ft),ft=this.getInput("AT2").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,dt.setAttribute("at2",ft),dt},domToMutation:function(dt){const ft=dt.getAttribute("at1")==="true";dt=dt.getAttribute("at2")==="true",this.updateAt_(1,ft),this.updateAt_(2,dt)},updateAt_:function(dt,ft){this.removeInput("AT"+dt),this.removeInput("ORDINAL"+dt,!0),ft?(this.appendValueInput("AT"+dt).setCheck("Number"),bt.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+dt).appendField(bt.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+dt),dt===2&&bt.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(bt.TEXT_GET_SUBSTRING_TAIL));const yt=new Pt(this["WHERE_OPTIONS_"+dt],function(Nt){const Mt=Nt==="FROM_START"||Nt==="FROM_END";if(Mt!==ft){const Io=this.getSourceBlock();return Io.updateAt_(dt,Mt),Io.setFieldValue(Nt,"WHERE"+dt),null}});this.getInput("AT"+dt).appendField(yt,"WHERE"+dt),dt===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},It.blocks.text_changeCase={init:function(){const dt=[[bt.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[bt.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[bt.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(bt.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new Pt(dt),"CASE"),this.setOutput(!0,"String"),this.setTooltip(bt.TEXT_CHANGECASE_TOOLTIP)}},It.blocks.text_trim={init:function(){const dt=[[bt.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[bt.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[bt.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(bt.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new Pt(dt),"MODE"),this.setOutput(!0,"String"),this.setTooltip(bt.TEXT_TRIM_TOOLTIP)}},It.blocks.text_print={init:function(){this.jsonInit({message0:bt.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:bt.TEXT_PRINT_TOOLTIP,helpUrl:bt.TEXT_PRINT_HELPURL})}};var Kt={updateType_:function(dt){this.outputConnection.setCheck(dt==="NUMBER"?"Number":"String")},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("type",this.getFieldValue("TYPE")),dt},domToMutation:function(dt){this.updateType_(dt.getAttribute("type"))}};It.blocks.text_prompt_ext=Object.assign({},Kt,{init:function(){var dt=[[bt.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[bt.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(bt.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const ft=this;dt=new Pt(dt,function(yt){ft.updateType_(yt)}),this.appendValueInput("TEXT").appendField(dt,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return ft.getFieldValue("TYPE")==="TEXT"?bt.TEXT_PROMPT_TOOLTIP_TEXT:bt.TEXT_PROMPT_TOOLTIP_NUMBER})}}),It.blocks.text_prompt=Object.assign({},Kt,{init:function(){this.mixin(Xt);var dt=[[bt.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[bt.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const ft=this;this.setHelpUrl(bt.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),dt=new Pt(dt,function(yt){ft.updateType_(yt)}),this.appendDummyInput().appendField(dt,"TYPE").appendField(this.newQuote_(!0)).appendField(new nt.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return ft.getFieldValue("TYPE")==="TEXT"?bt.TEXT_PROMPT_TOOLTIP_TEXT:bt.TEXT_PROMPT_TOOLTIP_NUMBER})}}),It.blocks.text_count={init:function(){this.jsonInit({message0:bt.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:bt.TEXT_COUNT_TOOLTIP,helpUrl:bt.TEXT_COUNT_HELPURL})}},It.blocks.text_replace={init:function(){this.jsonInit({message0:bt.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:bt.TEXT_REPLACE_TOOLTIP,helpUrl:bt.TEXT_REPLACE_HELPURL})}},It.blocks.text_reverse={init:function(){this.jsonInit({message0:bt.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:bt.TEXT_REVERSE_TOOLTIP,helpUrl:bt.TEXT_REVERSE_HELPURL})}};var Xt={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(dt){for(let ft=0,yt;yt=this.inputList[ft];ft++)for(let Nt=0,Mt;Mt=yt.fieldRow[Nt];Nt++)if(dt===Mt.name){yt.insertFieldAt(Nt,this.newQuote_(!0)),yt.insertFieldAt(Nt+2,this.newQuote_(!1));return}console.warn('field named "'+dt+'" not found in '+this.toDevString())},newQuote_:function(dt){return dt=this.RTL?!dt:dt,new nt.FieldImage$$module$build$src$core$field_image(dt?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,dt?"\u201C":"\u201D")}},ko=function(){this.mixin(Xt),this.quoteField_("TEXT")},Qt={mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("items",this.itemCount_),dt},domToMutation:function(dt){this.itemCount_=parseInt(dt.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(dt){this.itemCount_=dt.itemCount,this.updateShape_()},decompose:function(dt){const ft=dt.newBlock("text_create_join_container");ft.initSvg();let yt=ft.getInput("STACK").connection;for(let Nt=0;Nt<this.itemCount_;Nt++){const Mt=dt.newBlock("text_create_join_item");Mt.initSvg(),yt.connect(Mt.previousConnection),yt=Mt.nextConnection}return ft},compose:function(dt){var ft=dt.getInputTargetBlock("STACK");for(dt=[];ft;)ft.isInsertionMarker()||dt.push(ft.valueConnection_),ft=ft.getNextBlock();for(ft=0;ft<this.itemCount_;ft++){const yt=this.getInput("ADD"+ft).connection.targetConnection;yt&&dt.indexOf(yt)===-1&&yt.disconnect()}for(this.itemCount_=dt.length,this.updateShape_(),ft=0;ft<this.itemCount_;ft++)nt.Mutator$$module$build$src$core$mutator.reconnect(dt[ft],this,"ADD"+ft)},saveConnections:function(dt){dt=dt.getInputTargetBlock("STACK");let ft=0;for(;dt;){if(dt.isInsertionMarker()){dt=dt.getNextBlock();continue}const yt=this.getInput("ADD"+ft);dt.valueConnection_=yt&&yt.connection.targetConnection,dt=dt.getNextBlock(),ft++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var dt=0;dt<this.itemCount_;dt++)if(!this.getInput("ADD"+dt)){const ft=this.appendValueInput("ADD"+dt).setAlign(nt.Align$$module$build$src$core$input.RIGHT);dt===0&&ft.appendField(bt.TEXT_JOIN_TITLE_CREATEWITH)}for(dt=this.itemCount_;this.getInput("ADD"+dt);dt++)this.removeInput("ADD"+dt)}},xo=function(){this.mixin(Xt),this.itemCount_=2,this.updateShape_(),this.setMutator(new nt.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};nt.module$build$src$core$extensions.register("text_append_tooltip",nt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var br=function(){const dt=this;this.setTooltip(function(){return bt.TEXT_INDEXOF_TOOLTIP.replace("%1",dt.workspace.options.oneBasedIndex?"0":"-1")})},Yr={mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("at",!!this.isAt_),dt},domToMutation:function(dt){dt=dt.getAttribute("at")!=="false",this.updateAt_(dt)},updateAt_:function(dt){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),dt&&(this.appendValueInput("AT").setCheck("Number"),bt.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(bt.ORDINAL_NUMBER_SUFFIX)),bt.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(bt.TEXT_CHARAT_TAIL)),this.isAt_=dt}},vr=function(){this.getField("WHERE").setValidator(function(ft){ft=ft==="FROM_START"||ft==="FROM_END",ft!==this.isAt_&&this.getSourceBlock().updateAt_(ft)}),this.updateAt_(!0);const dt=this;this.setTooltip(function(){var ft=dt.getFieldValue("WHERE");let yt=bt.TEXT_CHARAT_TOOLTIP;return(ft==="FROM_START"||ft==="FROM_END")&&(ft=ft==="FROM_START"?bt.LISTS_INDEX_FROM_START_TOOLTIP:bt.LISTS_INDEX_FROM_END_TOOLTIP)&&(yt+="  "+ft.replace("%1",dt.workspace.options.oneBasedIndex?"#1":"#0")),yt})};nt.module$build$src$core$extensions.register("text_indexOf_tooltip",br),nt.module$build$src$core$extensions.register("text_quotes",ko),nt.module$build$src$core$extensions.registerMutator("text_join_mutator",Qt,xo),nt.module$build$src$core$extensions.registerMutator("text_charAt_mutator",Yr,vr),Jt(It.blocks);var Wo={};nt.module$build$src$core$contextmenu,nt.module$build$src$core$events$events,nt.module$build$src$core$procedures,nt.module$build$src$core$variables,nt.module$build$src$core$xml,nt.module$build$src$core$utils$xml,nt.Align$$module$build$src$core$input,nt.config$$module$build$src$core$config,nt.FieldCheckbox$$module$build$src$core$field_checkbox,nt.FieldLabel$$module$build$src$core$field_label,nt.FieldTextInput$$module$build$src$core$field_textinput;var po=nt.module$build$src$core$msg.Msg;nt.Mutator$$module$build$src$core$mutator,nt.module$build$src$core$names.Names;var Bn=nt.module$build$src$core$common.defineBlocks;Wo.blocks={};var zt={setStatements_:function(dt){this.hasStatements_!==dt&&(dt?(this.appendStatementInput("STACK").appendField(po.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=dt)},updateParams_:function(){let dt="";this.arguments_.length&&(dt=po.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),nt.module$build$src$core$events$events.disable();try{this.setFieldValue(dt,"PARAMS")}finally{nt.module$build$src$core$events$events.enable()}},mutationToDom:function(dt){const ft=nt.module$build$src$core$utils$xml.createElement("mutation");dt&&ft.setAttribute("name",this.getFieldValue("NAME"));for(let yt=0;yt<this.argumentVarModels_.length;yt++){const Nt=nt.module$build$src$core$utils$xml.createElement("arg"),Mt=this.argumentVarModels_[yt];Nt.setAttribute("name",Mt.name),Nt.setAttribute("varid",Mt.getId()),dt&&this.paramIds_&&Nt.setAttribute("paramId",this.paramIds_[yt]),ft.appendChild(Nt)}return this.hasStatements_||ft.setAttribute("statements","false"),ft},domToMutation:function(dt){this.arguments_=[],this.argumentVarModels_=[];for(let yt=0,Nt;Nt=dt.childNodes[yt];yt++)if(Nt.nodeName.toLowerCase()==="arg"){const Mt=Nt.getAttribute("name");var ft=Nt.getAttribute("varid")||Nt.getAttribute("varId");this.arguments_.push(Mt),ft=nt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,ft,Mt,""),ft!==null?this.argumentVarModels_.push(ft):console.log("Failed to create a variable with name "+Mt+", ignoring.")}this.updateParams_(),nt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(dt.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const dt=Object.create(null);if(this.argumentVarModels_.length){dt.params=[];for(let ft=0;ft<this.argumentVarModels_.length;ft++)dt.params.push({name:this.argumentVarModels_[ft].name,id:this.argumentVarModels_[ft].getId()})}return this.hasStatements_||(dt.hasStatements=!1),dt},loadExtraState:function(dt){if(this.arguments_=[],this.argumentVarModels_=[],dt.params)for(let yt=0;yt<dt.params.length;yt++){var ft=dt.params[yt];ft=nt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,ft.id,ft.name,""),this.arguments_.push(ft.name),this.argumentVarModels_.push(ft)}this.updateParams_(),nt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(dt.hasStatements!==!1)},decompose:function(dt){const ft=nt.module$build$src$core$utils$xml.createElement("block");ft.setAttribute("type","procedures_mutatorcontainer");var yt=nt.module$build$src$core$utils$xml.createElement("statement");yt.setAttribute("name","STACK"),ft.appendChild(yt);for(let Mt=0;Mt<this.arguments_.length;Mt++){const Io=nt.module$build$src$core$utils$xml.createElement("block");Io.setAttribute("type","procedures_mutatorarg");var Nt=nt.module$build$src$core$utils$xml.createElement("field");Nt.setAttribute("name","NAME");const qn=nt.module$build$src$core$utils$xml.createTextNode(this.arguments_[Mt]);Nt.appendChild(qn),Io.appendChild(Nt),Nt=nt.module$build$src$core$utils$xml.createElement("next"),Io.appendChild(Nt),yt.appendChild(Io),yt=Nt}return dt=nt.module$build$src$core$xml.domToBlock(ft,dt),this.type==="procedures_defreturn"?dt.setFieldValue(this.hasStatements_,"STATEMENTS"):dt.removeInput("STATEMENT_INPUT"),nt.module$build$src$core$procedures.mutateCallers(this),dt},compose:function(dt){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let ft=dt.getInputTargetBlock("STACK");for(;ft&&!ft.isInsertionMarker();){var yt=ft.getFieldValue("NAME");this.arguments_.push(yt),yt=this.workspace.getVariable(yt,""),this.argumentVarModels_.push(yt),this.paramIds_.push(ft.id),ft=ft.nextConnection&&ft.nextConnection.targetBlock()}this.updateParams_(),nt.module$build$src$core$procedures.mutateCallers(this),dt=dt.getFieldValue("STATEMENTS"),dt!==null&&(dt=dt==="TRUE",this.hasStatements_!==dt)&&(dt?(this.setStatements_(!0),nt.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(dt=this.getInput("STACK").connection,(this.statementConnection_=dt.targetConnection)&&(dt=dt.targetBlock(),dt.unplug(),dt.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(dt,ft){var yt=this.workspace.getVariableById(dt);if(yt.type===""){yt=yt.name,ft=this.workspace.getVariableById(ft);var Nt=!1;for(let Mt=0;Mt<this.argumentVarModels_.length;Mt++)this.argumentVarModels_[Mt].getId()===dt&&(this.arguments_[Mt]=ft.name,this.argumentVarModels_[Mt]=ft,Nt=!0);Nt&&(this.displayRenamedVar_(yt,ft.name),nt.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(dt){const ft=dt.name;let yt=!1,Nt;for(let Mt=0;Mt<this.argumentVarModels_.length;Mt++)this.argumentVarModels_[Mt].getId()===dt.getId()&&(Nt=this.arguments_[Mt],this.arguments_[Mt]=ft,yt=!0);yt&&(this.displayRenamedVar_(Nt,ft),nt.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(dt,ft){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const yt=this.mutator.workspace_.getAllBlocks(!1);for(let Nt=0,Mt;Mt=yt[Nt];Nt++)Mt.type==="procedures_mutatorarg"&&nt.module$build$src$core$names.Names.equals(dt,Mt.getFieldValue("NAME"))&&Mt.setFieldValue(ft,"NAME")}},customContextMenu:function(dt){if(!this.isInFlyout){var ft={enabled:!0},yt=this.getFieldValue("NAME");ft.text=po.PROCEDURES_CREATE_DO.replace("%1",yt);var Nt=nt.module$build$src$core$utils$xml.createElement("mutation");for(Nt.setAttribute("name",yt),yt=0;yt<this.arguments_.length;yt++){var Mt=nt.module$build$src$core$utils$xml.createElement("arg");Mt.setAttribute("name",this.arguments_[yt]),Nt.appendChild(Mt)}if(yt=nt.module$build$src$core$utils$xml.createElement("block"),yt.setAttribute("type",this.callType_),yt.appendChild(Nt),ft.callback=nt.module$build$src$core$contextmenu.callbackFactory(this,yt),dt.push(ft),!this.isCollapsed())for(ft=0;ft<this.argumentVarModels_.length;ft++)Nt={enabled:!0},yt=this.argumentVarModels_[ft],Nt.text=po.VARIABLES_SET_CREATE_GET.replace("%1",yt.name),yt=nt.module$build$src$core$variables.generateVariableFieldDom(yt),Mt=nt.module$build$src$core$utils$xml.createElement("block"),Mt.setAttribute("type","variables_get"),Mt.appendChild(yt),Nt.callback=nt.module$build$src$core$contextmenu.callbackFactory(this,Mt),dt.push(Nt)}}};Wo.blocks.procedures_defnoreturn=Object.assign({},zt,{init:function(){var dt=nt.module$build$src$core$procedures.findLegalName("",this);dt=new nt.FieldTextInput$$module$build$src$core$field_textinput(dt,nt.module$build$src$core$procedures.rename),dt.setSpellcheck(!1),this.appendDummyInput().appendField(po.PROCEDURES_DEFNORETURN_TITLE).appendField(dt,"NAME").appendField("","PARAMS"),this.setMutator(new nt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&po.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(po.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(po.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(po.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Wo.blocks.procedures_defreturn=Object.assign({},zt,{init:function(){var dt=nt.module$build$src$core$procedures.findLegalName("",this);dt=new nt.FieldTextInput$$module$build$src$core$field_textinput(dt,nt.module$build$src$core$procedures.rename),dt.setSpellcheck(!1),this.appendDummyInput().appendField(po.PROCEDURES_DEFRETURN_TITLE).appendField(dt,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(nt.Align$$module$build$src$core$input.RIGHT).appendField(po.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new nt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&po.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(po.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(po.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(po.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Wo.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(po.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(po.PROCEDURES_ALLOW_STATEMENTS).appendField(new nt.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(po.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Wo.blocks.procedures_mutatorarg={init:function(){const dt=new nt.FieldTextInput$$module$build$src$core$field_textinput(nt.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);dt.oldShowEditorFn_=dt.showEditor_,dt.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(po.PROCEDURES_MUTATORARG_TITLE).appendField(dt,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(po.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,dt.onFinishEditing_=this.deleteIntermediateVars_,dt.createdVariables_=[],dt.onFinishEditing_("x")},validator_:function(dt){var ft=this.getSourceBlock();const yt=nt.Mutator$$module$build$src$core$mutator.findParentWs(ft.workspace);if(dt=dt.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!dt)return null;const Nt=(ft.workspace.targetWorkspace||ft.workspace).getAllBlocks(!1),Mt=dt.toLowerCase();for(let Io=0;Io<Nt.length;Io++){if(Nt[Io].id===this.getSourceBlock().id)continue;const qn=Nt[Io].getFieldValue("NAME");if(qn&&qn.toLowerCase()===Mt)return null}return ft.isInFlyout||((ft=yt.getVariable(dt,""))&&ft.name!==dt&&yt.renameVariableById(ft.getId(),dt),ft||(ft=yt.createVariable(dt,""))&&this.createdVariables_&&this.createdVariables_.push(ft)),dt},deleteIntermediateVars_:function(dt){const ft=nt.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(ft)for(let yt=0;yt<this.createdVariables_.length;yt++){const Nt=this.createdVariables_[yt];Nt.name!==dt&&ft.deleteVariableById(Nt.getId())}}};var so={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(dt,ft){nt.module$build$src$core$names.Names.equals(dt,this.getProcedureCall())&&(this.setFieldValue(ft,"NAME"),this.setTooltip((this.outputConnection?po.PROCEDURES_CALLRETURN_TOOLTIP:po.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",ft)))},setProcedureParameters_:function(dt,ft){var yt=nt.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),Nt=yt&&yt.mutator&&yt.mutator.isVisible();if(Nt?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),dt.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=ft;else{if(ft.length!==dt.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),yt=this.rendered,this.rendered=!1;for(let Io=0;Io<this.arguments_.length;Io++){var Mt=this.getInput("ARG"+Io);Mt&&(Mt=Mt.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Io]]=Mt,Nt&&Mt&&ft.indexOf(this.quarkIds_[Io])===-1&&(Mt.disconnect(),Mt.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(dt),this.argumentVarModels_=[],dt=0;dt<this.arguments_.length;dt++)Nt=nt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[dt],""),this.argumentVarModels_.push(Nt);if(this.updateShape_(),this.quarkIds_=ft)for(ft=0;ft<this.arguments_.length;ft++)dt=this.quarkIds_[ft],dt in this.quarkConnections_&&(nt.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[dt],this,"ARG"+ft)||delete this.quarkConnections_[dt]);(this.rendered=yt)&&this.render()}},updateShape_:function(){for(var dt=0;dt<this.arguments_.length;dt++){var ft=this.getField("ARGNAME"+dt);if(ft){nt.module$build$src$core$events$events.disable();try{ft.setValue(this.arguments_[dt])}finally{nt.module$build$src$core$events$events.enable()}}else ft=new nt.FieldLabel$$module$build$src$core$field_label(this.arguments_[dt]),this.appendValueInput("ARG"+dt).setAlign(nt.Align$$module$build$src$core$input.RIGHT).appendField(ft,"ARGNAME"+dt).init()}for(dt=this.arguments_.length;this.getInput("ARG"+dt);dt++)this.removeInput("ARG"+dt);(dt=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(dt.appendField(po.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),dt.init()):this.getField("WITH")&&dt.removeField("WITH"))},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");dt.setAttribute("name",this.getProcedureCall());for(let ft=0;ft<this.arguments_.length;ft++){const yt=nt.module$build$src$core$utils$xml.createElement("arg");yt.setAttribute("name",this.arguments_[ft]),dt.appendChild(yt)}return dt},domToMutation:function(dt){var ft=dt.getAttribute("name");this.renameProcedure(this.getProcedureCall(),ft),ft=[];const yt=[];for(let Nt=0,Mt;Mt=dt.childNodes[Nt];Nt++)Mt.nodeName.toLowerCase()==="arg"&&(ft.push(Mt.getAttribute("name")),yt.push(Mt.getAttribute("paramId")));this.setProcedureParameters_(ft,yt)},saveExtraState:function(){const dt=Object.create(null);return dt.name=this.getProcedureCall(),this.arguments_.length&&(dt.params=this.arguments_),dt},loadExtraState:function(dt){if(this.renameProcedure(this.getProcedureCall(),dt.name),dt=dt.params){const ft=[];ft.length=dt.length,ft.fill(null),this.setProcedureParameters_(dt,ft)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(dt){if(this.workspace&&!this.workspace.isFlyout&&dt.recordUndo)if(dt.type===nt.module$build$src$core$events$events.BLOCK_CREATE&&dt.ids.indexOf(this.id)!==-1){var ft=this.getProcedureCall();if(ft=nt.module$build$src$core$procedures.getDefinition(ft,this.workspace),!ft||ft.type===this.defType_&&JSON.stringify(ft.getVars())===JSON.stringify(this.arguments_)||(ft=null),!ft){nt.module$build$src$core$events$events.setGroup(dt.group),dt=nt.module$build$src$core$utils$xml.createElement("xml"),ft=nt.module$build$src$core$utils$xml.createElement("block"),ft.setAttribute("type",this.defType_);var yt=this.getRelativeToSurfaceXY(),Nt=yt.y+2*nt.config$$module$build$src$core$config.snapRadius;ft.setAttribute("x",yt.x+nt.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),ft.setAttribute("y",Nt),yt=this.mutationToDom(),ft.appendChild(yt),yt=nt.module$build$src$core$utils$xml.createElement("field"),yt.setAttribute("name","NAME"),Nt=this.getProcedureCall();const Mt=nt.module$build$src$core$procedures.findLegalName(Nt,this);Nt!==Mt&&this.renameProcedure(Nt,Mt),yt.appendChild(nt.module$build$src$core$utils$xml.createTextNode(Nt)),ft.appendChild(yt),dt.appendChild(ft),nt.module$build$src$core$xml.domToWorkspace(dt,this.workspace),nt.module$build$src$core$events$events.setGroup(!1)}}else dt.type===nt.module$build$src$core$events$events.BLOCK_DELETE&&dt.blockId!=this.id?(ft=this.getProcedureCall(),nt.module$build$src$core$procedures.getDefinition(ft,this.workspace)||(nt.module$build$src$core$events$events.setGroup(dt.group),this.dispose(!0),nt.module$build$src$core$events$events.setGroup(!1))):dt.type===nt.module$build$src$core$events$events.CHANGE&&dt.element==="disabled"&&(ft=this.getProcedureCall(),(ft=nt.module$build$src$core$procedures.getDefinition(ft,this.workspace))&&ft.id===dt.blockId&&((ft=nt.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),nt.module$build$src$core$events$events.setGroup(dt.group),dt.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),nt.module$build$src$core$events$events.setGroup(ft)))},customContextMenu:function(dt){if(this.workspace.isMovable()){var ft={enabled:!0};ft.text=po.PROCEDURES_HIGHLIGHT_DEF;var yt=this.getProcedureCall(),Nt=this.workspace;ft.callback=function(){const Mt=nt.module$build$src$core$procedures.getDefinition(yt,Nt);Mt&&(Nt.centerOnBlock(Mt.id),Mt.select())},dt.push(ft)}}};Wo.blocks.procedures_callnoreturn=Object.assign({},so,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(po.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Wo.blocks.procedures_callreturn=Object.assign({},so,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(po.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Wo.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(po.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(po.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(po.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(po.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("value",Number(this.hasReturnValue_)),dt},domToMutation:function(dt){this.hasReturnValue_=dt.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(po.PROCEDURES_DEFRETURN_RETURN))},onchange:function(dt){if(!(this.workspace.isDragging&&this.workspace.isDragging()||dt.type!==nt.module$build$src$core$events$events.BLOCK_MOVE)){var ft=!1,yt=this;do{if(this.FUNCTION_TYPES.indexOf(yt.type)!==-1){ft=!0;break}yt=yt.getSurroundParent()}while(yt);ft?(yt.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(po.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):yt.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(po.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(po.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(yt=nt.module$build$src$core$events$events.getGroup(),nt.module$build$src$core$events$events.setGroup(dt.group),this.setEnabled(ft),nt.module$build$src$core$events$events.setGroup(yt))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Bn(Wo.blocks);var lo={};nt.module$build$src$core$extensions,nt.module$build$src$core$field_dropdown,nt.module$build$src$core$utils$xml;var Lt=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Ft=nt.module$build$src$core$common.defineBlocks;lo.blocks=Lt([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03C0","PI"],["e","E"],["\u03C6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xBD)","SQRT1_2"],["\u221E","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var Kr={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};nt.module$build$src$core$extensions.register("math_op_tooltip",nt.module$build$src$core$extensions.buildTooltipForDropdown("OP",Kr));var uo={mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation"),ft=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return dt.setAttribute("divisor_input",ft),dt},domToMutation:function(dt){dt=dt.getAttribute("divisor_input")==="true",this.updateShape_(dt)},updateShape_:function(dt){const ft=this.getInput("DIVISOR");dt?ft||this.appendValueInput("DIVISOR").setCheck("Number"):ft&&this.removeInput("DIVISOR")}},Jn=function(){this.getField("PROPERTY").setValidator(function(dt){dt=dt==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(dt)})};nt.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",uo,Jn),nt.module$build$src$core$extensions.register("math_change_tooltip",nt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var go={updateType_:function(dt){dt==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("op",this.getFieldValue("OP")),dt},domToMutation:function(dt){this.updateType_(dt.getAttribute("op"))}},ir=function(){this.getField("OP").setValidator(function(dt){this.updateType_(dt)}.bind(this))};nt.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",go,ir),Ft(lo.blocks);var wr={};nt.module$build$src$core$contextmenu,nt.module$build$src$core$events$events,nt.module$build$src$core$extensions,nt.module$build$src$core$variables,nt.module$build$src$core$utils$xml;var $n=nt.module$build$src$core$msg.Msg,Tn=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,In=nt.module$build$src$core$common.defineBlocks;wr.blocks=Tn([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var $_={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};nt.module$build$src$core$extensions.register("controls_whileUntil_tooltip",nt.module$build$src$core$extensions.buildTooltipForDropdown("MODE",$_));var Un={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};nt.module$build$src$core$extensions.register("controls_flow_tooltip",nt.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",Un));var _l={customContextMenu:function(dt){if(!this.isInFlyout){var ft=this.getField("VAR").getVariable(),yt=ft.name;if(!this.isCollapsed()&&yt!==null){const Nt={enabled:!0};Nt.text=$n.VARIABLES_SET_CREATE_GET.replace("%1",yt),ft=nt.module$build$src$core$variables.generateVariableFieldDom(ft),yt=nt.module$build$src$core$utils$xml.createElement("block"),yt.setAttribute("type","variables_get"),yt.appendChild(ft),Nt.callback=nt.module$build$src$core$contextmenu.callbackFactory(this,yt),dt.push(Nt)}}}};nt.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",_l),nt.module$build$src$core$extensions.register("controls_for_tooltip",nt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),nt.module$build$src$core$extensions.register("controls_forEach_tooltip",nt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),wr.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var $l={getSurroundLoop:function(){let dt=this;do{if(wr.loopTypes.has(dt.type))return dt;dt=dt.getSurroundParent()}while(dt);return null},onchange:function(dt){if(this.workspace.isDragging&&!this.workspace.isDragging()&&dt.type===nt.module$build$src$core$events$events.BLOCK_MOVE){var ft=this.getSurroundLoop(this);if(this.setWarningText(ft?null:$n.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const yt=nt.module$build$src$core$events$events.getGroup();nt.module$build$src$core$events$events.setGroup(dt.group),this.setEnabled(ft),nt.module$build$src$core$events$events.setGroup(yt)}}}};nt.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",$l),In(wr.blocks);var Sr={};nt.module$build$src$core$events$events,nt.module$build$src$core$extensions,nt.module$build$src$core$utils$xml;var Jr=nt.module$build$src$core$msg.Msg;nt.Mutator$$module$build$src$core$mutator;var Qn=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,mo=nt.module$build$src$core$common.defineBlocks;Sr.blocks=Qn([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200F<","LT"],["\u200F\u2264","LTE"],["\u200F>","GT"],["\u200F\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var fs={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};nt.module$build$src$core$extensions.register("logic_op_tooltip",nt.module$build$src$core$extensions.buildTooltipForDropdown("OP",fs));var f_={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&dt.setAttribute("elseif",this.elseifCount_),this.elseCount_&&dt.setAttribute("else",1),dt},domToMutation:function(dt){this.elseifCount_=parseInt(dt.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(dt.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const dt=Object.create(null);return this.elseifCount_&&(dt.elseIfCount=this.elseifCount_),this.elseCount_&&(dt.hasElse=!0),dt},loadExtraState:function(dt){this.elseifCount_=dt.elseIfCount||0,this.elseCount_=dt.hasElse?1:0,this.updateShape_()},decompose:function(dt){const ft=dt.newBlock("controls_if_if");ft.initSvg();let yt=ft.nextConnection;for(let Nt=1;Nt<=this.elseifCount_;Nt++){const Mt=dt.newBlock("controls_if_elseif");Mt.initSvg(),yt.connect(Mt.previousConnection),yt=Mt.nextConnection}return this.elseCount_&&(dt=dt.newBlock("controls_if_else"),dt.initSvg(),yt.connect(dt.previousConnection)),ft},compose:function(dt){dt=dt.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const ft=[null],yt=[null];let Nt=null;for(;dt;){if(!dt.isInsertionMarker())switch(dt.type){case"controls_if_elseif":this.elseifCount_++,ft.push(dt.valueConnection_),yt.push(dt.statementConnection_);break;case"controls_if_else":this.elseCount_++,Nt=dt.statementConnection_;break;default:throw TypeError("Unknown block type: "+dt.type)}dt=dt.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(ft,yt,Nt)},saveConnections:function(dt){dt=dt.nextConnection.targetBlock();let ft=1;for(;dt;){if(!dt.isInsertionMarker())switch(dt.type){case"controls_if_elseif":var yt=this.getInput("IF"+ft);const Nt=this.getInput("DO"+ft);dt.valueConnection_=yt&&yt.connection.targetConnection,dt.statementConnection_=Nt&&Nt.connection.targetConnection,ft++;break;case"controls_if_else":yt=this.getInput("ELSE"),dt.statementConnection_=yt&&yt.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+dt.type)}dt=dt.getNextBlock()}},rebuildShape_:function(){const dt=[null],ft=[null];let yt=null;this.getInput("ELSE")&&(yt=this.getInput("ELSE").connection.targetConnection);for(let Nt=1;this.getInput("IF"+Nt);Nt++){const Mt=this.getInput("IF"+Nt),Io=this.getInput("DO"+Nt);dt.push(Mt.connection.targetConnection),ft.push(Io.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(dt,ft,yt)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var dt=1;this.getInput("IF"+dt);dt++)this.removeInput("IF"+dt),this.removeInput("DO"+dt);for(dt=1;dt<=this.elseifCount_;dt++)this.appendValueInput("IF"+dt).setCheck("Boolean").appendField(Jr.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+dt).appendField(Jr.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Jr.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(dt,ft,yt){for(let Nt=1;Nt<=this.elseifCount_;Nt++)nt.Mutator$$module$build$src$core$mutator.reconnect(dt[Nt],this,"IF"+Nt),nt.Mutator$$module$build$src$core$mutator.reconnect(ft[Nt],this,"DO"+Nt);nt.Mutator$$module$build$src$core$mutator.reconnect(yt,this,"ELSE")}};nt.module$build$src$core$extensions.registerMutator("controls_if_mutator",f_,null,["controls_if_elseif","controls_if_else"]);var gu=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return Jr.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return Jr.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return Jr.CONTROLS_IF_TOOLTIP_4}else return Jr.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};nt.module$build$src$core$extensions.register("controls_if_tooltip",gu);var Ar={onchange:function(dt){this.prevBlocks_||(this.prevBlocks_=[null,null]);var ft=this.getInputTargetBlock("A");const yt=this.getInputTargetBlock("B");ft&&yt&&!this.workspace.connectionChecker.doTypeChecks(ft.outputConnection,yt.outputConnection)&&(nt.module$build$src$core$events$events.setGroup(dt.group),dt=this.prevBlocks_[0],dt!==ft&&(ft.unplug(),!dt||dt.isDisposed()||dt.isShadow()||this.getInput("A").connection.connect(dt.outputConnection)),ft=this.prevBlocks_[1],ft!==yt&&(yt.unplug(),!ft||ft.isDisposed()||ft.isShadow()||this.getInput("B").connection.connect(ft.outputConnection)),this.bumpNeighbours(),nt.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},T_=function(){this.mixin(Ar)};nt.module$build$src$core$extensions.register("logic_compare",T_);var bn={prevParentConnection_:null,onchange:function(dt){const ft=this.getInputTargetBlock("THEN"),yt=this.getInputTargetBlock("ELSE"),Nt=this.outputConnection.targetConnection;if((ft||yt)&&Nt)for(let Mt=0;2>Mt;Mt++){const Io=Mt===1?ft:yt;Io&&!Io.workspace.connectionChecker.doTypeChecks(Io.outputConnection,Nt)&&(nt.module$build$src$core$events$events.setGroup(dt.group),Nt===this.prevParentConnection_?(this.unplug(),Nt.getSourceBlock().bumpNeighbours()):(Io.unplug(),Io.bumpNeighbours()),nt.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=Nt}};nt.module$build$src$core$extensions.registerMixin("logic_ternary",bn),mo(Sr.blocks);var Zo={};nt.module$build$src$core$utils$xml,nt.module$build$src$core$xml,nt.Align$$module$build$src$core$input,nt.module$build$src$core$connection_type.ConnectionType;var Qr=nt.module$build$src$core$field_dropdown.FieldDropdown,Ut=nt.module$build$src$core$msg.Msg;nt.Mutator$$module$build$src$core$mutator;var mu=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,$u=nt.module$build$src$core$common.defineBlocks;Zo.blocks=mu([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Zo.blocks.lists_create_with={init:function(){this.setHelpUrl(Ut.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new nt.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(Ut.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("items",this.itemCount_),dt},domToMutation:function(dt){this.itemCount_=parseInt(dt.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(dt){this.itemCount_=dt.itemCount,this.updateShape_()},decompose:function(dt){const ft=dt.newBlock("lists_create_with_container");ft.initSvg();let yt=ft.getInput("STACK").connection;for(let Nt=0;Nt<this.itemCount_;Nt++){const Mt=dt.newBlock("lists_create_with_item");Mt.initSvg(),yt.connect(Mt.previousConnection),yt=Mt.nextConnection}return ft},compose:function(dt){var ft=dt.getInputTargetBlock("STACK");for(dt=[];ft;)ft.isInsertionMarker()||dt.push(ft.valueConnection_),ft=ft.getNextBlock();for(ft=0;ft<this.itemCount_;ft++){const yt=this.getInput("ADD"+ft).connection.targetConnection;yt&&dt.indexOf(yt)===-1&&yt.disconnect()}for(this.itemCount_=dt.length,this.updateShape_(),ft=0;ft<this.itemCount_;ft++)nt.Mutator$$module$build$src$core$mutator.reconnect(dt[ft],this,"ADD"+ft)},saveConnections:function(dt){dt=dt.getInputTargetBlock("STACK");let ft=0;for(;dt;){if(dt.isInsertionMarker()){dt=dt.getNextBlock();continue}const yt=this.getInput("ADD"+ft);dt.valueConnection_=yt&&yt.connection.targetConnection,dt=dt.getNextBlock(),ft++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Ut.LISTS_CREATE_EMPTY_TITLE);for(var dt=0;dt<this.itemCount_;dt++)if(!this.getInput("ADD"+dt)){const ft=this.appendValueInput("ADD"+dt).setAlign(nt.Align$$module$build$src$core$input.RIGHT);dt===0&&ft.appendField(Ut.LISTS_CREATE_WITH_INPUT_WITH)}for(dt=this.itemCount_;this.getInput("ADD"+dt);dt++)this.removeInput("ADD"+dt)}},Zo.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Ut.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(Ut.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Zo.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Ut.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Ut.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Zo.blocks.lists_indexOf={init:function(){const dt=[[Ut.LISTS_INDEX_OF_FIRST,"FIRST"],[Ut.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Ut.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(Ut.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Qr(dt),"END"),this.setInputsInline(!0);const ft=this;this.setTooltip(function(){return Ut.LISTS_INDEX_OF_TOOLTIP.replace("%1",ft.workspace.options.oneBasedIndex?"0":"-1")})}},Zo.blocks.lists_getIndex={init:function(){var dt=[[Ut.LISTS_GET_INDEX_GET,"GET"],[Ut.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Ut.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Ut.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Ut.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Ut.LISTS_GET_INDEX_FIRST,"FIRST"],[Ut.LISTS_GET_INDEX_LAST,"LAST"],[Ut.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Ut.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),dt=new Qr(dt,function(yt){yt=yt==="REMOVE",this.getSourceBlock().updateStatement_(yt)}),this.appendValueInput("VALUE").setCheck("Array").appendField(Ut.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(dt,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),Ut.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Ut.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const ft=this;this.setTooltip(function(){const yt=ft.getFieldValue("MODE"),Nt=ft.getFieldValue("WHERE");let Mt="";switch(yt+" "+Nt){case"GET FROM_START":case"GET FROM_END":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Mt=Ut.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Nt==="FROM_START"||Nt==="FROM_END")&&(Mt+="  "+(Nt==="FROM_START"?Ut.LISTS_INDEX_FROM_START_TOOLTIP:Ut.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",ft.workspace.options.oneBasedIndex?"#1":"#0")),Mt})},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");dt.setAttribute("statement",!this.outputConnection);const ft=this.getInput("AT").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return dt.setAttribute("at",ft),dt},domToMutation:function(dt){const ft=dt.getAttribute("statement")==="true";this.updateStatement_(ft),dt=dt.getAttribute("at")!=="false",this.updateAt_(dt)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(dt){dt.isStatement?this.updateStatement_(!0):typeof dt=="string"&&this.domToMutation(nt.module$build$src$core$xml.textToDom(dt))},updateStatement_:function(dt){dt!==!this.outputConnection&&(this.unplug(!0,!0),dt?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(dt){this.removeInput("AT"),this.removeInput("ORDINAL",!0),dt?(this.appendValueInput("AT").setCheck("Number"),Ut.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Ut.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ft=new Qr(this.WHERE_OPTIONS,function(yt){const Nt=yt==="FROM_START"||yt==="FROM_END";if(Nt!==dt){const Mt=this.getSourceBlock();return Mt.updateAt_(Nt),Mt.setFieldValue(yt,"WHERE"),null}});this.getInput("AT").appendField(ft,"WHERE"),Ut.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Zo.blocks.lists_setIndex={init:function(){const dt=[[Ut.LISTS_SET_INDEX_SET,"SET"],[Ut.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Ut.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Ut.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Ut.LISTS_GET_INDEX_FIRST,"FIRST"],[Ut.LISTS_GET_INDEX_LAST,"LAST"],[Ut.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Ut.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Ut.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Qr(dt),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Ut.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Ut.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const ft=this;this.setTooltip(function(){const yt=ft.getFieldValue("MODE"),Nt=ft.getFieldValue("WHERE");let Mt="";switch(yt+" "+Nt){case"SET FROM_START":case"SET FROM_END":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Mt=Ut.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Nt==="FROM_START"||Nt==="FROM_END")&&(Mt+="  "+Ut.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",ft.workspace.options.oneBasedIndex?"#1":"#0")),Mt})},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation"),ft=this.getInput("AT").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return dt.setAttribute("at",ft),dt},domToMutation:function(dt){dt=dt.getAttribute("at")!=="false",this.updateAt_(dt)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(dt){this.removeInput("AT"),this.removeInput("ORDINAL",!0),dt?(this.appendValueInput("AT").setCheck("Number"),Ut.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Ut.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ft=new Qr(this.WHERE_OPTIONS,function(yt){const Nt=yt==="FROM_START"||yt==="FROM_END";if(Nt!==dt){const Mt=this.getSourceBlock();return Mt.updateAt_(Nt),Mt.setFieldValue(yt,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(ft,"WHERE")}},Zo.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Ut.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Ut.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Ut.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Ut.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Ut.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Ut.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(Ut.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Ut.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Ut.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Ut.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Ut.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");var ft=this.getInput("AT1").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return dt.setAttribute("at1",ft),ft=this.getInput("AT2").type===nt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,dt.setAttribute("at2",ft),dt},domToMutation:function(dt){const ft=dt.getAttribute("at1")==="true";dt=dt.getAttribute("at2")==="true",this.updateAt_(1,ft),this.updateAt_(2,dt)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(dt,ft){this.removeInput("AT"+dt),this.removeInput("ORDINAL"+dt,!0),ft?(this.appendValueInput("AT"+dt).setCheck("Number"),Ut.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+dt).appendField(Ut.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+dt);const yt=new Qr(this["WHERE_OPTIONS_"+dt],function(Nt){const Mt=Nt==="FROM_START"||Nt==="FROM_END";if(Mt!==ft){const Io=this.getSourceBlock();return Io.updateAt_(dt,Mt),Io.setFieldValue(Nt,"WHERE"+dt),null}});this.getInput("AT"+dt).appendField(yt,"WHERE"+dt),dt===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),Ut.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Zo.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Zo.blocks.lists_split={init:function(){const dt=this,ft=new Qr([[Ut.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Ut.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(yt){dt.updateType_(yt)});this.setHelpUrl(Ut.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(ft,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(Ut.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const yt=dt.getFieldValue("MODE");if(yt==="SPLIT")return Ut.LISTS_SPLIT_TOOLTIP_SPLIT;if(yt==="JOIN")return Ut.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+yt)})},updateType_:function(dt){if(this.getFieldValue("MODE")!==dt){const ft=this.getInput("INPUT").connection;ft.setShadowDom(null);const yt=ft.targetBlock();yt&&(ft.disconnect(),yt.isShadow()?yt.dispose():this.bumpNeighbours())}dt==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const dt=nt.module$build$src$core$utils$xml.createElement("mutation");return dt.setAttribute("mode",this.getFieldValue("MODE")),dt},domToMutation:function(dt){this.updateType_(dt.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},$u(Zo.blocks);var Zn={},Ts=nt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Tl=nt.module$build$src$core$common.defineBlocks;Zn.blocks=Ts([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Tl(Zn.blocks);var qo={};return qo.colour=Zn,qo.lists=Zo,qo.logic=Sr,qo.loops=wr,qo.math=lo,qo.procedures=Wo,qo.texts=It,qo.variables=mt,qo.variablesDynamic=st,qo.blocks=Object.assign({},Zn.blocks,Zo.blocks,Sr.blocks,wr.blocks,lo.blocks,Wo.blocks,mt.blocks,st.blocks),qo.__namespace__=nt,qo})}(blocks_compressed)),blocks_compressed.exports}var hasRequiredBlocks;function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(et,it){(function(tt,nt){et.exports=nt(requireBlocks_compressed())})(commonjsGlobal,function(tt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return tt})}(blocks)),blocks.exports}var javascript={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(et,it){(function(tt,nt){et.exports=nt(requireBlockly_compressed())})(commonjsGlobal,function(tt){var nt=tt.__namespace__,st={};nt.module$build$src$core$variables,nt.module$build$src$core$utils$object,nt.module$build$src$core$utils$string,nt.Generator$$module$build$src$core$generator,nt.module$build$src$core$input_types.inputTypes,nt.module$build$src$core$names.Names,nt.NameType$$module$build$src$core$names,st.javascriptGenerator=new nt.Generator$$module$build$src$core$generator("JavaScript"),st.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),st.javascriptGenerator.ORDER_ATOMIC=0,st.javascriptGenerator.ORDER_NEW=1.1,st.javascriptGenerator.ORDER_MEMBER=1.2,st.javascriptGenerator.ORDER_FUNCTION_CALL=2,st.javascriptGenerator.ORDER_INCREMENT=3,st.javascriptGenerator.ORDER_DECREMENT=3,st.javascriptGenerator.ORDER_BITWISE_NOT=4.1,st.javascriptGenerator.ORDER_UNARY_PLUS=4.2,st.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,st.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,st.javascriptGenerator.ORDER_TYPEOF=4.5,st.javascriptGenerator.ORDER_VOID=4.6,st.javascriptGenerator.ORDER_DELETE=4.7,st.javascriptGenerator.ORDER_AWAIT=4.8,st.javascriptGenerator.ORDER_EXPONENTIATION=5,st.javascriptGenerator.ORDER_MULTIPLICATION=5.1,st.javascriptGenerator.ORDER_DIVISION=5.2,st.javascriptGenerator.ORDER_MODULUS=5.3,st.javascriptGenerator.ORDER_SUBTRACTION=6.1,st.javascriptGenerator.ORDER_ADDITION=6.2,st.javascriptGenerator.ORDER_BITWISE_SHIFT=7,st.javascriptGenerator.ORDER_RELATIONAL=8,st.javascriptGenerator.ORDER_IN=8,st.javascriptGenerator.ORDER_INSTANCEOF=8,st.javascriptGenerator.ORDER_EQUALITY=9,st.javascriptGenerator.ORDER_BITWISE_AND=10,st.javascriptGenerator.ORDER_BITWISE_XOR=11,st.javascriptGenerator.ORDER_BITWISE_OR=12,st.javascriptGenerator.ORDER_LOGICAL_AND=13,st.javascriptGenerator.ORDER_LOGICAL_OR=14,st.javascriptGenerator.ORDER_CONDITIONAL=15,st.javascriptGenerator.ORDER_ASSIGNMENT=16,st.javascriptGenerator.ORDER_YIELD=17,st.javascriptGenerator.ORDER_COMMA=18,st.javascriptGenerator.ORDER_NONE=99,st.javascriptGenerator.ORDER_OVERRIDES=[[st.javascriptGenerator.ORDER_FUNCTION_CALL,st.javascriptGenerator.ORDER_MEMBER],[st.javascriptGenerator.ORDER_FUNCTION_CALL,st.javascriptGenerator.ORDER_FUNCTION_CALL],[st.javascriptGenerator.ORDER_MEMBER,st.javascriptGenerator.ORDER_MEMBER],[st.javascriptGenerator.ORDER_MEMBER,st.javascriptGenerator.ORDER_FUNCTION_CALL],[st.javascriptGenerator.ORDER_LOGICAL_NOT,st.javascriptGenerator.ORDER_LOGICAL_NOT],[st.javascriptGenerator.ORDER_MULTIPLICATION,st.javascriptGenerator.ORDER_MULTIPLICATION],[st.javascriptGenerator.ORDER_ADDITION,st.javascriptGenerator.ORDER_ADDITION],[st.javascriptGenerator.ORDER_LOGICAL_AND,st.javascriptGenerator.ORDER_LOGICAL_AND],[st.javascriptGenerator.ORDER_LOGICAL_OR,st.javascriptGenerator.ORDER_LOGICAL_OR]],st.javascriptGenerator.isInitialized=!1,st.javascriptGenerator.init=function(at){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new nt.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(at.getVariableMap()),this.nameDB_.populateVariables(at),this.nameDB_.populateProcedures(at);const _t=[];var mt=nt.module$build$src$core$variables.allDeveloperVariables(at);for(let Tt=0;Tt<mt.length;Tt++)_t.push(this.nameDB_.getName(mt[Tt],nt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(at=nt.module$build$src$core$variables.allUsedVarModels(at),mt=0;mt<at.length;mt++)_t.push(this.nameDB_.getName(at[mt].getId(),nt.NameType$$module$build$src$core$names.VARIABLE));_t.length&&(this.definitions_.variables="var "+_t.join(", ")+";"),this.isInitialized=!0},st.javascriptGenerator.finish=function(at){const _t=nt.module$build$src$core$utils$object.values(this.definitions_);return at=Object.getPrototypeOf(this).finish.call(this,at),this.isInitialized=!1,this.nameDB_.reset(),_t.join(`

`)+`


`+at},st.javascriptGenerator.scrubNakedValue=function(at){return at+`;
`},st.javascriptGenerator.quote_=function(at){return at=at.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+at+"'"},st.javascriptGenerator.multiline_quote_=function(at){return at.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},st.javascriptGenerator.scrub_=function(at,_t,mt){let Tt="";if(!at.outputConnection||!at.outputConnection.targetConnection){var Et=at.getCommentText();Et&&(Et=nt.module$build$src$core$utils$string.wrap(Et,this.COMMENT_WRAP-3),Tt+=this.prefixLines(Et+`
`,"// "));for(let Ct=0;Ct<at.inputList.length;Ct++)at.inputList[Ct].type===nt.module$build$src$core$input_types.inputTypes.VALUE&&(Et=at.inputList[Ct].connection.targetBlock())&&(Et=this.allNestedComments(Et))&&(Tt+=this.prefixLines(Et,"// "))}return at=at.nextConnection&&at.nextConnection.targetBlock(),mt=mt?"":this.blockToCode(at),Tt+_t+mt},st.javascriptGenerator.getAdjusted=function(at,_t,mt,Tt,Et){mt=mt||0,Et=Et||this.ORDER_NONE,at.workspace.options.oneBasedIndex&&mt--;const Ct=at.workspace.options.oneBasedIndex?"1":"0";let kt,Wt=Et;return 0<mt?kt=Wt=this.ORDER_ADDITION:0>mt?kt=Wt=this.ORDER_SUBTRACTION:Tt&&(kt=Wt=this.ORDER_UNARY_NEGATION),at=this.valueToCode(at,_t,Wt)||Ct,nt.module$build$src$core$utils$string.isNumber(at)?(at=Number(at)+mt,Tt&&(at=-at)):(0<mt?at=at+" + "+mt:0>mt&&(at=at+" - "+-mt),Tt&&(at=mt?"-("+at+")":"-"+at),kt=Math.floor(kt),Et=Math.floor(Et),kt&&Et>=kt&&(at="("+at+")")),at},nt.NameType$$module$build$src$core$names,st.javascriptGenerator.variables_get=function(at){return[st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE),st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.variables_set=function(at){const _t=st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE)+" = "+_t+`;
`},st.javascriptGenerator.variables_get_dynamic=st.javascriptGenerator.variables_get,st.javascriptGenerator.variables_set_dynamic=st.javascriptGenerator.variables_set,nt.NameType$$module$build$src$core$names;var ct=/^\s*'([^']|\\')*'\s*$/,ht=function(at){return ct.test(at)?[at,st.javascriptGenerator.ORDER_ATOMIC]:["String("+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},gt=function(at,_t,mt){return _t==="FIRST"?"0":_t==="FROM_END"?at+".length - 1 - "+mt:_t==="LAST"?at+".length - 1":mt};st.javascriptGenerator.text=function(at){return[st.javascriptGenerator.quote_(at.getFieldValue("TEXT")),st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.text_multiline=function(at){at=st.javascriptGenerator.multiline_quote_(at.getFieldValue("TEXT"));const _t=at.indexOf("+")!==-1?st.javascriptGenerator.ORDER_ADDITION:st.javascriptGenerator.ORDER_ATOMIC;return[at,_t]},st.javascriptGenerator.text_join=function(at){switch(at.itemCount_){case 0:return["''",st.javascriptGenerator.ORDER_ATOMIC];case 1:return at=st.javascriptGenerator.valueToCode(at,"ADD0",st.javascriptGenerator.ORDER_NONE)||"''",ht(at);case 2:var _t=st.javascriptGenerator.valueToCode(at,"ADD0",st.javascriptGenerator.ORDER_NONE)||"''";return at=st.javascriptGenerator.valueToCode(at,"ADD1",st.javascriptGenerator.ORDER_NONE)||"''",[ht(_t)[0]+" + "+ht(at)[0],st.javascriptGenerator.ORDER_ADDITION];default:_t=Array(at.itemCount_);for(let mt=0;mt<at.itemCount_;mt++)_t[mt]=st.javascriptGenerator.valueToCode(at,"ADD"+mt,st.javascriptGenerator.ORDER_NONE)||"''";return["["+_t.join(",")+"].join('')",st.javascriptGenerator.ORDER_FUNCTION_CALL]}},st.javascriptGenerator.text_append=function(at){const _t=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE);return at=st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_NONE)||"''",_t+" += "+ht(at)[0]+`;
`},st.javascriptGenerator.text_length=function(at){return[(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"''")+".length",st.javascriptGenerator.ORDER_MEMBER]},st.javascriptGenerator.text_isEmpty=function(at){return["!"+(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"''")+".length",st.javascriptGenerator.ORDER_LOGICAL_NOT]},st.javascriptGenerator.text_indexOf=function(at){var _t=at.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const mt=st.javascriptGenerator.valueToCode(at,"FIND",st.javascriptGenerator.ORDER_NONE)||"''";return _t=(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"''")+"."+_t+"("+mt+")",at.workspace.options.oneBasedIndex?[_t+" + 1",st.javascriptGenerator.ORDER_ADDITION]:[_t,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_charAt=function(at){const _t=at.getFieldValue("WHERE")||"FROM_START",mt=st.javascriptGenerator.valueToCode(at,"VALUE",_t==="RANDOM"?st.javascriptGenerator.ORDER_NONE:st.javascriptGenerator.ORDER_MEMBER)||"''";switch(_t){case"FIRST":return[mt+".charAt(0)",st.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[mt+".slice(-1)",st.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return at=st.javascriptGenerator.getAdjusted(at,"AT"),[mt+".charAt("+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return at=st.javascriptGenerator.getAdjusted(at,"AT",1,!0),[mt+".slice("+at+").charAt(0)",st.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[st.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+mt+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},st.javascriptGenerator.text_getSubstring=function(at){var _t=at.getFieldValue("WHERE1"),mt=at.getFieldValue("WHERE2"),Tt=_t!=="FROM_END"&&_t!=="LAST"&&mt!=="FROM_END"&&mt!=="LAST",Et=st.javascriptGenerator.valueToCode(at,"STRING",Tt?st.javascriptGenerator.ORDER_MEMBER:st.javascriptGenerator.ORDER_NONE)||"''";if(_t==="FIRST"&&mt==="LAST")return[Et,st.javascriptGenerator.ORDER_NONE];if(Et.match(/^'?\w+'?$/)||Tt){switch(_t){case"FROM_START":_t=st.javascriptGenerator.getAdjusted(at,"AT1");break;case"FROM_END":_t=st.javascriptGenerator.getAdjusted(at,"AT1",1,!1,st.javascriptGenerator.ORDER_SUBTRACTION),_t=Et+".length - "+_t;break;case"FIRST":_t="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(mt){case"FROM_START":mt=st.javascriptGenerator.getAdjusted(at,"AT2",1);break;case"FROM_END":mt=st.javascriptGenerator.getAdjusted(at,"AT2",0,!1,st.javascriptGenerator.ORDER_SUBTRACTION),mt=Et+".length - "+mt;break;case"LAST":mt=Et+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Et=Et+".slice("+_t+", "+mt+")"}else{Tt=st.javascriptGenerator.getAdjusted(at,"AT1"),at=st.javascriptGenerator.getAdjusted(at,"AT2");const Ct={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Et=st.javascriptGenerator.provideFunction_("subsequence"+Ct[_t]+Ct[mt],`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${_t==="FROM_END"||_t==="FROM_START"?", at1":""}${mt==="FROM_END"||mt==="FROM_START"?", at2":""}) {
  var start = ${gt("sequence",_t,"at1")};
  var end = ${gt("sequence",mt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Et+(_t==="FROM_END"||_t==="FROM_START"?", "+Tt:"")+(mt==="FROM_END"||mt==="FROM_START"?", "+at:"")+")"}return[Et,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_changeCase=function(at){const _t={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[at.getFieldValue("CASE")];return at=st.javascriptGenerator.valueToCode(at,"TEXT",_t?st.javascriptGenerator.ORDER_MEMBER:st.javascriptGenerator.ORDER_NONE)||"''",[_t?at+_t:st.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_trim=function(at){const _t={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[at.getFieldValue("MODE")];return[(st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_MEMBER)||"''")+_t,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_print=function(at){return"window.alert("+(st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_NONE)||"''")+`);
`},st.javascriptGenerator.text_prompt_ext=function(at){let _t="window.prompt("+(at.getField("TEXT")?st.javascriptGenerator.quote_(at.getFieldValue("TEXT")):st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_NONE)||"''")+")";return at.getFieldValue("TYPE")==="NUMBER"&&(_t="Number("+_t+")"),[_t,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_prompt=st.javascriptGenerator.text_prompt_ext,st.javascriptGenerator.text_count=function(at){const _t=st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_NONE)||"''";return at=st.javascriptGenerator.valueToCode(at,"SUB",st.javascriptGenerator.ORDER_NONE)||"''",[st.javascriptGenerator.provideFunction_("textCount",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+_t+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_replace=function(at){const _t=st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_NONE)||"''",mt=st.javascriptGenerator.valueToCode(at,"FROM",st.javascriptGenerator.ORDER_NONE)||"''";return at=st.javascriptGenerator.valueToCode(at,"TO",st.javascriptGenerator.ORDER_NONE)||"''",[st.javascriptGenerator.provideFunction_("textReplace",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+_t+", "+mt+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.text_reverse=function(at){return[(st.javascriptGenerator.valueToCode(at,"TEXT",st.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",st.javascriptGenerator.ORDER_FUNCTION_CALL]},nt.NameType$$module$build$src$core$names,st.javascriptGenerator.procedures_defreturn=function(at){const _t=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("NAME"),nt.NameType$$module$build$src$core$names.PROCEDURE);var mt="";st.javascriptGenerator.STATEMENT_PREFIX&&(mt+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_PREFIX,at)),st.javascriptGenerator.STATEMENT_SUFFIX&&(mt+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_SUFFIX,at)),mt&&(mt=st.javascriptGenerator.prefixLines(mt,st.javascriptGenerator.INDENT));let Tt="";st.javascriptGenerator.INFINITE_LOOP_TRAP&&(Tt=st.javascriptGenerator.prefixLines(st.javascriptGenerator.injectId(st.javascriptGenerator.INFINITE_LOOP_TRAP,at),st.javascriptGenerator.INDENT));const Et=st.javascriptGenerator.statementToCode(at,"STACK");let Ct=st.javascriptGenerator.valueToCode(at,"RETURN",st.javascriptGenerator.ORDER_NONE)||"",kt="";Et&&Ct&&(kt=mt),Ct&&(Ct=st.javascriptGenerator.INDENT+"return "+Ct+`;
`);const Wt=[],St=at.getVars();for(let It=0;It<St.length;It++)Wt[It]=st.javascriptGenerator.nameDB_.getName(St[It],nt.NameType$$module$build$src$core$names.VARIABLE);return mt="function "+_t+"("+Wt.join(", ")+`) {
`+mt+Tt+Et+kt+Ct+"}",mt=st.javascriptGenerator.scrub_(at,mt),st.javascriptGenerator.definitions_["%"+_t]=mt,null},st.javascriptGenerator.procedures_defnoreturn=st.javascriptGenerator.procedures_defreturn,st.javascriptGenerator.procedures_callreturn=function(at){const _t=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("NAME"),nt.NameType$$module$build$src$core$names.PROCEDURE),mt=[],Tt=at.getVars();for(let Et=0;Et<Tt.length;Et++)mt[Et]=st.javascriptGenerator.valueToCode(at,"ARG"+Et,st.javascriptGenerator.ORDER_NONE)||"null";return[_t+"("+mt.join(", ")+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.procedures_callnoreturn=function(at){return st.javascriptGenerator.procedures_callreturn(at)[0]+`;
`},st.javascriptGenerator.procedures_ifreturn=function(at){let _t="if ("+(st.javascriptGenerator.valueToCode(at,"CONDITION",st.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return st.javascriptGenerator.STATEMENT_SUFFIX&&(_t+=st.javascriptGenerator.prefixLines(st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_SUFFIX,at),st.javascriptGenerator.INDENT)),at.hasReturnValue_?(at=st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_NONE)||"null",_t+=st.javascriptGenerator.INDENT+"return "+at+`;
`):_t+=st.javascriptGenerator.INDENT+`return;
`,_t+`}
`},nt.NameType$$module$build$src$core$names,st.javascriptGenerator.math_number=function(at){return at=Number(at.getFieldValue("NUM")),[at,0<=at?st.javascriptGenerator.ORDER_ATOMIC:st.javascriptGenerator.ORDER_UNARY_NEGATION]},st.javascriptGenerator.math_arithmetic=function(at){var _t={ADD:[" + ",st.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",st.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",st.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",st.javascriptGenerator.ORDER_DIVISION],POWER:[null,st.javascriptGenerator.ORDER_NONE]}[at.getFieldValue("OP")];const mt=_t[0];_t=_t[1];const Tt=st.javascriptGenerator.valueToCode(at,"A",_t)||"0";return at=st.javascriptGenerator.valueToCode(at,"B",_t)||"0",mt?[Tt+mt+at,_t]:["Math.pow("+Tt+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.math_single=function(at){const _t=at.getFieldValue("OP");let mt;if(_t==="NEG")return at=st.javascriptGenerator.valueToCode(at,"NUM",st.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",at[0]==="-"&&(at=" "+at),["-"+at,st.javascriptGenerator.ORDER_UNARY_NEGATION];switch(at=_t==="SIN"||_t==="COS"||_t==="TAN"?st.javascriptGenerator.valueToCode(at,"NUM",st.javascriptGenerator.ORDER_DIVISION)||"0":st.javascriptGenerator.valueToCode(at,"NUM",st.javascriptGenerator.ORDER_NONE)||"0",_t){case"ABS":mt="Math.abs("+at+")";break;case"ROOT":mt="Math.sqrt("+at+")";break;case"LN":mt="Math.log("+at+")";break;case"EXP":mt="Math.exp("+at+")";break;case"POW10":mt="Math.pow(10,"+at+")";break;case"ROUND":mt="Math.round("+at+")";break;case"ROUNDUP":mt="Math.ceil("+at+")";break;case"ROUNDDOWN":mt="Math.floor("+at+")";break;case"SIN":mt="Math.sin("+at+" / 180 * Math.PI)";break;case"COS":mt="Math.cos("+at+" / 180 * Math.PI)";break;case"TAN":mt="Math.tan("+at+" / 180 * Math.PI)"}if(mt)return[mt,st.javascriptGenerator.ORDER_FUNCTION_CALL];switch(_t){case"LOG10":mt="Math.log("+at+") / Math.log(10)";break;case"ASIN":mt="Math.asin("+at+") / Math.PI * 180";break;case"ACOS":mt="Math.acos("+at+") / Math.PI * 180";break;case"ATAN":mt="Math.atan("+at+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+_t)}return[mt,st.javascriptGenerator.ORDER_DIVISION]},st.javascriptGenerator.math_constant=function(at){return{PI:["Math.PI",st.javascriptGenerator.ORDER_MEMBER],E:["Math.E",st.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",st.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",st.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",st.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",st.javascriptGenerator.ORDER_ATOMIC]}[at.getFieldValue("CONSTANT")]},st.javascriptGenerator.math_number_property=function(at){var _t={EVEN:[" % 2 === 0",st.javascriptGenerator.ORDER_MODULUS,st.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",st.javascriptGenerator.ORDER_MODULUS,st.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",st.javascriptGenerator.ORDER_MODULUS,st.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",st.javascriptGenerator.ORDER_RELATIONAL,st.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",st.javascriptGenerator.ORDER_RELATIONAL,st.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,st.javascriptGenerator.ORDER_MODULUS,st.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,st.javascriptGenerator.ORDER_NONE,st.javascriptGenerator.ORDER_FUNCTION_CALL]};const mt=at.getFieldValue("PROPERTY"),[Tt,Et,Ct]=_t[mt];return _t=st.javascriptGenerator.valueToCode(at,"NUMBER_TO_CHECK",Et)||"0",mt==="PRIME"?at=st.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+_t+")":mt==="DIVISIBLE_BY"?(at=st.javascriptGenerator.valueToCode(at,"DIVISOR",st.javascriptGenerator.ORDER_MODULUS)||"0",at=_t+" % "+at+" === 0"):at=_t+Tt,[at,Ct]},st.javascriptGenerator.math_change=function(at){const _t=st.javascriptGenerator.valueToCode(at,"DELTA",st.javascriptGenerator.ORDER_ADDITION)||"0";return at=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE),at+" = (typeof "+at+" === 'number' ? "+at+" : 0) + "+_t+`;
`},st.javascriptGenerator.math_round=st.javascriptGenerator.math_single,st.javascriptGenerator.math_trig=st.javascriptGenerator.math_single,st.javascriptGenerator.math_on_list=function(at){var _t=at.getFieldValue("OP");switch(_t){case"SUM":at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_MEMBER)||"[]",at+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at="Math.min.apply(null, "+at+")";break;case"MAX":at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at="Math.max.apply(null, "+at+")";break;case"AVERAGE":_t=st.javascriptGenerator.provideFunction_("mathMean",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at=_t+"("+at+")";break;case"MEDIAN":_t=st.javascriptGenerator.provideFunction_("mathMedian",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at=_t+"("+at+")";break;case"MODE":_t=st.javascriptGenerator.provideFunction_("mathModes",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at=_t+"("+at+")";break;case"STD_DEV":_t=st.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at=_t+"("+at+")";break;case"RANDOM":_t=st.javascriptGenerator.provideFunction_("mathRandomList",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),at=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_NONE)||"[]",at=_t+"("+at+")";break;default:throw Error("Unknown operator: "+_t)}return[at,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.math_modulo=function(at){const _t=st.javascriptGenerator.valueToCode(at,"DIVIDEND",st.javascriptGenerator.ORDER_MODULUS)||"0";return at=st.javascriptGenerator.valueToCode(at,"DIVISOR",st.javascriptGenerator.ORDER_MODULUS)||"0",[_t+" % "+at,st.javascriptGenerator.ORDER_MODULUS]},st.javascriptGenerator.math_constrain=function(at){const _t=st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_NONE)||"0",mt=st.javascriptGenerator.valueToCode(at,"LOW",st.javascriptGenerator.ORDER_NONE)||"0";return at=st.javascriptGenerator.valueToCode(at,"HIGH",st.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+_t+", "+mt+"), "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.math_random_int=function(at){const _t=st.javascriptGenerator.valueToCode(at,"FROM",st.javascriptGenerator.ORDER_NONE)||"0";return at=st.javascriptGenerator.valueToCode(at,"TO",st.javascriptGenerator.ORDER_NONE)||"0",[st.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+_t+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.math_random_float=function(at){return["Math.random()",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.math_atan2=function(at){const _t=st.javascriptGenerator.valueToCode(at,"X",st.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(st.javascriptGenerator.valueToCode(at,"Y",st.javascriptGenerator.ORDER_NONE)||"0")+", "+_t+") / Math.PI * 180",st.javascriptGenerator.ORDER_DIVISION]},nt.module$build$src$core$utils$string,nt.NameType$$module$build$src$core$names,st.javascriptGenerator.controls_repeat_ext=function(at){let _t;_t=at.getField("TIMES")?String(Number(at.getFieldValue("TIMES"))):st.javascriptGenerator.valueToCode(at,"TIMES",st.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let mt=st.javascriptGenerator.statementToCode(at,"DO");mt=st.javascriptGenerator.addLoopTrap(mt,at),at="";const Tt=st.javascriptGenerator.nameDB_.getDistinctName("count",nt.NameType$$module$build$src$core$names.VARIABLE);let Et=_t;return _t.match(/^\w+$/)||nt.module$build$src$core$utils$string.isNumber(_t)||(Et=st.javascriptGenerator.nameDB_.getDistinctName("repeat_end",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+Et+" = "+_t+`;
`),at+("for (var "+Tt+" = 0; "+Tt+" < "+Et+"; "+Tt+`++) {
`+mt+`}
`)},st.javascriptGenerator.controls_repeat=st.javascriptGenerator.controls_repeat_ext,st.javascriptGenerator.controls_whileUntil=function(at){const _t=at.getFieldValue("MODE")==="UNTIL";let mt=st.javascriptGenerator.valueToCode(at,"BOOL",_t?st.javascriptGenerator.ORDER_LOGICAL_NOT:st.javascriptGenerator.ORDER_NONE)||"false",Tt=st.javascriptGenerator.statementToCode(at,"DO");return Tt=st.javascriptGenerator.addLoopTrap(Tt,at),_t&&(mt="!"+mt),"while ("+mt+`) {
`+Tt+`}
`},st.javascriptGenerator.controls_for=function(at){var _t=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE),mt=st.javascriptGenerator.valueToCode(at,"FROM",st.javascriptGenerator.ORDER_ASSIGNMENT)||"0",Tt=st.javascriptGenerator.valueToCode(at,"TO",st.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const Et=st.javascriptGenerator.valueToCode(at,"BY",st.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let Ct=st.javascriptGenerator.statementToCode(at,"DO");if(Ct=st.javascriptGenerator.addLoopTrap(Ct,at),nt.module$build$src$core$utils$string.isNumber(mt)&&nt.module$build$src$core$utils$string.isNumber(Tt)&&nt.module$build$src$core$utils$string.isNumber(Et)){var kt=Number(mt)<=Number(Tt);at="for ("+_t+" = "+mt+"; "+_t+(kt?" <= ":" >= ")+Tt+"; "+_t,_t=Math.abs(Number(Et)),at=_t===1?at+(kt?"++":"--"):at+((kt?" += ":" -= ")+_t),at+=`) {
`+Ct+`}
`}else at="",kt=mt,mt.match(/^\w+$/)||nt.module$build$src$core$utils$string.isNumber(mt)||(kt=st.javascriptGenerator.nameDB_.getDistinctName(_t+"_start",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+kt+" = "+mt+`;
`),mt=Tt,Tt.match(/^\w+$/)||nt.module$build$src$core$utils$string.isNumber(Tt)||(mt=st.javascriptGenerator.nameDB_.getDistinctName(_t+"_end",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+mt+" = "+Tt+`;
`),Tt=st.javascriptGenerator.nameDB_.getDistinctName(_t+"_inc",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+Tt+" = ",at=nt.module$build$src$core$utils$string.isNumber(Et)?at+(Math.abs(Et)+`;
`):at+("Math.abs("+Et+`);
`),at+="if ("+kt+" > "+mt+`) {
`,at+=st.javascriptGenerator.INDENT+Tt+" = -"+Tt+`;
`,at=at+`}
for (`+(_t+" = "+kt+"; "+Tt+" >= 0 ? "+_t+" <= "+mt+" : "+_t+" >= "+mt+"; "+_t+" += "+Tt+`) {
`+Ct+`}
`);return at},st.javascriptGenerator.controls_forEach=function(at){const _t=st.javascriptGenerator.nameDB_.getName(at.getFieldValue("VAR"),nt.NameType$$module$build$src$core$names.VARIABLE);var mt=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let Tt=st.javascriptGenerator.statementToCode(at,"DO");Tt=st.javascriptGenerator.addLoopTrap(Tt,at),at="";let Et=mt;return mt.match(/^\w+$/)||(Et=st.javascriptGenerator.nameDB_.getDistinctName(_t+"_list",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+Et+" = "+mt+`;
`),mt=st.javascriptGenerator.nameDB_.getDistinctName(_t+"_index",nt.NameType$$module$build$src$core$names.VARIABLE),Tt=st.javascriptGenerator.INDENT+_t+" = "+Et+"["+mt+`];
`+Tt,at+("for (var "+mt+" in "+Et+`) {
`+Tt+`}
`)},st.javascriptGenerator.controls_flow_statements=function(at){let _t="";if(st.javascriptGenerator.STATEMENT_PREFIX&&(_t+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_PREFIX,at)),st.javascriptGenerator.STATEMENT_SUFFIX&&(_t+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_SUFFIX,at)),st.javascriptGenerator.STATEMENT_PREFIX){const mt=at.getSurroundLoop();mt&&!mt.suppressPrefixSuffix&&(_t+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_PREFIX,mt))}switch(at.getFieldValue("FLOW")){case"BREAK":return _t+`break;
`;case"CONTINUE":return _t+`continue;
`}throw Error("Unknown flow statement.")},st.javascriptGenerator.controls_if=function(at){var _t=0;let mt="";st.javascriptGenerator.STATEMENT_PREFIX&&(mt+=st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_PREFIX,at));do{const Tt=st.javascriptGenerator.valueToCode(at,"IF"+_t,st.javascriptGenerator.ORDER_NONE)||"false";let Et=st.javascriptGenerator.statementToCode(at,"DO"+_t);st.javascriptGenerator.STATEMENT_SUFFIX&&(Et=st.javascriptGenerator.prefixLines(st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_SUFFIX,at),st.javascriptGenerator.INDENT)+Et),mt+=(0<_t?" else ":"")+"if ("+Tt+`) {
`+Et+"}",_t++}while(at.getInput("IF"+_t));return(at.getInput("ELSE")||st.javascriptGenerator.STATEMENT_SUFFIX)&&(_t=st.javascriptGenerator.statementToCode(at,"ELSE"),st.javascriptGenerator.STATEMENT_SUFFIX&&(_t=st.javascriptGenerator.prefixLines(st.javascriptGenerator.injectId(st.javascriptGenerator.STATEMENT_SUFFIX,at),st.javascriptGenerator.INDENT)+_t),mt+=` else {
`+_t+"}"),mt+`
`},st.javascriptGenerator.controls_ifelse=st.javascriptGenerator.controls_if,st.javascriptGenerator.logic_compare=function(at){const _t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[at.getFieldValue("OP")],mt=_t==="=="||_t==="!="?st.javascriptGenerator.ORDER_EQUALITY:st.javascriptGenerator.ORDER_RELATIONAL,Tt=st.javascriptGenerator.valueToCode(at,"A",mt)||"0";return at=st.javascriptGenerator.valueToCode(at,"B",mt)||"0",[Tt+" "+_t+" "+at,mt]},st.javascriptGenerator.logic_operation=function(at){const _t=at.getFieldValue("OP")==="AND"?"&&":"||",mt=_t==="&&"?st.javascriptGenerator.ORDER_LOGICAL_AND:st.javascriptGenerator.ORDER_LOGICAL_OR;let Tt=st.javascriptGenerator.valueToCode(at,"A",mt);if(at=st.javascriptGenerator.valueToCode(at,"B",mt),Tt||at){const Et=_t==="&&"?"true":"false";Tt||(Tt=Et),at||(at=Et)}else at=Tt="false";return[Tt+" "+_t+" "+at,mt]},st.javascriptGenerator.logic_negate=function(at){const _t=st.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(st.javascriptGenerator.valueToCode(at,"BOOL",_t)||"true"),_t]},st.javascriptGenerator.logic_boolean=function(at){return[at.getFieldValue("BOOL")==="TRUE"?"true":"false",st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.logic_null=function(at){return["null",st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.logic_ternary=function(at){const _t=st.javascriptGenerator.valueToCode(at,"IF",st.javascriptGenerator.ORDER_CONDITIONAL)||"false",mt=st.javascriptGenerator.valueToCode(at,"THEN",st.javascriptGenerator.ORDER_CONDITIONAL)||"null";return at=st.javascriptGenerator.valueToCode(at,"ELSE",st.javascriptGenerator.ORDER_CONDITIONAL)||"null",[_t+" ? "+mt+" : "+at,st.javascriptGenerator.ORDER_CONDITIONAL]},nt.NameType$$module$build$src$core$names,st.javascriptGenerator.lists_create_empty=function(at){return["[]",st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.lists_create_with=function(at){const _t=Array(at.itemCount_);for(let mt=0;mt<at.itemCount_;mt++)_t[mt]=st.javascriptGenerator.valueToCode(at,"ADD"+mt,st.javascriptGenerator.ORDER_NONE)||"null";return["["+_t.join(", ")+"]",st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.lists_repeat=function(at){const _t=st.javascriptGenerator.provideFunction_("listsRepeat",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),mt=st.javascriptGenerator.valueToCode(at,"ITEM",st.javascriptGenerator.ORDER_NONE)||"null";return at=st.javascriptGenerator.valueToCode(at,"NUM",st.javascriptGenerator.ORDER_NONE)||"0",[_t+"("+mt+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.lists_length=function(at){return[(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",st.javascriptGenerator.ORDER_MEMBER]},st.javascriptGenerator.lists_isEmpty=function(at){return["!"+(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",st.javascriptGenerator.ORDER_LOGICAL_NOT]},st.javascriptGenerator.lists_indexOf=function(at){var _t=at.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const mt=st.javascriptGenerator.valueToCode(at,"FIND",st.javascriptGenerator.ORDER_NONE)||"''";return _t=(st.javascriptGenerator.valueToCode(at,"VALUE",st.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+_t+"("+mt+")",at.workspace.options.oneBasedIndex?[_t+" + 1",st.javascriptGenerator.ORDER_ADDITION]:[_t,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.lists_getIndex=function(at){const _t=at.getFieldValue("MODE")||"GET",mt=at.getFieldValue("WHERE")||"FROM_START";var Tt=st.javascriptGenerator.valueToCode(at,"VALUE",mt==="RANDOM"?st.javascriptGenerator.ORDER_NONE:st.javascriptGenerator.ORDER_MEMBER)||"[]";switch(mt){case"FIRST":if(_t==="GET")return[Tt+"[0]",st.javascriptGenerator.ORDER_MEMBER];if(_t==="GET_REMOVE")return[Tt+".shift()",st.javascriptGenerator.ORDER_MEMBER];if(_t==="REMOVE")return Tt+`.shift();
`;break;case"LAST":if(_t==="GET")return[Tt+".slice(-1)[0]",st.javascriptGenerator.ORDER_MEMBER];if(_t==="GET_REMOVE")return[Tt+".pop()",st.javascriptGenerator.ORDER_MEMBER];if(_t==="REMOVE")return Tt+`.pop();
`;break;case"FROM_START":if(at=st.javascriptGenerator.getAdjusted(at,"AT"),_t==="GET")return[Tt+"["+at+"]",st.javascriptGenerator.ORDER_MEMBER];if(_t==="GET_REMOVE")return[Tt+".splice("+at+", 1)[0]",st.javascriptGenerator.ORDER_FUNCTION_CALL];if(_t==="REMOVE")return Tt+".splice("+at+`, 1);
`;break;case"FROM_END":if(at=st.javascriptGenerator.getAdjusted(at,"AT",1,!0),_t==="GET")return[Tt+".slice("+at+")[0]",st.javascriptGenerator.ORDER_FUNCTION_CALL];if(_t==="GET_REMOVE")return[Tt+".splice("+at+", 1)[0]",st.javascriptGenerator.ORDER_FUNCTION_CALL];if(_t==="REMOVE")return Tt+".splice("+at+", 1);";break;case"RANDOM":if(Tt=st.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Tt+", "+(_t!=="GET")+")",_t==="GET"||_t==="GET_REMOVE")return[Tt,st.javascriptGenerator.ORDER_FUNCTION_CALL];if(_t==="REMOVE")return Tt+`;
`}throw Error("Unhandled combination (lists_getIndex).")},st.javascriptGenerator.lists_setIndex=function(at){function _t(){if(mt.match(/^\w+$/))return"";const kt=st.javascriptGenerator.nameDB_.getDistinctName("tmpList",nt.NameType$$module$build$src$core$names.VARIABLE),Wt="var "+kt+" = "+mt+`;
`;return mt=kt,Wt}let mt=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_MEMBER)||"[]";const Tt=at.getFieldValue("MODE")||"GET";var Et=at.getFieldValue("WHERE")||"FROM_START";const Ct=st.javascriptGenerator.valueToCode(at,"TO",st.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(Et){case"FIRST":if(Tt==="SET")return mt+"[0] = "+Ct+`;
`;if(Tt==="INSERT")return mt+".unshift("+Ct+`);
`;break;case"LAST":if(Tt==="SET")return _t()+(mt+"["+mt+".length - 1] = "+Ct+`;
`);if(Tt==="INSERT")return mt+".push("+Ct+`);
`;break;case"FROM_START":if(at=st.javascriptGenerator.getAdjusted(at,"AT"),Tt==="SET")return mt+"["+at+"] = "+Ct+`;
`;if(Tt==="INSERT")return mt+".splice("+at+", 0, "+Ct+`);
`;break;case"FROM_END":if(at=st.javascriptGenerator.getAdjusted(at,"AT",1,!1,st.javascriptGenerator.ORDER_SUBTRACTION),Et=_t(),Tt==="SET")return Et+(mt+"["+mt+".length - "+at+"] = "+Ct+`;
`);if(Tt==="INSERT")return Et+(mt+".splice("+mt+".length - "+at+", 0, "+Ct+`);
`);break;case"RANDOM":if(at=_t(),Et=st.javascriptGenerator.nameDB_.getDistinctName("tmpX",nt.NameType$$module$build$src$core$names.VARIABLE),at+="var "+Et+" = Math.floor(Math.random() * "+mt+`.length);
`,Tt==="SET")return at+(mt+"["+Et+"] = "+Ct+`;
`);if(Tt==="INSERT")return at+(mt+".splice("+Et+", 0, "+Ct+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var $t=function(at,_t,mt){return _t==="FIRST"?"0":_t==="FROM_END"?at+".length - 1 - "+mt:_t==="LAST"?at+".length - 1":mt};return st.javascriptGenerator.lists_getSublist=function(at){var _t=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_MEMBER)||"[]",mt=at.getFieldValue("WHERE1"),Tt=at.getFieldValue("WHERE2");if(mt==="FIRST"&&Tt==="LAST")_t+=".slice(0)";else if(_t.match(/^\w+$/)||mt!=="FROM_END"&&Tt==="FROM_START"){switch(mt){case"FROM_START":mt=st.javascriptGenerator.getAdjusted(at,"AT1");break;case"FROM_END":mt=st.javascriptGenerator.getAdjusted(at,"AT1",1,!1,st.javascriptGenerator.ORDER_SUBTRACTION),mt=_t+".length - "+mt;break;case"FIRST":mt="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Tt){case"FROM_START":Tt=st.javascriptGenerator.getAdjusted(at,"AT2",1);break;case"FROM_END":Tt=st.javascriptGenerator.getAdjusted(at,"AT2",0,!1,st.javascriptGenerator.ORDER_SUBTRACTION),Tt=_t+".length - "+Tt;break;case"LAST":Tt=_t+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}_t=_t+".slice("+mt+", "+Tt+")"}else{const Et=st.javascriptGenerator.getAdjusted(at,"AT1");at=st.javascriptGenerator.getAdjusted(at,"AT2");const Ct={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};_t=st.javascriptGenerator.provideFunction_("subsequence"+Ct[mt]+Ct[Tt],`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${mt==="FROM_END"||mt==="FROM_START"?", at1":""}${Tt==="FROM_END"||Tt==="FROM_START"?", at2":""}) {
  var start = ${$t("sequence",mt,"at1")};
  var end = ${$t("sequence",Tt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+_t+(mt==="FROM_END"||mt==="FROM_START"?", "+Et:"")+(Tt==="FROM_END"||Tt==="FROM_START"?", "+at:"")+")"}return[_t,st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.lists_sort=function(at){const _t=st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",mt=at.getFieldValue("DIRECTION")==="1"?1:-1;at=at.getFieldValue("TYPE");const Tt=st.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[_t+".slice().sort("+Tt+'("'+at+'", '+mt+"))",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.lists_split=function(at){let _t=st.javascriptGenerator.valueToCode(at,"INPUT",st.javascriptGenerator.ORDER_MEMBER);const mt=st.javascriptGenerator.valueToCode(at,"DELIM",st.javascriptGenerator.ORDER_NONE)||"''";if(at=at.getFieldValue("MODE"),at==="SPLIT")_t||(_t="''"),at="split";else if(at==="JOIN")_t||(_t="[]"),at="join";else throw Error("Unknown mode: "+at);return[_t+"."+at+"("+mt+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.lists_reverse=function(at){return[(st.javascriptGenerator.valueToCode(at,"LIST",st.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.colour_picker=function(at){return[st.javascriptGenerator.quote_(at.getFieldValue("COLOUR")),st.javascriptGenerator.ORDER_ATOMIC]},st.javascriptGenerator.colour_random=function(at){return[st.javascriptGenerator.provideFunction_("colourRandom",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.colour_rgb=function(at){const _t=st.javascriptGenerator.valueToCode(at,"RED",st.javascriptGenerator.ORDER_NONE)||0,mt=st.javascriptGenerator.valueToCode(at,"GREEN",st.javascriptGenerator.ORDER_NONE)||0;return at=st.javascriptGenerator.valueToCode(at,"BLUE",st.javascriptGenerator.ORDER_NONE)||0,[st.javascriptGenerator.provideFunction_("colourRgb",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+_t+", "+mt+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.javascriptGenerator.colour_blend=function(at){const _t=st.javascriptGenerator.valueToCode(at,"COLOUR1",st.javascriptGenerator.ORDER_NONE)||"'#000000'",mt=st.javascriptGenerator.valueToCode(at,"COLOUR2",st.javascriptGenerator.ORDER_NONE)||"'#000000'";return at=st.javascriptGenerator.valueToCode(at,"RATIO",st.javascriptGenerator.ORDER_NONE)||.5,[st.javascriptGenerator.provideFunction_("colourBlend",`
function ${st.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+_t+", "+mt+", "+at+")",st.javascriptGenerator.ORDER_FUNCTION_CALL]},st.__namespace__=nt,st})}(javascript_compressed)),javascript_compressed.exports}var hasRequiredJavascript;function requireJavascript(){return hasRequiredJavascript||(hasRequiredJavascript=1,function(et,it){(function(tt,nt){et.exports=nt(requireCoreBrowser(),requireJavascript_compressed())})(commonjsGlobal,function(tt,nt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return nt})}(javascript)),javascript.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(et,it){(function(tt,nt){et.exports=nt(requireCoreBrowser(),requireEn(),requireBlocks(),requireJavascript())})(commonjsGlobal,function(tt,nt,st,ct){return tt.setLocale(nt),tt})}(browser)),browser.exports}(function(et,it){(function(tt,nt){et.exports=nt(requireBrowser())})(commonjsGlobal,function(tt){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return tt})})(blockly$1);var ja$1={exports:{}};(function(et,it){(function(tt,nt){et.exports=nt()})(commonjsGlobal,function(){var tt=tt||{Msg:Object.create(null)};return tt.Msg.ADD_COMMENT="\u30B3\u30E1\u30F3\u30C8\u3092\u8FFD\u52A0",tt.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="\u5909\u6570 '%1' \u306F\u95A2\u6570 '%2' \u306E\u5B9A\u7FA9\u306E\u4E00\u90E8\u3067\u3042\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093",tt.Msg.CHANGE_VALUE_TITLE="\u5024\u3092\u5909\u3048\u308B\uFF1A",tt.Msg.CLEAN_UP="\u30D6\u30ED\u30C3\u30AF\u3092\u6574\u7406\u3059\u308B",tt.Msg.COLLAPSED_WARNINGS_WARNING="\u3064\u3076\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u306B\u306F\u8B66\u544A\u304C\u5165\u3063\u3066\u3044\u307E\u3059\u3002",tt.Msg.COLLAPSE_ALL="\u30D6\u30ED\u30C3\u30AF\u3092\u6298\u308A\u305F\u305F\u3080",tt.Msg.COLLAPSE_BLOCK="\u30D6\u30ED\u30C3\u30AF\u3092\u6298\u308A\u305F\u305F\u3080",tt.Msg.COLOUR_BLEND_COLOUR1="\u8272 1",tt.Msg.COLOUR_BLEND_COLOUR2="\u8272 2",tt.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",tt.Msg.COLOUR_BLEND_RATIO="\u6BD4\u7387",tt.Msg.COLOUR_BLEND_TITLE="\u30D6\u30EC\u30F3\u30C9",tt.Msg.COLOUR_BLEND_TOOLTIP="2\u8272\u3092\u4E0E\u3048\u3089\u308C\u305F\u6BD4\u7387\uFF080.0\uFF5E1.0\uFF09\u3067\u6DF7\u305C\u307E\u3059\u3002",tt.Msg.COLOUR_PICKER_HELPURL="https://ja.wikipedia.org/wiki/\u8272",tt.Msg.COLOUR_PICKER_TOOLTIP="\u30D1\u30EC\u30C3\u30C8\u304B\u3089\u8272\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044\u3002",tt.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",tt.Msg.COLOUR_RANDOM_TITLE="\u30E9\u30F3\u30C0\u30E0\u306A\u8272",tt.Msg.COLOUR_RANDOM_TOOLTIP="\u30E9\u30F3\u30C0\u30E0\u306B\u8272\u3092\u9078\u3076\u3002",tt.Msg.COLOUR_RGB_BLUE="\u9752",tt.Msg.COLOUR_RGB_GREEN="\u7DD1",tt.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",tt.Msg.COLOUR_RGB_RED="\u8D64",tt.Msg.COLOUR_RGB_TITLE="\u8272:",tt.Msg.COLOUR_RGB_TOOLTIP="\u8D64\u3001\u7DD1\u3001\u304A\u3088\u3073\u9752\u306E\u6307\u5B9A\u3055\u308C\u305F\u91CF\u3067\u8272\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u5024\u306F 0 \uFF5E 100 \u306E\u9593\u3067\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",tt.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",tt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="\u30EB\u30FC\u30D7\u304B\u3089\u629C\u3051\u51FA\u3059",tt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="\u30EB\u30FC\u30D7\u306E\u6B21\u306E\u53CD\u5FA9\u51E6\u7406\u3092\u7D9A\u884C\u3057\u307E\u3059",tt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="\u5165\u3063\u3066\u3044\u308B\u30EB\u30FC\u30D7\u304B\u3089\u629C\u3051\u51FA\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="\u3053\u306E\u30EB\u30FC\u30D7\u306E\u6B8B\u308A\u306E\u90E8\u5206\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u3066\u3001\u30EB\u30FC\u30D7\u306E\u7E70\u308A\u8FD4\u3057\u3092\u7D9A\u3051\u307E\u3059\u3002",tt.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="\u6CE8\u610F: \u3053\u306E\u30D6\u30ED\u30C3\u30AF\u306F\u3001\u30EB\u30FC\u30D7\u5185\u3067\u306E\u307F\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002",tt.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",tt.Msg.CONTROLS_FOREACH_TITLE="\u30EA\u30B9\u30C8%2\u306E\u5404\u9805\u76EE%1\u306B\u3064\u3044\u3066",tt.Msg.CONTROLS_FOREACH_TOOLTIP="\u30EA\u30B9\u30C8\u306E\u5404\u9805\u76EE\u306B\u3064\u3044\u3066\u3001\u305D\u306E\u9805\u76EE\u3092\u5909\u6570'%1'\u3068\u3057\u3066\u3001\u3044\u304F\u3064\u304B\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",tt.Msg.CONTROLS_FOR_TITLE="%1 \u3092 %2 \u304B\u3089 %3 \u307E\u3067 %4 \u305A\u3064\u30AB\u30A6\u30F3\u30C8\u3059\u308B",tt.Msg.CONTROLS_FOR_TOOLTIP="\u5909\u6570 '%1' \u304C\u958B\u59CB\u756A\u53F7\u304B\u3089\u7D42\u4E86\u756A\u53F7\u307E\u3067\u6307\u5B9A\u3057\u305F\u9593\u9694\u3067\u306E\u5024\u3092\u3068\u3063\u3066\u3001\u6307\u5B9A\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3059\u308B\u3002",tt.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="\u300C\u3082\u3057\u3082\u300D\u306E\u30D6\u30ED\u30C3\u30AF\u306B\u6761\u4EF6\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_IF_ELSE_TOOLTIP="If\u30D6\u30ED\u30C3\u30AF\u306B\u3001\u3059\u3079\u3066\u3092\u30AD\u30E3\u30C3\u30C1\u3059\u308B\u6761\u4EF6\u3092\u8FFD\u52A0\u3002",tt.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",tt.Msg.CONTROLS_IF_IF_TOOLTIP="\u8FFD\u52A0\u3001\u524A\u9664\u3001\u307E\u305F\u306F\u30BB\u30AF\u30B7\u30E7\u30F3\u3092\u9806\u5E8F\u5909\u66F4\u3057\u3066\u3001\u30D6\u30ED\u30C3\u30AF\u3092\u3053\u308C\u3092\u518D\u69CB\u6210\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_IF_MSG_ELSE="\u305D\u3046\u3067\u306A\u3051\u308C\u3070",tt.Msg.CONTROLS_IF_MSG_ELSEIF="\u305D\u3046\u3067\u306A\u304F\u3082\u3057",tt.Msg.CONTROLS_IF_MSG_IF="\u3082\u3057",tt.Msg.CONTROLS_IF_TOOLTIP_1="\u5024\u304C true \u306E\u5834\u5408\u3001\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_IF_TOOLTIP_2="\u5024\u304C true \u306E\u5834\u5408\u306F\u3001\u6700\u521D\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408\u306F\u30012\u756A\u76EE\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_IF_TOOLTIP_3="\u6700\u521D\u306E\u5024\u304C true \u306E\u5834\u5408\u306F\u3001\u6700\u521D\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408\u3067\u30012\u756A\u76EE\u306E\u5024\u304C true \u306E\u5834\u5408\u306F\u30012\u756A\u76EE\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_IF_TOOLTIP_4="\u6700\u521D\u306E\u5024\u304C true \u306E\u5834\u5408\u306F\u3001\u6700\u521D\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408\u3067\u30012\u756A\u76EE\u306E\u5024\u304C true \u306E\u5834\u5408\u306F\u30012\u756A\u76EE\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u5024\u304C true \u3067\u306A\u3044\u5834\u5408\u306F\u3001\u6700\u5F8C\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_REPEAT_HELPURL="https://ja.wikipedia.org/wiki/for\u6587",tt.Msg.CONTROLS_REPEAT_INPUT_DO="\u5B9F\u884C",tt.Msg.CONTROLS_REPEAT_TITLE="%1 \u56DE\u7E70\u308A\u8FD4\u3059",tt.Msg.CONTROLS_REPEAT_TOOLTIP="\u3044\u304F\u3064\u304B\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u6570\u56DE\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",tt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="\u7E70\u308A\u8FD4\u3059\uFF1A\u7D42\u308F\u308B\u6761\u4EF6",tt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="\u7E70\u308A\u8FD4\u3059\uFF1A\u7D9A\u3051\u308B\u6761\u4EF6",tt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="\u5024\u304Cfalse\u306E\u9593\u3001\u3044\u304F\u3064\u304B\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u5B9F\u884C\u3059\u308B\u3002",tt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="\u5024\u304Ctrue\u306E\u9593\u3001\u3044\u304F\u3064\u304B\u306E\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u5B9F\u884C\u3059\u308B\u3002",tt.Msg.DELETE_ALL_BLOCKS="%1\u500B\u3042\u308B\u3059\u3079\u3066\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",tt.Msg.DELETE_BLOCK="\u30D6\u30ED\u30C3\u30AF\u3092\u524A\u9664",tt.Msg.DELETE_VARIABLE="\u5909\u6570 '%1' \u3092\u524A\u9664",tt.Msg.DELETE_VARIABLE_CONFIRMATION="%1\u304B\u6240\u3067\u4F7F\u308F\u308C\u3066\u3044\u308B\u5909\u6570 '%2' \u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",tt.Msg.DELETE_X_BLOCKS="%1\u500B\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u524A\u9664",tt.Msg.DIALOG_CANCEL="\u30AD\u30E3\u30F3\u30BB\u30EB",tt.Msg.DIALOG_OK="OK",tt.Msg.DISABLE_BLOCK="\u30D6\u30ED\u30C3\u30AF\u3092\u7121\u52B9\u306B\u3059\u308B",tt.Msg.DUPLICATE_BLOCK="\u8907\u88FD",tt.Msg.DUPLICATE_COMMENT="\u30B3\u30E1\u30F3\u30C8\u3092\u8907\u88FD",tt.Msg.ENABLE_BLOCK="\u30D6\u30ED\u30C3\u30AF\u3092\u6709\u52B9\u306B\u3059\u308B",tt.Msg.EXPAND_ALL="\u30D6\u30ED\u30C3\u30AF\u3092\u5C55\u958B\u3059\u308B",tt.Msg.EXPAND_BLOCK="\u30D6\u30ED\u30C3\u30AF\u3092\u5C55\u958B\u3059\u308B",tt.Msg.EXTERNAL_INPUTS="\u5916\u90E8\u5165\u529B",tt.Msg.HELP="\u30D8\u30EB\u30D7",tt.Msg.INLINE_INPUTS="\u30A4\u30F3\u30E9\u30A4\u30F3\u5165\u529B",tt.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",tt.Msg.LISTS_CREATE_EMPTY_TITLE="\u7A7A\u306E\u30EA\u30B9\u30C8\u3092\u4F5C\u6210",tt.Msg.LISTS_CREATE_EMPTY_TOOLTIP="\u9577\u3055\uFF10\u3067\u30C7\u30FC\u30BF\u30FB\u30EC\u30B3\u30FC\u30C9\u3092\u542B\u307E\u306A\u3044\u7A7A\u306E\u30EA\u30B9\u30C8\u3092\u8FD4\u3059",tt.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="\u30EA\u30B9\u30C8",tt.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="\u8FFD\u52A0\u3001\u524A\u9664\u3001\u307E\u305F\u306F\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u9806\u5E8F\u5909\u66F4\u3092\u3057\u3066\u3001\u3053\u306E\u30EA\u30B9\u30C8\u30FB\u30D6\u30ED\u30C3\u30AF\u3092\u518D\u69CB\u6210\u3059\u308B\u3002",tt.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",tt.Msg.LISTS_CREATE_WITH_INPUT_WITH="\u4EE5\u4E0B\u3092\u4F7F\u3063\u3066\u30EA\u30B9\u30C8\u3092\u4F5C\u6210\uFF1A",tt.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="\u30EA\u30B9\u30C8\u306B\u9805\u76EE\u3092\u8FFD\u52A0\u3002",tt.Msg.LISTS_CREATE_WITH_TOOLTIP="\u9805\u76EE\u6570\u304C\u4E0D\u5B9A\u306E\u30EA\u30B9\u30C8\u3092\u4F5C\u6210\u3002",tt.Msg.LISTS_GET_INDEX_FIRST="\u6700\u521D",tt.Msg.LISTS_GET_INDEX_FROM_END="\u4F4D\u7F6E\uFF1A\u5F8C\u308D\u304B\u3089",tt.Msg.LISTS_GET_INDEX_FROM_START="#",tt.Msg.LISTS_GET_INDEX_GET="\u53D6\u5F97",tt.Msg.LISTS_GET_INDEX_GET_REMOVE="\u53D6\u5F97\u3057\u3066\u524A\u9664",tt.Msg.LISTS_GET_INDEX_LAST="\u6700\u5F8C",tt.Msg.LISTS_GET_INDEX_RANDOM="\u30E9\u30F3\u30C0\u30E0",tt.Msg.LISTS_GET_INDEX_REMOVE="\u524A\u9664",tt.Msg.LISTS_GET_INDEX_TAIL="",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="\u30EA\u30B9\u30C8\u306E\u6700\u521D\u306E\u9805\u76EE\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="\u30EA\u30B9\u30C8\u5185\u306E\u6307\u5B9A\u4F4D\u7F6E\u306B\u3042\u308B\u9805\u76EE\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="\u30EA\u30B9\u30C8\u306E\u6700\u5F8C\u306E\u9805\u76EE\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="\u30E9\u30F3\u30C0\u30E0 \u30A2\u30A4\u30C6\u30E0 \u30EA\u30B9\u30C8\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="\u30EA\u30B9\u30C8\u5185\u306E\u6700\u521D\u306E\u9805\u76EE\u3092\u524A\u9664\u3057\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="\u30EA\u30B9\u30C8\u5185\u306E\u6307\u5B9A\u4F4D\u7F6E\u306B\u3042\u308B\u9805\u76EE\u3092\u524A\u9664\u3057\u3001\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="\u30EA\u30B9\u30C8\u5185\u306E\u6700\u5F8C\u306E\u9805\u76EE\u3092\u524A\u9664\u3057\u305F\u3042\u3068\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="\u30EA\u30B9\u30C8\u306E\u30E9\u30F3\u30C0\u30E0\u306A\u30A2\u30A4\u30C6\u30E0\u3092\u524A\u9664\u3057\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="\u30EA\u30B9\u30C8\u5185\u306E\u6700\u521D\u306E\u9805\u76EE\u3092\u524A\u9664\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="\u30EA\u30B9\u30C8\u5185\u306E\u6307\u5B9A\u3055\u308C\u305F\u9805\u76EE\u3092\u524A\u9664\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="\u30EA\u30B9\u30C8\u5185\u306E\u6700\u5F8C\u306E\u9805\u76EE\u3092\u524A\u9664\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="\u30EA\u30B9\u30C8\u5185\u306B\u3042\u308B\u30A2\u30A4\u30C6\u30E0\u3092\u30E9\u30F3\u30C0\u30E0\u306B\u524A\u9664\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_SUBLIST_END_FROM_END="\u7D42\u4E86\u4F4D\u7F6E\uFF1A\u5F8C\u308D\u304B\u3089",tt.Msg.LISTS_GET_SUBLIST_END_FROM_START="\u7D42\u4E86\u4F4D\u7F6E\uFF1A",tt.Msg.LISTS_GET_SUBLIST_END_LAST="\u6700\u5F8C\u307E\u3067",tt.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",tt.Msg.LISTS_GET_SUBLIST_START_FIRST="\u6700\u521D\u304B\u3089\u30B5\u30D6\u30EA\u30B9\u30C8\u3092\u53D6\u5F97\u3059\u308B\u3002",tt.Msg.LISTS_GET_SUBLIST_START_FROM_END="\u7AEF\u304B\u3089 #\u306E\u30B5\u30D6\u30EA\u30B9\u30C8\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_SUBLIST_START_FROM_START="# \u304B\u3089\u30B5\u30D6\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306E\u30EA\u30B9\u30C8\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002",tt.Msg.LISTS_GET_SUBLIST_TAIL="",tt.Msg.LISTS_GET_SUBLIST_TOOLTIP="\u30EA\u30B9\u30C8\u306E\u6307\u5B9A\u3055\u308C\u305F\u90E8\u5206\u306E\u30B3\u30D4\u30FC\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",tt.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 \u306F\u3001\u6700\u5F8C\u306E\u9805\u76EE\u3067\u3059\u3002",tt.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 \u306F\u3001\u6700\u521D\u306E\u9805\u76EE\u3067\u3059\u3002",tt.Msg.LISTS_INDEX_OF_FIRST="\u3067\u4EE5\u4E0B\u306E\u30A2\u30A4\u30C6\u30E0\u306E\u6700\u521D\u306E\u51FA\u73FE\u7B87\u6240\u3092\u691C\u7D22\uFF1A",tt.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",tt.Msg.LISTS_INDEX_OF_LAST="\u3067\u4EE5\u4E0B\u306E\u30C6\u30AD\u30B9\u30C8\u306E\u6700\u5F8C\u306E\u51FA\u73FE\u7B87\u6240\u3092\u691C\u7D22\uFF1A",tt.Msg.LISTS_INDEX_OF_TOOLTIP="\u30EA\u30B9\u30C8\u9805\u76EE\u306E\u6700\u521D/\u6700\u5F8C\u306B\u51FA\u73FE\u3059\u308B\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9\u4F4D\u7F6E\u3092\u8FD4\u3057\u307E\u3059\u3002\u9805\u76EE\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u306F %1 \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_INLIST="\u30EA\u30B9\u30C8",tt.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",tt.Msg.LISTS_ISEMPTY_TITLE="%1\u304C\u7A7A",tt.Msg.LISTS_ISEMPTY_TOOLTIP="\u30EA\u30B9\u30C8\u304C\u7A7A\u306E\u5834\u5408\u306F\u3001true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",tt.Msg.LISTS_LENGTH_TITLE="%1\u306E\u9577\u3055",tt.Msg.LISTS_LENGTH_TOOLTIP="\u30EA\u30B9\u30C8\u306E\u9577\u3055\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",tt.Msg.LISTS_REPEAT_TITLE="\u9805\u76EE%1\u3092%2\u56DE\u7E70\u308A\u8FD4\u3057\u305F\u30EA\u30B9\u30C8\u3092\u4F5C\u6210",tt.Msg.LISTS_REPEAT_TOOLTIP="\u4E0E\u3048\u3089\u308C\u305F\u5024\u3092\u6307\u5B9A\u3055\u308C\u305F\u56DE\u6570\u7E70\u308A\u8FD4\u3057\u3066\u30EA\u30B9\u30C8\u3092\u4F5C\u6210\u3002",tt.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",tt.Msg.LISTS_REVERSE_MESSAGE0="%1\u3092\u9006\u9806\u306B",tt.Msg.LISTS_REVERSE_TOOLTIP="\u30EA\u30B9\u30C8\u306E\u30B3\u30D4\u30FC\u3092\u9006\u9806\u306B\u3059\u308B\u3002",tt.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",tt.Msg.LISTS_SET_INDEX_INPUT_TO="\u5024\uFF1A",tt.Msg.LISTS_SET_INDEX_INSERT="\u633F\u5165\u4F4D\u7F6E\uFF1A",tt.Msg.LISTS_SET_INDEX_SET="\u30BB\u30C3\u30C8",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="\u30EA\u30B9\u30C8\u306E\u5148\u982D\u306B\u9805\u76EE\u3092\u633F\u5165\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="\u30EA\u30B9\u30C8\u5185\u306E\u6307\u5B9A\u4F4D\u7F6E\u306B\u9805\u76EE\u3092\u633F\u5165\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="\u30EA\u30B9\u30C8\u306E\u672B\u5C3E\u306B\u9805\u76EE\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="\u30EA\u30B9\u30C8\u306B\u9805\u76EE\u3092\u30E9\u30F3\u30C0\u30E0\u306B\u633F\u5165\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="\u30EA\u30B9\u30C8\u5185\u306B\u6700\u521D\u306E\u9805\u76EE\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="\u30EA\u30B9\u30C8\u5185\u306E\u6307\u5B9A\u3055\u308C\u305F\u4F4D\u7F6E\u306B\u9805\u76EE\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="\u30EA\u30B9\u30C8\u5185\u306E\u6700\u5F8C\u306E\u9805\u76EE\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="\u30EA\u30B9\u30C8\u5185\u306B\u30E9\u30F3\u30C0\u30E0\u306A\u30A2\u30A4\u30C6\u30E0\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002",tt.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",tt.Msg.LISTS_SORT_ORDER_ASCENDING="\u6607\u9806",tt.Msg.LISTS_SORT_ORDER_DESCENDING="\u964D\u9806",tt.Msg.LISTS_SORT_TITLE="%1 ( %2 ) \u306B %3 \u3092\u4E26\u3073\u66FF\u3048\u308B",tt.Msg.LISTS_SORT_TOOLTIP="\u30EA\u30B9\u30C8\u306E\u30B3\u30D4\u30FC\u3092\u4E26\u3079\u66FF\u3048",tt.Msg.LISTS_SORT_TYPE_IGNORECASE="\u30A2\u30EB\u30D5\u30A1\u30D9\u30C3\u30C8\u9806\uFF08\u5927\u6587\u5B57\u30FB\u5C0F\u6587\u5B57\u306E\u533A\u5225\u7121\u3057\uFF09",tt.Msg.LISTS_SORT_TYPE_NUMERIC="\u6570\u5024\u9806",tt.Msg.LISTS_SORT_TYPE_TEXT="\u30A2\u30EB\u30D5\u30A1\u30D9\u30C3\u30C8\u9806",tt.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",tt.Msg.LISTS_SPLIT_LIST_FROM_TEXT="\u30C6\u30AD\u30B9\u30C8\u304B\u3089\u30EA\u30B9\u30C8\u3092\u4F5C\u308B",tt.Msg.LISTS_SPLIT_TEXT_FROM_LIST="\u30EA\u30B9\u30C8\u304B\u3089\u30C6\u30AD\u30B9\u30C8\u3092\u4F5C\u308B",tt.Msg.LISTS_SPLIT_TOOLTIP_JOIN="\u30C6\u30AD\u30B9\u30C8\u306E\u30EA\u30B9\u30C8\u3092\u533A\u5207\u308A\u8A18\u53F7\u3067\u533A\u5207\u3089\u308C\u305F\u4E00\u3064\u306E\u30C6\u30AD\u30B9\u30C8\u306B\u3059\u308B",tt.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="\u30C6\u30AD\u30B9\u30C8\u3092\u533A\u5207\u308A\u8A18\u53F7\u3067\u5206\u5272\u3057\u305F\u30EA\u30B9\u30C8\u306B\u3059\u308B",tt.Msg.LISTS_SPLIT_WITH_DELIMITER="\u533A\u5207\u308A\u8A18\u53F7",tt.Msg.LOGIC_BOOLEAN_FALSE="false",tt.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",tt.Msg.LOGIC_BOOLEAN_TOOLTIP="true \u307E\u305F\u306F false \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_BOOLEAN_TRUE="true",tt.Msg.LOGIC_COMPARE_HELPURL="https://ja.wikipedia.org/wiki/\u4E0D\u7B49\u5F0F",tt.Msg.LOGIC_COMPARE_TOOLTIP_EQ="\u4E21\u65B9\u306E\u5165\u529B\u304C\u4E92\u3044\u306B\u7B49\u3057\u3044\u5834\u5408\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_COMPARE_TOOLTIP_GT="\u6700\u521D\u306E\u5165\u529B\u304C 2 \u756A\u76EE\u306E\u5165\u529B\u3088\u308A\u3082\u5927\u304D\u3044\u5834\u5408\u306F true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_COMPARE_TOOLTIP_GTE="\u6700\u521D\u306E\u5165\u529B\u304C 2 \u756A\u76EE\u306E\u5165\u529B\u4EE5\u4E0A\u306E\u5834\u5408\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_COMPARE_TOOLTIP_LT="\u6700\u521D\u306E\u5165\u529B\u304C 2 \u756A\u76EE\u306E\u5165\u529B\u3088\u308A\u3082\u5C0F\u3055\u3044\u5834\u5408\u306F true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_COMPARE_TOOLTIP_LTE="\u6700\u521D\u306E\u5165\u529B\u304C 2 \u756A\u76EE\u306E\u5165\u529B\u4EE5\u4E0B\u306E\u5834\u5408\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="\u4E21\u65B9\u306E\u5165\u529B\u304C\u4E92\u3044\u306B\u7B49\u3057\u304F\u306A\u3044\u5834\u5408\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",tt.Msg.LOGIC_NEGATE_TITLE="%1\u3067\u306F\u306A\u3044",tt.Msg.LOGIC_NEGATE_TOOLTIP="\u5165\u529B\u304C false \u306E\u5834\u5408\u306F\u3001true \u3092\u8FD4\u3057\u307E\u3059\u3002\u5165\u529B\u304C true \u306E\u5834\u5408\u306F false \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_NULL="null",tt.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",tt.Msg.LOGIC_NULL_TOOLTIP="null \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_OPERATION_AND="\u304B\u3064",tt.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",tt.Msg.LOGIC_OPERATION_OR="\u307E\u305F\u306F",tt.Msg.LOGIC_OPERATION_TOOLTIP_AND="\u4E21\u65B9\u306E\u5165\u529B\u304C true \u306E\u3068\u304D\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_OPERATION_TOOLTIP_OR="\u5C11\u306A\u304F\u3068\u3082 1 \u3064\u306E\u5165\u529B\u304C true \u306E\u3068\u304D\u306B true \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.LOGIC_TERNARY_CONDITION="\u30C6\u30B9\u30C8",tt.Msg.LOGIC_TERNARY_HELPURL="https://ja.wikipedia.org/wiki/%3F:",tt.Msg.LOGIC_TERNARY_IF_FALSE="false \u306E\u5834\u5408",tt.Msg.LOGIC_TERNARY_IF_TRUE="true \u306E\u5834\u5408",tt.Msg.LOGIC_TERNARY_TOOLTIP="'\u30C6\u30B9\u30C8' \u306E\u6761\u4EF6\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u307E\u3059\u3002\u6761\u4EF6\u304C true \u306E\u5834\u5408\u3001'true' \u306E\u5024\u3092\u8FD4\u3057\u307E\u3059\u3002\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408 'false' \u306E\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ADDITION_SYMBOL="+",tt.Msg.MATH_ARITHMETIC_HELPURL="https://ja.wikipedia.org/wiki/\u7B97\u8853",tt.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="2 \u3064\u306E\u6570\u306E\u5408\u8A08\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="2 \u3064\u306E\u6570\u306E\u5546\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="2 \u3064\u306E\u6570\u306E\u5DEE\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="2 \u3064\u306E\u6570\u306E\u7A4D\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="\u6700\u521D\u306E\u6570\u30922 \u756A\u76EE\u306E\u5024\u3067\u7D2F\u4E57\u3057\u305F\u7D50\u679C\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ATAN2_HELPURL="https://ja.wikipedia.org/wiki/Atan2",tt.Msg.MATH_ATAN2_TITLE="X:%1 Y:%2\u306Eatan2",tt.Msg.MATH_ATAN2_TOOLTIP="\u30A2\u30FC\u30AF\u30BF\u30F3\u30B8\u30A7\u30F3\u30C8\u3092\u7528\u3044\u3066\u3001\u70B9 (X, Y) \u306E\u89D2\u5EA6\u3092 -180\u5EA6\u304B\u3089 180\u5EA6\u3067\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_CHANGE_HELPURL="https://ja.wikipedia.org/wiki/\u52A0\u6CD5",tt.Msg.MATH_CHANGE_TITLE="%1 \u3092 %2 \u5897\u3084\u3059",tt.Msg.MATH_CHANGE_TOOLTIP="\u5909\u6570'%1'\u306B\u6570\u3092\u305F\u3059\u3002",tt.Msg.MATH_CONSTANT_HELPURL="https://ja.wikipedia.org/wiki/\u6570\u5B66\u5B9A\u6570",tt.Msg.MATH_CONSTANT_TOOLTIP="\u3044\u305A\u308C\u304B\u306E\u5171\u901A\u306E\u5B9A\u6570\u306E\u3092\u8FD4\u3059: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (\u7121\u9650).",tt.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",tt.Msg.MATH_CONSTRAIN_TITLE="%1 \u3092 %2 \u4EE5\u4E0A %3 \u4EE5\u4E0B\u306E\u7BC4\u56F2\u306B\u5236\u9650",tt.Msg.MATH_CONSTRAIN_TOOLTIP="\u6307\u5B9A\u3057\u305F\u4E0A\u9650\u3068\u4E0B\u9650\u306E\u9593\u306B\u5024\u3092\u5236\u9650\u3059\u308B\uFF08\u4E0A\u9650\u3068\u4E0B\u9650\u306E\u5024\u3092\u542B\u3080\uFF09\u3002",tt.Msg.MATH_DIVISION_SYMBOL="\xF7",tt.Msg.MATH_IS_DIVISIBLE_BY="\u306F\u4EE5\u4E0B\u3067\u5272\u308A\u304D\u308C\u308B\uFF1A",tt.Msg.MATH_IS_EVEN="\u306F\u5076\u6570",tt.Msg.MATH_IS_NEGATIVE="\u306F\u8CA0",tt.Msg.MATH_IS_ODD="\u306F\u5947\u6570",tt.Msg.MATH_IS_POSITIVE="\u306F\u6B63",tt.Msg.MATH_IS_PRIME="\u306F\u7D20\u6570",tt.Msg.MATH_IS_TOOLTIP="\u6570\u5B57\u304C\u3001\u5076\u6570\u3001\u5947\u6570\u3001\u7D20\u6570\u3001\u6574\u6570\u3001\u6B63\u6570\u3001\u8CA0\u6570\u3001\u307E\u305F\u306F\u7279\u5B9A\u306E\u6570\u3067\u5272\u308A\u5207\u308C\u308B\u304B\u3069\u3046\u304B\u3092\u5224\u5B9A\u3057\u3001true \u304B false \u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_IS_WHOLE="\u306F\u6574\u6570",tt.Msg.MATH_MODULO_HELPURL="https://ja.wikipedia.org/wiki/\u5270\u4F59\u6F14\u7B97",tt.Msg.MATH_MODULO_TITLE="%1\xF7%2\u306E\u4F59\u308A",tt.Msg.MATH_MODULO_TOOLTIP="2\u3064\u306E\u6570\u5024\u306E\u5272\u308A\u7B97\u306E\u4F59\u308A\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",tt.Msg.MATH_NUMBER_HELPURL="https://ja.wikipedia.org/wiki/\u6570",tt.Msg.MATH_NUMBER_TOOLTIP="\u6570\u3067\u3059\u3002",tt.Msg.MATH_ONLIST_HELPURL="",tt.Msg.MATH_ONLIST_OPERATOR_AVERAGE="\u30EA\u30B9\u30C8\u306E\u5E73\u5747",tt.Msg.MATH_ONLIST_OPERATOR_MAX="\u30EA\u30B9\u30C8\u306E\u6700\u5927\u5024",tt.Msg.MATH_ONLIST_OPERATOR_MEDIAN="\u30EA\u30B9\u30C8\u306E\u4E2D\u592E\u5024",tt.Msg.MATH_ONLIST_OPERATOR_MIN="\u30EA\u30B9\u30C8\u306E\u6700\u5C0F\u5024",tt.Msg.MATH_ONLIST_OPERATOR_MODE="\u30EA\u30B9\u30C8\u306E\u6700\u983B\u5024",tt.Msg.MATH_ONLIST_OPERATOR_RANDOM="\u30EA\u30B9\u30C8\u304B\u3089\u30E9\u30F3\u30C0\u30E0\u306B\u9078\u3070\u308C\u305F\u9805\u76EE",tt.Msg.MATH_ONLIST_OPERATOR_STD_DEV="\u30EA\u30B9\u30C8\u306E\u6A19\u6E96\u504F\u5DEE",tt.Msg.MATH_ONLIST_OPERATOR_SUM="\u30EA\u30B9\u30C8\u306E\u5408\u8A08",tt.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="\u30EA\u30B9\u30C8\u306E\u6570\u5024\u306E\u5E73\u5747 (\u7B97\u8853\u5E73\u5747) \u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_MAX="\u30EA\u30B9\u30C8\u306E\u6700\u5927\u5024\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="\u30EA\u30B9\u30C8\u306E\u4E2D\u592E\u5024\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_MIN="\u30EA\u30B9\u30C8\u306E\u6700\u5C0F\u5024\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_MODE="\u30EA\u30B9\u30C8\u4E2D\u306E\u6700\u983B\u9805\u76EE\u306E\u30EA\u30B9\u30C8\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_RANDOM="\u30EA\u30B9\u30C8\u304B\u3089\u30E9\u30F3\u30C0\u30E0\u306B\u9078\u3070\u308C\u305F\u8981\u7D20\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="\u30EA\u30B9\u30C8\u306E\u6A19\u6E96\u504F\u5DEE\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_ONLIST_TOOLTIP_SUM="\u30EA\u30B9\u30C8\u306E\u6570\u5024\u3092\u8DB3\u3057\u3066\u8FD4\u3059\u3002",tt.Msg.MATH_POWER_SYMBOL="^",tt.Msg.MATH_RANDOM_FLOAT_HELPURL="https://ja.wikipedia.org/wiki/\u7591\u4F3C\u4E71\u6570",tt.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="1\u672A\u6E80\u306E\u6B63\u306E\u4E71\u6570",tt.Msg.MATH_RANDOM_FLOAT_TOOLTIP="0.0\u4EE5\u4E0A\u30671.0\u672A\u6E80\u306E\u7BC4\u56F2\u306E\u4E71\u6570\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_RANDOM_INT_HELPURL="https://ja.wikipedia.org/wiki/\u7591\u4F3C\u4E71\u6570",tt.Msg.MATH_RANDOM_INT_TITLE="%1\u304B\u3089%2\u307E\u3067\u306E\u30E9\u30F3\u30C0\u30E0\u306A\u6574\u6570",tt.Msg.MATH_RANDOM_INT_TOOLTIP="\u6307\u5B9A\u3055\u308C\u305F\uFF08\u4E0A\u4E0B\u9650\u3092\u542B\u3080\uFF09\u7BC4\u56F2\u306E\u30E9\u30F3\u30C0\u30E0\u306A\u6574\u6570\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.MATH_ROUND_HELPURL="https://ja.wikipedia.org/wiki/\u7AEF\u6570\u51E6\u7406",tt.Msg.MATH_ROUND_OPERATOR_ROUND="\u56DB\u6368\u4E94\u5165",tt.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="\u5207\u308A\u6368\u3066",tt.Msg.MATH_ROUND_OPERATOR_ROUNDUP="\u5207\u308A\u4E0A\u3052",tt.Msg.MATH_ROUND_TOOLTIP="\u6570\u5024\u3092\u5207\u308A\u4E0A\u3052\u308B\u304B\u5207\u308A\u6368\u3066\u308B",tt.Msg.MATH_SINGLE_HELPURL="https://ja.wikipedia.org/wiki/\u5E73\u65B9\u6839",tt.Msg.MATH_SINGLE_OP_ABSOLUTE="\u7D76\u5BFE\u5024",tt.Msg.MATH_SINGLE_OP_ROOT="\u5E73\u65B9\u6839",tt.Msg.MATH_SINGLE_TOOLTIP_ABS="\u7D76\u5BFE\u5024\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_EXP="\u30CD\u30A4\u30D4\u30A2\u6570e\u306E\u6570\u5024\u4E57\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_LN="\u6570\u5024\u306E\u81EA\u7136\u5BFE\u6570\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_LOG10="\u5E95\u304C10\u306E\u5BFE\u6570\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_NEG="\u8CA0\u306E\u6570\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_POW10="10\u306E\u6570\u5024\u4E57\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SINGLE_TOOLTIP_ROOT="\u5E73\u65B9\u6839\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_SUBTRACTION_SYMBOL="-",tt.Msg.MATH_TRIG_ACOS="acos",tt.Msg.MATH_TRIG_ASIN="asin",tt.Msg.MATH_TRIG_ATAN="atan",tt.Msg.MATH_TRIG_COS="cos",tt.Msg.MATH_TRIG_HELPURL="https://ja.wikipedia.org/wiki/\u4E09\u89D2\u95A2\u6570",tt.Msg.MATH_TRIG_SIN="sin",tt.Msg.MATH_TRIG_TAN="tan",tt.Msg.MATH_TRIG_TOOLTIP_ACOS="\u30A2\u30FC\u30AF\u30B3\u30B5\u30A4\u30F3\uFF08arccosin\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_TRIG_TOOLTIP_ASIN="\u30A2\u30FC\u30AF\u30B5\u30A4\u30F3\uFF08arcsin\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_TRIG_TOOLTIP_ATAN="\u30A2\u30FC\u30AF\u30BF\u30F3\u30B8\u30A7\u30F3\u30C8\uFF08arctan\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_TRIG_TOOLTIP_COS="\uFF08\u30E9\u30B8\u30A2\u30F3\u3067\u306F\u306A\u304F\uFF09\u5EA6\u6570\u306E\u4F59\u5F26\uFF08cosin\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_TRIG_TOOLTIP_SIN="\uFF08\u30E9\u30B8\u30A2\u30F3\u3067\u306F\u306A\u304F\uFF09\u5EA6\u6570\u306E\u6B63\u5F26\uFF08sin\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.MATH_TRIG_TOOLTIP_TAN="\uFF08\u30E9\u30B8\u30A2\u30F3\u3067\u306F\u306A\u304F\uFF09\u5EA6\u6570\u306E\u6B63\u63A5\uFF08tan\uFF09\u3092\u8FD4\u3059\u3002",tt.Msg.NEW_COLOUR_VARIABLE="\u8272\u306E\u5909\u6570\u3092\u4F5C\u308B...",tt.Msg.NEW_NUMBER_VARIABLE="\u6570\u306E\u5909\u6570\u3092\u4F5C\u308B...",tt.Msg.NEW_STRING_VARIABLE="\u6587\u5B57\u5217\u306E\u5909\u6570\u3092\u4F5C\u308B...",tt.Msg.NEW_VARIABLE="\u5909\u6570\u306E\u4F5C\u6210\u2026",tt.Msg.NEW_VARIABLE_TITLE="\u65B0\u3057\u3044\u5909\u6570\u306E\u540D\u524D:",tt.Msg.NEW_VARIABLE_TYPE_TITLE="\u65B0\u3057\u3044\u5909\u6570\u306E\u578B:",tt.Msg.ORDINAL_NUMBER_SUFFIX="",tt.Msg.PROCEDURES_ALLOW_STATEMENTS="\u30B9\u30C6\u30FC\u30C8\u30E1\u30F3\u30C8\u3092\u8A31\u53EF",tt.Msg.PROCEDURES_BEFORE_PARAMS="\u5F15\u6570\uFF1A",tt.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://ja.wikipedia.org/wiki/\u30B5\u30D6\u30EB\u30FC\u30C1\u30F3",tt.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u95A2\u6570 '%1' \u3092\u5B9F\u884C\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_CALLRETURN_HELPURL="https://ja.wikipedia.org/wiki/\u30B5\u30D6\u30EB\u30FC\u30C1\u30F3",tt.Msg.PROCEDURES_CALLRETURN_TOOLTIP="\u30E6\u30FC\u30B6\u30FC\u5B9A\u7FA9\u95A2\u6570 '%1' \u3092\u5B9F\u884C\u3057\u3001\u305D\u306E\u51FA\u529B\u3092\u4F7F\u7528\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_CALL_BEFORE_PARAMS="\u5F15\u6570\uFF1A",tt.Msg.PROCEDURES_CREATE_DO="'%1' \u3092\u4F5C\u6210",tt.Msg.PROCEDURES_DEFNORETURN_COMMENT="\u3053\u306E\u95A2\u6570\u306E\u8AAC\u660E\u2026",tt.Msg.PROCEDURES_DEFNORETURN_DO="",tt.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="\u4F55\u304B\u3059\u308B",tt.Msg.PROCEDURES_DEFNORETURN_TITLE="\u95A2\u6570",tt.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="\u51FA\u529B\u306A\u3057\u306E\u95A2\u6570\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",tt.Msg.PROCEDURES_DEFRETURN_RETURN="\u8FD4\u3059",tt.Msg.PROCEDURES_DEFRETURN_TOOLTIP="\u4E00\u3064\u306E\u51FA\u529B\u3092\u6301\u3064\u95A2\u6570\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="\u8B66\u544A: \u3053\u306E\u95A2\u6570\u306B\u306F\u91CD\u8907\u3059\u308B\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC\u304C\u3042\u308A\u307E\u3059\u3002",tt.Msg.PROCEDURES_HIGHLIGHT_DEF="\u95A2\u6570\u306E\u5185\u5BB9\u3092\u5F37\u8ABF\u8868\u793A\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",tt.Msg.PROCEDURES_IFRETURN_TOOLTIP="1\u756A\u76EE\u306E\u5024\u304C true \u306E\u5834\u5408\u30012\u756A\u76EE\u306E\u5024\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.PROCEDURES_IFRETURN_WARNING="\u8B66\u544A: \u3053\u306E\u30D6\u30ED\u30C3\u30AF\u306F\u3001\u95A2\u6570\u5B9A\u7FA9\u5185\u3067\u306E\u307F\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002",tt.Msg.PROCEDURES_MUTATORARG_TITLE="\u5165\u529B\u540D:",tt.Msg.PROCEDURES_MUTATORARG_TOOLTIP="\u95A2\u6570\u3078\u306E\u5165\u529B\u306E\u8FFD\u52A0\u3002",tt.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="\u5165\u529B",tt.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="\u3053\u306E\u95A2\u6570\u3078\u306E\u5165\u529B\u306E\u8FFD\u52A0\u3001\u524A\u9664\u3001\u9806\u756A\u5909\u66F4\u3002",tt.Msg.REDO="\u3084\u308A\u76F4\u3059",tt.Msg.REMOVE_COMMENT="\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664",tt.Msg.RENAME_VARIABLE="\u5909\u6570\u306E\u540D\u524D\u3092\u5909\u3048\u308B\u2026",tt.Msg.RENAME_VARIABLE_TITLE="\u9078\u629E\u3057\u305F%1\u500B\u3059\u3079\u3066\u306E\u5909\u6570\u306E\u540D\u524D\u3092\u5909\u3048\u308B\uFF1A",tt.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",tt.Msg.TEXT_APPEND_TITLE="\u9805\u76EE %1 \u3078\u30C6\u30AD\u30B9\u30C8\u3092\u8FFD\u52A0 %2",tt.Msg.TEXT_APPEND_TOOLTIP="\u5909\u6570 '%1' \u306B\u30C6\u30AD\u30B9\u30C8\u3092\u8FFD\u52A0\u3002",tt.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",tt.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="\u5C0F\u6587\u5B57\u306B",tt.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="\u30BF\u30A4\u30C8\u30EB \u30B1\u30FC\u30B9\u306B",tt.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="\u5927\u6587\u5B57\u306B",tt.Msg.TEXT_CHANGECASE_TOOLTIP="\u5225\u306E\u30B1\u30FC\u30B9\u306B\u3001\u30C6\u30AD\u30B9\u30C8\u306E\u30B3\u30D4\u30FC\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.TEXT_CHARAT_FIRST="\u6700\u521D\u306E\u6587\u5B57\u3092\u5F97\u308B",tt.Msg.TEXT_CHARAT_FROM_END="\u306E\u3001\u5F8C\u308D\u304B\u3089\u4EE5\u4E0B\u306E\u6570\u5B57\u756A\u76EE\u306E\u6587\u5B57\uFF1A",tt.Msg.TEXT_CHARAT_FROM_START="\u306E\u3001\u4EE5\u4E0B\u306E\u6570\u5B57\u756A\u76EE\u306E\u6587\u5B57\uFF1A",tt.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",tt.Msg.TEXT_CHARAT_LAST="\u6700\u5F8C\u306E\u6587\u5B57\u3092\u5F97\u308B",tt.Msg.TEXT_CHARAT_RANDOM="\u30E9\u30F3\u30C0\u30E0\u306A\u6587\u5B57\u3092\u5F97\u308B",tt.Msg.TEXT_CHARAT_TAIL="",tt.Msg.TEXT_CHARAT_TITLE="\u30C6\u30AD\u30B9\u30C8 %1 %2",tt.Msg.TEXT_CHARAT_TOOLTIP="\u6307\u5B9A\u3055\u308C\u305F\u4F4D\u7F6E\u306B\u6587\u5B57\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",tt.Msg.TEXT_COUNT_MESSAGE0="%2\u306B\u542B\u307E\u308C\u308B%1\u306E\u6570\u3092\u6570\u3048\u308B",tt.Msg.TEXT_COUNT_TOOLTIP="\u3068\u3042\u308B\u6587\u304C\u5225\u306E\u6587\u306E\u306A\u304B\u306B\u4F7F\u308F\u308C\u305F\u56DE\u6570\u3092\u6570\u3048\u308B\u3002",tt.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="\u30C6\u30AD\u30B9\u30C8\u3078\u9805\u76EE\u3092\u8FFD\u52A0\u3002",tt.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="\u7D50\u5408",tt.Msg.TEXT_CREATE_JOIN_TOOLTIP="\u30BB\u30AF\u30B7\u30E7\u30F3\u3092\u8FFD\u52A0\u3001\u524A\u9664\u3001\u307E\u305F\u306F\u9806\u5E8F\u5909\u66F4\u3057\u3066\u3001\u30D6\u30ED\u30C3\u30AF\u3092\u518D\u69CB\u6210\u3002",tt.Msg.TEXT_GET_SUBSTRING_END_FROM_END="\u7D42\u4E86\u4F4D\u7F6E\uFF1A\u5F8C\u308D\u304B\u3089",tt.Msg.TEXT_GET_SUBSTRING_END_FROM_START="\u7D42\u4E86\u4F4D\u7F6E\uFF1A",tt.Msg.TEXT_GET_SUBSTRING_END_LAST="\u6700\u5F8C\u306E\u6587\u5B57",tt.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",tt.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="\u30C6\u30AD\u30B9\u30C8",tt.Msg.TEXT_GET_SUBSTRING_START_FIRST="\u306E\u90E8\u5206\u6587\u5B57\u5217\u3092\u53D6\u5F97\uFF1B\u6700\u521D\u304B\u3089",tt.Msg.TEXT_GET_SUBSTRING_START_FROM_END="\u306E\u90E8\u5206\u6587\u5B57\u5217\u3092\u53D6\u5F97\uFF1B\u958B\u59CB\u4F4D\u7F6E\uFF1A\u5F8C\u308D\u304B\u3089",tt.Msg.TEXT_GET_SUBSTRING_START_FROM_START="\u306E\u90E8\u5206\u6587\u5B57\u5217\u3092\u53D6\u5F97\uFF1B\u958B\u59CB\u4F4D\u7F6E\uFF1A",tt.Msg.TEXT_GET_SUBSTRING_TAIL="",tt.Msg.TEXT_GET_SUBSTRING_TOOLTIP="\u30C6\u30AD\u30B9\u30C8\u306E\u6307\u5B9A\u90E8\u5206\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",tt.Msg.TEXT_INDEXOF_OPERATOR_FIRST="\u3067\u4EE5\u4E0B\u306E\u30C6\u30AD\u30B9\u30C8\u306E\u6700\u521D\u306E\u51FA\u73FE\u7B87\u6240\u3092\u691C\u7D22\uFF1A",tt.Msg.TEXT_INDEXOF_OPERATOR_LAST="\u3067\u4EE5\u4E0B\u306E\u30C6\u30AD\u30B9\u30C8\u306E\u6700\u5F8C\u306E\u51FA\u73FE\u7B87\u6240\u3092\u691C\u7D22\uFF1A",tt.Msg.TEXT_INDEXOF_TITLE="\u30C6\u30AD\u30B9\u30C8 %1 %2 %3",tt.Msg.TEXT_INDEXOF_TOOLTIP="\u4E8C\u756A\u76EE\u306E\u30C6\u30AD\u30B9\u30C8\u306E\u4E2D\u3067\u4E00\u756A\u76EE\u306E\u30C6\u30AD\u30B9\u30C8\u304C\u6700\u521D\uFF0F\u6700\u5F8C\u306B\u51FA\u73FE\u3057\u305F\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9\u3092\u8FD4\u3059\u3002\u30C6\u30AD\u30B9\u30C8\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u306F%1\u3092\u8FD4\u3059\u3002",tt.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",tt.Msg.TEXT_ISEMPTY_TITLE="%1\u304C\u7A7A",tt.Msg.TEXT_ISEMPTY_TOOLTIP="\u4E0E\u3048\u3089\u308C\u305F\u30C6\u30AD\u30B9\u30C8\u304C\u7A7A\u306E\u5834\u5408\u306F true \u3092\u8FD4\u3059\u3002",tt.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",tt.Msg.TEXT_JOIN_TITLE_CREATEWITH="\u30C6\u30AD\u30B9\u30C8\u3092\u7D50\u5408\u3057\u3066\u4F5C\u6210\uFF1A",tt.Msg.TEXT_JOIN_TOOLTIP="\u4EFB\u610F\u306E\u6570\u306E\u9805\u76EE\u4E00\u90E8\u3092\u4E00\u7DD2\u306B\u63A5\u5408\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u4F5C\u6210\u3002",tt.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",tt.Msg.TEXT_LENGTH_TITLE="%1\u306E\u9577\u3055",tt.Msg.TEXT_LENGTH_TOOLTIP="\u4E0E\u3048\u3089\u308C\u305F\u30C6\u30AD\u30B9\u30C8\u306E(\u30B9\u30DA\u30FC\u30B9\u3092\u542B\u3080)\u6587\u5B57\u6570\u3092\u8FD4\u3059\u3002",tt.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",tt.Msg.TEXT_PRINT_TITLE="%1 \u3092\u8868\u793A",tt.Msg.TEXT_PRINT_TOOLTIP="\u6307\u5B9A\u3057\u305F\u30C6\u30AD\u30B9\u30C8\u3001\u756A\u53F7\u307E\u305F\u306F\u4ED6\u306E\u5024\u3092\u5370\u5237\u3057\u307E\u3059\u3002",tt.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",tt.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="\u30E6\u30FC\u30B6\u30FC\u306B\u6570\u5024\u306E\u30A4\u30F3\u30D7\u30C3\u30C8\u3092\u6C42\u3081\u308B\u3002",tt.Msg.TEXT_PROMPT_TOOLTIP_TEXT="\u30E6\u30FC\u30B6\u30FC\u306B\u30C6\u30AD\u30B9\u30C8\u5165\u529B\u3092\u6C42\u3081\u308B\u3002",tt.Msg.TEXT_PROMPT_TYPE_NUMBER="\u30E1\u30C3\u30BB\u30FC\u30B8\u3067\u756A\u53F7\u306E\u5165\u529B\u3092\u6C42\u3081\u308B",tt.Msg.TEXT_PROMPT_TYPE_TEXT="\u30E1\u30C3\u30BB\u30FC\u30B8\u3067\u30C6\u30AD\u30B9\u30C8\u5165\u529B\u3092\u6C42\u3081\u308B",tt.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",tt.Msg.TEXT_REPLACE_MESSAGE0="%3\u306B\u542B\u307E\u308C\u308B%1\u3092%2\u306B\u7F6E\u63DB",tt.Msg.TEXT_REPLACE_TOOLTIP="\u6587\u306B\u542B\u307E\u308C\u308B\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u7F6E\u63DB\u3059\u308B\u3002",tt.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",tt.Msg.TEXT_REVERSE_MESSAGE0="%1\u3092\u9006\u9806\u306B",tt.Msg.TEXT_REVERSE_TOOLTIP="\u6587\u306E\u6587\u5B57\u3092\u9006\u9806\u306B\u3059\u308B\u3002",tt.Msg.TEXT_TEXT_HELPURL="https://ja.wikipedia.org/wiki/\u6587\u5B57\u5217",tt.Msg.TEXT_TEXT_TOOLTIP="\u6587\u5B57\u3001\u5358\u8A9E\u3001\u307E\u305F\u306F\u884C\u306E\u30C6\u30AD\u30B9\u30C8\u3002",tt.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",tt.Msg.TEXT_TRIM_OPERATOR_BOTH="\u4E21\u7AEF\u306E\u30B9\u30DA\u30FC\u30B9\u3092\u53D6\u308A\u9664\u304F",tt.Msg.TEXT_TRIM_OPERATOR_LEFT="\u5DE6\u7AEF\u306E\u30B9\u30DA\u30FC\u30B9\u3092\u53D6\u308A\u9664\u304F",tt.Msg.TEXT_TRIM_OPERATOR_RIGHT="\u53F3\u7AEF\u306E\u30B9\u30DA\u30FC\u30B9\u3092\u53D6\u308A\u9664\u304F",tt.Msg.TEXT_TRIM_TOOLTIP="\u30B9\u30DA\u30FC\u30B9\u3092 1 \u3064\u307E\u305F\u306F\u4E21\u65B9\u306E\u7AEF\u304B\u3089\u524A\u9664\u3057\u305F\u306E\u3061\u3001\u30C6\u30AD\u30B9\u30C8\u306E\u30B3\u30D4\u30FC\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.TODAY="\u4ECA\u65E5",tt.Msg.UNDO="\u53D6\u308A\u6D88\u3059",tt.Msg.UNNAMED_KEY="\u540D\u524D\u306A\u3057",tt.Msg.VARIABLES_DEFAULT_NAME="\u9805\u76EE",tt.Msg.VARIABLES_GET_CREATE_SET="'\u30BB\u30C3\u30C8%1\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",tt.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",tt.Msg.VARIABLES_GET_TOOLTIP="\u3053\u306E\u5909\u6570\u306E\u5024\u3092\u8FD4\u3057\u307E\u3059\u3002",tt.Msg.VARIABLES_SET="%1 \u306B %2 \u3092\u30BB\u30C3\u30C8",tt.Msg.VARIABLES_SET_CREATE_GET="'%1 \u3092\u53D6\u5F97' \u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",tt.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",tt.Msg.VARIABLES_SET_TOOLTIP="\u3053\u306E\u5165\u529B\u3092\u5909\u6570\u3068\u7B49\u3057\u304F\u306A\u308B\u3088\u3046\u306B\u8A2D\u5B9A\u3057\u307E\u3059\u3002",tt.Msg.VARIABLE_ALREADY_EXISTS="\u5909\u6570\u540D '%1' \u306F\u65E2\u306B\u5B58\u5728\u3057\u3066\u3044\u307E\u3059\u3002",tt.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="'%2' \u578B\u306E '%1' \u3068\u3044\u3046\u540D\u524D\u306E\u5909\u6570\u304C\u65E2\u306B\u5B58\u5728\u3057\u307E\u3059\u3002",tt.Msg.WORKSPACE_ARIA_LABEL="Blockly\u30EF\u30FC\u30AF\u30B9\u30DA\u30FC\u30B9",tt.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="\u3053\u3053\u3078\u5165\u529B",tt.Msg.CONTROLS_FOREACH_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_FOR_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=tt.Msg.CONTROLS_IF_MSG_ELSEIF,tt.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=tt.Msg.CONTROLS_IF_MSG_ELSE,tt.Msg.CONTROLS_IF_IF_TITLE_IF=tt.Msg.CONTROLS_IF_MSG_IF,tt.Msg.CONTROLS_IF_MSG_THEN=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=tt.Msg.CONTROLS_REPEAT_INPUT_DO,tt.Msg.LISTS_CREATE_WITH_ITEM_TITLE=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.LISTS_GET_INDEX_HELPURL=tt.Msg.LISTS_INDEX_OF_HELPURL,tt.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=tt.Msg.LISTS_INLIST,tt.Msg.MATH_CHANGE_TITLE_ITEM=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.PROCEDURES_DEFRETURN_COMMENT=tt.Msg.PROCEDURES_DEFNORETURN_COMMENT,tt.Msg.PROCEDURES_DEFRETURN_DO=tt.Msg.PROCEDURES_DEFNORETURN_DO,tt.Msg.PROCEDURES_DEFRETURN_PROCEDURE=tt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,tt.Msg.PROCEDURES_DEFRETURN_TITLE=tt.Msg.PROCEDURES_DEFNORETURN_TITLE,tt.Msg.TEXT_APPEND_VARIABLE=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=tt.Msg.VARIABLES_DEFAULT_NAME,tt.Msg.MATH_HUE="230",tt.Msg.LOOPS_HUE="120",tt.Msg.LISTS_HUE="260",tt.Msg.LOGIC_HUE="210",tt.Msg.VARIABLES_HUE="330",tt.Msg.TEXTS_HUE="160",tt.Msg.PROCEDURES_HUE="290",tt.Msg.COLOUR_HUE="20",tt.Msg.VARIABLES_DYNAMIC_HUE="310",tt.Msg})})(ja$1);const ja=ja$1.exports,Ja=_mergeNamespaces({__proto__:null,default:ja},[ja$1.exports]);var coreBrowserExports=requireCoreBrowser(),javascriptExports=requireJavascript(),enExports=requireEn();const En=_mergeNamespaces({__proto__:null,default:enExports},[enExports]),toolbox={kind:"flyoutToolbox",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"math_arithmetic"},{kind:"block",type:"math_number"},{kind:"block",type:"result_variable"}]},theme=coreBrowserExports.Theme.defineTheme("bionario",{name:"bionario",base:coreBrowserExports.Themes.Zelos,componentStyles:{workspaceBackgroundColour:"black"}}),BlocklyWorkspace=()=>{const et=react.exports.useRef(null),it=react.exports.useRef(!1),tt=useDispatch();return react.exports.useEffect(()=>{const nt=et.current;if(!nt||it.current)return;it.current=!0,coreBrowserExports.setLocale(En),coreBrowserExports.defineBlocksWithJsonArray([{type:"result_variable",message0:"set result to %1",args0:[{type:"input_value",name:"value",check:"Number"}],previousStatement:null,nextStatement:null,colour:330}]),javascriptExports.javascriptGenerator.result_variable=function($t){return`result = ${javascriptExports.javascriptGenerator.valueToCode($t,"value",javascriptExports.javascriptGenerator.ORDER_ATOMIC)};
`};const st=coreBrowserExports.inject(nt,{grid:{spacing:20,length:2,colour:"white",snap:!1},move:{scrollbars:{horizontal:!0,vertical:!0},drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},trashcan:!0,theme,toolbox}),ct=()=>{const $t=coreBrowserExports.serialization.workspaces.save(st),at=javascriptExports.javascriptGenerator.workspaceToCode(st);tt(saveWorkspace({workspace:$t,code:`let result = 0;
${at}`}))};st.addChangeListener(ct);const ht=coreBrowserExports.serialization.workspaces.save(st),gt=javascriptExports.javascriptGenerator.workspaceToCode(st);tt(saveWorkspace({workspace:ht,code:`let result = 0;
${gt}`}))},[et.current,it.current]),jsx("div",{ref:et,className:clsx("h-96")})};blockly$1.exports.setLocale(Ja);const BlocklyModal=()=>jsxs(Fragment,{children:[jsx("input",{type:"checkbox",id:"blockly-modal",className:"modal-toggle"}),jsx("div",{className:"modal",children:jsxs("div",{className:clsx("modal-box","w-8/12","max-w-5xl"),children:[jsx("h3",{className:clsx("mb-4","text-lg","font-bold"),children:"Blockly Editor"}),jsx(BlocklyWorkspace,{}),jsx("div",{className:clsx("modal-action"),children:jsx("label",{htmlFor:"blockly-modal",className:clsx("btn"),children:"close"})})]})})]}),CodePreview=()=>{const et=useSelector(selectCode);return jsx("div",{className:clsx("mb-8","p-4","min-h-16","rounded-md","border-base-content","border-[1px]","border-opacity-80","whitespace-pre-wrap"),children:jsx("p",{children:et})})},ResultLabel=()=>{const et=useSelector(selectResult);return jsx("div",{children:jsx("label",{className:clsx("text-lg","font-bold"),children:et!==void 0?et:"result = 0"})})},Container=({children:et})=>jsx("div",{className:clsx("h-screen","w-full","flex","flex-col","justify-center","items-center"),children:et}),ButtonList=()=>jsxs("div",{className:clsx("mb-8","flex","flex-row","justify-center","items-center","gap-4"),children:[jsx(PlayButton,{}),jsx(EditButton,{})]}),App=()=>jsxs(Provider,{store,children:[jsxs(Container,{children:[jsx(ButtonList,{}),jsx(CodePreview,{}),jsx(ResultLabel,{})]}),jsx(BlocklyModal,{})]}),rootElement=document.getElementById("root");if(!rootElement)throw new Error("Failed to find the root element");createRoot(rootElement).render(jsx(react.exports.StrictMode,{children:jsx(App,{})}));
